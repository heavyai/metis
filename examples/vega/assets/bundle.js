/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/assets/";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 51);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createParser = createParser;

var _parseExpression = __webpack_require__(26);

var _parseExpression2 = _interopRequireDefault(_parseExpression);

var _parseDatastate = __webpack_require__(25);

var _parseDatastate2 = _interopRequireDefault(_parseDatastate);

var _parseTransform = __webpack_require__(32);

var _parseTransform2 = _interopRequireDefault(_parseTransform);

var _parseSource = __webpack_require__(5);

var _parseSource2 = _interopRequireDefault(_parseSource);

var _writeSql = __webpack_require__(33);

var _writeSql2 = _interopRequireDefault(_writeSql);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Creates a parser than can parse expressions, transforms, and intermediary
 * SQL representations. This parser is used internally by the data graph.
 * @see {@link Parser} for further information.
 * @memberof API
 */
function createParser() {
  var transformParsers = {};
  var expressionParsers = {};

  /**
   * A collection of functions used for parsing expressions, transforms, and
   * intermediary SQL representations
   * @namespace Parser
   */
  var parser = {
    parseExpression: parseExpression,
    parseTransform: parseTransform,
    parseDataState: parseDataState,
    parseSource: parseSource,
    writeSQL: writeSQL,
    write: _writeSql.write,
    registerParser: registerParser
  };

  /**
   * Returns all child data node instances of the graph.
   * @memberof Parser
   * @inner
   */
  function registerParser(definition, typeParser) {
    if (definition.meta === "expression") {
      expressionParsers[definition.type] = typeParser;
    } else if (definition.meta === "transform") {
      transformParsers[definition.type] = typeParser;
    }
  }

  /**
   * Parses expressions and returns a valid SQL expression string
   * @memberof Parser
   * @inner
   * @see {@link Expression} for further information.
   */
  function parseExpression(expression) {
    if (expressionParsers[expression.type]) {
      return expressionParsers[expression.type](expression, parser);
    }
    return (0, _parseExpression2.default)(expression, parser);
  }

  /**
   * Parses transforms and returns an intermediary SQL representation
   * @memberof Parser
   * @inner
   * @see {@link Transform} for further information.
   */
  function parseTransform(sql, transform) {
    if (transformParsers[transform.type]) {
      return transformParsers[transform.type](sql, transform, parser);
    }
    return (0, _parseTransform2.default)(sql, transform, parser);
  }

  /**
   * Parses a data node state and returns an intermediary SQL representation
   * @memberof Parser
   * @inner
   */
  function parseDataState(data, sql) {
    return (0, _parseDatastate2.default)(data, parser, sql);
  }

  /**
   * Parses a source transform and returns a valid SQL FROM clause
   * @memberof Parser
   * @inner
   */
  function parseSource(sourceTransforms) {
    return (0, _parseSource2.default)(sourceTransforms, parser);
  }

  /**
  * Parses a data node state and returns a valid SQL string
   * @memberof Parser
   * @inner
   */
  function writeSQL(state) {
    return (0, _writeSql2.default)(state, parser);
  }

  return parser;
}

exports.default = createParser();

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.xfilterNode = exports.flightsDataGraph = exports.dataGraph = exports.connector = exports.view = undefined;

var _thriftLayer = __webpack_require__(35);

var _src = __webpack_require__(7);

var _dataLayer = __webpack_require__(21);

var _config = __webpack_require__(14);

var _config2 = _interopRequireDefault(_config);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var view = exports.view = (0, _src.createView)();
var connector = exports.connector = new _thriftLayer.Thrifty(_config2.default);
var dataGraph = exports.dataGraph = (0, _dataLayer.createDataGraph)(connector);
var flightsDataGraph = exports.flightsDataGraph = dataGraph.data("flights_donotmodify");
var xfilterNode = exports.xfilterNode = flightsDataGraph.data({
  name: "xfilter",
  transform: [{
    type: "crossfilter",
    signal: "XFILTER",
    filter: {}
  }]
});

/***/ }),
/* 2 */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
module.exports = function(src) {
	try {
		if (typeof eval !== "undefined") {
			eval.call(null, src);
		} else if (typeof execScript !== "undefined") {
			execScript(src);
		} else {
			console.error("[Script Loader] EvalError: No eval function available");
		}
	} catch (error) {
		console.error("[Script Loader] ", error.message);
	}
}


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var getExtent = exports.getExtent = function getExtent(_ref) {
  var value = _ref.values.value;
  var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

  return value[0] ? value[0].intervals[interval].extent : null;
};

var formatTime = exports.formatTime = d3.timeFormat("%Y-%m-%d %-I:%M:%S");

var toVega = exports.toVega = function toVega(vlSpec) {
  return vega.parse(vl.compile(vlSpec).spec);
};

var mergeSignals = exports.mergeSignals = function mergeSignals(view) {
  return view.getState({
    signals: function signals(signal, props) {
      view._signals = Object.assign(view._signals, _defineProperty({}, signal, props));
    }
  });
};

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

exports.default = parseFilter;

var _createParser = __webpack_require__(0);

var _createParser2 = _interopRequireDefault(_createParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

function parseFilter(sql, transform) {
  var parser = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _createParser2.default;

  switch (transform.type) {
    case "filter":
      sql.where.push("(" + (_typeof(transform.expr) === "object" ? parser.parseExpression(transform.expr) : transform.expr) + ")");
    default:
      return sql;
  }
}

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseSource;

var _createParser = __webpack_require__(0);

var _createParser2 = _interopRequireDefault(_createParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function joinRelation(type) {
  switch (type) {
    case "join.left":
      return "LEFT JOIN";
    case "join.right":
      return "RIGHT JOIN";
    case "join.inner":
      return "INNER JOIN";
    case "join":
    default:
      return "JOIN";
  }
}

function parseSource(transforms) {
  var parser = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _createParser2.default;

  return transforms.reduce(function (stmt, transform, index) {
    if (typeof transform.table === "string" && transform.type === "scan") {
      return stmt.concat(transform.table);
    } else if (transform.type === "join" || transform.type === "join.inner" || transform.type === "join.left" || transform.type === "join.right") {
      var right = stmt.pop();
      var left = stmt.pop();
      var joinType = typeof transform.type === "string" ? transform.type : "join";
      // $FlowFixMe
      var joinStmt = left + " " + joinRelation(joinType) + " " + right;
      var aliasStmt = typeof transform.as === "string" ? " as " + transform.as : "";
      return stmt.concat(joinStmt + aliasStmt);
    } else if (transform.type === "data" || transform.type === "root") {
      // $FlowFixMe
      var subquery = parser.writeSQL(transform);
      return stmt.concat("(" + subquery + ")");
    } else {
      return stmt;
    }
  }, []).join();
}

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {/**
 * Copyright 2013-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 */



/**
 * Use invariant() to assert state which your program assumes to be true.
 *
 * Provide sprintf-style format (only %s is supported) and arguments
 * to provide information about what broke and what you were
 * expecting.
 *
 * The invariant message will be stripped in production, but the invariant
 * will remain to ensure logic does not differ in production.
 */

var invariant = function invariant(condition, format, a, b, c, d, e, f) {
  if (process.env.NODE_ENV !== 'production') {
    if (format === undefined) {
      throw new Error('invariant requires an error message argument');
    }
  }

  if (!condition) {
    var error;
    if (format === undefined) {
      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');
    } else {
      var args = [a, b, c, d, e, f];
      var argIndex = 0;
      error = new Error(format.replace(/%s/g, function () {
        return args[argIndex++];
      }));
      error.name = 'Invariant Violation';
    }

    error.framesToPop = 1; // we don't care about invariant's own frame
    throw error;
  }
};

module.exports = invariant;
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(44)))

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _chart = __webpack_require__(42);

Object.defineProperty(exports, "Chart", {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_chart).default;
  }
});

var _registry = __webpack_require__(8);

Object.defineProperty(exports, "Registry", {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_registry).default;
  }
});

var _renderer = __webpack_require__(9);

Object.defineProperty(exports, "Renderer", {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_renderer).default;
  }
});

var _view = __webpack_require__(43);

Object.defineProperty(exports, "createView", {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_view).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var chartGroups = new Map();
var DEFAULT_GROUP_NAME = "DEFAULT_GROUP_NAME";

var Registry = function () {
  function Registry() {
    _classCallCheck(this, Registry);
  }

  _createClass(Registry, [{
    key: "register",
    value: function register(chart) {
      var groupName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_GROUP_NAME;

      var group = chartGroups.get(groupName);
      typeof group !== "undefined" && group instanceof Map ? group.set(chart.id, chart) : chartGroups.set(groupName, new Map().set(chart.id, chart));
    }
  }, {
    key: "deregister",
    value: function deregister(chart) {
      var groupName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_GROUP_NAME;

      var group = chartGroups.get(groupName);
      if (group) {
        group.delete(chart.id);
      }
    }
  }, {
    key: "list",
    value: function list() {
      var groupName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_GROUP_NAME;

      var group = chartGroups.get(groupName);
      return typeof group !== "undefined" && group instanceof Map ? Array.from(group.values()) : [];
    }
  }]);

  return Registry;
}();

exports.default = Registry;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var renderAsync = function renderAsync(chart) {
  return chart.data().then(chart.render);
};

var redrawAsync = function redrawAsync(chart) {
  return chart.data().then(chart.redraw);
};

var Renderer = function () {
  function Renderer() {
    var _this = this;

    _classCallCheck(this, Renderer);

    this.redrawAll = function (charts) {
      if (_this.redrawing) {
        _this.debounced = true;
        return Promise.resolve();
      } else {
        _this.redrawing = true;
        return Promise.all(charts.map(redrawAsync)).then(function () {
          _this.redrawing = false;
          if (_this.debounced) {
            _this.debounced = false;
            return Promise.all(charts.map(redrawAsync));
          }
        });
      }
    };

    this.redrawing = false;
    this.debounced = false;
  }

  _createClass(Renderer, [{
    key: "renderAll",
    value: function renderAll(charts) {
      return Promise.all(charts.map(renderAsync));
    }
  }]);

  return Renderer;
}();

exports.default = Renderer;

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _src = __webpack_require__(7);

var _services = __webpack_require__(1);

var _line = __webpack_require__(16);

var line = _interopRequireWildcard(_line);

var _bar = __webpack_require__(15);

var bar = _interopRequireWildcard(_bar);

var _utils = __webpack_require__(3);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var VegaChart = function (_Chart) {
  _inherits(VegaChart, _Chart);

  function VegaChart() {
    var _ref;

    var _temp, _this, _ret;

    _classCallCheck(this, VegaChart);

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = VegaChart.__proto__ || Object.getPrototypeOf(VegaChart)).call.apply(_ref, [this].concat(args))), _this), _this.data = function () {
      return _this.dataNode.values();
    }, _this.doRender = function (data) {
      _this.state.data = { values: data };
      _this.vegaView = new vega.View(utils.toVega(_this.state)).renderer("svg").initialize(_this.node).run();
      utils.mergeSignals(_this.vegaView);
    }, _this.doRedraw = function (data) {
      _this.vegaView.setState({ data: { source_0: data } });
    }, _temp), _possibleConstructorReturn(_this, _ret);
  }

  return VegaChart;
}(_src.Chart);

_services.connector.connect().then(function () {
  var lineChart = new VegaChart(document.getElementById("chart"), line.dispatch);
  var barChart = new VegaChart(document.getElementById("chart2"), bar.dispatch);
  _services.view.renderAll();
});

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(2)(__webpack_require__(45))

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(2)(__webpack_require__(46))

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(2)(__webpack_require__(47))

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  protocol: "https",
  host: "metis.mapd.com",
  port: "443",
  dbName: "mapd",
  user: "mapd",
  password: "HyperInteractive",
  logging: true
};

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.dispatch = undefined;

var _services = __webpack_require__(1);

var BAR_SPEC = {
  $schema: "https://vega.github.io/schema/vega-lite/v2.json",
  data: {
    transform: [{
      type: "aggregate",
      fields: ["*"],
      ops: ["count"],
      as: ["records"],
      groupby: "dest"
    }, {
      type: "sort",
      field: ["records"],
      order: ["descending"]
    }, {
      type: "filter",
      expr: {
        type: "in",
        expr: "dest",
        set: ["SFO", "JFK", "IAD", "DCA", "OAK"]
      }
    }, {
      type: "limit",
      row: 25
    }, {
      type: "resolvefilter",
      filter: { signal: "XFILTER" },
      ignore: "BAR"
    }]
  },
  selection: {
    paintbrush: {
      type: "multi",
      encodings: ["color"]
    }
  },
  height: 300,
  mark: "bar",
  encoding: {
    y: {
      field: "dest",
      type: "ordinal",
      scale: { rangeStep: 17 }
    },
    x: {
      field: "records",
      type: "quantitative",
      axis: { title: "# Records" }
    },
    color: {
      condition: {
        selection: "paintbrush",
        field: "dest",
        type: "nominal"
      },
      value: "grey"
    }
  }
};

var dispatch = exports.dispatch = _services.view.dispatch();

function handleSelect(values) {
  _services.xfilterNode.transform(function (transforms) {
    transforms[0].filter.BAR = {
      type: "filter",
      expr: {
        type: "in",
        expr: "dest",
        set: values
      }
    };
    return transforms;
  });
}

dispatch.on("setup.vega", function setup() {
  this.state = BAR_SPEC;
  this.dataNode = _services.xfilterNode.data({
    name: "line",
    transform: this.state.data.transform
  });
});

dispatch.on("postRender", function postRender() {
  var _this = this;

  this.vegaView.addEventListener("click", function () {
    _this.vegaView.getState({
      data: function data(_data, values) {
        if (_data === "paintbrush_store") {
          var selected = values.values.value;
          handleSelect(selected.length ? selected.map(function (v) {
            return v.values[0];
          }) : selected);
          dispatch.call("filter", _this);
        }
      }
    });
  });
});

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.dispatch = undefined;

var _services = __webpack_require__(1);

var _utils = __webpack_require__(3);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var LINE_SPEC = {
  $schema: "https://vega.github.io/schema/vega-lite/v2.json",
  data: {
    transform: [{
      type: "aggregate",
      fields: ["*"],
      ops: ["count"],
      as: ["val"],
      groupby: [{
        type: "project",
        expr: {
          type: "date_trunc",
          unit: "day",
          field: "dep_timestamp"
        },
        as: "key0"
      }, {
        type: "project",
        expr: {
          type: "case",
          cond: [[{
            type: "in",
            expr: "dest",
            set: ["SFO", "JFK", "IAD", "DCA", "OAK"]
          }, "dest"]],
          else: "other"
        },
        as: "key1"
      }]
    }, {
      type: "sort",
      field: ["key0"]
    }, {
      type: "filter",
      id: "test",
      expr: {
        type: "between",
        field: "dep_timestamp",
        left: "TIMESTAMP(0) '1987-10-01 00:03:00'",
        right: "TIMESTAMP(0) '2008-12-31 23:59:00'"
      }
    }, {
      type: "resolvefilter",
      filter: { signal: "XFILTER" },
      ignore: "LINE"
    }]
  },
  transform: [{
    filter: "datum.key1 != 'other'"
  }],
  vconcat: [{
    width: 480,
    mark: "line",
    selection: {
      filter: { type: "interval", encodings: ["x"] }
    },
    encoding: {
      x: {
        field: "key0",
        type: "temporal",
        scale: { domain: { selection: "brush" } },
        axis: { title: "", labelAngle: 0, format: "%-m/%-d/%Y", grid: false }
      },
      y: { field: "val", type: "quantitative", scale: { zero: false } },
      color: {
        field: "key1",
        type: "nominal"
      }
    }
  }, {
    width: 480,
    height: 100,
    mark: "line",
    selection: {
      brush: { type: "interval", encodings: ["x"] }
    },
    encoding: {
      x: {
        field: "key0",
        type: "temporal",
        axis: { labelAngle: 0, grid: false }
      },
      y: {
        field: "val",
        type: "quantitative",
        axis: { tickCount: 3, grid: false },
        scale: { zero: false }
      },
      color: {
        field: "key1",
        type: "nominal"
      }
    }
  }]
};

var dispatch = exports.dispatch = _services.view.dispatch();

function handleLineBrush() {
  var _this = this;

  this.vegaView.getState({
    data: function data(_data, values) {
      if (_data === "filter_store") {
        var extent = utils.getExtent(values);
        if (extent) {
          _services.xfilterNode.transform(function (transforms) {
            transforms[0].filter.LINE = {
              type: "filter",
              expr: {
                type: "between",
                field: "dep_timestamp",
                left: "TIMESTAMP(0) '" + utils.formatTime(extent[0]) + "'",
                right: "TIMESTAMP(0) '" + utils.formatTime(extent[1]) + "'"
              }
            };
            return transforms;
          });
          dispatch.call("filter", _this);
        }
      }
    }
  });
}

dispatch.on("setup.vega", function setup() {
  this.state = LINE_SPEC;
  this.dataNode = _services.xfilterNode.data({
    name: "line",
    transform: this.state.data.transform
  });
});

dispatch.on("postRender", function postRender() {
  this.vegaView.addSignalListener("filter_x", handleLineBrush.bind(this));
});

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createDataGraph;

var _createDataNode = __webpack_require__(18);

var _createDataNode2 = _interopRequireDefault(_createDataNode);

var _createParser = __webpack_require__(0);

var _invariant = __webpack_require__(6);

var _invariant2 = _interopRequireDefault(_invariant);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

/**
 * Creates a data graph instance. Must pass in a connector object that implements a query method.
 * @see {@link Graph} for further information.
 * @memberof API
 */
function createDataGraph(connector) {
  (0, _invariant2.default)(typeof connector.query === "function", "invalid connector");

  var context = {
    connector: connector,
    parser: (0, _createParser.createParser)()
  };

  var childNodes = [];

  /**
   * An instance of a data graph. A data graph is basically a tree, where each
   * node represents a
   * @namespace Graph
   */
  var graphAPI = {
    registerParser: registerParser,
    children: children,
    data: data
  };

  /**
   * Registers a custom expression or transform parser. The `typeDef` argument
   * must be a valid type definition and the `typeParser` argument must be a
   * function that matches the type of an ExpressionParser or TransformParser
   * @see {@link https://github.com/mapd/mapd-data-layer/tree/master/src/parser/createParser.js|createParser.js}
   * @memberof Graph
   * @inner
   */
  function registerParser(typeDef, typeParser) {
    context.parser.registerParser(typeDef, typeParser);
  }

  /**
   * Returns all child data node instances of the graph.
   * @memberof Graph
   * @inner
   */
  function children() {
    return childNodes;
  }

  /**
   * Creates a root data node instance. The source must be specific in the
   * initial state. An example of a source, is a string pointing to a tables
   * or an array of source transformations.
   * @memberof Graph
   * @inner
   */
  function data(state) {
    var dataNode = (0, _createDataNode2.default)(context, typeof state === "string" || Array.isArray(state) ? { source: state, type: "root" } : _extends({}, state, { type: "root" }));
    childNodes.push(dataNode);
    return dataNode;
  }

  return graphAPI;
}

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createDataNode;

var _invariant = __webpack_require__(6);

var _invariant2 = _interopRequireDefault(_invariant);

var _utils = __webpack_require__(34);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }return target;
};

function createDataNode(context) {
  var initialState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var state = {
    type: initialState.type || "data",
    source: initialState.source,
    transform: initialState.transform || [],
    children: initialState.children || []
  };

  /**
   * A node in the graph that represents a set of data transformations.
   * @namespace Data
   * @see {@link https://github.com/mapd/mapd-data-layer/tree/master/src/create-data-node.js|create-data-node.js}
   */
  var dataNodeAPI = {
    getState: getState,
    transform: transform,
    toSQL: toSQL,
    values: values,
    data: data
  };

  /**
   * Returns the state of the data node.
   * @memberof Data
   * @inner
   */
  function getState() {
    return state;
  }

  /**
   * Sets the transform state of the data node. Either takes in an array of
   * transforms or a function that takes and returns an array of transforms
   * @memberof Data
   * @inner
   */
  function transform(setter) {
    state.transform = typeof setter === "function" ? setter(state.transform) : setter;
    return dataNodeAPI;
  }

  /**
   * Returns the SQL string representation of the set of transforms from
   * the node instance to its source root in the graph
   * @memberof Data
   * @inner
   */
  function toSQL() {
    return context.parser.write((0, _utils.reduceToSQL)(context, dataNodeAPI));
  }

  /**
   * Uses the `connector` in the graph context to execute data node's
   * SQL query representation and returns queried data as a promise.
   * @memberof Data
   * @inner
   */
  function values() {
    return context.connector.query(context.parser.write((0, _utils.reduceToSQL)(context, dataNodeAPI)));
  }

  /**
   * Creates a data node instance and sets it as a child of the parent.
   * @memberof Data
   * @inner
   */
  function data(childState) {
    var dataNode = createDataNode(context, _extends({}, childState, {
      source: dataNodeAPI
    }));
    state.children.push(dataNode);
    return dataNode;
  }

  return dataNodeAPI;
}

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.alias = alias;
exports.avg = avg;
exports.min = min;
exports.max = max;
exports.sum = sum;
exports.count = count;
exports.approxCount = approxCount;
exports.countStar = countStar;
exports.extract = extract;
exports.dateTrunc = dateTrunc;
exports.inExpr = inExpr;
exports.not = not;
exports.caseExpr = caseExpr;
exports.between = between;


/**
 * Creates an alias expression
 * @memberof Expression
 */
function alias(as, expr) {
  return {
    expr: expr,
    as: as
  };
}

/**
 * Creates an average expression
 * @memberof Expression
 */

/**
 * Expression builders. These are helper functions to create expression objects
 * @name expr
 * @memberof API
 * @see {@link Expression}
 */

/**
 * Expression builder module.
 * @name Expression
 * @see {@link https://github.com/mapd/mapd-data-layer/tree/master/src/types/expression-type.js|Expression Types}
 */
function avg(alias, field) {
  return {
    type: "average",
    field: field,
    as: alias
  };
}

/**
 * creates a min expression
 * @memberof Expression
 */
function min(alias, field) {
  return {
    type: "min",
    field: field,
    as: alias
  };
}

/**
 * creates a max expression
 * @memberof Expression
 */
function max(alias, field) {
  return {
    type: "max",
    field: field,
    as: alias
  };
}

/**
 * creates a sum expression
 * @memberof Expression
 */
function sum(alias, field) {
  return {
    type: "sum",
    field: field,
    as: alias
  };
}

/**
 * creates a count expression
 * @memberof Expression
 */
function count(distinct, alias, field) {
  return {
    type: "count",
    distinct: distinct,
    approx: false,
    field: field,
    as: alias
  };
}

/**
 * creates an approx count expression
 * @memberof Expression
 */
function approxCount(distinct, alias, field) {
  return {
    type: "count",
    distinct: distinct,
    approx: true,
    field: field,
    as: alias
  };
}

/**
 * creates a count star expression
 * @memberof Expression
 */
function countStar(alias) {
  return {
    type: "count",
    distinct: false,
    approx: false,
    field: "*",
    as: alias
  };
}

/**
 * creates an extract function expression
 * @memberof Expression
 */
function extract(unit, field) {
  return {
    type: "extract",
    unit: unit,
    field: field
  };
}

/**
 * creates a date_trunc function expression
 * @memberof Expression
 */
function dateTrunc(unit, field) {
  return {
    type: "date_trunc",
    unit: unit,
    field: field
  };
}

/**
 * creates an in expression
 * @memberof Expression
 */
function inExpr(expr, set) {
  return {
    type: "in",
    expr: expr,
    set: set
  };
}

/**
 * Creates a not expression
 * @memberof Expression
 */
function not(expr) {
  return {
    type: "not",
    expr: expr
  };
}

/**
 * Creates a case expression
 * @memberof Expression
 */
function caseExpr(cond, end) {
  return {
    type: "case",
    cond: cond,
    else: end
  };
}

/**
 * Creates a between expression
 * @memberof Expression
 */
function between(field, range) {
  return {
    type: "between",
    field: field,
    left: range[0],
    right: range[1]
  };
}

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

exports.project = project;
exports.aggregate = aggregate;
exports.filter = filter;
exports.filterRange = filterRange;
exports.filterIn = filterIn;
exports.bin = bin;
exports.limit = limit;
exports.sort = sort;
exports.top = top;
exports.bottom = bottom;
var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

/**
 * Creates a Project transform
 * @memberof Transform
 */
function project(expr) {
  // $FlowFixMe
  return {
    type: "project",
    expr: typeof expr === "string" ? expr : expr.expr,
    as: typeof expr === "string" ? null : expr.as
  };
}
/**
 * Transform builders. These are helpers function to create transform objects.
 * @name rel
 * @memberof API
 * @see {@link #transform-1|Transform}
 */

/**
 * Transsform builder module.
 * @name Transform
 * @see {@link https://github.com/mapd/mapd-data-layer/tree/master/src/types/transform-type.js|Transform Types}
 */

function getAggs(agg) {
  if (Array.isArray(agg)) {
    return {
      fields: agg.map(function (a) {
        return a.field;
      }),
      ops: agg.map(function (a) {
        return a.type;
      }),
      // $FlowFixMe
      as: agg.map(function (a) {
        return a.as;
      })
    };
  } else {
    return {
      fields: [agg.field],
      ops: [agg.type],
      as: [agg.as || ""]
    };
  }
}

function getGroupBy(groupby) {
  if (Array.isArray(groupby)) {
    return groupby.map(function (group) {
      if ((typeof group === "undefined" ? "undefined" : _typeof(group)) === "object") {
        return {
          type: "project",
          expr: group.expr,
          as: group.as
        };
      } else {
        return group;
      }
    });
  } else if ((typeof groupby === "undefined" ? "undefined" : _typeof(groupby)) === "object") {
    return {
      type: "project",
      expr: groupby.expr,
      as: groupby.as
    };
  } else {
    return groupby;
  }
}

/**
 * Creates an Aggregate transform
 * @memberof Transform
 */
function aggregate(groupby, agg) {
  var aggs = getAggs(agg);
  var group = getGroupBy(groupby);
  return {
    type: "aggregate",
    fields: aggs.fields,
    ops: aggs.ops,
    as: aggs.as,
    groupby: group
  };
}

/**
 * Creates an Filter transform
 * @memberof Transform
 */
function filter(expr) {
  var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "";

  return {
    type: "filter",
    id: id,
    expr: expr
  };
}

/**
 * Creates an Filter transform that uses a between expression
 * @memberof Transform
 */
function filterRange(field, range) {
  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";

  return {
    type: "filter",
    id: id,
    expr: {
      type: "between",
      field: field,
      left: range[0],
      right: range[1]
    }
  };
}

/**
 * Creates an Filter transform that uses an in expression
 * @memberof Transform
 */
function filterIn(field, set) {
  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";

  return {
    type: "filter",
    id: id,
    expr: {
      type: "in",
      expr: field,
      set: set
    }
  };
}

/**
 * Creates a Bin tranform
 * @memberof Transform
 */
function bin(alias, field, extent, maxbins) {
  return {
    type: "bin",
    field: field,
    extent: extent,
    maxbins: maxbins,
    as: alias
  };
}

/**
 * Creates a Limit transform
 * @memberof Transform
 */
function limit(row, offset) {
  return {
    type: "limit",
    row: row,
    offset: offset
  };
}

/**
 * Creates a Sort transform
 * @memberof Transform
 */
function sort(field, order) {
  return {
    type: "sort",
    field: typeof field === "string" ? [field] : field,
    order: typeof order === "string" ? [order] : order
  };
}

/**
 * Creates a Sort transform ordered by descending and a Limit transform
 * @memberof Transform
 */
function top(field, limit, offset) {
  return [{
    type: "sort",
    field: [field],
    order: ["descending"]
  }, {
    type: "limit",
    row: limit,
    offset: offset
  }];
}

/**
* Creates a Sort transform ordered by ascending and a Limit transform
 * @memberof Transform
 */
function bottom(field, limit, offset) {
  return [{
    type: "sort",
    field: [field],
    order: ["ascending"]
  }, {
    type: "limit",
    row: limit,
    offset: offset
  }];
}

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.rel = exports.expr = exports.createDataGraph = exports.createParser = undefined;

var _createParser = __webpack_require__(0);

Object.defineProperty(exports, "createParser", {
  enumerable: true,
  get: function get() {
    return _createParser.createParser;
  }
});

var _createDataGraph2 = __webpack_require__(17);

var _createDataGraph3 = _interopRequireDefault(_createDataGraph2);

var _expressionBuilders = __webpack_require__(19);

var _expr = _interopRequireWildcard(_expressionBuilders);

var _transformBuilders = __webpack_require__(20);

var _rel = _interopRequireWildcard(_transformBuilders);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.createDataGraph = _createDataGraph3.default;
exports.expr = _expr;
exports.rel = _rel;

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseAggregate;

var _createParser = __webpack_require__(0);

var _createParser2 = _interopRequireDefault(_createParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var AGGREGATES = {
  average: "AVG",
  count: "COUNT",
  min: "MIN",
  max: "MAX",
  sum: "SUM"
};

function parseAggregate(sql, transform) {
  var parser = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _createParser2.default;

  if (Array.isArray(transform.groupby)) {
    transform.groupby.forEach(function (group) {
      sql = parseGroupBy(sql, group, parser);
    });
  } else {
    sql = parseGroupBy(sql, transform.groupby, parser);
  }

  transform.fields.forEach(function (field, index) {
    var as = transform.as[index];
    sql.select.push(aggregateField(transform.ops[index], field, as));
  });

  return sql;
}

function aggregateField(op, field, as) {
  var str = "";
  if (op === null) {
    str += field;
  } else if (AGGREGATES[op]) {
    str += AGGREGATES[op] + "(" + field + ")";
  }
  return str + ("" + (as ? " as " + as : ""));
}

function parseGroupBy(sql, groupby, parser) {
  if (typeof groupby === "string") {
    sql.select.push(groupby);
    sql.groupby.push(groupby);
  } else if (groupby.type === "bin") {
    sql = parser.parseTransform(sql, groupby);
    sql.groupby.push(groupby.as);
  } else if (groupby.type === "project") {
    sql.select.push(parser.parseExpression(groupby.expr) + (groupby.as ? " as " + groupby.as : ""));
    if (groupby.as) {
      sql.groupby.push(groupby.as);
    }
  }
  return sql;
}

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = parseBin;
function parseBin(sql, _ref) {
    var field = _ref.field,
        as = _ref.as,
        extent = _ref.extent,
        maxbins = _ref.maxbins;

    sql.select.push("cast((cast(" + field + " as float) - " + extent[0] + ") * " + maxbins / (extent[1] - extent[0]) + " as int) as " + as);
    sql.where.push("((" + field + " >= " + extent[0] + " AND " + field + " <= " + extent[1] + ") OR (" + field + " IS NULL))");
    sql.having.push("(" + as + " >= 0 AND " + as + " < " + maxbins + " OR " + as + " IS NULL)");
    return sql;
}

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

exports.default = parseCrossfilter;

var _createParser = __webpack_require__(0);

var _createParser2 = _interopRequireDefault(_createParser);

var _parseFilter = __webpack_require__(4);

var _parseFilter2 = _interopRequireDefault(_parseFilter);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

function parseCrossfilter(sql, transform) {
  var parser = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _createParser2.default;

  switch (transform.type) {
    case "crossfilter":
      if (_typeof(sql.unresolved) === "object") {
        if (sql.unresolved.hasOwnProperty(transform.signal)) {
          Object.keys(transform.filter).forEach(function (key) {
            var filter = transform.filter[key];
            if (sql.unresolved) {
              var ignore = sql.unresolved[transform.signal].ignore;

              if (Array.isArray(ignore) ? ignore.indexOf(key) === -1 : key !== ignore) {
                (0, _parseFilter2.default)(sql, filter, parser);
              }
            }
          });
        }
      }
    default:
      return sql;
  }
}

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseDataState;
function parseDataState(state, parser) {
  var initialSQL = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {
    select: [],
    from: "",
    where: [],
    groupby: [],
    having: [],
    orderby: [],
    limit: "",
    offset: "",
    unresolved: {}
  };

  return state.transform.reduce(function (sql, t) {
    return parser.parseTransform(sql, t);
  }, {
    select: initialSQL.select,
    from: state.type === "root" ? typeof state.source === "string" ? state.source : parser.parseSource(state.source) : initialSQL.from,
    where: initialSQL.where,
    groupby: initialSQL.groupby,
    having: initialSQL.having,
    orderby: initialSQL.orderby,
    limit: initialSQL.limit,
    offset: initialSQL.offset,
    unresolved: initialSQL.unresolved
  });
}

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

exports.default = parseExpression;

var _createParser = __webpack_require__(0);

var _createParser2 = _interopRequireDefault(_createParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

function parseExpression(expression) {
  var parser = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _createParser2.default;

  if (typeof expression === "string" || !(typeof expression === "undefined" ? "undefined" : _typeof(expression)) === "object") {
    return expression;
  }

  switch (expression.type) {
    case "=":
    case "<>":
    case "<":
    case ">":
    case "<=":
    case ">=":
      return expression.left + " " + expression.type + " " + (typeof expression.right === "string" ? "'" + expression.right + "'" : expression.right);
    case "between":
    case "not between":
      return expression.field + " " + expression.type.toUpperCase() + " " + expression.left + " AND " + expression.right;
    case "is null":
    case "is not null":
      return expression.field + " " + expression.type.toUpperCase();
    case "ilike":
    case "like":
    case "not like":
      return expression.left + " " + expression.type.toUpperCase() + " " + ("'%" + expression.right + "%'");
    case "coalesce":
      return "COALESCE(" + expression.values.map(function (field) {
        return "'" + field + "'";
      }).join(", ") + ")";
    case "in":
    case "not in":
      if (Array.isArray(expression.set)) {
        return expression.expr + " " + expression.type.toUpperCase() + " (" + expression.set.map(function (field) {
          return typeof field === "number" ? field : "'" + field + "'";
        }).join(", ") + ")";
      } else if (_typeof(expression.set) === "object" && (expression.set.type === "data" || expression.set.type === "root")) {
        return expression.expr + " " + expression.type.toUpperCase() + " (" + parser.writeSQL(expression.set) + ")";
      } else {
        return expression;
      }
    case "not":
      return "NOT(" + parseExpression(expression.expr) + ")";
    case "and":
    case "or":
      return "(" + parseExpression(expression.left) + " " + expression.type.toUpperCase() + " " + parseExpression(expression.right) + ")";
    case "case":
      return "CASE WHEN " + expression.cond.map(function (cond) {
        return parseExpression(cond[0]) + " THEN " + cond[1];
      }).join(" ") + " ELSE '" + expression.else + "' END";
    case "date_trunc":
      return "date_trunc(" + expression.unit + ", " + expression.field + ")";
    case "extract":
      return "extract(" + expression.unit + " from " + expression.field + ")";
    case "root":
      return "(" + parser.writeSQL(expression) + ")";
    case "count":
      if (expression.distinct && expression.approx) {
        return "approx_count_distinct(" + expression.field + ")";
      } else if (expression.distinct) {
        return "count(distinct " + expression.field + " )";
      } else {
        return "count(" + expression.field + ")";
      }
    case "stddev":
    case "stddev_pop":
    case "stddev_samp":
    case "var_pop":
    case "var_samp":
      return expression.type + "(" + expression.x + ")";
    case "corr":
    case "covar_pop":
    case "covar_samp":
      return expression.type + "(" + expression.x + ", " + expression.y + ")";
    case "min":
    case "max":
    case "sum":
      return expression.type + "(" + expression.field + ")";
    case "average":
      return "avg(" + expression.field + ")";
    default:
      return expression;
  }
}

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseLimit;
function parseLimit(sql, transform) {
  sql.limit += transform.row;
  sql.offset += transform.offset || sql.offset;
  return sql;
}

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseProject;

var _createParser = __webpack_require__(0);

var _createParser2 = _interopRequireDefault(_createParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parseProject(sql, transform) {
  var parser = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _createParser2.default;

  sql.select.push(parser.parseExpression(transform.expr) + (transform.as ? " as " + transform.as : ""));
  return sql;
}

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

exports.default = parseResolvefilter;
var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }return obj;
}

function parseResolvefilter(sql, transform) {
  switch (transform.type) {
    case "resolvefilter":
      if (_typeof(sql.unresolved) === "object") {
        sql.unresolved[transform.filter.signal] = transform;
      } else {
        sql.unresolved = _defineProperty({}, transform.filter.signal, transform);
      }
    default:
      return sql;
  }
}

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = sample;


var GOLDEN_RATIO = 265445761;

var THIRTY_TWO_BITS = 4294967296;

function sample(sql, transform) {
  /* istanbul ignore else */
  if (transform.method === "multiplicative") {
    var size = transform.size,
        limit = transform.limit;

    var ratio = Math.min(limit / size, 1.0);
    if (ratio < 1) {
      var threshold = Math.floor(THIRTY_TWO_BITS * ratio);
      sql.where.push("MOD(" + sql.from + ".rowid * " + GOLDEN_RATIO + ", " + THIRTY_TWO_BITS + ") < " + threshold);
    }
  }

  return sql;
}

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseSort;


var ORDERINGS = {
  ascending: "ASC",
  descending: "DESC"
};

function parseSort(sql, transform) {
  transform.field.forEach(function (field, index) {
    sql.orderby.push(field + (Array.isArray(transform.order) ? " " + ORDERINGS[transform.order[index]] : ""));
  });
  return sql;
}

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseTransform;

var _parseAggregate = __webpack_require__(22);

var _parseAggregate2 = _interopRequireDefault(_parseAggregate);

var _parseBin = __webpack_require__(23);

var _parseBin2 = _interopRequireDefault(_parseBin);

var _parseCrossfilter = __webpack_require__(24);

var _parseCrossfilter2 = _interopRequireDefault(_parseCrossfilter);

var _parseSort = __webpack_require__(31);

var _parseSort2 = _interopRequireDefault(_parseSort);

var _parseLimit = __webpack_require__(27);

var _parseLimit2 = _interopRequireDefault(_parseLimit);

var _parseFilter = __webpack_require__(4);

var _parseFilter2 = _interopRequireDefault(_parseFilter);

var _parseProject = __webpack_require__(28);

var _parseProject2 = _interopRequireDefault(_parseProject);

var _parseResolvefilter = __webpack_require__(29);

var _parseResolvefilter2 = _interopRequireDefault(_parseResolvefilter);

var _parseSample = __webpack_require__(30);

var _parseSample2 = _interopRequireDefault(_parseSample);

var _parseSource = __webpack_require__(5);

var _parseSource2 = _interopRequireDefault(_parseSource);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parseTransform(sql, t, parser) {
  switch (t.type) {
    case "aggregate":
      return (0, _parseAggregate2.default)(sql, t, parser);
    case "bin":
      return (0, _parseBin2.default)(sql, t);
    case "sort":
      return (0, _parseSort2.default)(sql, t);
    case "limit":
      return (0, _parseLimit2.default)(sql, t);
    case "filter":
      return (0, _parseFilter2.default)(sql, t, parser);
    case "project":
      return (0, _parseProject2.default)(sql, t, parser);
    case "sample":
      return (0, _parseSample2.default)(sql, t);
    case "resolvefilter":
      return (0, _parseResolvefilter2.default)(sql, t);
    case "crossfilter":
      return (0, _parseCrossfilter2.default)(sql, t);
    /* istanbul ignore next */
    default:
      return sql;
  }
}

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = writeSQL;
exports.write = write;
function writeSQL(state, parser) {
  return write(parser.parseDataState(state));
}

function write(sql) {
  return writeSelect(sql.select) + writeFrom(sql.from) + writeWhere(sql.where) + writeGroupby(sql.groupby) + writeHaving(sql.having) + writeOrderBy(sql.orderby) + writeLimit(sql.limit) + writeOffset(sql.offset);
}

function writeSelect(select) {
  return select.length ? "SELECT " + select.join(", ") : "SELECT *";
}

function writeFrom(from) {
  return " FROM " + from;
}

function writeWhere(where) {
  return where.length ? " WHERE " + where.join(" AND ") : "";
}

function writeGroupby(groupby) {
  return groupby.length ? " GROUP BY " + groupby.join(", ") : "";
}

function writeHaving(having) {
  return having.length ? " HAVING " + having.join(" AND ") : "";
}

function writeOrderBy(orderby) {
  return orderby.length ? " ORDER BY " + orderby.join(", ") : "";
}

function writeLimit(limit) {
  return limit.length ? " LIMIT " + limit : "";
}

function writeOffset(offset) {
  return offset.length ? " OFFSET " + offset : "";
}

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

exports.traverse = traverse;
exports.reduceToSQL = reduceToSQL;
var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
  return typeof obj === "undefined" ? "undefined" : _typeof2(obj);
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === "undefined" ? "undefined" : _typeof2(obj);
};

var identity = function identity(a) {
  return a;
};

function traverse(node, iterator, xform, accum) {
  accum = xform(accum, iterator(node));
  var source = node.getState().source;
  return (typeof source === "undefined" ? "undefined" : _typeof(source)) === "object" && !Array.isArray(source) ? traverse(source, iterator, xform, accum) : accum;
}

function reduceToSQL(context, node) {
  var initialSQL = {
    select: [],
    from: "",
    where: [],
    groupby: [],
    having: [],
    orderby: [],
    limit: "",
    offset: "",
    unresolved: {}
  };

  function toSQL(accum, rightNode) {
    return context.parser.parseDataState(rightNode.getState(), accum);
  }

  return traverse(node, identity, toSQL, initialSQL);
}

/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _thrifty = __webpack_require__(37);

Object.defineProperty(exports, "Thrifty", {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_thrifty).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

__webpack_require__(50);
__webpack_require__(49);
__webpack_require__(48);

window.TDatumEnum = {};

for (var key in TDatumType) {
  if (TDatumType.hasOwnProperty(key)) {
    window.TDatumEnum[TDatumType[key]] = key;
  }
}

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = {
  get: function get(target, methodName) {
    var originalMethod = target[methodName];
    return function () {
      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      var callback = args.pop();
      if (typeof callback === "function") {
        return originalMethod.call.apply(originalMethod, [target].concat(args, [function (result) {
          if (result instanceof Thrift.TException) {
            callback(result);
          } else {
            callback(null, result);
          }
        }]));
      } else {
        originalMethod.call.apply(originalMethod, [target].concat(args, [callback]));
      }
    };
  }
};

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _clientProxy = __webpack_require__(36);

var _clientProxy2 = _interopRequireDefault(_clientProxy);

var _processQueryResults = __webpack_require__(39);

var _processQueryResults2 = _interopRequireDefault(_processQueryResults);

var _logQueryResults = __webpack_require__(38);

var _logQueryResults2 = _interopRequireDefault(_logQueryResults);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var CLIENT_KEY = Symbol("CLIENT_KEY");
var CONFIG_KEY = Symbol("CONFIG_KEY");
var SESSION_KEY = Symbol("SESSION_KEY");
var NONCE_KEY = Symbol("NONCE_KEY");
var LOGGER_KEY = Symbol("LOGGER_KEY");

var Thrifty = function () {
  function Thrifty(config) {
    var _this = this;

    _classCallCheck(this, Thrifty);

    this.query = function (stmt) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
        id: null,
        limit: -1,
        columnar: true,
        logging: _this.logging
      };

      return new Promise(function (resolve, reject) {
        _this.client.sql_execute(_this.session, stmt, options.columnar, _this.curNonce, options.limit, function (error, result) {
          if (error) {
            reject(error);
          } else {
            if (_this.config.logging) {
              _this[LOGGER_KEY](stmt, result);
            }
            resolve((0, _processQueryResults2.default)(result));
          }
        });
      });
    };

    this.connect = function () {
      return new Promise(function (resolve, reject) {
        var _config = _this.config,
            user = _config.user,
            password = _config.password,
            dbName = _config.dbName;

        _this.client.connect(user, password, dbName, function (error, result) {
          if (error) {
            reject(error);
          } else {
            _this[SESSION_KEY] = result;
            resolve(_this);
          }
        });
      });
    };

    var url = config.protocol + "://" + config.host + ":" + config.port;
    var transport = new Thrift.Transport(url);
    var protocol = new Thrift.Protocol(transport);
    var client = new MapDClient(protocol);
    this[NONCE_KEY] = 0;
    this[CONFIG_KEY] = config;
    this[CLIENT_KEY] = new Proxy(client, _clientProxy2.default);
    this[LOGGER_KEY] = _logQueryResults2.default;
  }

  _createClass(Thrifty, [{
    key: "curNonce",
    get: function get() {
      return (this[NONCE_KEY]++).toString();
    }
  }, {
    key: "config",
    get: function get() {
      return this[CONFIG_KEY];
    }
  }, {
    key: "client",
    get: function get() {
      return this[CLIENT_KEY];
    }
  }, {
    key: "session",
    get: function get() {
      return this[SESSION_KEY];
    }
  }, {
    key: "logging",
    set: function set(logging) {
      this[CONFIG_KEY].logging = logging;
    }
  }, {
    key: "logger",
    set: function set(logger) {
      this[LOGGER_KEY] = logger;
    }
  }]);

  return Thrifty;
}();

exports.default = Thrifty;

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = logQueryResults;
function logQueryResults(query, result) {
  console.log(query, "- Execution Time:", result.execution_time_ms, " ms, Total Time:", result.total_time_ms + "ms");
}

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = processQueryResults;
// TDatumEnum global

function processQueryResults(result) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
    eliminateNullRows: false,
    returnTiming: false
  };

  var formattedResult = processColumnarResults(result.row_set, options.eliminateNullRows);

  formattedResult.timing = {
    execution_time_ms: result.execution_time_ms,
    total_time_ms: result.total_time_ms
  };

  return options.returnTiming ? formattedResult : formattedResult.results;
}

function processColumnarResults(data, eliminateNullRows) {
  var formattedResult = { fields: [], results: [] };
  var numCols = data.row_desc.length;
  var numRows = data.columns[0] !== undefined ? data.columns[0].nulls.length : 0;

  formattedResult.fields = data.row_desc.map(function (field) {
    return {
      name: field.col_name,
      type: TDatumEnum[field.col_type.type],
      is_array: field.col_type.is_array
    };
  });

  for (var r = 0; r < numRows; r++) {
    if (eliminateNullRows) {
      var rowHasNull = false;
      for (var c = 0; c < numCols; c++) {
        if (data.columns[c].nulls[r]) {
          rowHasNull = true;
          break;
        }
      }
      if (rowHasNull) {
        continue;
      }
    }
    var row = {};
    for (var _c = 0; _c < numCols; _c++) {
      var fieldName = formattedResult.fields[_c].name;
      var fieldType = formattedResult.fields[_c].type;
      var fieldIsArray = formattedResult.fields[_c].is_array;
      var isNull = data.columns[_c].nulls[r];
      if (isNull) {
        // row[fieldName] = "NULL";
        row[fieldName] = null;
        continue;
      }
      if (fieldIsArray) {
        row[fieldName] = [];
        var arrayNumElems = data.columns[_c].data.arr_col[r].nulls.length;
        for (var e = 0; e < arrayNumElems; e++) {
          if (data.columns[_c].data.arr_col[r].nulls[e]) {
            row[fieldName].push("NULL");
            continue;
          }
          switch (fieldType) {
            case "BOOL":
              row[fieldName].push(data.columns[_c].data.arr_col[r].data.int_col[e] ? true : false);
              break;
            case "SMALLINT":
            case "INT":
            case "BIGINT":
              row[fieldName].push(data.columns[_c].data.arr_col[r].data.int_col[e]);
              break;
            case "FLOAT":
            case "DOUBLE":
            case "DECIMAL":
              row[fieldName].push(data.columns[_c].data.arr_col[r].data.real_col[e]);
              break;
            case "STR":
              row[fieldName].push(data.columns[_c].data.arr_col[r].data.str_col[e]);
              break;
            case "TIME":
            case "TIMESTAMP":
            case "DATE":
              row[fieldName].push(data.columns[_c].data.arr_col[r].data.int_col[e] * 1000);
              break;
            default:
              break;
          }
        }
      } else {
        switch (fieldType) {
          case "BOOL":
            row[fieldName] = data.columns[_c].data.int_col[r] ? true : false;
            break;
          case "SMALLINT":
          case "INT":
          case "BIGINT":
            row[fieldName] = data.columns[_c].data.int_col[r];
            break;
          case "FLOAT":
          case "DOUBLE":
          case "DECIMAL":
            row[fieldName] = data.columns[_c].data.real_col[r];
            break;
          case "STR":
            row[fieldName] = data.columns[_c].data.str_col[r];
            break;
          case "TIME":
          case "TIMESTAMP":
          case "DATE":
            row[fieldName] = new Date(data.columns[_c].data.int_col[r] * 1000);
            break;
          default:
            break;
        }
      }
    }
    formattedResult.results.push(row);
  }
  return formattedResult;
}

/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _dispatch = __webpack_require__(41);

Object.defineProperty(exports, "dispatch", {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_dispatch).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var noop = { value: function value() {} };

function dispatch() {
  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {
    if (!(t = arguments[i] + "") || t in _) throw new Error("illegal type: " + t);
    _[t] = [];
  }
  return new Dispatch(_);
}

function Dispatch(_) {
  this._ = _;
}

function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function (t) {
    var name = "",
        i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t)) throw new Error("unknown type: " + t);
    return { type: t, name: name };
  });
}

Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function on(typename, callback) {
    var _ = this._,
        T = parseTypenames(typename + "", _),
        t,
        i = -1,
        n = T.length;

    // If no callback was specified, return the callback of the given type and name.
    if (arguments.length < 2) {
      while (++i < n) {
        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;
      }return;
    }

    // If a type was specified, set the callback for the given type and name.
    // Otherwise, if a null callback was specified, remove callbacks of the given name.
    if (callback != null && typeof callback !== "function") throw new Error("invalid callback: " + callback);
    while (++i < n) {
      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {
        _[t] = set(_[t], typename.name, null);
      }
    }

    return this;
  },
  copy: function copy() {
    var copy = {},
        _ = this._;
    for (var t in _) {
      copy[t] = _[t].slice();
    }return new Dispatch(copy);
  },
  call: function call(type, that) {
    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {
      args[i] = arguments[i + 2];
    }if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);
    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {
      t[i].value.apply(that, args);
    }
  },
  apply: function apply(type, that, args) {
    if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);
    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {
      t[i].value.apply(that, args);
    }
  }
};

function get(type, name) {
  for (var i = 0, n = type.length, c; i < n; ++i) {
    if ((c = type[i]).name === name) {
      return c.value;
    }
  }
}

function set(type, name, callback) {
  for (var i = 0, n = type.length; i < n; ++i) {
    if (type[i].name === name) {
      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));
      break;
    }
  }
  if (callback != null) type.push({ name: name, value: callback });
  return type;
}

exports.default = dispatch;

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var CHART_ID_COUNTER = 0;

var Chart = function () {
  function Chart(node, dispatch, group) {
    var _this = this;

    _classCallCheck(this, Chart);

    this.on = function (event, handler) {
      _this.dispatch.on(event, handler);
    };

    this.render = function (data) {
      _this.dispatch.call("preRender", _this, data);
      _this.doRender(data, _this.dispatch);
      _this.dispatch.call("postRender", _this, data);
    };

    this.redraw = function (data) {
      _this.dispatch.call("preRedraw", _this, data);
      _this.doRedraw(data, _this.dispatch);
      _this.dispatch.call("postRedraw", _this, data);
    };

    this.id = CHART_ID_COUNTER++;
    this.node = node;
    this.group = group;
    this.dispatch = dispatch;
    dispatch.call("setup", this);
  }

  _createClass(Chart, [{
    key: "data",
    value: function data() {
      return Promise.resolve();
    }
  }, {
    key: "doRender",
    value: function doRender(data, updater) {
      return;
    }
  }, {
    key: "doRedraw",
    value: function doRedraw(data, updater) {
      return;
    }
  }]);

  return Chart;
}();

exports.default = Chart;

/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createView;

var _d3Dispatch = __webpack_require__(40);

var d3 = _interopRequireWildcard(_d3Dispatch);

var _registry = __webpack_require__(8);

var _registry2 = _interopRequireDefault(_registry);

var _renderer = __webpack_require__(9);

var _renderer2 = _interopRequireDefault(_renderer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var BASE_EVENTS = ["setup", "remove", "filter", "filterAll", "preRender", "postRender", "preRedraw", "postRedraw"];

function createView() {
  var Registry = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _registry2.default;
  var Renderer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _renderer2.default;

  var registry = new Registry();
  var renderer = new Renderer();

  function redrawAll(group) {
    return renderer.redrawAll(registry.list(group));
  }

  function renderAll(group) {
    return renderer.renderAll(registry.list(group));
  }

  function filterAll(group) {
    var _this = this;

    registry.list(group).forEach(function (chart) {
      chart.dispatch.call("filterAll", _this);
    });
    redrawAll(group);
  }

  function dispatch() {
    var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

    var listener = d3.dispatch.apply(d3, _toConsumableArray(Array.from(new Set([].concat(BASE_EVENTS, _toConsumableArray(events))))));
    listener.on("setup.register", function setup() {
      registry.register(this, this.group);
    });
    listener.on("remove.deregister", function remove() {
      registry.deregister(this, this.group);
    });
    listener.on("filter.redraw", function filter() {
      redrawAll(this.group);
    });
    return listener;
  }

  return {
    dispatch: dispatch,
    registry: registry,
    renderAll: renderAll,
    redrawAll: redrawAll,
    filterAll: filterAll
  };
}

/***/ }),
/* 44 */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),
/* 45 */
/***/ (function(module, exports) {

module.exports = "// https://d3js.org Version 4.10.2. Copyright 2017 Mike Bostock.\n(function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(t.d3=t.d3||{})})(this,function(t){\"use strict\";function n(t){return function(n,e){return ss(t(n),e)}}function e(t,n){return[t,n]}function r(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ts?10:o>=ks?5:o>=Ns?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ts?10:o>=ks?5:o>=Ns?2:1)}function i(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ts?i*=10:o>=ks?i*=5:o>=Ns&&(i*=2),n<t?-i:i}function o(t){return t.length}function u(t){return\"translate(\"+(t+.5)+\",0)\"}function a(t){return\"translate(0,\"+(t+.5)+\")\"}function c(t){return function(n){return+t(n)}}function s(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}function f(){return!this.__axis}function l(t,n){function e(e){var u=null==i?n.ticks?n.ticks.apply(n,r):n.domain():i,a=null==o?n.tickFormat?n.tickFormat.apply(n,r):Ls:o,y=Math.max(l,0)+p,g=n.range(),m=+g[0]+.5,x=+g[g.length-1]+.5,b=(n.bandwidth?s:c)(n.copy()),w=e.selection?e.selection():e,M=w.selectAll(\".domain\").data([null]),T=w.selectAll(\".tick\").data(u,n).order(),k=T.exit(),N=T.enter().append(\"g\").attr(\"class\",\"tick\"),S=T.select(\"line\"),E=T.select(\"text\");M=M.merge(M.enter().insert(\"path\",\".tick\").attr(\"class\",\"domain\").attr(\"stroke\",\"#000\")),T=T.merge(N),S=S.merge(N.append(\"line\").attr(\"stroke\",\"#000\").attr(v+\"2\",d*l)),E=E.merge(N.append(\"text\").attr(\"fill\",\"#000\").attr(v,d*y).attr(\"dy\",t===qs?\"0em\":t===Ds?\"0.71em\":\"0.32em\")),e!==w&&(M=M.transition(e),T=T.transition(e),S=S.transition(e),E=E.transition(e),k=k.transition(e).attr(\"opacity\",Fs).attr(\"transform\",function(t){return isFinite(t=b(t))?_(t):this.getAttribute(\"transform\")}),N.attr(\"opacity\",Fs).attr(\"transform\",function(t){var n=this.parentNode.__axis;return _(n&&isFinite(n=n(t))?n:b(t))})),k.remove(),M.attr(\"d\",t===Os||t==Us?\"M\"+d*h+\",\"+m+\"H0.5V\"+x+\"H\"+d*h:\"M\"+m+\",\"+d*h+\"V0.5H\"+x+\"V\"+d*h),T.attr(\"opacity\",1).attr(\"transform\",function(t){return _(b(t))}),S.attr(v+\"2\",d*l),E.attr(v,d*y).text(a),w.filter(f).attr(\"fill\",\"none\").attr(\"font-size\",10).attr(\"font-family\",\"sans-serif\").attr(\"text-anchor\",t===Us?\"start\":t===Os?\"end\":\"middle\"),w.each(function(){this.__axis=b})}var r=[],i=null,o=null,l=6,h=6,p=3,d=t===qs||t===Os?-1:1,v=t===Os||t===Us?\"x\":\"y\",_=t===qs||t===Ds?u:a;return e.scale=function(t){return arguments.length?(n=t,e):n},e.ticks=function(){return r=Rs.call(arguments),e},e.tickArguments=function(t){return arguments.length?(r=null==t?[]:Rs.call(t),e):r.slice()},e.tickValues=function(t){return arguments.length?(i=null==t?null:Rs.call(t),e):i&&i.slice()},e.tickFormat=function(t){return arguments.length?(o=t,e):o},e.tickSize=function(t){return arguments.length?(l=h=+t,e):l},e.tickSizeInner=function(t){return arguments.length?(l=+t,e):l},e.tickSizeOuter=function(t){return arguments.length?(h=+t,e):h},e.tickPadding=function(t){return arguments.length?(p=+t,e):p},e}function h(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+\"\")||t in r)throw new Error(\"illegal type: \"+t);r[t]=[]}return new p(r)}function p(t){this._=t}function d(t,n){return t.trim().split(/^|\\s+/).map(function(t){var e=\"\",r=t.indexOf(\".\");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);return{type:t,name:e}})}function v(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function _(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Is,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}function y(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Ys&&n.documentElement.namespaceURI===Ys?n.createElement(t):n.createElementNS(e,t)}}function g(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function m(){return new x}function x(){this._=\"@\"+(++Xs).toString(36)}function b(t,n,e){return t=w(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function w(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function M(t){return t.trim().split(/^|\\s+/).map(function(t){var n=\"\",e=t.indexOf(\".\");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}function T(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function k(t,n,e){var r=Gs.hasOwnProperty(t.type)?b:w;return function(i,o,u){var a,c=this.__on,s=r(n,o,u);if(c)for(var f=0,l=c.length;f<l;++f)if((a=c[f]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=e),void(a.value=n);this.addEventListener(t.type,s,e),a={type:t.type,name:t.name,value:n,listener:s,capture:e},c?c.push(a):this.__on=[a]}}function N(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function S(){}function E(){return[]}function A(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function C(t,n,e,r,i,o){for(var u,a=0,c=n.length,s=o.length;a<s;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new A(t,o[a]);for(;a<c;++a)(u=n[a])&&(i[a]=u)}function z(t,n,e,r,i,o,u){var a,c,s,f={},l=n.length,h=o.length,p=new Array(l);for(a=0;a<l;++a)(c=n[a])&&(p[a]=s=of+u.call(c,c.__data__,a,n),s in f?i[a]=c:f[s]=c);for(a=0;a<h;++a)(c=f[s=of+u.call(t,o[a],a,o)])?(r[a]=c,c.__data__=o[a],f[s]=null):e[a]=new A(t,o[a]);for(a=0;a<l;++a)(c=n[a])&&f[p[a]]===c&&(i[a]=c)}function P(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function R(t){return function(){this.removeAttribute(t)}}function L(t){return function(){this.removeAttributeNS(t.space,t.local)}}function q(t,n){return function(){this.setAttribute(t,n)}}function U(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function D(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function O(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function F(t){return function(){this.style.removeProperty(t)}}function I(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Y(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function B(t,n){return t.style.getPropertyValue(n)||uf(t).getComputedStyle(t,null).getPropertyValue(n)}function j(t){return function(){delete this[t]}}function H(t,n){return function(){this[t]=n}}function X(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function $(t){return t.trim().split(/^|\\s+/)}function V(t){return t.classList||new W(t)}function W(t){this._node=t,this._names=$(t.getAttribute(\"class\")||\"\")}function Z(t,n){for(var e=V(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function G(t,n){for(var e=V(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function J(t){return function(){Z(this,t)}}function Q(t){return function(){G(this,t)}}function K(t,n){return function(){(n.apply(this,arguments)?Z:G)(this,t)}}function tt(){this.textContent=\"\"}function nt(t){return function(){this.textContent=t}}function et(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?\"\":n}}function rt(){this.innerHTML=\"\"}function it(t){return function(){this.innerHTML=t}}function ot(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?\"\":n}}function ut(){this.nextSibling&&this.parentNode.appendChild(this)}function at(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ct(){return null}function st(){var t=this.parentNode;t&&t.removeChild(this)}function ft(t,n,e){var r=uf(t),i=r.CustomEvent;\"function\"==typeof i?i=new i(n,e):(i=r.document.createEvent(\"Event\"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function lt(t,n){return function(){return ft(this,t,n)}}function ht(t,n){return function(){return ft(this,t,n.apply(this,arguments))}}function pt(t,n){this._groups=t,this._parents=n}function dt(){return new pt([[document.documentElement]],af)}function vt(){t.event.stopImmediatePropagation()}function _t(t,n){var e=t.document.documentElement,r=cf(t).on(\"dragstart.drag\",null);n&&(r.on(\"click.drag\",ff,!0),setTimeout(function(){r.on(\"click.drag\",null)},0)),\"onselectstart\"in e?r.on(\"selectstart.drag\",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function yt(t,n,e,r,i,o,u,a,c,s){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=u,this.dx=a,this.dy=c,this._=s}function gt(){return!t.event.button}function mt(){return this.parentNode}function xt(n){return null==n?{x:t.event.x,y:t.event.y}:n}function bt(){return\"ontouchstart\"in this}function wt(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Mt(){}function Tt(t){var n;return t=(t+\"\").trim().toLowerCase(),(n=yf.exec(t))?(n=parseInt(n[1],16),new At(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1)):(n=gf.exec(t))?kt(parseInt(n[1],16)):(n=mf.exec(t))?new At(n[1],n[2],n[3],1):(n=xf.exec(t))?new At(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=bf.exec(t))?Nt(n[1],n[2],n[3],n[4]):(n=wf.exec(t))?Nt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Mf.exec(t))?Ct(n[1],n[2]/100,n[3]/100,1):(n=Tf.exec(t))?Ct(n[1],n[2]/100,n[3]/100,n[4]):kf.hasOwnProperty(t)?kt(kf[t]):\"transparent\"===t?new At(NaN,NaN,NaN,0):null}function kt(t){return new At(t>>16&255,t>>8&255,255&t,1)}function Nt(t,n,e,r){return r<=0&&(t=n=e=NaN),new At(t,n,e,r)}function St(t){return t instanceof Mt||(t=Tt(t)),t?(t=t.rgb(),new At(t.r,t.g,t.b,t.opacity)):new At}function Et(t,n,e,r){return 1===arguments.length?St(t):new At(t,n,e,null==r?1:r)}function At(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Ct(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Rt(t,n,e,r)}function zt(t){if(t instanceof Rt)return new Rt(t.h,t.s,t.l,t.opacity);if(t instanceof Mt||(t=Tt(t)),!t)return new Rt;if(t instanceof Rt)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,c=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=c<.5?o+i:2-o-i,u*=60):a=c>0&&c<1?0:u,new Rt(u,a,c,t.opacity)}function Pt(t,n,e,r){return 1===arguments.length?zt(t):new Rt(t,n,e,null==r?1:r)}function Rt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Lt(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function qt(t){if(t instanceof Dt)return new Dt(t.l,t.a,t.b,t.opacity);if(t instanceof Ht){var n=t.h*Nf;return new Dt(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof At||(t=St(t));var e=Yt(t.r),r=Yt(t.g),i=Yt(t.b),o=Ot((.4124564*e+.3575761*r+.1804375*i)/Ef),u=Ot((.2126729*e+.7151522*r+.072175*i)/Af);return new Dt(116*u-16,500*(o-u),200*(u-Ot((.0193339*e+.119192*r+.9503041*i)/Cf)),t.opacity)}function Ut(t,n,e,r){return 1===arguments.length?qt(t):new Dt(t,n,e,null==r?1:r)}function Dt(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Ot(t){return t>Lf?Math.pow(t,1/3):t/Rf+zf}function Ft(t){return t>Pf?t*t*t:Rf*(t-zf)}function It(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Yt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Bt(t){if(t instanceof Ht)return new Ht(t.h,t.c,t.l,t.opacity);t instanceof Dt||(t=qt(t));var n=Math.atan2(t.b,t.a)*Sf;return new Ht(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function jt(t,n,e,r){return 1===arguments.length?Bt(t):new Ht(t,n,e,null==r?1:r)}function Ht(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Xt(t){if(t instanceof Vt)return new Vt(t.h,t.s,t.l,t.opacity);t instanceof At||(t=St(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Bf*r+If*n-Yf*e)/(Bf+If-Yf),o=r-i,u=(Ff*(e-i)-Df*o)/Of,a=Math.sqrt(u*u+o*o)/(Ff*i*(1-i)),c=a?Math.atan2(u,o)*Sf-120:NaN;return new Vt(c<0?c+360:c,a,i,t.opacity)}function $t(t,n,e,r){return 1===arguments.length?Xt(t):new Vt(t,n,e,null==r?1:r)}function Vt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Wt(t,n,e,r,i){var o=t*t,u=o*t;return((1-3*t+3*o-u)*n+(4-6*o+3*u)*e+(1+3*t+3*o-3*u)*r+u*i)/6}function Zt(t,n){return function(e){return t+e*n}}function Gt(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Jt(t,n){var e=n-t;return e?Zt(t,e>180||e<-180?e-360*Math.round(e/360):e):Jf(isNaN(t)?n:t)}function Qt(t){return 1==(t=+t)?Kt:function(n,e){return e-n?Gt(n,e,t):Jf(isNaN(n)?e:n)}}function Kt(t,n){var e=n-t;return e?Zt(t,e):Jf(isNaN(t)?n:t)}function tn(t){return function(n){var e,r,i=n.length,o=new Array(i),u=new Array(i),a=new Array(i);for(e=0;e<i;++e)r=Et(n[e]),o[e]=r.r||0,u[e]=r.g||0,a[e]=r.b||0;return o=t(o),u=t(u),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=u(t),r.b=a(t),r+\"\"}}}function nn(t){return function(){return t}}function en(t){return function(n){return t(n)+\"\"}}function rn(t,n,e,r){function i(t){return t.length?t.pop()+\" \":\"\"}function o(t,r,i,o,u,a){if(t!==i||r!==o){var c=u.push(\"translate(\",null,n,null,e);a.push({i:c-4,x:rl(t,i)},{i:c-2,x:rl(r,o)})}else(i||o)&&u.push(\"translate(\"+i+n+o+e)}function u(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+\"rotate(\",null,r)-2,x:rl(t,n)})):n&&e.push(i(e)+\"rotate(\"+n+r)}function a(t,n,e,o){t!==n?o.push({i:e.push(i(e)+\"skewX(\",null,r)-2,x:rl(t,n)}):n&&e.push(i(e)+\"skewX(\"+n+r)}function c(t,n,e,r,o,u){if(t!==e||n!==r){var a=o.push(i(o)+\"scale(\",null,\",\",null,\")\");u.push({i:a-4,x:rl(t,e)},{i:a-2,x:rl(n,r)})}else 1===e&&1===r||o.push(i(o)+\"scale(\"+e+\",\"+r+\")\")}return function(n,e){var r=[],i=[];return n=t(n),e=t(e),o(n.translateX,n.translateY,e.translateX,e.translateY,r,i),u(n.rotate,e.rotate,r,i),a(n.skewX,e.skewX,r,i),c(n.scaleX,n.scaleY,e.scaleX,e.scaleY,r,i),n=e=null,function(t){for(var n,e=-1,o=i.length;++e<o;)r[(n=i[e]).i]=n.x(t);return r.join(\"\")}}}function on(t){return((t=Math.exp(t))+1/t)/2}function un(t){return((t=Math.exp(t))-1/t)/2}function an(t){return((t=Math.exp(2*t))-1)/(t+1)}function cn(t){return function(n,e){var r=t((n=Pt(n)).h,(e=Pt(e)).h),i=Kt(n.s,e.s),o=Kt(n.l,e.l),u=Kt(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=u(t),n+\"\"}}}function sn(t){return function(n,e){var r=t((n=jt(n)).h,(e=jt(e)).h),i=Kt(n.c,e.c),o=Kt(n.l,e.l),u=Kt(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=u(t),n+\"\"}}}function fn(t){return function n(e){function r(n,r){var i=t((n=$t(n)).h,(r=$t(r)).h),o=Kt(n.s,r.s),u=Kt(n.l,r.l),a=Kt(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=u(Math.pow(t,e)),n.opacity=a(t),n+\"\"}}return e=+e,r.gamma=n,r}(1)}function ln(){return El||(zl(hn),El=Cl.now()+Al)}function hn(){El=0}function pn(){this._call=this._time=this._next=null}function dn(t,n,e){var r=new pn;return r.restart(t,n,e),r}function vn(){ln(),++Ml;for(var t,n=Vf;n;)(t=El-n._time)>=0&&n._call.call(null,t),n=n._next;--Ml}function _n(){El=(Sl=Cl.now())+Al,Ml=Tl=0;try{vn()}finally{Ml=0,gn(),El=0}}function yn(){var t=Cl.now(),n=t-Sl;n>Nl&&(Al-=n,Sl=t)}function gn(){for(var t,n,e=Vf,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Vf=n);Wf=t,mn(r)}function mn(t){Ml||(Tl&&(Tl=clearTimeout(Tl)),t-El>24?(t<1/0&&(Tl=setTimeout(_n,t-Cl.now()-Al)),kl&&(kl=clearInterval(kl))):(kl||(Sl=Cl.now(),kl=setInterval(yn,Nl)),Ml=1,zl(_n)))}function xn(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>ql)throw new Error(\"too late\");return e}function bn(t,n){var e=t.__transition;if(!e||!(e=e[n])||e.state>Dl)throw new Error(\"too late\");return e}function wn(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error(\"too late\");return e}function Mn(t,n,e){function r(c){var s,f,l,h;if(e.state!==Ul)return o();for(s in a)if((h=a[s]).name===e.name){if(h.state===Ol)return Pl(r);h.state===Fl?(h.state=Yl,h.timer.stop(),h.on.call(\"interrupt\",t,t.__data__,h.index,h.group),delete a[s]):+s<n&&(h.state=Yl,h.timer.stop(),delete a[s])}if(Pl(function(){e.state===Ol&&(e.state=Fl,e.timer.restart(i,e.delay,e.time),i(c))}),e.state=Dl,e.on.call(\"start\",t,t.__data__,e.index,e.group),e.state===Dl){for(e.state=Ol,u=new Array(l=e.tween.length),s=0,f=-1;s<l;++s)(h=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(u[++f]=h);u.length=f+1}}function i(n){for(var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(o),e.state=Il,1),i=-1,a=u.length;++i<a;)u[i].call(null,r);e.state===Il&&(e.on.call(\"end\",t,t.__data__,e.index,e.group),o())}function o(){e.state=Yl,e.timer.stop(),delete a[n];for(var r in a)return;delete t.__transition}var u,a=t.__transition;a[n]=e,e.timer=dn(function(t){e.state=Ul,e.timer.restart(r,e.delay,e.time),e.delay<=t&&r(t-e.delay)},0,e.time)}function Tn(t,n){var e,r;return function(){var i=bn(this,t),o=i.tween;if(o!==e)for(var u=0,a=(r=e=o).length;u<a;++u)if(r[u].name===n){(r=r.slice()).splice(u,1);break}i.tween=r}}function kn(t,n,e){var r,i;if(\"function\"!=typeof e)throw new Error;return function(){var o=bn(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},c=0,s=i.length;c<s;++c)if(i[c].name===n){i[c]=a;break}c===s&&i.push(a)}o.tween=i}}function Nn(t,n,e){var r=t._id;return t.each(function(){var t=bn(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return wn(t,r).value[n]}}function Sn(t){return function(){this.removeAttribute(t)}}function En(t){return function(){this.removeAttributeNS(t.space,t.local)}}function An(t,n,e){var r,i;return function(){var o=this.getAttribute(t);return o===e?null:o===r?i:i=n(r=o,e)}}function Cn(t,n,e){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===r?i:i=n(r=o,e)}}function zn(t,n,e){var r,i,o;return function(){var u,a=e(this);{if(null!=a)return(u=this.getAttribute(t))===a?null:u===r&&a===i?o:o=n(r=u,i=a);this.removeAttribute(t)}}}function Pn(t,n,e){var r,i,o;return function(){var u,a=e(this);{if(null!=a)return(u=this.getAttributeNS(t.space,t.local))===a?null:u===r&&a===i?o:o=n(r=u,i=a);this.removeAttributeNS(t.space,t.local)}}}function Rn(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttributeNS(t.space,t.local,r(n))}}return e._value=n,e}function Ln(t,n){function e(){var e=this,r=n.apply(e,arguments);return r&&function(n){e.setAttribute(t,r(n))}}return e._value=n,e}function qn(t,n){return function(){xn(this,t).delay=+n.apply(this,arguments)}}function Un(t,n){return n=+n,function(){xn(this,t).delay=n}}function Dn(t,n){return function(){bn(this,t).duration=+n.apply(this,arguments)}}function On(t,n){return n=+n,function(){bn(this,t).duration=n}}function Fn(t,n){if(\"function\"!=typeof n)throw new Error;return function(){bn(this,t).ease=n}}function In(t){return(t+\"\").trim().split(/^|\\s+/).every(function(t){var n=t.indexOf(\".\");return n>=0&&(t=t.slice(0,n)),!t||\"start\"===t})}function Yn(t,n,e){var r,i,o=In(n)?xn:bn;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}function Bn(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function jn(t,n){var e,r,i;return function(){var o=B(this,t),u=(this.style.removeProperty(t),B(this,t));return o===u?null:o===e&&u===r?i:i=n(e=o,r=u)}}function Hn(t){return function(){this.style.removeProperty(t)}}function Xn(t,n,e){var r,i;return function(){var o=B(this,t);return o===e?null:o===r?i:i=n(r=o,e)}}function $n(t,n,e){var r,i,o;return function(){var u=B(this,t),a=e(this);return null==a&&(this.style.removeProperty(t),a=B(this,t)),u===a?null:u===r&&a===i?o:o=n(r=u,i=a)}}function Vn(t,n,e){function r(){var r=this,i=n.apply(r,arguments);return i&&function(n){r.style.setProperty(t,i(n),e)}}return r._value=n,r}function Wn(t){return function(){this.textContent=t}}function Zn(t){return function(){var n=t(this);this.textContent=null==n?\"\":n}}function Gn(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Jn(t){return dt().transition(t)}function Qn(){return++$l}function Kn(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function te(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function ne(t){return(1-Math.cos(Jl*t))/2}function ee(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function re(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function ie(t){return(t=+t)<Kl?ch*t*t:t<nh?ch*(t-=th)*t+eh:t<ih?ch*(t-=rh)*t+oh:ch*(t-=uh)*t+ah}function oe(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return _h.time=ln(),_h;return e}function ue(){t.event.stopImmediatePropagation()}function ae(t){return{type:t}}function ce(){return!t.event.button}function se(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function fe(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function le(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function he(n){function e(t){var e=t.property(\"__brush\",a).selectAll(\".overlay\").data([ae(\"overlay\")]);e.enter().append(\"rect\").attr(\"class\",\"overlay\").attr(\"pointer-events\",\"all\").attr(\"cursor\",Eh.overlay).merge(e).each(function(){var t=fe(this).extent;cf(this).attr(\"x\",t[0][0]).attr(\"y\",t[0][1]).attr(\"width\",t[1][0]-t[0][0]).attr(\"height\",t[1][1]-t[0][1])}),t.selectAll(\".selection\").data([ae(\"selection\")]).enter().append(\"rect\").attr(\"class\",\"selection\").attr(\"cursor\",Eh.selection).attr(\"fill\",\"#777\").attr(\"fill-opacity\",.3).attr(\"stroke\",\"#fff\").attr(\"shape-rendering\",\"crispEdges\");var i=t.selectAll(\".handle\").data(n.handles,function(t){return t.type});i.exit().remove(),i.enter().append(\"rect\").attr(\"class\",function(t){return\"handle handle--\"+t.type}).attr(\"cursor\",function(t){return Eh[t.type]}),t.each(r).attr(\"fill\",\"none\").attr(\"pointer-events\",\"all\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\").on(\"mousedown.brush touchstart.brush\",u)}function r(){var t=cf(this),n=fe(this).selection;n?(t.selectAll(\".selection\").style(\"display\",null).attr(\"x\",n[0][0]).attr(\"y\",n[0][1]).attr(\"width\",n[1][0]-n[0][0]).attr(\"height\",n[1][1]-n[0][1]),t.selectAll(\".handle\").style(\"display\",null).attr(\"x\",function(t){return\"e\"===t.type[t.type.length-1]?n[1][0]-p/2:n[0][0]-p/2}).attr(\"y\",function(t){return\"s\"===t.type[0]?n[1][1]-p/2:n[0][1]-p/2}).attr(\"width\",function(t){return\"n\"===t.type||\"s\"===t.type?n[1][0]-n[0][0]+p:p}).attr(\"height\",function(t){return\"e\"===t.type||\"w\"===t.type?n[1][1]-n[0][1]+p:p})):t.selectAll(\".selection,.handle\").style(\"display\",\"none\").attr(\"x\",null).attr(\"y\",null).attr(\"width\",null).attr(\"height\",null)}function i(t,n){return t.__brush.emitter||new o(t,n)}function o(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function u(){function e(){var t=Ks(w);!L||x||b||(Math.abs(t[0]-U[0])>Math.abs(t[1]-U[1])?b=!0:x=!0),U=t,m=!0,xh(),o()}function o(){var t;switch(y=U[0]-q[0],g=U[1]-q[1],T){case wh:case bh:k&&(y=Math.max(C-a,Math.min(P-p,y)),s=a+y,d=p+y),N&&(g=Math.max(z-l,Math.min(R-v,g)),h=l+g,_=v+g);break;case Mh:k<0?(y=Math.max(C-a,Math.min(P-a,y)),s=a+y,d=p):k>0&&(y=Math.max(C-p,Math.min(P-p,y)),s=a,d=p+y),N<0?(g=Math.max(z-l,Math.min(R-l,g)),h=l+g,_=v):N>0&&(g=Math.max(z-v,Math.min(R-v,g)),h=l,_=v+g);break;case Th:k&&(s=Math.max(C,Math.min(P,a-y*k)),d=Math.max(C,Math.min(P,p+y*k))),N&&(h=Math.max(z,Math.min(R,l-g*N)),_=Math.max(z,Math.min(R,v+g*N)))}d<s&&(k*=-1,t=a,a=p,p=t,t=s,s=d,d=t,M in Ah&&F.attr(\"cursor\",Eh[M=Ah[M]])),_<h&&(N*=-1,t=l,l=v,v=t,t=h,h=_,_=t,M in Ch&&F.attr(\"cursor\",Eh[M=Ch[M]])),S.selection&&(A=S.selection),x&&(s=A[0][0],d=A[1][0]),b&&(h=A[0][1],_=A[1][1]),A[0][0]===s&&A[0][1]===h&&A[1][0]===d&&A[1][1]===_||(S.selection=[[s,h],[d,_]],r.call(w),D.brush())}function u(){if(ue(),t.event.touches){if(t.event.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500),O.on(\"touchmove.brush touchend.brush touchcancel.brush\",null)}else _t(t.event.view,m),I.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\",null);O.attr(\"pointer-events\",\"all\"),F.attr(\"cursor\",Eh.overlay),S.selection&&(A=S.selection),le(A)&&(S.selection=null,r.call(w)),D.end()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return xh()}else if(c)return;if(f.apply(this,arguments)){var a,s,l,h,p,d,v,_,y,g,m,x,b,w=this,M=t.event.target.__data__.type,T=\"selection\"===(t.event.metaKey?M=\"overlay\":M)?bh:t.event.altKey?Th:Mh,k=n===Nh?null:zh[M],N=n===kh?null:Ph[M],S=fe(w),E=S.extent,A=S.selection,C=E[0][0],z=E[0][1],P=E[1][0],R=E[1][1],L=k&&N&&t.event.shiftKey,q=Ks(w),U=q,D=i(w,arguments).beforestart();\"overlay\"===M?S.selection=A=[[a=n===Nh?C:q[0],l=n===kh?z:q[1]],[p=n===Nh?P:a,v=n===kh?R:l]]:(a=A[0][0],l=A[0][1],p=A[1][0],v=A[1][1]),s=a,h=l,d=p,_=v;var O=cf(w).attr(\"pointer-events\",\"none\"),F=O.selectAll(\".overlay\").attr(\"cursor\",Eh[M]);if(t.event.touches)O.on(\"touchmove.brush\",e,!0).on(\"touchend.brush touchcancel.brush\",u,!0);else{var I=cf(t.event.view).on(\"keydown.brush\",function(){switch(t.event.keyCode){case 16:L=k&&N;break;case 18:T===Mh&&(k&&(p=d-y*k,a=s+y*k),N&&(v=_-g*N,l=h+g*N),T=Th,o());break;case 32:T!==Mh&&T!==Th||(k<0?p=d-y:k>0&&(a=s-y),N<0?v=_-g:N>0&&(l=h-g),T=wh,F.attr(\"cursor\",Eh.selection),o());break;default:return}xh()},!0).on(\"keyup.brush\",function(){switch(t.event.keyCode){case 16:L&&(x=b=L=!1,o());break;case 18:T===Th&&(k<0?p=d:k>0&&(a=s),N<0?v=_:N>0&&(l=h),T=Mh,o());break;case 32:T===wh&&(t.event.altKey?(k&&(p=d-y*k,a=s+y*k),N&&(v=_-g*N,l=h+g*N),T=Th):(k<0?p=d:k>0&&(a=s),N<0?v=_:N>0&&(l=h),T=Mh),F.attr(\"cursor\",Eh[M]),o());break;default:return}xh()},!0).on(\"mousemove.brush\",e,!0).on(\"mouseup.brush\",u,!0);lf(t.event.view)}ue(),jl(w),r.call(w),D.start()}}function a(){var t=this.__brush||{selection:null};return t.extent=s.apply(this,arguments),t.dim=n,t}var c,s=se,f=ce,l=h(e,\"start\",\"brush\",\"end\"),p=6;return e.move=function(t,e){t.selection?t.on(\"start.brush\",function(){i(this,arguments).beforestart().start()}).on(\"interrupt.brush end.brush\",function(){i(this,arguments).end()}).tween(\"brush\",function(){function t(t){u.selection=1===t&&le(s)?null:f(t),r.call(o),a.brush()}var o=this,u=o.__brush,a=i(o,arguments),c=u.selection,s=n.input(\"function\"==typeof e?e.apply(this,arguments):e,u.extent),f=cl(c,s);return c&&s?t:t(1)}):t.each(function(){var t=this,o=arguments,u=t.__brush,a=n.input(\"function\"==typeof e?e.apply(t,o):e,u.extent),c=i(t,o).beforestart();jl(t),u.selection=null==a||le(a)?null:a,r.call(t),c.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit(\"start\")),this},brush:function(){return this.emit(\"brush\"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit(\"end\")),this},emit:function(t){N(new mh(e,t,n.output(this.state.selection)),l.apply,l,[t,this.that,this.args])}},e.extent=function(t){return arguments.length?(s=\"function\"==typeof t?t:gh([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):s},e.filter=function(t){return arguments.length?(f=\"function\"==typeof t?t:gh(!!t),e):f},e.handleSize=function(t){return arguments.length?(p=+t,e):p},e.on=function(){var t=l.on.apply(l,arguments);return t===l?e:t},e}function pe(t){return function(n,e){return t(n.source.value+n.target.value,e.source.value+e.target.value)}}function de(){this._x0=this._y0=this._x1=this._y1=null,this._=\"\"}function ve(){return new de}function _e(t){return t.source}function ye(t){return t.target}function ge(t){return t.radius}function me(t){return t.startAngle}function xe(t){return t.endAngle}function be(){}function we(t,n){var e=new be;if(t instanceof be)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var u in t)e.set(u,t[u]);return e}function Me(){return{}}function Te(t,n,e){t[n]=e}function ke(){return we()}function Ne(t,n,e){t.set(n,e)}function Se(){}function Ee(t,n){var e=new Se;if(t instanceof Se)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}function Ae(t){return new Function(\"d\",\"return {\"+t.map(function(t,n){return JSON.stringify(t)+\": d[\"+n+\"]\"}).join(\",\")+\"}\")}function Ce(t,n){var e=Ae(t);return function(r,i){return n(e(r),i,t)}}function ze(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function Pe(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,u,a,c,s,f,l,h,p=t._root,d={data:r},v=t._x0,_=t._y0,y=t._x1,g=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((s=n>=(o=(v+y)/2))?v=o:y=o,(f=e>=(u=(_+g)/2))?_=u:g=u,i=p,!(p=p[l=f<<1|s]))return i[l]=d,t;if(a=+t._x.call(null,p.data),c=+t._y.call(null,p.data),n===a&&e===c)return d.next=p,i?i[l]=d:t._root=d,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(s=n>=(o=(v+y)/2))?v=o:y=o,(f=e>=(u=(_+g)/2))?_=u:g=u}while((l=f<<1|s)==(h=(c>=u)<<1|a>=o));return i[h]=p,i[l]=d,t}function Re(t){return t[0]}function Le(t){return t[1]}function qe(t,n,e){var r=new Ue(null==n?Re:n,null==e?Le:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ue(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function De(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}function Oe(t){return t.x+t.vx}function Fe(t){return t.y+t.vy}function Ie(t){return t.index}function Ye(t,n){var e=t.get(n);if(!e)throw new Error(\"missing: \"+n);return e}function Be(t){return t.x}function je(t){return t.y}function He(t){return new Xe(t)}function Xe(t){if(!(n=xp.exec(t)))throw new Error(\"invalid format: \"+t);var n,e=n[1]||\" \",r=n[2]||\">\",i=n[3]||\"-\",o=n[4]||\"\",u=!!n[5],a=n[6]&&+n[6],c=!!n[7],s=n[8]&&+n[8].slice(1),f=n[9]||\"\";\"n\"===f?(c=!0,f=\"g\"):mp[f]||(f=\"\"),(u||\"0\"===e&&\"=\"===r)&&(u=!0,e=\"0\",r=\"=\"),this.fill=e,this.align=r,this.sign=i,this.symbol=o,this.zero=u,this.width=a,this.comma=c,this.precision=s,this.type=f}function $e(n){return bp=Tp(n),t.format=bp.format,t.formatPrefix=bp.formatPrefix,bp}function Ve(){this.reset()}function We(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}function Ze(t){return t>1?0:t<-1?cd:Math.acos(t)}function Ge(t){return t>1?sd:t<-1?-sd:Math.asin(t)}function Je(t){return(t=wd(t/2))*t}function Qe(){}function Ke(t,n){t&&Sd.hasOwnProperty(t.type)&&Sd[t.type](t,n)}function tr(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function nr(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)tr(t[e],n,1);n.polygonEnd()}function er(){zd.point=ir}function rr(){or(Ap,Cp)}function ir(t,n){zd.point=or,Ap=t,Cp=n,zp=t*=pd,Pp=yd(n=(n*=pd)/2+fd),Rp=wd(n)}function or(t,n){n=(n*=pd)/2+fd;var e=(t*=pd)-zp,r=e>=0?1:-1,i=r*e,o=yd(n),u=wd(n),a=Rp*u,c=Pp*o+a*yd(i),s=a*r*wd(i);Ad.add(_d(s,c)),zp=t,Pp=o,Rp=u}function ur(t){return[_d(t[1],t[0]),Ge(t[2])]}function ar(t){var n=t[0],e=t[1],r=yd(e);return[r*yd(n),r*wd(n),wd(e)]}function cr(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function sr(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function fr(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function lr(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function hr(t){var n=Td(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function pr(t,n){Bp.push(jp=[Lp=t,Up=t]),n<qp&&(qp=n),n>Dp&&(Dp=n)}function dr(t,n){var e=ar([t*pd,n*pd]);if(Yp){var r=sr(Yp,e),i=sr([r[1],-r[0],0],r);hr(i),i=ur(i);var o,u=t-Op,a=u>0?1:-1,c=i[0]*hd*a,s=dd(u)>180;s^(a*Op<c&&c<a*t)?(o=i[1]*hd)>Dp&&(Dp=o):(c=(c+360)%360-180,s^(a*Op<c&&c<a*t)?(o=-i[1]*hd)<qp&&(qp=o):(n<qp&&(qp=n),n>Dp&&(Dp=n))),s?t<Op?xr(Lp,t)>xr(Lp,Up)&&(Up=t):xr(t,Up)>xr(Lp,Up)&&(Lp=t):Up>=Lp?(t<Lp&&(Lp=t),t>Up&&(Up=t)):t>Op?xr(Lp,t)>xr(Lp,Up)&&(Up=t):xr(t,Up)>xr(Lp,Up)&&(Lp=t)}else Bp.push(jp=[Lp=t,Up=t]);n<qp&&(qp=n),n>Dp&&(Dp=n),Yp=e,Op=t}function vr(){Rd.point=dr}function _r(){jp[0]=Lp,jp[1]=Up,Rd.point=pr,Yp=null}function yr(t,n){if(Yp){var e=t-Op;Pd.add(dd(e)>180?e+(e>0?360:-360):e)}else Fp=t,Ip=n;zd.point(t,n),dr(t,n)}function gr(){zd.lineStart()}function mr(){yr(Fp,Ip),zd.lineEnd(),dd(Pd)>ad&&(Lp=-(Up=180)),jp[0]=Lp,jp[1]=Up,Yp=null}function xr(t,n){return(n-=t)<0?n+360:n}function br(t,n){return t[0]-n[0]}function wr(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function Mr(t,n){t*=pd;var e=yd(n*=pd);Tr(e*yd(t),e*wd(t),wd(n))}function Tr(t,n,e){$p+=(t-$p)/++Hp,Vp+=(n-Vp)/Hp,Wp+=(e-Wp)/Hp}function kr(){Ld.point=Nr}function Nr(t,n){t*=pd;var e=yd(n*=pd);rd=e*yd(t),id=e*wd(t),od=wd(n),Ld.point=Sr,Tr(rd,id,od)}function Sr(t,n){t*=pd;var e=yd(n*=pd),r=e*yd(t),i=e*wd(t),o=wd(n),u=_d(Td((u=id*o-od*i)*u+(u=od*r-rd*o)*u+(u=rd*i-id*r)*u),rd*r+id*i+od*o);Xp+=u,Zp+=u*(rd+(rd=r)),Gp+=u*(id+(id=i)),Jp+=u*(od+(od=o)),Tr(rd,id,od)}function Er(){Ld.point=Mr}function Ar(){Ld.point=zr}function Cr(){Pr(nd,ed),Ld.point=Mr}function zr(t,n){nd=t,ed=n,t*=pd,n*=pd,Ld.point=Pr;var e=yd(n);rd=e*yd(t),id=e*wd(t),od=wd(n),Tr(rd,id,od)}function Pr(t,n){t*=pd;var e=yd(n*=pd),r=e*yd(t),i=e*wd(t),o=wd(n),u=id*o-od*i,a=od*r-rd*o,c=rd*i-id*r,s=Td(u*u+a*a+c*c),f=Ge(s),l=s&&-f/s;Qp+=l*u,Kp+=l*a,td+=l*c,Xp+=f,Zp+=f*(rd+(rd=r)),Gp+=f*(id+(id=i)),Jp+=f*(od+(od=o)),Tr(rd,id,od)}function Rr(t,n){return[t>cd?t-ld:t<-cd?t+ld:t,n]}function Lr(t,n,e){return(t%=ld)?n||e?Ud(Ur(t),Dr(n,e)):Ur(t):n||e?Dr(n,e):Rr}function qr(t){return function(n,e){return n+=t,[n>cd?n-ld:n<-cd?n+ld:n,e]}}function Ur(t){var n=qr(t);return n.invert=qr(-t),n}function Dr(t,n){function e(t,n){var e=yd(n),a=yd(t)*e,c=wd(t)*e,s=wd(n),f=s*r+a*i;return[_d(c*o-f*u,a*r-s*i),Ge(f*o+c*u)]}var r=yd(t),i=wd(t),o=yd(n),u=wd(n);return e.invert=function(t,n){var e=yd(n),a=yd(t)*e,c=wd(t)*e,s=wd(n),f=s*o-c*u;return[_d(c*o+s*u,a*r+f*i),Ge(f*r-a*i)]},e}function Or(t,n,e,r,i,o){if(e){var u=yd(n),a=wd(n),c=r*e;null==i?(i=n+r*ld,o=n-c/2):(i=Fr(u,i),o=Fr(u,o),(r>0?i<o:i>o)&&(i+=r*ld));for(var s,f=i;r>0?f>o:f<o;f-=c)s=ur([u,-a*yd(f),-a*wd(f)]),t.point(s[0],s[1])}}function Fr(t,n){(n=ar(n))[0]-=t,hr(n);var e=Ze(-n[1]);return((-n[2]<0?-e:e)+ld-ad)%ld}function Ir(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Yr(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Br(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,a,s){var f=0,l=0;if(null==i||(f=u(i,a))!==(l=u(o,a))||c(i,o)<0^a>0)do{s.point(0===f||3===f?t:e,f>1?r:n)}while((f=(f+a+4)%4)!==l);else s.point(o[0],o[1])}function u(r,i){return dd(r[0]-t)<ad?i>0?0:3:dd(r[0]-e)<ad?i>0?2:1:dd(r[1]-n)<ad?i>0?1:0:i>0?3:2}function a(t,n){return c(t.x,n.x)}function c(t,n){var e=u(t,1),r=u(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function c(t,n){i(t,n)&&w.point(t,n)}function s(){for(var n=0,e=0,i=h.length;e<i;++e)for(var o,u,a=h[e],c=1,s=a.length,f=a[0],l=f[0],p=f[1];c<s;++c)o=l,u=p,l=(f=a[c])[0],p=f[1],u<=r?p>r&&(l-o)*(r-u)>(p-u)*(t-o)&&++n:p<=r&&(l-o)*(r-u)<(p-u)*(t-o)&&--n;return n}function f(o,u){var a=i(o,u);if(h&&p.push([o,u]),x)d=o,v=u,_=a,x=!1,a&&(w.lineStart(),w.point(o,u));else if(a&&m)w.point(o,u);else{var c=[y=Math.max(tv,Math.min(Kd,y)),g=Math.max(tv,Math.min(Kd,g))],s=[o=Math.max(tv,Math.min(Kd,o)),u=Math.max(tv,Math.min(Kd,u))];Gd(c,s,t,n,e,r)?(m||(w.lineStart(),w.point(c[0],c[1])),w.point(s[0],s[1]),a||w.lineEnd(),b=!1):a&&(w.lineStart(),w.point(o,u),b=!1)}y=o,g=u,m=a}var l,h,p,d,v,_,y,g,m,x,b,w=u,M=Zd(),T={point:c,lineStart:function(){T.point=f,h&&h.push(p=[]),x=!0,m=!1,y=g=NaN},lineEnd:function(){l&&(f(d,v),_&&m&&M.rejoin(),l.push(M.result())),T.point=c,m&&w.lineEnd()},polygonStart:function(){w=M,l=[],h=[],b=!0},polygonEnd:function(){var t=s(),n=b&&t,e=(l=Cs(l)).length;(n||e)&&(u.polygonStart(),n&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),e&&Qd(l,a,t,o,u),u.polygonEnd()),w=u,l=h=p=null}};return T}}function jr(){iv.point=iv.lineEnd=Qe}function Hr(t,n){Dd=t*=pd,Od=wd(n*=pd),Fd=yd(n),iv.point=Xr}function Xr(t,n){t*=pd;var e=wd(n*=pd),r=yd(n),i=dd(t-Dd),o=yd(i),u=r*wd(i),a=Fd*e-Od*r*o,c=Od*e+Fd*r*o;rv.add(_d(Td(u*u+a*a),c)),Dd=t,Od=e,Fd=r}function $r(t,n){return!(!t||!fv.hasOwnProperty(t.type))&&fv[t.type](t,n)}function Vr(t,n){return 0===cv(t,n)}function Wr(t,n){var e=cv(t[0],t[1]);return cv(t[0],n)+cv(n,t[1])<=e+ad}function Zr(t,n){return!!ev(t.map(Gr),Jr(n))}function Gr(t){return(t=t.map(Jr)).pop(),t}function Jr(t){return[t[0]*pd,t[1]*pd]}function Qr(t,n,e){var r=Ms(t,n-ad,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function Kr(t,n,e){var r=Ms(t,n-ad,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function ti(){function t(){return{type:\"MultiLineString\",coordinates:n()}}function n(){return Ms(gd(o/_)*_,i,_).map(h).concat(Ms(gd(s/y)*y,c,y).map(p)).concat(Ms(gd(r/d)*d,e,d).filter(function(t){return dd(t%_)>ad}).map(f)).concat(Ms(gd(a/v)*v,u,v).filter(function(t){return dd(t%y)>ad}).map(l))}var e,r,i,o,u,a,c,s,f,l,h,p,d=10,v=d,_=90,y=360,g=2.5;return t.lines=function(){return n().map(function(t){return{type:\"LineString\",coordinates:t}})},t.outline=function(){return{type:\"Polygon\",coordinates:[h(o).concat(p(c).slice(1),h(i).reverse().slice(1),p(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],c=+n[1][1],o>i&&(n=o,o=i,i=n),s>c&&(n=s,s=c,c=n),t.precision(g)):[[o,s],[i,c]]},t.extentMinor=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],a=+n[0][1],u=+n[1][1],r>e&&(n=r,r=e,e=n),a>u&&(n=a,a=u,u=n),t.precision(g)):[[r,a],[e,u]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(_=+n[0],y=+n[1],t):[_,y]},t.stepMinor=function(n){return arguments.length?(d=+n[0],v=+n[1],t):[d,v]},t.precision=function(n){return arguments.length?(g=+n,f=Qr(a,u,90),l=Kr(r,e,g),h=Qr(s,c,90),p=Kr(o,i,g),t):g},t.extentMajor([[-180,-90+ad],[180,90-ad]]).extentMinor([[-180,-80-ad],[180,80+ad]])}function ni(){dv.point=ei}function ei(t,n){dv.point=ri,Id=Bd=t,Yd=jd=n}function ri(t,n){pv.add(jd*t-Bd*n),Bd=t,jd=n}function ii(){ri(Id,Yd)}function oi(t,n){xv+=t,bv+=n,++wv}function ui(){Av.point=ai}function ai(t,n){Av.point=ci,oi($d=t,Vd=n)}function ci(t,n){var e=t-$d,r=n-Vd,i=Td(e*e+r*r);Mv+=i*($d+t)/2,Tv+=i*(Vd+n)/2,kv+=i,oi($d=t,Vd=n)}function si(){Av.point=oi}function fi(){Av.point=hi}function li(){pi(Hd,Xd)}function hi(t,n){Av.point=pi,oi(Hd=$d=t,Xd=Vd=n)}function pi(t,n){var e=t-$d,r=n-Vd,i=Td(e*e+r*r);Mv+=i*($d+t)/2,Tv+=i*(Vd+n)/2,kv+=i,Nv+=(i=Vd*t-$d*n)*($d+t),Sv+=i*(Vd+n),Ev+=3*i,oi($d=t,Vd=n)}function di(t){this._context=t}function vi(t,n){Uv.point=_i,zv=Rv=t,Pv=Lv=n}function _i(t,n){Rv-=t,Lv-=n,qv.add(Td(Rv*Rv+Lv*Lv)),Rv=t,Lv=n}function yi(){this._string=[]}function gi(t){return\"m0,\"+t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+-2*t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+2*t+\"z\"}function mi(t){return t.length>1}function xi(t,n){return((t=t.x)[0]<0?t[1]-sd-ad:sd-t[1])-((n=n.x)[0]<0?n[1]-sd-ad:sd-n[1])}function bi(t,n,e,r){var i,o,u=wd(t-e);return dd(u)>ad?vd((wd(n)*(o=yd(r))*wd(e)-wd(r)*(i=yd(n))*wd(t))/(i*o*u)):(n+r)/2}function wi(t){return function(n){var e=new Mi;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Mi(){}function Ti(t,n,e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Ed(e,t.stream(mv));var u=mv.result(),a=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),c=+n[0][0]+(r-a*(u[1][0]+u[0][0]))/2,s=+n[0][1]+(i-a*(u[1][1]+u[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([c,s])}function ki(t,n,e){return Ti(t,[[0,0],n],e)}function Ni(t){return wi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function Si(t,n){function e(r,i,o,u,a,c,s,f,l,h,p,d,v,_){var y=s-r,g=f-i,m=y*y+g*g;if(m>4*n&&v--){var x=u+h,b=a+p,w=c+d,M=Td(x*x+b*b+w*w),T=Ge(w/=M),k=dd(dd(w)-1)<ad||dd(o-l)<ad?(o+l)/2:_d(b,x),N=t(k,T),S=N[0],E=N[1],A=S-r,C=E-i,z=g*A-y*C;(z*z/m>n||dd((y*A+g*C)/m-.5)>.3||u*h+a*p+c*d<Yv)&&(e(r,i,o,u,a,c,S,E,k,x/=M,b/=M,w,v,_),_.point(S,E),e(S,E,k,x,b,w,s,f,l,h,p,d,v,_))}}return function(n){function r(e,r){e=t(e,r),n.point(e[0],e[1])}function i(){y=NaN,w.point=o,n.lineStart()}function o(r,i){var o=ar([r,i]),u=t(r,i);e(y,g,_,m,x,b,y=u[0],g=u[1],_=r,m=o[0],x=o[1],b=o[2],Iv,n),n.point(y,g)}function u(){w.point=r,n.lineEnd()}function a(){i(),w.point=c,w.lineEnd=s}function c(t,n){o(f=t,n),l=y,h=g,p=m,d=x,v=b,w.point=o}function s(){e(y,g,_,m,x,b,l,h,f,p,d,v,Iv,n),w.lineEnd=u,u()}var f,l,h,p,d,v,_,y,g,m,x,b,w={point:r,lineStart:i,lineEnd:u,polygonStart:function(){n.polygonStart(),w.lineStart=a},polygonEnd:function(){n.polygonEnd(),w.lineStart=i}};return w}}function Ei(t){return Ai(function(){return t})()}function Ai(t){function n(t){return t=f(t[0]*pd,t[1]*pd),[t[0]*_+a,c-t[1]*_]}function e(t){return(t=f.invert((t[0]-a)/_,(c-t[1])/_))&&[t[0]*hd,t[1]*hd]}function r(t,n){return t=u(t,n),[t[0]*_+a,c-t[1]*_]}function i(){f=Ud(s=Lr(b,w,M),u);var t=u(m,x);return a=y-t[0]*_,c=g+t[1]*_,o()}function o(){return d=v=null,n}var u,a,c,s,f,l,h,p,d,v,_=150,y=480,g=250,m=0,x=0,b=0,w=0,M=0,T=null,k=Ov,N=null,S=lv,E=.5,A=Bv(r,E);return n.stream=function(t){return d&&v===t?d:d=jv(k(s,A(S(v=t))))},n.clipAngle=function(t){return arguments.length?(k=+t?Fv(T=t*pd,6*pd):(T=null,Ov),o()):T*hd},n.clipExtent=function(t){return arguments.length?(S=null==t?(N=l=h=p=null,lv):Br(N=+t[0][0],l=+t[0][1],h=+t[1][0],p=+t[1][1]),o()):null==N?null:[[N,l],[h,p]]},n.scale=function(t){return arguments.length?(_=+t,i()):_},n.translate=function(t){return arguments.length?(y=+t[0],g=+t[1],i()):[y,g]},n.center=function(t){return arguments.length?(m=t[0]%360*pd,x=t[1]%360*pd,i()):[m*hd,x*hd]},n.rotate=function(t){return arguments.length?(b=t[0]%360*pd,w=t[1]%360*pd,M=t.length>2?t[2]%360*pd:0,i()):[b*hd,w*hd,M*hd]},n.precision=function(t){return arguments.length?(A=Bv(r,E=t*t),o()):Td(E)},n.fitExtent=function(t,e){return Ti(n,t,e)},n.fitSize=function(t,e){return ki(n,t,e)},function(){return u=t.apply(this,arguments),n.invert=u.invert&&e,i()}}function Ci(t){var n=0,e=cd/3,r=Ai(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*pd,e=t[1]*pd):[n*hd,e*hd]},i}function zi(t){function n(t,n){return[t*e,wd(n)/e]}var e=yd(t);return n.invert=function(t,n){return[t/e,Ge(n*e)]},n}function Pi(t,n){function e(t,n){var e=Td(o-2*i*wd(n))/i;return[e*wd(t*=i),u-e*yd(t)]}var r=wd(t),i=(r+wd(n))/2;if(dd(i)<ad)return zi(t);var o=1+r*(2*i-r),u=Td(o)/i;return e.invert=function(t,n){var e=u-n;return[_d(t,dd(e))/i*Md(e),Ge((o-(t*t+e*e)*i*i)/(2*i))]},e}function Ri(t){var n=t.length;return{point:function(e,r){for(var i=-1;++i<n;)t[i].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function Li(t){return function(n,e){var r=yd(n),i=yd(e),o=t(r*i);return[o*i*wd(n),o*wd(e)]}}function qi(t){return function(n,e){var r=Td(n*n+e*e),i=t(r),o=wd(i),u=yd(i);return[_d(n*o,r*u),Ge(r&&e*o/r)]}}function Ui(t,n){return[t,xd(kd((sd+n)/2))]}function Di(t){function n(){var n=cd*a(),u=o(Wd(o.rotate()).invert([0,0]));return s(null==f?[[u[0]-n,u[1]-n],[u[0]+n,u[1]+n]]:t===Ui?[[Math.max(u[0]-n,f),e],[Math.min(u[0]+n,r),i]]:[[f,Math.max(u[1]-n,e)],[r,Math.min(u[1]+n,i)]])}var e,r,i,o=Ei(t),u=o.center,a=o.scale,c=o.translate,s=o.clipExtent,f=null;return o.scale=function(t){return arguments.length?(a(t),n()):a()},o.translate=function(t){return arguments.length?(c(t),n()):c()},o.center=function(t){return arguments.length?(u(t),n()):u()},o.clipExtent=function(t){return arguments.length?(null==t?f=e=r=i=null:(f=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),n()):null==f?null:[[f,e],[r,i]]},n()}function Oi(t){return kd((sd+t)/2)}function Fi(t,n){function e(t,n){o>0?n<-sd+ad&&(n=-sd+ad):n>sd-ad&&(n=sd-ad);var e=o/bd(Oi(n),i);return[e*wd(i*t),o-e*yd(i*t)]}var r=yd(t),i=t===n?wd(t):xd(r/yd(n))/xd(Oi(n)/Oi(t)),o=r*bd(Oi(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=Md(i)*Td(t*t+e*e);return[_d(t,dd(e))/i*Md(e),2*vd(bd(o/r,1/i))-sd]},e):Ui}function Ii(t,n){return[t,n]}function Yi(t,n){function e(t,n){var e=o-n,r=i*t;return[e*wd(r),o-e*yd(r)]}var r=yd(t),i=t===n?wd(t):(r-yd(n))/(n-t),o=r/i+t;return dd(i)<ad?Ii:(e.invert=function(t,n){var e=o-n;return[_d(t,dd(e))/i*Md(e),o-Md(i)*Td(t*t+e*e)]},e)}function Bi(t,n){var e=yd(n),r=yd(t)*e;return[e*wd(t)/r,wd(n)/r]}function ji(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?lv:wi({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function Hi(t,n){return[yd(n)*wd(t),wd(n)]}function Xi(t,n){var e=yd(n),r=1+yd(t)*e;return[e*wd(t)/r,wd(n)/r]}function $i(t,n){return[xd(kd((sd+n)/2)),-t]}function Vi(t,n){return t.parent===n.parent?1:2}function Wi(t){return t.reduce(Zi,0)/t.length}function Zi(t,n){return t+n.x}function Gi(t){return 1+t.reduce(Ji,0)}function Ji(t,n){return Math.max(t,n.y)}function Qi(t){for(var n;n=t.children;)t=n[0];return t}function Ki(t){for(var n;n=t.children;)t=n[n.length-1];return t}function to(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function no(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function eo(t,n){var e,r,i,o,u,a=new uo(t),c=+t.value&&(a.value=t.value),s=[a];for(null==n&&(n=ro);e=s.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(u=i.length))for(e.children=new Array(u),o=u-1;o>=0;--o)s.push(r=e.children[o]=new uo(i[o])),r.parent=e,r.depth=e.depth+1;return a.eachBefore(oo)}function ro(t){return t.children}function io(t){t.data=t.data.data}function oo(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function uo(t){this.data=t,this.depth=this.height=0,this.parent=null}function ao(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}function co(t,n){var e,r;if(lo(n,t))return[n];for(e=0;e<t.length;++e)if(so(n,t[e])&&lo(vo(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(so(vo(t[e],t[r]),n)&&so(vo(t[e],n),t[r])&&so(vo(t[r],n),t[e])&&lo(_o(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function so(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function fo(t,n){var e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function lo(t,n){for(var e=0;e<n.length;++e)if(!fo(t,n[e]))return!1;return!0}function ho(t){switch(t.length){case 1:return po(t[0]);case 2:return vo(t[0],t[1]);case 3:return _o(t[0],t[1],t[2])}}function po(t){return{x:t.x,y:t.y,r:t.r}}function vo(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,u=n.y,a=n.r,c=o-e,s=u-r,f=a-i,l=Math.sqrt(c*c+s*s);return{x:(e+o+c/l*f)/2,y:(r+u+s/l*f)/2,r:(l+i+a)/2}}function _o(t,n,e){var r=t.x,i=t.y,o=t.r,u=n.x,a=n.y,c=n.r,s=e.x,f=e.y,l=e.r,h=r-u,p=r-s,d=i-a,v=i-f,_=c-o,y=l-o,g=r*r+i*i-o*o,m=g-u*u-a*a+c*c,x=g-s*s-f*f+l*l,b=p*d-h*v,w=(d*x-v*m)/(2*b)-r,M=(v*_-d*y)/b,T=(p*m-h*x)/(2*b)-i,k=(h*y-p*_)/b,N=M*M+k*k-1,S=2*(o+w*M+T*k),E=w*w+T*T-o*o,A=-(N?(S+Math.sqrt(S*S-4*N*E))/(2*N):E/S);return{x:r+w+M*A,y:i+T+k*A,r:A}}function yo(t,n,e){var r=t.x,i=t.y,o=n.r+e.r,u=t.r+e.r,a=n.x-r,c=n.y-i,s=a*a+c*c;if(s){var f=.5+((u*=u)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(u+s)-(u-=s)*u-o*o))/(2*s);e.x=r+f*a+l*c,e.y=i+f*c-l*a}else e.x=r+u,e.y=i}function go(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return i*i-1e-6>e*e+r*r}function mo(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function xo(t){this._=t,this.next=null,this.previous=null}function bo(t){if(!(i=t.length))return 0;var n,e,r,i,o,u,a,c,s,f,l;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;yo(e,n,r=t[2]),n=new xo(n),e=new xo(e),r=new xo(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(a=3;a<i;++a){yo(n._,e._,r=t[a]),r=new xo(r),c=e.next,s=n.previous,f=e._.r,l=n._.r;do{if(f<=l){if(go(c._,r._)){e=c,n.next=e,e.previous=n,--a;continue t}f+=c._.r,c=c.next}else{if(go(s._,r._)){(n=s).next=e,e.previous=n,--a;continue t}l+=s._.r,s=s.previous}}while(c!==s.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=mo(n);(r=r.next)!==e;)(u=mo(r))<o&&(n=r,o=u);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=Zv(n),a=0;a<i;++a)n=t[a],n.x-=r.x,n.y-=r.y;return r.r}function wo(t){return null==t?null:Mo(t)}function Mo(t){if(\"function\"!=typeof t)throw new Error;return t}function To(){return 0}function ko(t){return Math.sqrt(t.value)}function No(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function So(t,n){return function(e){if(r=e.children){var r,i,o,u=r.length,a=t(e)*n||0;if(a)for(i=0;i<u;++i)r[i].r+=a;if(o=bo(r),a)for(i=0;i<u;++i)r[i].r-=a;e.r=o+a}}}function Eo(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function Ao(t){return t.id}function Co(t){return t.parentId}function zo(t,n){return t.parent===n.parent?1:2}function Po(t){var n=t.children;return n?n[0]:t.t}function Ro(t){var n=t.children;return n?n[n.length-1]:t.t}function Lo(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function qo(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Uo(t,n,e){return t.a.parent===n.parent?t.a:e}function Do(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function Oo(t){for(var n,e,r,i,o,u=new Do(t,0),a=[u];n=a.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)a.push(e=n.children[i]=new Do(r[i],i)),e.parent=n;return(u.parent=new Do(null,0)).children=[u],u}function Fo(t,n,e,r,i,o){for(var u,a,c,s,f,l,h,p,d,v,_,y=[],g=n.children,m=0,x=0,b=g.length,w=n.value;m<b;){c=i-e,s=o-r;do{f=g[x++].value}while(!f&&x<b);for(l=h=f,_=f*f*(v=Math.max(s/c,c/s)/(w*t)),d=Math.max(h/_,_/l);x<b;++x){if(f+=a=g[x].value,a<l&&(l=a),a>h&&(h=a),_=f*f*v,(p=Math.max(h/_,_/l))>d){f-=a;break}d=p}y.push(u={value:f,dice:c<s,children:g.slice(m,x)}),u.dice?Qv(u,e,r,i,w?r+=s*f/w:o):e_(u,e,r,w?e+=c*f/w:i,o),w-=f,m=x}return y}function Io(t,n){return t[0]-n[0]||t[1]-n[1]}function Yo(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;++i){for(;r>1&&u_(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Bo(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function jo(t){if(!t._start)try{Ho(t)}catch(n){if(t._tasks[t._ended+t._active-1])$o(t,n);else if(!t._data)throw n}}function Ho(t){for(;t._start=t._waiting&&t._active<t._size;){var n=t._ended+t._active,e=t._tasks[n],r=e.length-1,i=e[r];e[r]=Xo(t,n),--t._waiting,++t._active,e=i.apply(null,e),t._tasks[n]&&(t._tasks[n]=e||c_)}}function Xo(t,n){return function(e,r){t._tasks[n]&&(--t._active,++t._ended,t._tasks[n]=null,null==t._error&&(null!=e?$o(t,e):(t._data[n]=r,t._waiting?jo(t):Vo(t))))}}function $o(t,n){var e,r=t._tasks.length;for(t._error=n,t._data=void 0,t._waiting=NaN;--r>=0;)if((e=t._tasks[r])&&(t._tasks[r]=null,e.abort))try{e.abort()}catch(n){}t._active=NaN,Vo(t)}function Vo(t){if(!t._active&&t._call){var n=t._data;t._data=void 0,t._call(t._error,n)}}function Wo(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error(\"invalid concurrency\");return new Bo(t)}function Zo(t){return function(n,e){t(null==n?e:null)}}function Go(t){var n=t.responseType;return n&&\"text\"!==n?t.response:t.responseText}function Jo(t,n){return function(e){return t(e.responseText,n)}}function Qo(t){function n(n){var o=n+\"\",u=e.get(o);if(!u){if(i!==E_)return i;e.set(o,u=r.push(n))}return t[(u-1)%t.length]}var e=we(),r=[],i=E_;return t=null==t?[]:S_.call(t),n.domain=function(t){if(!arguments.length)return r.slice();r=[],e=we();for(var i,o,u=-1,a=t.length;++u<a;)e.has(o=(i=t[u])+\"\")||e.set(o,r.push(i));return n},n.range=function(e){return arguments.length?(t=S_.call(e),n):t.slice()},n.unknown=function(t){return arguments.length?(i=t,n):i},n.copy=function(){return Qo().domain(r).range(t).unknown(i)},n}function Ko(){function t(){var t=i().length,r=u[1]<u[0],l=u[r-0],h=u[1-r];n=(h-l)/Math.max(1,t-c+2*s),a&&(n=Math.floor(n)),l+=(h-l-n*(t-c))*f,e=n*(1-c),a&&(l=Math.round(l),e=Math.round(e));var p=Ms(t).map(function(t){return l+n*t});return o(r?p.reverse():p)}var n,e,r=Qo().unknown(void 0),i=r.domain,o=r.range,u=[0,1],a=!1,c=0,s=0,f=.5;return delete r.unknown,r.domain=function(n){return arguments.length?(i(n),t()):i()},r.range=function(n){return arguments.length?(u=[+n[0],+n[1]],t()):u.slice()},r.rangeRound=function(n){return u=[+n[0],+n[1]],a=!0,t()},r.bandwidth=function(){return e},r.step=function(){return n},r.round=function(n){return arguments.length?(a=!!n,t()):a},r.padding=function(n){return arguments.length?(c=s=Math.max(0,Math.min(1,n)),t()):c},r.paddingInner=function(n){return arguments.length?(c=Math.max(0,Math.min(1,n)),t()):c},r.paddingOuter=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),t()):s},r.align=function(n){return arguments.length?(f=Math.max(0,Math.min(1,n)),t()):f},r.copy=function(){return Ko().domain(i()).range(u).round(a).paddingInner(c).paddingOuter(s).align(f)},t()}function tu(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return tu(n())},t}function nu(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:A_(n)}function eu(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=n?0:t>=e?1:r(t)}}}function ru(t){return function(n,e){var r=t(n=+n,e=+e);return function(t){return t<=0?n:t>=1?e:r(t)}}}function iu(t,n,e,r){var i=t[0],o=t[1],u=n[0],a=n[1];return o<i?(i=e(o,i),u=r(a,u)):(i=e(i,o),u=r(u,a)),function(t){return u(i(t))}}function ou(t,n,e,r){var i=Math.min(t.length,n.length)-1,o=new Array(i),u=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<i;)o[a]=e(t[a],t[a+1]),u[a]=r(n[a],n[a+1]);return function(n){var e=hs(t,n,1,i)-1;return u[e](o[e](n))}}function uu(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function au(t,n){function e(){return i=Math.min(a.length,c.length)>2?ou:iu,o=u=null,r}function r(n){return(o||(o=i(a,c,f?eu(t):t,s)))(+n)}var i,o,u,a=z_,c=z_,s=cl,f=!1;return r.invert=function(t){return(u||(u=i(c,a,nu,f?ru(n):n)))(+t)},r.domain=function(t){return arguments.length?(a=N_.call(t,C_),e()):a.slice()},r.range=function(t){return arguments.length?(c=S_.call(t),e()):c.slice()},r.rangeRound=function(t){return c=S_.call(t),s=sl,e()},r.clamp=function(t){return arguments.length?(f=!!t,e()):f},r.interpolate=function(t){return arguments.length?(s=t,e()):s},e()}function cu(t){var n=t.domain;return t.ticks=function(t){var e=n();return Ss(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){return P_(n(),t,e)},t.nice=function(e){null==e&&(e=10);var i,o=n(),u=0,a=o.length-1,c=o[u],s=o[a];return s<c&&(i=c,c=s,s=i,i=u,u=a,a=i),(i=r(c,s,e))>0?i=r(c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i,e):i<0&&(i=r(c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i,e)),i>0?(o[u]=Math.floor(c/i)*i,o[a]=Math.ceil(s/i)*i,n(o)):i<0&&(o[u]=Math.ceil(c*i)/i,o[a]=Math.floor(s*i)/i,n(o)),t},t}function su(){var t=au(nu,rl);return t.copy=function(){return uu(t,su())},cu(t)}function fu(){function t(t){return+t}var n=[0,1];return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=N_.call(e,C_),t):n.slice()},t.copy=function(){return fu().domain(n)},cu(t)}function lu(t,n){return(n=Math.log(n/t))?function(e){return Math.log(e/t)/n}:A_(n)}function hu(t,n){return t<0?function(e){return-Math.pow(-n,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(n,e)*Math.pow(t,1-e)}}function pu(t){return isFinite(t)?+(\"1e\"+t):t<0?0:t}function du(t){return 10===t?pu:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}function vu(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}function _u(t){return function(n){return-t(-n)}}function yu(){function n(){return o=vu(i),u=du(i),r()[0]<0&&(o=_u(o),u=_u(u)),e}var e=au(lu,hu).domain([1,10]),r=e.domain,i=10,o=vu(10),u=du(10);return e.base=function(t){return arguments.length?(i=+t,n()):i},e.domain=function(t){return arguments.length?(r(t),n()):r()},e.ticks=function(t){var n,e=r(),a=e[0],c=e[e.length-1];(n=c<a)&&(h=a,a=c,c=h);var s,f,l,h=o(a),p=o(c),d=null==t?10:+t,v=[];if(!(i%1)&&p-h<d){if(h=Math.round(h)-1,p=Math.round(p)+1,a>0){for(;h<p;++h)for(f=1,s=u(h);f<i;++f)if(!((l=s*f)<a)){if(l>c)break;v.push(l)}}else for(;h<p;++h)for(f=i-1,s=u(h);f>=1;--f)if(!((l=s*f)<a)){if(l>c)break;v.push(l)}}else v=Ss(h,p,Math.min(p-h,d)).map(u);return n?v.reverse():v},e.tickFormat=function(n,r){if(null==r&&(r=10===i?\".0e\":\",\"),\"function\"!=typeof r&&(r=t.format(r)),n===1/0)return r;null==n&&(n=10);var a=Math.max(1,i*n/e.ticks().length);return function(t){var n=t/u(Math.round(o(t)));return n*i<i-.5&&(n*=i),n<=a?r(t):\"\"}},e.nice=function(){return r(R_(r(),{floor:function(t){return u(Math.floor(o(t)))},ceil:function(t){return u(Math.ceil(o(t)))}}))},e.copy=function(){return uu(e,yu().base(i))},e}function gu(t,n){return t<0?-Math.pow(-t,n):Math.pow(t,n)}function mu(){var t=1,n=au(function(n,e){return(e=gu(e,t)-(n=gu(n,t)))?function(r){return(gu(r,t)-n)/e}:A_(e)},function(n,e){return e=gu(e,t)-(n=gu(n,t)),function(r){return gu(n+e*r,1/t)}}),e=n.domain;return n.exponent=function(n){return arguments.length?(t=+n,e(e())):t},n.copy=function(){return uu(n,mu().exponent(t))},cu(n)}function xu(){function t(){var t=0,o=Math.max(1,r.length);for(i=new Array(o-1);++t<o;)i[t-1]=As(e,t/o);return n}function n(t){if(!isNaN(t=+t))return r[hs(i,t)]}var e=[],r=[],i=[];return n.invertExtent=function(t){var n=r.indexOf(t);return n<0?[NaN,NaN]:[n>0?i[n-1]:e[0],n<i.length?i[n]:e[e.length-1]]},n.domain=function(n){if(!arguments.length)return e.slice();e=[];for(var r,i=0,o=n.length;i<o;++i)null==(r=n[i])||isNaN(r=+r)||e.push(r);return e.sort(ss),t()},n.range=function(n){return arguments.length?(r=S_.call(n),t()):r.slice()},n.quantiles=function(){return i.slice()},n.copy=function(){return xu().domain(e).range(r)},n}function bu(){function t(t){if(t<=t)return u[hs(o,t,0,i)]}function n(){var n=-1;for(o=new Array(i);++n<i;)o[n]=((n+1)*r-(n-i)*e)/(i+1);return t}var e=0,r=1,i=1,o=[.5],u=[0,1];return t.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n()):[e,r]},t.range=function(t){return arguments.length?(i=(u=S_.call(t)).length-1,n()):u.slice()},t.invertExtent=function(t){var n=u.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,o[0]]:n>=i?[o[i-1],r]:[o[n-1],o[n]]},t.copy=function(){return bu().domain([e,r]).range(u)},cu(t)}function wu(){function t(t){if(t<=t)return e[hs(n,t,0,r)]}var n=[.5],e=[0,1],r=1;return t.domain=function(i){return arguments.length?(n=S_.call(i),r=Math.min(n.length,e.length-1),t):n.slice()},t.range=function(i){return arguments.length?(e=S_.call(i),r=Math.min(n.length,e.length-1),t):e.slice()},t.invertExtent=function(t){var r=e.indexOf(t);return[n[r-1],n[r]]},t.copy=function(){return wu().domain(n).range(e)},t}function Mu(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(new Date(+e))}while(n(e,o),t(e),e<r);return u},i.filter=function(e){return Mu(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return L_.setTime(+n),q_.setTime(+r),t(L_),t(q_),Math.floor(e(L_,q_))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}function Tu(t){return Mu(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*O_)/F_})}function ku(t){return Mu(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/F_})}function Nu(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Su(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Eu(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Au(t){function n(t,n){return function(e){var r,i,o,u=[],a=-1,c=0,s=t.length;for(e instanceof Date||(e=new Date(+e));++a<s;)37===t.charCodeAt(a)&&(u.push(t.slice(c,a)),null!=(i=Dy[r=t.charAt(++a)])?r=t.charAt(++a):i=\"e\"===r?\" \":\"0\",(o=n[r])&&(r=o(e,i)),u.push(r),c=a+1);return u.push(t.slice(c,a)),u.join(\"\")}}function e(t,n){return function(e){var i=Eu(1900);if(r(i,t,e+=\"\",0)!=e.length)return null;if(\"p\"in i&&(i.H=i.H%12+12*i.p),\"W\"in i||\"U\"in i){\"w\"in i||(i.w=\"W\"in i?1:0);var o=\"Z\"in i?Su(Eu(i.y)).getUTCDay():n(Eu(i.y)).getDay();i.m=0,i.d=\"W\"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7}return\"Z\"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Su(i)):n(i)}}function r(t,n,e,r){for(var i,o,u=0,a=n.length,c=e.length;u<a;){if(r>=c)return-1;if(37===(i=n.charCodeAt(u++))){if(i=n.charAt(u++),!(o=T[i in Dy?n.charAt(u++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}var i=t.dateTime,o=t.date,u=t.time,a=t.periods,c=t.days,s=t.shortDays,f=t.months,l=t.shortMonths,h=Pu(a),p=Ru(a),d=Pu(c),v=Ru(c),_=Pu(s),y=Ru(s),g=Pu(f),m=Ru(f),x=Pu(l),b=Ru(l),w={a:function(t){return s[t.getDay()]},A:function(t){return c[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return f[t.getMonth()]},c:null,d:Wu,e:Wu,H:Zu,I:Gu,j:Ju,L:Qu,m:Ku,M:ta,p:function(t){return a[+(t.getHours()>=12)]},S:na,U:ea,w:ra,W:ia,x:null,X:null,y:oa,Y:ua,Z:aa,\"%\":wa},M={a:function(t){return s[t.getUTCDay()]},A:function(t){return c[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return f[t.getUTCMonth()]},c:null,d:ca,e:ca,H:sa,I:fa,j:la,L:ha,m:pa,M:da,p:function(t){return a[+(t.getUTCHours()>=12)]},S:va,U:_a,w:ya,W:ga,x:null,X:null,y:ma,Y:xa,Z:ba,\"%\":wa},T={a:function(t,n,e){var r=_.exec(n.slice(e));return r?(t.w=y[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=v[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=x.exec(n.slice(e));return r?(t.m=b[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=m[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,n,e){return r(t,i,n,e)},d:Yu,e:Yu,H:ju,I:ju,j:Bu,L:$u,m:Iu,M:Hu,p:function(t,n,e){var r=h.exec(n.slice(e));return r?(t.p=p[r[0].toLowerCase()],e+r[0].length):-1},S:Xu,U:qu,w:Lu,W:Uu,x:function(t,n,e){return r(t,o,n,e)},X:function(t,n,e){return r(t,u,n,e)},y:Ou,Y:Du,Z:Fu,\"%\":Vu};return w.x=n(o,w),w.X=n(u,w),w.c=n(i,w),M.x=n(o,M),M.X=n(u,M),M.c=n(i,M),{format:function(t){var e=n(t+=\"\",w);return e.toString=function(){return t},e},parse:function(t){var n=e(t+=\"\",Nu);return n.toString=function(){return t},n},utcFormat:function(t){var e=n(t+=\"\",M);return e.toString=function(){return t},e},utcParse:function(t){var n=e(t,Su);return n.toString=function(){return t},n}}}function Cu(t,n,e){var r=t<0?\"-\":\"\",i=(r?-t:t)+\"\",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function zu(t){return t.replace(Iy,\"\\\\$&\")}function Pu(t){return new RegExp(\"^(?:\"+t.map(zu).join(\"|\")+\")\",\"i\")}function Ru(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function Lu(t,n,e){var r=Oy.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function qu(t,n,e){var r=Oy.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Uu(t,n,e){var r=Oy.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Du(t,n,e){var r=Oy.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Ou(t,n,e){var r=Oy.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Fu(t,n,e){var r=/^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||\"00\")),e+r[0].length):-1}function Iu(t,n,e){var r=Oy.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Yu(t,n,e){var r=Oy.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Bu(t,n,e){var r=Oy.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function ju(t,n,e){var r=Oy.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Hu(t,n,e){var r=Oy.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function Xu(t,n,e){var r=Oy.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function $u(t,n,e){var r=Oy.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Vu(t,n,e){var r=Fy.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Wu(t,n){return Cu(t.getDate(),n,2)}function Zu(t,n){return Cu(t.getHours(),n,2)}function Gu(t,n){return Cu(t.getHours()%12||12,n,2)}function Ju(t,n){return Cu(1+$_.count(fy(t),t),n,3)}function Qu(t,n){return Cu(t.getMilliseconds(),n,3)}function Ku(t,n){return Cu(t.getMonth()+1,n,2)}function ta(t,n){return Cu(t.getMinutes(),n,2)}function na(t,n){return Cu(t.getSeconds(),n,2)}function ea(t,n){return Cu(W_.count(fy(t),t),n,2)}function ra(t){return t.getDay()}function ia(t,n){return Cu(Z_.count(fy(t),t),n,2)}function oa(t,n){return Cu(t.getFullYear()%100,n,2)}function ua(t,n){return Cu(t.getFullYear()%1e4,n,4)}function aa(t){var n=t.getTimezoneOffset();return(n>0?\"-\":(n*=-1,\"+\"))+Cu(n/60|0,\"0\",2)+Cu(n%60,\"0\",2)}function ca(t,n){return Cu(t.getUTCDate(),n,2)}function sa(t,n){return Cu(t.getUTCHours(),n,2)}function fa(t,n){return Cu(t.getUTCHours()%12||12,n,2)}function la(t,n){return Cu(1+_y.count(Ly(t),t),n,3)}function ha(t,n){return Cu(t.getUTCMilliseconds(),n,3)}function pa(t,n){return Cu(t.getUTCMonth()+1,n,2)}function da(t,n){return Cu(t.getUTCMinutes(),n,2)}function va(t,n){return Cu(t.getUTCSeconds(),n,2)}function _a(t,n){return Cu(gy.count(Ly(t),t),n,2)}function ya(t){return t.getUTCDay()}function ga(t,n){return Cu(my.count(Ly(t),t),n,2)}function ma(t,n){return Cu(t.getUTCFullYear()%100,n,2)}function xa(t,n){return Cu(t.getUTCFullYear()%1e4,n,4)}function ba(){return\"+0000\"}function wa(){return\"%\"}function Ma(n){return qy=Au(n),t.timeFormat=qy.format,t.timeParse=qy.parse,t.utcFormat=qy.utcFormat,t.utcParse=qy.utcParse,qy}function Ta(t){return new Date(t)}function ka(t){return t instanceof Date?+t:+new Date(+t)}function Na(t,n,e,r,o,u,a,c,s){function f(i){return(a(i)<i?v:u(i)<i?_:o(i)<i?y:r(i)<i?g:n(i)<i?e(i)<i?m:x:t(i)<i?b:w)(i)}function l(n,e,r,o){if(null==n&&(n=10),\"number\"==typeof n){var u=Math.abs(r-e)/n,a=fs(function(t){return t[2]}).right(M,u);a===M.length?(o=i(e/Zy,r/Zy,n),n=t):a?(o=(a=M[u/M[a-1][2]<M[a][2]/u?a-1:a])[1],n=a[0]):(o=i(e,r,n),n=c)}return null==o?n:n.every(o)}var h=au(nu,rl),p=h.invert,d=h.domain,v=s(\".%L\"),_=s(\":%S\"),y=s(\"%I:%M\"),g=s(\"%I %p\"),m=s(\"%a %d\"),x=s(\"%b %d\"),b=s(\"%B\"),w=s(\"%Y\"),M=[[a,1,jy],[a,5,5*jy],[a,15,15*jy],[a,30,30*jy],[u,1,Hy],[u,5,5*Hy],[u,15,15*Hy],[u,30,30*Hy],[o,1,Xy],[o,3,3*Xy],[o,6,6*Xy],[o,12,12*Xy],[r,1,$y],[r,2,2*$y],[e,1,Vy],[n,1,Wy],[n,3,3*Wy],[t,1,Zy]];return h.invert=function(t){return new Date(p(t))},h.domain=function(t){return arguments.length?d(N_.call(t,ka)):d().map(Ta)},h.ticks=function(t,n){var e,r=d(),i=r[0],o=r[r.length-1],u=o<i;return u&&(e=i,i=o,o=e),e=l(t,i,o,n),e=e?e.range(i,o+1):[],u?e.reverse():e},h.tickFormat=function(t,n){return null==n?f:s(n)},h.nice=function(t,n){var e=d();return(t=l(t,e[0],e[e.length-1],n))?d(R_(e,t)):h},h.copy=function(){return uu(h,Na(t,n,e,r,o,u,a,c,s))},h}function Sa(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}function Ea(t){function n(n){var o=(n-e)/(r-e);return t(i?Math.max(0,Math.min(1,o)):o)}var e=0,r=1,i=!1;return n.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.clamp=function(t){return arguments.length?(i=!!t,n):i},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return Ea(t).domain([e,r]).clamp(i)},cu(n)}function Aa(t){return t>1?0:t<-1?gg:Math.acos(t)}function Ca(t){return t>=1?mg:t<=-1?-mg:Math.asin(t)}function za(t){return t.innerRadius}function Pa(t){return t.outerRadius}function Ra(t){return t.startAngle}function La(t){return t.endAngle}function qa(t){return t&&t.padAngle}function Ua(t,n,e,r,i,o,u,a){var c=e-t,s=r-n,f=u-i,l=a-o,h=(f*(n-o)-l*(t-i))/(l*c-f*s);return[t+h*c,n+h*s]}function Da(t,n,e,r,i,o,u){var a=t-e,c=n-r,s=(u?o:-o)/_g(a*a+c*c),f=s*c,l=-s*a,h=t+f,p=n+l,d=e+f,v=r+l,_=(h+d)/2,y=(p+v)/2,g=d-h,m=v-p,x=g*g+m*m,b=i-o,w=h*v-d*p,M=(m<0?-1:1)*_g(pg(0,b*b*x-w*w)),T=(w*m-g*M)/x,k=(-w*g-m*M)/x,N=(w*m+g*M)/x,S=(-w*g+m*M)/x,E=T-_,A=k-y,C=N-_,z=S-y;return E*E+A*A>C*C+z*z&&(T=N,k=S),{cx:T,cy:k,x01:-f,y01:-l,x11:T*(i/b-1),y11:k*(i/b-1)}}function Oa(t){this._context=t}function Fa(t){return t[0]}function Ia(t){return t[1]}function Ya(t){this._curve=t}function Ba(t){function n(n){return new Ya(t(n))}return n._curve=t,n}function ja(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Ba(t)):n()._curve},t}function Ha(t){return t.source}function Xa(t){return t.target}function $a(t){function n(){var n,a=Cg.call(arguments),c=e.apply(this,a),s=r.apply(this,a);if(u||(u=n=ve()),t(u,+i.apply(this,(a[0]=c,a)),+o.apply(this,a),+i.apply(this,(a[0]=s,a)),+o.apply(this,a)),n)return u=null,n+\"\"||null}var e=Ha,r=Xa,i=Fa,o=Ia,u=null;return n.source=function(t){return arguments.length?(e=t,n):e},n.target=function(t){return arguments.length?(r=t,n):r},n.x=function(t){return arguments.length?(i=\"function\"==typeof t?t:sg(+t),n):i},n.y=function(t){return arguments.length?(o=\"function\"==typeof t?t:sg(+t),n):o},n.context=function(t){return arguments.length?(u=null==t?null:t,n):u},n}function Va(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function Wa(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function Za(t,n,e,r,i){var o=Ag(n,e),u=Ag(n,e=(e+i)/2),a=Ag(r,e),c=Ag(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(u[0],u[1],a[0],a[1],c[0],c[1])}function Ga(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Ja(t){this._context=t}function Qa(t){this._context=t}function Ka(t){this._context=t}function tc(t,n){this._basis=new Ja(t),this._beta=n}function nc(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function ec(t,n){this._context=t,this._k=(1-n)/6}function rc(t,n){this._context=t,this._k=(1-n)/6}function ic(t,n){this._context=t,this._k=(1-n)/6}function oc(t,n,e){var r=t._x1,i=t._y1,o=t._x2,u=t._y2;if(t._l01_a>yg){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>yg){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-n*t._l12_2a)/f,u=(u*s+t._y1*t._l23_2a-e*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,u,t._x2,t._y2)}function uc(t,n){this._context=t,this._alpha=n}function ac(t,n){this._context=t,this._alpha=n}function cc(t,n){this._context=t,this._alpha=n}function sc(t){this._context=t}function fc(t){return t<0?-1:1}function lc(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),u=(e-t._y1)/(i||r<0&&-0),a=(o*i+u*r)/(r+i);return(fc(o)+fc(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(a))||0}function hc(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function pc(t,n,e){var r=t._x0,i=t._y0,o=t._x1,u=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*n,o-a,u-a*e,o,u)}function dc(t){this._context=t}function vc(t){this._context=new _c(t)}function _c(t){this._context=t}function yc(t){this._context=t}function gc(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),u=new Array(r);for(i[0]=0,o[0]=2,u[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,u[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,u[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,u[n]-=e*u[n-1];for(i[r-1]=u[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(u[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function mc(t,n){this._context=t,this._t=n}function xc(t,n){return t[n]}function bc(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}function wc(t){return t[0]}function Mc(t){return t[1]}function Tc(){this._=null}function kc(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Nc(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Sc(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function Ec(t){for(;t.L;)t=t.L;return t}function Ac(t,n,e,r){var i=[null,null],o=lm.push(i)-1;return i.left=t,i.right=n,e&&zc(i,t,n,e),r&&zc(i,n,t,r),sm[t.index].halfedges.push(o),sm[n.index].halfedges.push(o),i}function Cc(t,n,e){var r=[n,e];return r.left=t,r}function zc(t,n,e,r){t[0]||t[1]?t.left===e?t[1]=r:t[0]=r:(t[0]=r,t.left=n,t.right=e)}function Pc(t,n,e,r,i){var o,u=t[0],a=t[1],c=u[0],s=u[1],f=0,l=1,h=a[0]-c,p=a[1]-s;if(o=n-c,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>f&&(f=o)}if(o=r-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<l&&(l=o)}if(o=e-s,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<l&&(l=o)}else if(p>0){if(o>l)return;o>f&&(f=o)}if(o=i-s,p||!(o<0)){if(o/=p,p<0){if(o>l)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<l&&(l=o)}return!(f>0||l<1)||(f>0&&(t[0]=[c+f*h,s+f*p]),l<1&&(t[1]=[c+l*h,s+l*p]),!0)}}}}}function Rc(t,n,e,r,i){var o=t[1];if(o)return!0;var u,a,c=t[0],s=t.left,f=t.right,l=s[0],h=s[1],p=f[0],d=f[1],v=(l+p)/2,_=(h+d)/2;if(d===h){if(v<n||v>=r)return;if(l>p){if(c){if(c[1]>=i)return}else c=[v,e];o=[v,i]}else{if(c){if(c[1]<e)return}else c=[v,i];o=[v,e]}}else if(u=(l-p)/(d-h),a=_-u*v,u<-1||u>1)if(l>p){if(c){if(c[1]>=i)return}else c=[(e-a)/u,e];o=[(i-a)/u,i]}else{if(c){if(c[1]<e)return}else c=[(i-a)/u,i];o=[(e-a)/u,e]}else if(h<d){if(c){if(c[0]>=r)return}else c=[n,u*n+a];o=[r,u*r+a]}else{if(c){if(c[0]<n)return}else c=[r,u*r+a];o=[n,u*n+a]}return t[0]=c,t[1]=o,!0}function Lc(t,n,e,r){for(var i,o=lm.length;o--;)Rc(i=lm[o],t,n,e,r)&&Pc(i,t,n,e,r)&&(Math.abs(i[0][0]-i[1][0])>dm||Math.abs(i[0][1]-i[1][1])>dm)||delete lm[o]}function qc(t){return sm[t.index]={site:t,halfedges:[]}}function Uc(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Dc(t,n){return n[+(n.left!==t.site)]}function Oc(t,n){return n[+(n.left===t.site)]}function Fc(){for(var t,n,e,r,i=0,o=sm.length;i<o;++i)if((t=sm[i])&&(r=(n=t.halfedges).length)){var u=new Array(r),a=new Array(r);for(e=0;e<r;++e)u[e]=e,a[e]=Uc(t,lm[n[e]]);for(u.sort(function(t,n){return a[n]-a[t]}),e=0;e<r;++e)a[e]=n[u[e]];for(e=0;e<r;++e)n[e]=a[e]}}function Ic(t,n,e,r){var i,o,u,a,c,s,f,l,h,p,d,v,_=sm.length,y=!0;for(i=0;i<_;++i)if(o=sm[i]){for(u=o.site,a=(c=o.halfedges).length;a--;)lm[c[a]]||c.splice(a,1);for(a=0,s=c.length;a<s;)d=(p=Oc(o,lm[c[a]]))[0],v=p[1],l=(f=Dc(o,lm[c[++a%s]]))[0],h=f[1],(Math.abs(d-l)>dm||Math.abs(v-h)>dm)&&(c.splice(a,0,lm.push(Cc(u,p,Math.abs(d-t)<dm&&r-v>dm?[t,Math.abs(l-t)<dm?h:r]:Math.abs(v-r)<dm&&e-d>dm?[Math.abs(h-r)<dm?l:e,r]:Math.abs(d-e)<dm&&v-n>dm?[e,Math.abs(l-e)<dm?h:n]:Math.abs(v-n)<dm&&d-t>dm?[Math.abs(h-n)<dm?l:t,n]:null))-1),++s);s&&(y=!1)}if(y){var g,m,x,b=1/0;for(i=0,y=null;i<_;++i)(o=sm[i])&&(x=(g=(u=o.site)[0]-t)*g+(m=u[1]-n)*m)<b&&(b=x,y=o);if(y){var w=[t,n],M=[t,r],T=[e,r],k=[e,n];y.halfedges.push(lm.push(Cc(u=y.site,w,M))-1,lm.push(Cc(u,M,T))-1,lm.push(Cc(u,T,k))-1,lm.push(Cc(u,k,w))-1)}}for(i=0;i<_;++i)(o=sm[i])&&(o.halfedges.length||delete sm[i])}function Yc(){kc(this),this.x=this.y=this.arc=this.site=this.cy=null}function Bc(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var u=i[0],a=i[1],c=r[0]-u,s=r[1]-a,f=o[0]-u,l=o[1]-a,h=2*(c*l-s*f);if(!(h>=-vm)){var p=c*c+s*s,d=f*f+l*l,v=(l*p-s*d)/h,_=(c*d-f*p)/h,y=hm.pop()||new Yc;y.arc=t,y.site=i,y.x=v+u,y.y=(y.cy=_+a)+Math.sqrt(v*v+_*_),t.circle=y;for(var g=null,m=fm._;m;)if(y.y<m.y||y.y===m.y&&y.x<=m.x){if(!m.L){g=m.P;break}m=m.L}else{if(!m.R){g=m;break}m=m.R}fm.insert(g,y),g||(am=y)}}}}function jc(t){var n=t.circle;n&&(n.P||(am=n.N),fm.remove(n),hm.push(n),kc(n),t.circle=null)}function Hc(){kc(this),this.edge=this.site=this.circle=null}function Xc(t){var n=pm.pop()||new Hc;return n.site=t,n}function $c(t){jc(t),cm.remove(t),pm.push(t),kc(t)}function Vc(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,u=t.N,a=[t];$c(t);for(var c=o;c.circle&&Math.abs(e-c.circle.x)<dm&&Math.abs(r-c.circle.cy)<dm;)o=c.P,a.unshift(c),$c(c),c=o;a.unshift(c),jc(c);for(var s=u;s.circle&&Math.abs(e-s.circle.x)<dm&&Math.abs(r-s.circle.cy)<dm;)u=s.N,a.push(s),$c(s),s=u;a.push(s),jc(s);var f,l=a.length;for(f=1;f<l;++f)s=a[f],c=a[f-1],zc(s.edge,c.site,s.site,i);c=a[0],(s=a[l-1]).edge=Ac(c.site,s.site,null,i),Bc(c),Bc(s)}function Wc(t){for(var n,e,r,i,o=t[0],u=t[1],a=cm._;a;)if((r=Zc(a,u)-o)>dm)a=a.L;else{if(!((i=o-Gc(a,u))>dm)){r>-dm?(n=a.P,e=a):i>-dm?(n=a,e=a.N):n=e=a;break}if(!a.R){n=a;break}a=a.R}qc(t);var c=Xc(t);if(cm.insert(n,c),n||e){if(n===e)return jc(n),e=Xc(n.site),cm.insert(c,e),c.edge=e.edge=Ac(n.site,c.site),Bc(n),void Bc(e);if(e){jc(n),jc(e);var s=n.site,f=s[0],l=s[1],h=t[0]-f,p=t[1]-l,d=e.site,v=d[0]-f,_=d[1]-l,y=2*(h*_-p*v),g=h*h+p*p,m=v*v+_*_,x=[(_*g-p*m)/y+f,(h*m-v*g)/y+l];zc(e.edge,s,d,x),c.edge=Ac(s,t,null,x),e.edge=Ac(t,d,null,x),Bc(n),Bc(e)}else c.edge=Ac(n.site,c.site)}}function Zc(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var u=t.P;if(!u)return-1/0;var a=(e=u.site)[0],c=e[1],s=c-n;if(!s)return a;var f=a-r,l=1/o-1/s,h=f/s;return l?(-h+Math.sqrt(h*h-2*l*(f*f/(-2*s)-c+s/2+i-o/2)))/l+r:(r+a)/2}function Gc(t,n){var e=t.N;if(e)return Zc(e,n);var r=t.site;return r[1]===n?r[0]:1/0}function Jc(t,n,e){return(t[0]-e[0])*(n[1]-t[1])-(t[0]-n[0])*(e[1]-t[1])}function Qc(t,n){return n[1]-t[1]||n[0]-t[0]}function Kc(t,n){var e,r,i,o=t.sort(Qc).pop();for(lm=[],sm=new Array(t.length),cm=new Tc,fm=new Tc;;)if(i=am,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===e&&o[1]===r||(Wc(o),e=o[0],r=o[1]),o=t.pop();else{if(!i)break;Vc(i.arc)}if(Fc(),n){var u=+n[0][0],a=+n[0][1],c=+n[1][0],s=+n[1][1];Lc(u,a,c,s),Ic(u,a,c,s)}this.edges=lm,this.cells=sm,cm=fm=lm=sm=null}function ts(t,n,e){this.target=t,this.type=n,this.transform=e}function ns(t,n,e){this.k=t,this.x=n,this.y=e}function es(t){return t.__zoom||ym}function rs(){t.event.stopImmediatePropagation()}function is(){return!t.event.button}function os(){var t,n,e=this;return e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function us(){return this.__zoom||ym}function as(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function cs(){return\"ontouchstart\"in this}var ss=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},fs=function(t){return 1===t.length&&(t=n(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}},ls=fs(ss),hs=ls.right,ps=ls.left,ds=function(t){return null===t?NaN:+t},vs=function(t,n){var e,r,i=t.length,o=0,u=-1,a=0,c=0;if(null==n)for(;++u<i;)isNaN(e=ds(t[u]))||(c+=(r=e-a)*(e-(a+=r/++o)));else for(;++u<i;)isNaN(e=ds(n(t[u],u,t)))||(c+=(r=e-a)*(e-(a+=r/++o)));if(o>1)return c/(o-1)},_s=function(t,n){var e=vs(t,n);return e?Math.sqrt(e):e},ys=function(t,n){var e,r,i,o=t.length,u=-1;if(null==n){for(;++u<o;)if(null!=(e=t[u])&&e>=e)for(r=i=e;++u<o;)null!=(e=t[u])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++u<o;)if(null!=(e=n(t[u],u,t))&&e>=e)for(r=i=e;++u<o;)null!=(e=n(t[u],u,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]},gs=Array.prototype,ms=gs.slice,xs=gs.map,bs=function(t){return function(){return t}},ws=function(t){return t},Ms=function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o},Ts=Math.sqrt(50),ks=Math.sqrt(10),Ns=Math.sqrt(2),Ss=function(t,n,e){var i,o,u,a=n<t,c=-1;if(a&&(i=t,t=n,n=i),0===(u=r(t,n,e))||!isFinite(u))return[];if(u>0)for(t=Math.ceil(t/u),n=Math.floor(n/u),o=new Array(i=Math.ceil(n-t+1));++c<i;)o[c]=(t+c)*u;else for(t=Math.floor(t*u),n=Math.ceil(n*u),o=new Array(i=Math.ceil(t-n+1));++c<i;)o[c]=(t-c)/u;return a&&o.reverse(),o},Es=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},As=function(t,n,e){if(null==e&&(e=ds),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),u=+e(t[o],o,t);return u+(+e(t[o+1],o+1,t)-u)*(i-o)}},Cs=function(t){for(var n,e,r,i=t.length,o=-1,u=0;++o<i;)u+=t[o].length;for(e=new Array(u);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--u]=r[n];return e},zs=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r},Ps=function(t){if(!(i=t.length))return[];for(var n=-1,e=zs(t,o),r=new Array(e);++n<e;)for(var i,u=-1,a=r[n]=new Array(i);++u<i;)a[u]=t[u][n];return r},Rs=Array.prototype.slice,Ls=function(t){return t},qs=1,Us=2,Ds=3,Os=4,Fs=1e-6,Is={value:function(){}};p.prototype=h.prototype={constructor:p,on:function(t,n){var e,r=this._,i=d(t+\"\",r),o=-1,u=i.length;{if(!(arguments.length<2)){if(null!=n&&\"function\"!=typeof n)throw new Error(\"invalid callback: \"+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=_(r[e],t.name,n);else if(null==n)for(e in r)r[e]=_(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=v(r[e],t.name)))return e}},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new p(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Ys=\"http://www.w3.org/1999/xhtml\",Bs={svg:\"http://www.w3.org/2000/svg\",xhtml:Ys,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"},js=function(t){var n=t+=\"\",e=n.indexOf(\":\");return e>=0&&\"xmlns\"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Bs.hasOwnProperty(n)?{space:Bs[n],local:t}:t},Hs=function(t){var n=js(t);return(n.local?g:y)(n)},Xs=0;x.prototype=m.prototype={constructor:x,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var $s=function(t){return function(){return this.matches(t)}};if(\"undefined\"!=typeof document){var Vs=document.documentElement;if(!Vs.matches){var Ws=Vs.webkitMatchesSelector||Vs.msMatchesSelector||Vs.mozMatchesSelector||Vs.oMatchesSelector;$s=function(t){return function(){return Ws.call(this,t)}}}}var Zs=$s,Gs={};t.event=null,\"undefined\"!=typeof document&&(\"onmouseenter\"in document.documentElement||(Gs={mouseenter:\"mouseover\",mouseleave:\"mouseout\"}));var Js=function(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e},Qs=function(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]},Ks=function(t){var n=Js();return n.changedTouches&&(n=n.changedTouches[0]),Qs(t,n)},tf=function(t){return null==t?S:function(){return this.querySelector(t)}},nf=function(t){return null==t?E:function(){return this.querySelectorAll(t)}},ef=function(t){return new Array(t.length)};A.prototype={constructor:A,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var rf=function(t){return function(){return t}},of=\"$\",uf=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};W.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(t){return this._names.indexOf(t)>=0}};var af=[null];pt.prototype=dt.prototype={constructor:pt,select:function(t){\"function\"!=typeof t&&(t=tf(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],c=a.length,s=r[i]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&(\"__data__\"in o&&(u.__data__=o.__data__),s[f]=u);return new pt(r,this._parents)},selectAll:function(t){\"function\"!=typeof t&&(t=nf(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new pt(r,i)},filter:function(t){\"function\"!=typeof t&&(t=Zs(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new pt(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e=n?z:C,r=this._parents,i=this._groups;\"function\"!=typeof t&&(t=rf(t));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var f=r[s],l=i[s],h=l.length,p=t.call(f,f&&f.__data__,s,r),d=p.length,v=a[s]=new Array(d),_=u[s]=new Array(d);e(f,l,v,_,c[s]=new Array(h),p,n);for(var y,g,m=0,x=0;m<d;++m)if(y=v[m]){for(m>=x&&(x=m+1);!(g=_[x])&&++x<d;);y._next=g||null}}return u=new pt(u,r),u._enter=a,u._exit=c,u},enter:function(){return new pt(this._enter||this._groups.map(ef),this._parents)},exit:function(){return new pt(this._exit||this._groups.map(ef),this._parents)},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],f=e[a],l=s.length,h=u[a]=new Array(l),p=0;p<l;++p)(c=s[p]||f[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new pt(u,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){t||(t=P);for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i){for(var o,u=n[i],a=u.length,c=r[i]=new Array(a),s=0;s<a;++s)(o=u[s])&&(c[s]=o);c.sort(function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e})}return new pt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=js(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?L:R:\"function\"==typeof n?e.local?O:D:e.local?U:q)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?F:\"function\"==typeof n?Y:I)(t,n,null==e?\"\":e)):B(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?j:\"function\"==typeof n?X:H)(t,n)):this.node()[t]},classed:function(t,n){var e=$(t+\"\");if(arguments.length<2){for(var r=V(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((\"function\"==typeof n?K:n?J:Q)(e,n))},text:function(t){return arguments.length?this.each(null==t?tt:(\"function\"==typeof t?et:nt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?rt:(\"function\"==typeof t?ot:it)(t)):this.node().innerHTML},raise:function(){return this.each(ut)},lower:function(){return this.each(at)},append:function(t){var n=\"function\"==typeof t?t:Hs(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e=\"function\"==typeof t?t:Hs(t),r=null==n?ct:\"function\"==typeof n?n:tf(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(st)},datum:function(t){return arguments.length?this.property(\"__data__\",t):this.node().__data__},on:function(t,n,e){var r,i,o=M(t+\"\"),u=o.length;{if(!(arguments.length<2)){for(a=n?k:T,null==e&&(e=!1),r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var c,s=0,f=a.length;s<f;++s)for(r=0,c=a[s];r<u;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}},dispatch:function(t,n){return this.each((\"function\"==typeof n?ht:lt)(t,n))}};var cf=function(t){return\"string\"==typeof t?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],af)},sf=function(t,n,e){arguments.length<3&&(e=n,n=Js().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Qs(t,r);return null},ff=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},lf=function(t){var n=t.document.documentElement,e=cf(t).on(\"dragstart.drag\",ff,!0);\"onselectstart\"in n?e.on(\"selectstart.drag\",ff,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect=\"none\")},hf=function(t){return function(){return t}};yt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var pf=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t},df=\"\\\\s*([+-]?\\\\d+)\\\\s*\",vf=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",_f=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",yf=/^#([0-9a-f]{3})$/,gf=/^#([0-9a-f]{6})$/,mf=new RegExp(\"^rgb\\\\(\"+[df,df,df]+\"\\\\)$\"),xf=new RegExp(\"^rgb\\\\(\"+[_f,_f,_f]+\"\\\\)$\"),bf=new RegExp(\"^rgba\\\\(\"+[df,df,df,vf]+\"\\\\)$\"),wf=new RegExp(\"^rgba\\\\(\"+[_f,_f,_f,vf]+\"\\\\)$\"),Mf=new RegExp(\"^hsl\\\\(\"+[vf,_f,_f]+\"\\\\)$\"),Tf=new RegExp(\"^hsla\\\\(\"+[vf,_f,_f,vf]+\"\\\\)$\"),kf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pf(Mt,Tt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+\"\"}}),pf(At,Et,wt(Mt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?\")\":\", \"+t+\")\")}})),pf(Rt,Pt,wt(Mt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Rt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Rt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new At(Lt(t>=240?t-240:t+120,i,r),Lt(t,i,r),Lt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Nf=Math.PI/180,Sf=180/Math.PI,Ef=.95047,Af=1,Cf=1.08883,zf=4/29,Pf=6/29,Rf=3*Pf*Pf,Lf=Pf*Pf*Pf;pf(Dt,Ut,wt(Mt,{brighter:function(t){return new Dt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Dt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return t=Af*Ft(t),n=Ef*Ft(n),e=Cf*Ft(e),new At(It(3.2404542*n-1.5371385*t-.4985314*e),It(-.969266*n+1.8760108*t+.041556*e),It(.0556434*n-.2040259*t+1.0572252*e),this.opacity)}})),pf(Ht,jt,wt(Mt,{brighter:function(t){return new Ht(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ht(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return qt(this).rgb()}}));var qf=-.14861,Uf=1.78277,Df=-.29227,Of=-.90649,Ff=1.97294,If=Ff*Of,Yf=Ff*Uf,Bf=Uf*Df-Of*qf;pf(Vt,$t,wt(Mt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Vt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Vt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Nf,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new At(255*(n+e*(qf*r+Uf*i)),255*(n+e*(Df*r+Of*i)),255*(n+e*(Ff*r)),this.opacity)}}));var jf,Hf,Xf,$f,Vf,Wf,Zf=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],u=r>0?t[r-1]:2*i-o,a=r<n-1?t[r+2]:2*o-i;return Wt((e-r/n)*n,u,i,o,a)}},Gf=function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],u=t[(r+1)%n],a=t[(r+2)%n];return Wt((e-r/n)*n,i,o,u,a)}},Jf=function(t){return function(){return t}},Qf=function t(n){function e(t,n){var e=r((t=Et(t)).r,(n=Et(n)).r),i=r(t.g,n.g),o=r(t.b,n.b),u=Kt(t.opacity,n.opacity);return function(n){return t.r=e(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+\"\"}}var r=Qt(n);return e.gamma=t,e}(1),Kf=tn(Zf),tl=tn(Gf),nl=function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),u=new Array(r);for(e=0;e<i;++e)o[e]=cl(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}},el=function(t,n){var e=new Date;return t=+t,n-=t,function(r){return e.setTime(t+n*r),e}},rl=function(t,n){return t=+t,n-=t,function(e){return t+n*e}},il=function(t,n){var e,r={},i={};null!==t&&\"object\"==typeof t||(t={}),null!==n&&\"object\"==typeof n||(n={});for(e in n)e in t?r[e]=cl(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},ol=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,ul=new RegExp(ol.source,\"g\"),al=function(t,n){var e,r,i,o=ol.lastIndex=ul.lastIndex=0,u=-1,a=[],c=[];for(t+=\"\",n+=\"\";(e=ol.exec(t))&&(r=ul.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,c.push({i:u,x:rl(e,r)})),o=ul.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?c[0]?en(c[0].x):nn(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)a[(e=c[r]).i]=e.x(t);return a.join(\"\")})},cl=function(t,n){var e,r=typeof n;return null==n||\"boolean\"===r?Jf(n):(\"number\"===r?rl:\"string\"===r?(e=Tt(n))?(n=e,Qf):al:n instanceof Tt?Qf:n instanceof Date?el:Array.isArray(n)?nl:\"function\"!=typeof n.valueOf&&\"function\"!=typeof n.toString||isNaN(n)?il:rl)(t,n)},sl=function(t,n){return t=+t,n-=t,function(e){return Math.round(t+n*e)}},fl=180/Math.PI,ll={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},hl=function(t,n,e,r,i,o){var u,a,c;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,c/=a),t*r<n*e&&(t=-t,n=-n,c=-c,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*fl,skewX:Math.atan(c)*fl,scaleX:u,scaleY:a}},pl=rn(function(t){return\"none\"===t?ll:(jf||(jf=document.createElement(\"DIV\"),Hf=document.documentElement,Xf=document.defaultView),jf.style.transform=t,t=Xf.getComputedStyle(Hf.appendChild(jf),null).getPropertyValue(\"transform\"),Hf.removeChild(jf),t=t.slice(7,-1).split(\",\"),hl(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},\"px, \",\"px)\",\"deg)\"),dl=rn(function(t){return null==t?ll:($f||($f=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\")),$f.setAttribute(\"transform\",t),(t=$f.transform.baseVal.consolidate())?(t=t.matrix,hl(t.a,t.b,t.c,t.d,t.e,t.f)):ll)},\", \",\")\",\")\"),vl=Math.SQRT2,_l=function(t,n){var e,r,i=t[0],o=t[1],u=t[2],a=n[0],c=n[1],s=n[2],f=a-i,l=c-o,h=f*f+l*l;if(h<1e-12)r=Math.log(s/u)/vl,e=function(t){return[i+t*f,o+t*l,u*Math.exp(vl*t*r)]};else{var p=Math.sqrt(h),d=(s*s-u*u+4*h)/(2*u*2*p),v=(s*s-u*u-4*h)/(2*s*2*p),_=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-_)/vl,e=function(t){var n=t*r,e=on(_),a=u/(2*p)*(e*an(vl*n+_)-un(_));return[i+a*f,o+a*l,u*e/on(vl*n+_)]}}return e.duration=1e3*r,e},yl=cn(Jt),gl=cn(Kt),ml=sn(Jt),xl=sn(Kt),bl=fn(Jt),wl=fn(Kt),Ml=0,Tl=0,kl=0,Nl=1e3,Sl=0,El=0,Al=0,Cl=\"object\"==typeof performance&&performance.now?performance:Date,zl=\"object\"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};pn.prototype=dn.prototype={constructor:pn,restart:function(t,n,e){if(\"function\"!=typeof t)throw new TypeError(\"callback is not a function\");e=(null==e?ln():+e)+(null==n?0:+n),this._next||Wf===this||(Wf?Wf._next=this:Vf=this,Wf=this),this._call=t,this._time=e,mn()},stop:function(){this._call&&(this._call=null,this._time=1/0,mn())}};var Pl=function(t,n,e){var r=new pn;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r},Rl=h(\"start\",\"end\",\"interrupt\"),Ll=[],ql=0,Ul=1,Dl=2,Ol=3,Fl=4,Il=5,Yl=6,Bl=function(t,n,e,r,i,o){var u=t.__transition;if(u){if(e in u)return}else t.__transition={};Mn(t,e,{name:n,index:r,group:i,on:Rl,tween:Ll,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ql})},jl=function(t,n){var e,r,i,o=t.__transition,u=!0;if(o){n=null==n?null:n+\"\";for(i in o)(e=o[i]).name===n?(r=e.state>Dl&&e.state<Il,e.state=Yl,e.timer.stop(),r&&e.on.call(\"interrupt\",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}},Hl=function(t,n){var e;return(\"number\"==typeof n?rl:n instanceof Tt?Qf:(e=Tt(n))?(n=e,Qf):al)(t,n)},Xl=dt.prototype.constructor,$l=0,Vl=dt.prototype;Gn.prototype=Jn.prototype={constructor:Gn,select:function(t){var n=this._name,e=this._id;\"function\"!=typeof t&&(t=tf(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,c,s=r[u],f=s.length,l=o[u]=new Array(f),h=0;h<f;++h)(a=s[h])&&(c=t.call(a,a.__data__,h,s))&&(\"__data__\"in a&&(c.__data__=a.__data__),l[h]=c,Bl(l[h],n,e,h,l,wn(a,e)));return new Gn(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;\"function\"!=typeof t&&(t=nf(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var c,s=r[a],f=s.length,l=0;l<f;++l)if(c=s[l]){for(var h,p=t.call(c,c.__data__,l,s),d=wn(c,e),v=0,_=p.length;v<_;++v)(h=p[v])&&Bl(h,n,e,v,p,d);o.push(p),u.push(c)}return new Gn(o,u,n,e)},filter:function(t){\"function\"!=typeof t&&(t=Zs(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&c.push(o);return new Gn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=n[a],f=e[a],l=s.length,h=u[a]=new Array(l),p=0;p<l;++p)(c=s[p]||f[p])&&(h[p]=c);for(;a<r;++a)u[a]=n[a];return new Gn(u,this._parents,this._name,this._id)},selection:function(){return new Xl(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Qn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)if(u=a[s]){var f=wn(u,n);Bl(u,t,e,s,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Gn(r,this._parents,t,e)},call:Vl.call,nodes:Vl.nodes,node:Vl.node,size:Vl.size,empty:Vl.empty,each:Vl.each,on:function(t,n){var e=this._id;return arguments.length<2?wn(this.node(),e).on.on(t):this.each(Yn(e,t,n))},attr:function(t,n){var e=js(t),r=\"transform\"===e?dl:Hl;return this.attrTween(t,\"function\"==typeof n?(e.local?Pn:zn)(e,r,Nn(this,\"attr.\"+t,n)):null==n?(e.local?En:Sn)(e):(e.local?Cn:An)(e,r,n+\"\"))},attrTween:function(t,n){var e=\"attr.\"+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if(\"function\"!=typeof n)throw new Error;var r=js(t);return this.tween(e,(r.local?Rn:Ln)(r,n))},style:function(t,n,e){var r=\"transform\"==(t+=\"\")?pl:Hl;return null==n?this.styleTween(t,jn(t,r)).on(\"end.style.\"+t,Hn(t)):this.styleTween(t,\"function\"==typeof n?$n(t,r,Nn(this,\"style.\"+t,n)):Xn(t,r,n+\"\"),e)},styleTween:function(t,n,e){var r=\"style.\"+(t+=\"\");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if(\"function\"!=typeof n)throw new Error;return this.tween(r,Vn(t,n,null==e?\"\":e))},text:function(t){return this.tween(\"text\",\"function\"==typeof t?Zn(Nn(this,\"text\",t)):Wn(null==t?\"\":t+\"\"))},remove:function(){return this.on(\"end.remove\",Bn(this._id))},tween:function(t,n){var e=this._id;if(t+=\"\",arguments.length<2){for(var r,i=wn(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?Tn:kn)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each((\"function\"==typeof t?qn:Un)(n,t)):wn(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each((\"function\"==typeof t?Dn:On)(n,t)):wn(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(Fn(n,t)):wn(this.node(),n).ease}};var Wl=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),Zl=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Gl=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Jl=Math.PI,Ql=Jl/2,Kl=4/11,th=6/11,nh=8/11,eh=.75,rh=9/11,ih=10/11,oh=.9375,uh=21/22,ah=63/64,ch=1/Kl/Kl,sh=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),fh=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),lh=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),hh=2*Math.PI,ph=function t(n,e){function r(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=hh);return r.amplitude=function(n){return t(n,e*hh)},r.period=function(e){return t(n,e)},r}(1,.3),dh=function t(n,e){function r(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/e)}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=hh);return r.amplitude=function(n){return t(n,e*hh)},r.period=function(e){return t(n,e)},r}(1,.3),vh=function t(n,e){function r(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/e))/2}var i=Math.asin(1/(n=Math.max(1,n)))*(e/=hh);return r.amplitude=function(n){return t(n,e*hh)},r.period=function(e){return t(n,e)},r}(1,.3),_h={time:null,delay:0,duration:250,ease:te};dt.prototype.interrupt=function(t){return this.each(function(){jl(this,t)})},dt.prototype.transition=function(t){var n,e;t instanceof Gn?(n=t._id,t=t._name):(n=Qn(),(e=_h).time=ln(),t=null==t?null:t+\"\");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],c=a.length,s=0;s<c;++s)(u=a[s])&&Bl(u,t,n,s,a,e||oe(u,n));return new Gn(r,this._parents,t,n)};var yh=[null],gh=function(t){return function(){return t}},mh=function(t,n,e){this.target=t,this.type=n,this.selection=e},xh=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},bh={name:\"drag\"},wh={name:\"space\"},Mh={name:\"handle\"},Th={name:\"center\"},kh={name:\"x\",handles:[\"e\",\"w\"].map(ae),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Nh={name:\"y\",handles:[\"n\",\"s\"].map(ae),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Sh={name:\"xy\",handles:[\"n\",\"e\",\"s\",\"w\",\"nw\",\"ne\",\"se\",\"sw\"].map(ae),input:function(t){return t},output:function(t){return t}},Eh={overlay:\"crosshair\",selection:\"move\",n:\"ns-resize\",e:\"ew-resize\",s:\"ns-resize\",w:\"ew-resize\",nw:\"nwse-resize\",ne:\"nesw-resize\",se:\"nwse-resize\",sw:\"nesw-resize\"},Ah={e:\"w\",w:\"e\",nw:\"ne\",ne:\"nw\",se:\"sw\",sw:\"se\"},Ch={n:\"s\",s:\"n\",nw:\"sw\",ne:\"se\",se:\"ne\",sw:\"nw\"},zh={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ph={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},Rh=Math.cos,Lh=Math.sin,qh=Math.PI,Uh=qh/2,Dh=2*qh,Oh=Math.max,Fh=Array.prototype.slice,Ih=function(t){return function(){return t}},Yh=Math.PI,Bh=2*Yh,jh=Bh-1e-6;de.prototype=ve.prototype={constructor:de,moveTo:function(t,n){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+=\"Z\")},lineTo:function(t,n){this._+=\"L\"+(this._x1=+t)+\",\"+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+=\"Q\"+ +t+\",\"+ +n+\",\"+(this._x1=+e)+\",\"+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+=\"C\"+ +t+\",\"+ +n+\",\"+ +e+\",\"+ +r+\",\"+(this._x1=+i)+\",\"+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,u=this._y1,a=e-t,c=r-n,s=o-t,f=u-n,l=s*s+f*f;if(i<0)throw new Error(\"negative radius: \"+i);if(null===this._x1)this._+=\"M\"+(this._x1=t)+\",\"+(this._y1=n);else if(l>1e-6)if(Math.abs(f*a-c*s)>1e-6&&i){var h=e-o,p=r-u,d=a*a+c*c,v=h*h+p*p,_=Math.sqrt(d),y=Math.sqrt(l),g=i*Math.tan((Yh-Math.acos((d+l-v)/(2*_*y)))/2),m=g/y,x=g/_;Math.abs(m-1)>1e-6&&(this._+=\"L\"+(t+m*s)+\",\"+(n+m*f)),this._+=\"A\"+i+\",\"+i+\",0,0,\"+ +(f*h>s*p)+\",\"+(this._x1=t+x*a)+\",\"+(this._y1=n+x*c)}else this._+=\"L\"+(this._x1=t)+\",\"+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n;var u=(e=+e)*Math.cos(r),a=e*Math.sin(r),c=t+u,s=n+a,f=1^o,l=o?r-i:i-r;if(e<0)throw new Error(\"negative radius: \"+e);null===this._x1?this._+=\"M\"+c+\",\"+s:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+=\"L\"+c+\",\"+s),e&&(l<0&&(l=l%Bh+Bh),l>jh?this._+=\"A\"+e+\",\"+e+\",0,1,\"+f+\",\"+(t-u)+\",\"+(n-a)+\"A\"+e+\",\"+e+\",0,1,\"+f+\",\"+(this._x1=c)+\",\"+(this._y1=s):l>1e-6&&(this._+=\"A\"+e+\",\"+e+\",0,\"+ +(l>=Yh)+\",\"+f+\",\"+(this._x1=t+e*Math.cos(i))+\",\"+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+n)+\"h\"+ +e+\"v\"+ +r+\"h\"+-e+\"Z\"},toString:function(){return this._}};be.prototype=we.prototype={constructor:be,has:function(t){return\"$\"+t in this},get:function(t){return this[\"$\"+t]},set:function(t,n){return this[\"$\"+t]=n,this},remove:function(t){var n=\"$\"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)\"$\"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)\"$\"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)\"$\"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)\"$\"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)\"$\"===n[0]&&++t;return t},empty:function(){for(var t in this)if(\"$\"===t[0])return!1;return!0},each:function(t){for(var n in this)\"$\"===n[0]&&t(this[n],n.slice(1),this)}};var Hh=we.prototype;Se.prototype=Ee.prototype={constructor:Se,has:Hh.has,add:function(t){return t+=\"\",this[\"$\"+t]=t,this},remove:Hh.remove,clear:Hh.clear,values:Hh.keys,size:Hh.size,empty:Hh.empty,each:Hh.each};var Xh={},$h={},Vh=34,Wh=10,Zh=13,Gh=function(t){function n(t,n){function e(){if(s)return $h;if(f)return f=!1,Xh;var n,e,r=a;if(t.charCodeAt(r)===Vh){for(;a++<u&&t.charCodeAt(a)!==Vh||t.charCodeAt(++a)===Vh;);return(n=a)>=u?s=!0:(e=t.charCodeAt(a++))===Wh?f=!0:e===Zh&&(f=!0,t.charCodeAt(a)===Wh&&++a),t.slice(r+1,n-1).replace(/\"\"/g,'\"')}for(;a<u;){if((e=t.charCodeAt(n=a++))===Wh)f=!0;else if(e===Zh)f=!0,t.charCodeAt(a)===Wh&&++a;else if(e!==o)continue;return t.slice(r,n)}return s=!0,t.slice(r,u)}var r,i=[],u=t.length,a=0,c=0,s=u<=0,f=!1;for(t.charCodeAt(u-1)===Wh&&--u,t.charCodeAt(u-1)===Zh&&--u;(r=e())!==$h;){for(var l=[];r!==Xh&&r!==$h;)l.push(r),r=e();n&&null==(l=n(l,c++))||i.push(l)}return i}function e(n){return n.map(r).join(t)}function r(t){return null==t?\"\":i.test(t+=\"\")?'\"'+t.replace(/\"/g,'\"\"')+'\"':t}var i=new RegExp('[\"'+t+\"\\n\\r]\"),o=t.charCodeAt(0);return{parse:function(t,e){var r,i,o=n(t,function(t,n){if(r)return r(t,n-1);i=t,r=e?Ce(t,e):Ae(t)});return o.columns=i,o},parseRows:n,format:function(n,e){return null==e&&(e=ze(n)),[e.map(r).join(t)].concat(n.map(function(n){return e.map(function(t){return r(n[t])}).join(t)})).join(\"\\n\")},formatRows:function(t){return t.map(e).join(\"\\n\")}}},Jh=Gh(\",\"),Qh=Jh.parse,Kh=Jh.parseRows,tp=Jh.format,np=Jh.formatRows,ep=Gh(\"\\t\"),rp=ep.parse,ip=ep.parseRows,op=ep.format,up=ep.formatRows,ap=function(t){return function(){return t}},cp=function(){return 1e-6*(Math.random()-.5)},sp=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i},fp=qe.prototype=Ue.prototype;fp.copy=function(){var t,n,e=new Ue(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=De(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=De(n));return e},fp.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return Pe(this.cover(n,e),n,e,t)},fp.addAll=function(t){var n,e,r,i,o=t.length,u=new Array(o),a=new Array(o),c=1/0,s=1/0,f=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(u[e]=r,a[e]=i,r<c&&(c=r),r>f&&(f=r),i<s&&(s=i),i>l&&(l=i));for(f<c&&(c=this._x0,f=this._x1),l<s&&(s=this._y0,l=this._y1),this.cover(c,s).cover(f,l),e=0;e<o;++e)Pe(this,u[e],a[e],t[e]);return this},fp.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var u,a,c=i-e,s=this._root;switch(a=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{u=new Array(4),u[a]=s,s=u}while(c*=2,i=e+c,o=r+c,t>i||n>o);break;case 1:do{u=new Array(4),u[a]=s,s=u}while(c*=2,e=i-c,o=r+c,e>t||n>o);break;case 2:do{u=new Array(4),u[a]=s,s=u}while(c*=2,i=e+c,r=o-c,t>i||r>n);break;case 3:do{u=new Array(4),u[a]=s,s=u}while(c*=2,e=i-c,r=o-c,e>t||r>n)}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},fp.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},fp.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},fp.find=function(t,n,e){var r,i,o,u,a,c,s,f=this._x0,l=this._y0,h=this._x1,p=this._y1,d=[],v=this._root;for(v&&d.push(new sp(v,f,l,h,p)),null==e?e=1/0:(f=t-e,l=n-e,h=t+e,p=n+e,e*=e);c=d.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(o=c.y0)>p||(u=c.x1)<f||(a=c.y1)<l))if(v.length){var _=(i+u)/2,y=(o+a)/2;d.push(new sp(v[3],_,y,u,a),new sp(v[2],i,y,_,a),new sp(v[1],_,o,u,y),new sp(v[0],i,o,_,y)),(s=(n>=y)<<1|t>=_)&&(c=d[d.length-1],d[d.length-1]=d[d.length-1-s],d[d.length-1-s]=c)}else{var g=t-+this._x.call(null,v.data),m=n-+this._y.call(null,v.data),x=g*g+m*m;if(x<e){var b=Math.sqrt(e=x);f=t-b,l=n-b,h=t+b,p=n+b,r=v.data}}return r},fp.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,r,i,o,u,a,c,s,f,l,h,p=this._root,d=this._x0,v=this._y0,_=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((s=o>=(a=(d+_)/2))?d=a:_=a,(f=u>=(c=(v+y)/2))?v=c:y=c,n=p,!(p=p[l=f<<1|s]))return this;if(!p.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(p=n[0]||n[1]||n[2]||n[3])&&p===(n[3]||n[2]||n[1]||n[0])&&!p.length&&(e?e[h]=p:this._root=p),this):(this._root=i,this)},fp.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},fp.root=function(){return this._root},fp.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},fp.visit=function(t){var n,e,r,i,o,u,a=[],c=this._root;for(c&&a.push(new sp(c,this._x0,this._y0,this._x1,this._y1));n=a.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,u=n.y1)&&c.length){var s=(r+o)/2,f=(i+u)/2;(e=c[3])&&a.push(new sp(e,s,f,o,u)),(e=c[2])&&a.push(new sp(e,r,f,s,u)),(e=c[1])&&a.push(new sp(e,s,i,o,f)),(e=c[0])&&a.push(new sp(e,r,i,s,f))}return this},fp.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new sp(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,u=n.x0,a=n.y0,c=n.x1,s=n.y1,f=(u+c)/2,l=(a+s)/2;(o=i[0])&&e.push(new sp(o,u,a,f,l)),(o=i[1])&&e.push(new sp(o,f,a,c,l)),(o=i[2])&&e.push(new sp(o,u,l,f,s)),(o=i[3])&&e.push(new sp(o,f,l,c,s))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},fp.x=function(t){return arguments.length?(this._x=t,this):this._x},fp.y=function(t){return arguments.length?(this._y=t,this):this._y};var lp,hp=10,pp=Math.PI*(3-Math.sqrt(5)),dp=function(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf(\"e\"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]},vp=function(t){return(t=dp(Math.abs(t)))?t[1]:NaN},_p=function(t,n){return function(e,r){for(var i=e.length,o=[],u=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(e.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[u=(u+1)%t.length];return o.reverse().join(n)}},yp=function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}},gp=function(t,n){var e=dp(t,n);if(!e)return t+\"\";var r=e[0],i=e[1];return i<0?\"0.\"+new Array(-i).join(\"0\")+r:r.length>i+1?r.slice(0,i+1)+\".\"+r.slice(i+1):r+new Array(i-r.length+2).join(\"0\")},mp={\"\":function(t,n){t:for(var e,r=(t=t.toPrecision(n)).length,i=1,o=-1;i<r;++i)switch(t[i]){case\".\":o=e=i;break;case\"0\":0===o&&(o=i),e=i;break;case\"e\":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(e+1):t},\"%\":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+\"\"},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return gp(100*t,n)},r:gp,s:function(t,n){var e=dp(t,n);if(!e)return t+\"\";var r=e[0],i=e[1],o=i-(lp=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join(\"0\"):o>0?r.slice(0,o)+\".\"+r.slice(o):\"0.\"+new Array(1-o).join(\"0\")+dp(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},xp=/^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;He.prototype=Xe.prototype,Xe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(null==this.width?\"\":Math.max(1,0|this.width))+(this.comma?\",\":\"\")+(null==this.precision?\"\":\".\"+Math.max(0,0|this.precision))+this.type};var bp,wp=function(t){return t},Mp=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"],Tp=function(t){function n(t){function n(t){var n,r,u,f=_,x=y;if(\"c\"===v)x=g(t)+x,t=\"\";else{var b=(t=+t)<0;if(t=g(Math.abs(t),d),b&&0==+t&&(b=!1),f=(b?\"(\"===s?s:\"-\":\"-\"===s||\"(\"===s?\"\":s)+f,x=x+(\"s\"===v?Mp[8+lp/3]:\"\")+(b&&\"(\"===s?\")\":\"\"),m)for(n=-1,r=t.length;++n<r;)if(48>(u=t.charCodeAt(n))||u>57){x=(46===u?i+t.slice(n+1):t.slice(n))+x,t=t.slice(0,n);break}}p&&!l&&(t=e(t,1/0));var w=f.length+t.length+x.length,M=w<h?new Array(h-w+1).join(a):\"\";switch(p&&l&&(t=e(M+t,M.length?h-x.length:1/0),M=\"\"),c){case\"<\":t=f+t+x+M;break;case\"=\":t=f+M+t+x;break;case\"^\":t=M.slice(0,w=M.length>>1)+f+t+x+M.slice(w);break;default:t=M+f+t+x}return o(t)}var a=(t=He(t)).fill,c=t.align,s=t.sign,f=t.symbol,l=t.zero,h=t.width,p=t.comma,d=t.precision,v=t.type,_=\"$\"===f?r[0]:\"#\"===f&&/[boxX]/.test(v)?\"0\"+v.toLowerCase():\"\",y=\"$\"===f?r[1]:/[%p]/.test(v)?u:\"\",g=mp[v],m=!v||/[defgprs%]/.test(v);return d=null==d?v?6:12:/[gprs]/.test(v)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),n.toString=function(){return t+\"\"},n}var e=t.grouping&&t.thousands?_p(t.grouping,t.thousands):wp,r=t.currency,i=t.decimal,o=t.numerals?yp(t.numerals):wp,u=t.percent||\"%\";return{format:n,formatPrefix:function(t,e){var r=n((t=He(t),t.type=\"f\",t)),i=3*Math.max(-8,Math.min(8,Math.floor(vp(e)/3))),o=Math.pow(10,-i),u=Mp[8+i/3];return function(t){return r(o*t)+u}}}};$e({decimal:\".\",thousands:\",\",grouping:[3],currency:[\"$\",\"\"]});var kp=function(t){return Math.max(0,-vp(Math.abs(t)))},Np=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vp(n)/3)))-vp(Math.abs(t)))},Sp=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,vp(n)-vp(t))+1},Ep=function(){return new Ve};Ve.prototype={constructor:Ve,reset:function(){this.s=this.t=0},add:function(t){We(ud,t,this.t),We(this,ud.s,this.s),this.s?this.t+=ud.t:this.s=ud.t},valueOf:function(){return this.s}};var Ap,Cp,zp,Pp,Rp,Lp,qp,Up,Dp,Op,Fp,Ip,Yp,Bp,jp,Hp,Xp,$p,Vp,Wp,Zp,Gp,Jp,Qp,Kp,td,nd,ed,rd,id,od,ud=new Ve,ad=1e-6,cd=Math.PI,sd=cd/2,fd=cd/4,ld=2*cd,hd=180/cd,pd=cd/180,dd=Math.abs,vd=Math.atan,_d=Math.atan2,yd=Math.cos,gd=Math.ceil,md=Math.exp,xd=Math.log,bd=Math.pow,wd=Math.sin,Md=Math.sign||function(t){return t>0?1:t<0?-1:0},Td=Math.sqrt,kd=Math.tan,Nd={Feature:function(t,n){Ke(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Ke(e[r].geometry,n)}},Sd={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){tr(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)tr(e[r],n,0)},Polygon:function(t,n){nr(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)nr(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Ke(e[r],n)}},Ed=function(t,n){t&&Nd.hasOwnProperty(t.type)?Nd[t.type](t,n):Ke(t,n)},Ad=Ep(),Cd=Ep(),zd={point:Qe,lineStart:Qe,lineEnd:Qe,polygonStart:function(){Ad.reset(),zd.lineStart=er,zd.lineEnd=rr},polygonEnd:function(){var t=+Ad;Cd.add(t<0?ld+t:t),this.lineStart=this.lineEnd=this.point=Qe},sphere:function(){Cd.add(ld)}},Pd=Ep(),Rd={point:pr,lineStart:vr,lineEnd:_r,polygonStart:function(){Rd.point=yr,Rd.lineStart=gr,Rd.lineEnd=mr,Pd.reset(),zd.polygonStart()},polygonEnd:function(){zd.polygonEnd(),Rd.point=pr,Rd.lineStart=vr,Rd.lineEnd=_r,Ad<0?(Lp=-(Up=180),qp=-(Dp=90)):Pd>ad?Dp=90:Pd<-ad&&(qp=-90),jp[0]=Lp,jp[1]=Up}},Ld={sphere:Qe,point:Mr,lineStart:kr,lineEnd:Er,polygonStart:function(){Ld.lineStart=Ar,Ld.lineEnd=Cr},polygonEnd:function(){Ld.lineStart=kr,Ld.lineEnd=Er}},qd=function(t){return function(){return t}},Ud=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e};Rr.invert=Rr;var Dd,Od,Fd,Id,Yd,Bd,jd,Hd,Xd,$d,Vd,Wd=function(t){function n(n){return n=t(n[0]*pd,n[1]*pd),n[0]*=hd,n[1]*=hd,n}return t=Lr(t[0]*pd,t[1]*pd,t.length>2?t[2]*pd:0),n.invert=function(n){return n=t.invert(n[0]*pd,n[1]*pd),n[0]*=hd,n[1]*=hd,n},n},Zd=function(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:Qe,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}},Gd=function(t,n,e,r,i,o){var u,a=t[0],c=t[1],s=0,f=1,l=n[0]-a,h=n[1]-c;if(u=e-a,l||!(u>0)){if(u/=l,l<0){if(u<s)return;u<f&&(f=u)}else if(l>0){if(u>f)return;u>s&&(s=u)}if(u=i-a,l||!(u<0)){if(u/=l,l<0){if(u>f)return;u>s&&(s=u)}else if(l>0){if(u<s)return;u<f&&(f=u)}if(u=r-c,h||!(u>0)){if(u/=h,h<0){if(u<s)return;u<f&&(f=u)}else if(h>0){if(u>f)return;u>s&&(s=u)}if(u=o-c,h||!(u<0)){if(u/=h,h<0){if(u>f)return;u>s&&(s=u)}else if(h>0){if(u<s)return;u<f&&(f=u)}return s>0&&(t[0]=a+s*l,t[1]=c+s*h),f<1&&(n[0]=a+f*l,n[1]=c+f*h),!0}}}}},Jd=function(t,n){return dd(t[0]-n[0])<ad&&dd(t[1]-n[1])<ad},Qd=function(t,n,e,r,i){var o,u,a=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(Jd(r,u)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(e=new Ir(r,t,null,!0)),c.push(e.o=new Ir(r,null,e,!1)),a.push(e=new Ir(u,t,null,!1)),c.push(e.o=new Ir(u,null,e,!0))}}),a.length){for(c.sort(n),Yr(a),Yr(c),o=0,u=c.length;o<u;++o)c[o].e=e=!e;for(var s,f,l=a[0];;){for(var h=l,p=!0;h.v;)if((h=h.n)===l)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=s.length;o<u;++o)i.point((f=s[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((f=s[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}},Kd=1e9,tv=-Kd,nv=Ep(),ev=function(t,n){var e=n[0],r=n[1],i=[wd(e),-yd(e),0],o=0,u=0;nv.reset();for(var a=0,c=t.length;a<c;++a)if(f=(s=t[a]).length)for(var s,f,l=s[f-1],h=l[0],p=l[1]/2+fd,d=wd(p),v=yd(p),_=0;_<f;++_,h=g,d=x,v=b,l=y){var y=s[_],g=y[0],m=y[1]/2+fd,x=wd(m),b=yd(m),w=g-h,M=w>=0?1:-1,T=M*w,k=T>cd,N=d*x;if(nv.add(_d(N*M*wd(T),v*b+N*yd(T))),o+=k?w+M*ld:w,k^h>=e^g>=e){var S=sr(ar(l),ar(y));hr(S);var E=sr(i,S);hr(E);var A=(k^w>=0?-1:1)*Ge(E[2]);(r>A||r===A&&(S[0]||S[1]))&&(u+=k^w>=0?1:-1)}}return(o<-ad||o<ad&&nv<-ad)^1&u},rv=Ep(),iv={sphere:Qe,point:Qe,lineStart:function(){iv.point=Hr,iv.lineEnd=jr},lineEnd:Qe,polygonStart:Qe,polygonEnd:Qe},ov=function(t){return rv.reset(),Ed(t,iv),+rv},uv=[null,null],av={type:\"LineString\",coordinates:uv},cv=function(t,n){return uv[0]=t,uv[1]=n,ov(av)},sv={Feature:function(t,n){return $r(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if($r(e[r].geometry,n))return!0;return!1}},fv={Sphere:function(){return!0},Point:function(t,n){return Vr(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Vr(e[r],n))return!0;return!1},LineString:function(t,n){return Wr(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Wr(e[r],n))return!0;return!1},Polygon:function(t,n){return Zr(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Zr(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if($r(e[r],n))return!0;return!1}},lv=function(t){return t},hv=Ep(),pv=Ep(),dv={point:Qe,lineStart:Qe,lineEnd:Qe,polygonStart:function(){dv.lineStart=ni,dv.lineEnd=ii},polygonEnd:function(){dv.lineStart=dv.lineEnd=dv.point=Qe,hv.add(dd(pv)),pv.reset()},result:function(){var t=hv/2;return hv.reset(),t}},vv=1/0,_v=vv,yv=-vv,gv=yv,mv={point:function(t,n){t<vv&&(vv=t),t>yv&&(yv=t),n<_v&&(_v=n),n>gv&&(gv=n)},lineStart:Qe,lineEnd:Qe,polygonStart:Qe,polygonEnd:Qe,result:function(){var t=[[vv,_v],[yv,gv]];return yv=gv=-(_v=vv=1/0),t}},xv=0,bv=0,wv=0,Mv=0,Tv=0,kv=0,Nv=0,Sv=0,Ev=0,Av={point:oi,lineStart:ui,lineEnd:si,polygonStart:function(){Av.lineStart=fi,Av.lineEnd=li},polygonEnd:function(){Av.point=oi,Av.lineStart=ui,Av.lineEnd=si},result:function(){var t=Ev?[Nv/Ev,Sv/Ev]:kv?[Mv/kv,Tv/kv]:wv?[xv/wv,bv/wv]:[NaN,NaN];return xv=bv=wv=Mv=Tv=kv=Nv=Sv=Ev=0,t}};di.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,ld)}},result:Qe};var Cv,zv,Pv,Rv,Lv,qv=Ep(),Uv={point:Qe,lineStart:function(){Uv.point=vi},lineEnd:function(){Cv&&_i(zv,Pv),Uv.point=Qe},polygonStart:function(){Cv=!0},polygonEnd:function(){Cv=null},result:function(){var t=+qv;return qv.reset(),t}};yi.prototype={_radius:4.5,_circle:gi(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push(\"Z\"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push(\"M\",t,\",\",n),this._point=1;break;case 1:this._string.push(\"L\",t,\",\",n);break;default:null==this._circle&&(this._circle=gi(this._radius)),this._string.push(\"M\",t,\",\",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join(\"\");return this._string=[],t}return null}};var Dv=function(t,n,e,r){return function(i,o){function u(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function a(t,n){var e=i(t,n);_.point(e[0],e[1])}function c(){b.point=a,_.lineStart()}function s(){b.point=u,_.lineEnd()}function f(t,n){v.push([t,n]);var e=i(t,n);m.point(e[0],e[1])}function l(){m.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),m.lineEnd();var t,n,e,r,i=m.clean(),u=g.result(),a=u.length;if(v.pop(),p.push(v),v=null,a)if(1&i){if(e=u[0],(n=e.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<n;++t)o.point((r=e[t])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&u.push(u.pop().concat(u.shift())),d.push(u.filter(mi))}var p,d,v,_=n(o),y=i.invert(r[0],r[1]),g=Zd(),m=n(g),x=!1,b={point:u,lineStart:c,lineEnd:s,polygonStart:function(){b.point=f,b.lineStart=l,b.lineEnd=h,d=[],p=[]},polygonEnd:function(){b.point=u,b.lineStart=c,b.lineEnd=s,d=Cs(d);var t=ev(p,y);d.length?(x||(o.polygonStart(),x=!0),Qd(d,xi,t,e,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return b}},Ov=Dv(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?cd:-cd,c=dd(o-e);dd(c-cd)<ad?(t.point(e,r=(r+u)/2>0?sd:-sd),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&c>=cd&&(dd(e-i)<ad&&(e-=i*ad),dd(o-a)<ad&&(o-=a*ad),r=bi(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*sd,r.point(-cd,i),r.point(0,i),r.point(cd,i),r.point(cd,0),r.point(cd,-i),r.point(0,-i),r.point(-cd,-i),r.point(-cd,0),r.point(-cd,i);else if(dd(t[0]-n[0])>ad){var o=t[0]<n[0]?cd:-cd;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-cd,-sd]),Fv=function(t,n){function e(t,n){return yd(t)*yd(n)>o}function r(t,n,e){var r=[1,0,0],i=sr(ar(t),ar(n)),u=cr(i,i),a=i[0],c=u-a*a;if(!c)return!e&&t;var s=o*u/c,f=-o*a/c,l=sr(r,i),h=lr(r,s);fr(h,lr(i,f));var p=l,d=cr(h,p),v=cr(p,p),_=d*d-v*(cr(h,h)-1);if(!(_<0)){var y=Td(_),g=lr(p,(-d-y)/v);if(fr(g,h),g=ur(g),!e)return g;var m,x=t[0],b=n[0],w=t[1],M=n[1];b<x&&(m=x,x=b,b=m);var T=b-x,k=dd(T-cd)<ad,N=k||T<ad;if(!k&&M<w&&(m=w,w=M,M=m),N?k?w+M>0^g[1]<(dd(g[0]-x)<ad?w:M):w<=g[1]&&g[1]<=M:T>cd^(x<=g[0]&&g[0]<=b)){var S=lr(p,(-d+y)/v);return fr(S,h),[g,ur(S)]}}}function i(n,e){var r=u?t:cd-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var o=yd(t),u=o>0,a=dd(o)>ad;return Dv(e,function(t){var n,o,c,s,f;return{lineStart:function(){s=c=!1,f=1},point:function(l,h){var p,d=[l,h],v=e(l,h),_=u?v?0:i(l,h):v?i(l+(l<0?cd:-cd),h):0;if(!n&&(s=c=v)&&t.lineStart(),v!==c&&(!(p=r(n,d))||Jd(n,p)||Jd(d,p))&&(d[0]+=ad,d[1]+=ad,v=e(d[0],d[1])),v!==c)f=0,v?(t.lineStart(),p=r(d,n),t.point(p[0],p[1])):(p=r(n,d),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(a&&n&&u^v){var y;_&o||!(y=r(d,n,!0))||(f=0,u?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||n&&Jd(n,d)||t.point(d[0],d[1]),n=d,c=v,o=_},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return f|(s&&c)<<1}}},function(e,r,i,o){Or(o,t,n,i,e,r)},u?[0,-t]:[-cd,t-cd])};Mi.prototype={constructor:Mi,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Iv=16,Yv=yd(30*pd),Bv=function(t,n){return+n?Si(t,n):Ni(t)},jv=wi({point:function(t,n){this.stream.point(t*pd,n*pd)}}),Hv=function(){return Ci(Pi).scale(155.424).center([0,33.6442])},Xv=function(){return Hv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},$v=Li(function(t){return Td(2/(1+t))});$v.invert=qi(function(t){return 2*Ge(t/2)});var Vv=Li(function(t){return(t=Ze(t))&&t/wd(t)});Vv.invert=qi(function(t){return t});Ui.invert=function(t,n){return[t,2*vd(md(n))-sd]};Ii.invert=Ii;Bi.invert=qi(vd);Hi.invert=qi(Ge);Xi.invert=qi(function(t){return 2*vd(t)});$i.invert=function(t,n){return[-n,2*vd(md(t))-sd]};uo.prototype=eo.prototype={constructor:uo,count:function(){return this.eachAfter(to)},each:function(t){var n,e,r,i,o=this,u=[o];do{for(n=u.reverse(),u=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)u.push(e[r])}while(u.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],u=[];i=o.pop();)if(u.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=u.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},sum:function(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})},sort:function(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})},path:function(t){for(var n=this,e=no(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var t=[];return this.each(function(n){t.push(n)}),t},leaves:function(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t},links:function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n},copy:function(){return eo(this).eachBefore(io)}};var Wv=Array.prototype.slice,Zv=function(t){for(var n,e,r=0,i=(t=ao(Wv.call(t))).length,o=[];r<i;)n=t[r],e&&fo(e,n)?++r:(e=ho(o=co(o,n)),r=0);return e},Gv=function(t){return function(){return t}},Jv=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Qv=function(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(r-n)/t.value;++a<c;)(o=u[a]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*s},Kv=\"$\",t_={depth:-1},n_={};Do.prototype=Object.create(uo.prototype);var e_=function(t,n,e,r,i){for(var o,u=t.children,a=-1,c=u.length,s=t.value&&(i-e)/t.value;++a<c;)(o=u[a]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*s},r_=(1+Math.sqrt(5))/2,i_=function t(n){function e(t,e,r,i,o){Fo(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(r_),o_=function t(n){function e(t,e,r,i,o){if((u=t._squarify)&&u.ratio===n)for(var u,a,c,s,f,l=-1,h=u.length,p=t.value;++l<h;){for(c=(a=u[l]).children,s=a.value=0,f=c.length;s<f;++s)a.value+=c[s].value;a.dice?Qv(a,e,r,i,r+=(o-r)*a.value/p):e_(a,e,r,e+=(i-e)*a.value/p,o),p-=a.value}else t._squarify=u=Fo(n,t,e,r,i,o),u.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(r_),u_=function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])},a_=[].slice,c_={};Bo.prototype=Wo.prototype={constructor:Bo,defer:function(t){if(\"function\"!=typeof t)throw new Error(\"invalid callback\");if(this._call)throw new Error(\"defer after await\");if(null!=this._error)return this;var n=a_.call(arguments,1);return n.push(t),++this._waiting,this._tasks.push(n),jo(this),this},abort:function(){return null==this._error&&$o(this,new Error(\"abort\")),this},await:function(t){if(\"function\"!=typeof t)throw new Error(\"invalid callback\");if(this._call)throw new Error(\"multiple await\");return this._call=function(n,e){t.apply(null,[n].concat(e))},Vo(this),this},awaitAll:function(t){if(\"function\"!=typeof t)throw new Error(\"invalid callback\");if(this._call)throw new Error(\"multiple await\");return this._call=t,Vo(this),this}};var s_=function(){return Math.random()},f_=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(s_),l_=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(s_),h_=function t(n){function e(){var t=l_.source(n).apply(this,arguments);return function(){return Math.exp(t())}}return e.source=t,e}(s_),p_=function t(n){function e(t){return function(){for(var e=0,r=0;r<t;++r)e+=n();return e}}return e.source=t,e}(s_),d_=function t(n){function e(t){var e=p_.source(n)(t);return function(){return e()/t}}return e.source=t,e}(s_),v_=function t(n){function e(t){return function(){return-Math.log(1-n())/t}}return e.source=t,e}(s_),__=function(t,n){function e(t){var n,e=s.status;if(!e&&Go(s)||e>=200&&e<300||304===e){if(o)try{n=o.call(r,s)}catch(t){return void a.call(\"error\",r,t)}else n=s;a.call(\"load\",r,n)}else a.call(\"error\",r,t)}var r,i,o,u,a=h(\"beforesend\",\"progress\",\"load\",\"error\"),c=we(),s=new XMLHttpRequest,f=null,l=null,p=0;if(\"undefined\"==typeof XDomainRequest||\"withCredentials\"in s||!/^(http(s)?:)?\\/\\//.test(t)||(s=new XDomainRequest),\"onload\"in s?s.onload=s.onerror=s.ontimeout=e:s.onreadystatechange=function(t){s.readyState>3&&e(t)},s.onprogress=function(t){a.call(\"progress\",r,t)},r={header:function(t,n){return t=(t+\"\").toLowerCase(),arguments.length<2?c.get(t):(null==n?c.remove(t):c.set(t,n+\"\"),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+\"\",r):i},responseType:function(t){return arguments.length?(u=t,r):u},timeout:function(t){return arguments.length?(p=+t,r):p},user:function(t){return arguments.length<1?f:(f=null==t?null:t+\"\",r)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+\"\",r)},response:function(t){return o=t,r},get:function(t,n){return r.send(\"GET\",t,n)},post:function(t,n){return r.send(\"POST\",t,n)},send:function(n,e,o){return s.open(n,t,!0,f,l),null==i||c.has(\"accept\")||c.set(\"accept\",i+\",*/*\"),s.setRequestHeader&&c.each(function(t,n){s.setRequestHeader(n,t)}),null!=i&&s.overrideMimeType&&s.overrideMimeType(i),null!=u&&(s.responseType=u),p>0&&(s.timeout=p),null==o&&\"function\"==typeof e&&(o=e,e=null),null!=o&&1===o.length&&(o=Zo(o)),null!=o&&r.on(\"error\",o).on(\"load\",function(t){o(null,t)}),a.call(\"beforesend\",r,s),s.send(null==e?null:e),r},abort:function(){return s.abort(),r},on:function(){var t=a.on.apply(a,arguments);return t===a?r:t}},null!=n){if(\"function\"!=typeof n)throw new Error(\"invalid callback: \"+n);return r.get(n)}return r},y_=function(t,n){return function(e,r){var i=__(e).mimeType(t).response(n);if(null!=r){if(\"function\"!=typeof r)throw new Error(\"invalid callback: \"+r);return i.get(r)}return i}},g_=y_(\"text/html\",function(t){return document.createRange().createContextualFragment(t.responseText)}),m_=y_(\"application/json\",function(t){return JSON.parse(t.responseText)}),x_=y_(\"text/plain\",function(t){return t.responseText}),b_=y_(\"application/xml\",function(t){var n=t.responseXML;if(!n)throw new Error(\"parse error\");return n}),w_=function(t,n){return function(e,r,i){arguments.length<3&&(i=r,r=null);var o=__(e).mimeType(t);return o.row=function(t){return arguments.length?o.response(Jo(n,r=t)):r},o.row(r),i?o.get(i):o}},M_=w_(\"text/csv\",Qh),T_=w_(\"text/tab-separated-values\",rp),k_=Array.prototype,N_=k_.map,S_=k_.slice,E_={name:\"implicit\"},A_=function(t){return function(){return t}},C_=function(t){return+t},z_=[0,1],P_=function(n,e,r){var o,u=n[0],a=n[n.length-1],c=i(u,a,null==e?10:e);switch((r=He(null==r?\",f\":r)).type){case\"s\":var s=Math.max(Math.abs(u),Math.abs(a));return null!=r.precision||isNaN(o=Np(c,s))||(r.precision=o),t.formatPrefix(r,s);case\"\":case\"e\":case\"g\":case\"p\":case\"r\":null!=r.precision||isNaN(o=Sp(c,Math.max(Math.abs(u),Math.abs(a))))||(r.precision=o-(\"e\"===r.type));break;case\"f\":case\"%\":null!=r.precision||isNaN(o=kp(c))||(r.precision=o-2*(\"%\"===r.type))}return t.format(r)},R_=function(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],u=t[i];return u<o&&(e=r,r=i,i=e,e=o,o=u,u=e),t[r]=n.floor(o),t[i]=n.ceil(u),t},L_=new Date,q_=new Date,U_=Mu(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});U_.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Mu(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):U_:null};var D_=U_.range,O_=6e4,F_=6048e5,I_=Mu(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),Y_=I_.range,B_=Mu(function(t){t.setTime(Math.floor(t/O_)*O_)},function(t,n){t.setTime(+t+n*O_)},function(t,n){return(n-t)/O_},function(t){return t.getMinutes()}),j_=B_.range,H_=Mu(function(t){var n=t.getTimezoneOffset()*O_%36e5;n<0&&(n+=36e5),t.setTime(36e5*Math.floor((+t-n)/36e5)+n)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),X_=H_.range,$_=Mu(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*O_)/864e5},function(t){return t.getDate()-1}),V_=$_.range,W_=Tu(0),Z_=Tu(1),G_=Tu(2),J_=Tu(3),Q_=Tu(4),K_=Tu(5),ty=Tu(6),ny=W_.range,ey=Z_.range,ry=G_.range,iy=J_.range,oy=Q_.range,uy=K_.range,ay=ty.range,cy=Mu(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),sy=cy.range,fy=Mu(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});fy.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Mu(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var ly=fy.range,hy=Mu(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*O_)},function(t,n){return(n-t)/O_},function(t){return t.getUTCMinutes()}),py=hy.range,dy=Mu(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),vy=dy.range,_y=Mu(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),yy=_y.range,gy=ku(0),my=ku(1),xy=ku(2),by=ku(3),wy=ku(4),My=ku(5),Ty=ku(6),ky=gy.range,Ny=my.range,Sy=xy.range,Ey=by.range,Ay=wy.range,Cy=My.range,zy=Ty.range,Py=Mu(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Ry=Py.range,Ly=Mu(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Ly.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Mu(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var qy,Uy=Ly.range,Dy={\"-\":\"\",_:\" \",0:\"0\"},Oy=/^\\s*\\d+/,Fy=/^%/,Iy=/[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;Ma({dateTime:\"%x, %X\",date:\"%-m/%-d/%Y\",time:\"%-I:%M:%S %p\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});var Yy=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(\"%Y-%m-%dT%H:%M:%S.%LZ\"),By=+new Date(\"2000-01-01T00:00:00.000Z\")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse(\"%Y-%m-%dT%H:%M:%S.%LZ\"),jy=1e3,Hy=60*jy,Xy=60*Hy,$y=24*Xy,Vy=7*$y,Wy=30*$y,Zy=365*$y,Gy=function(t){return t.match(/.{6}/g).map(function(t){return\"#\"+t})},Jy=Gy(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\"),Qy=Gy(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\"),Ky=Gy(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\"),tg=Gy(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\"),ng=wl($t(300,.5,0),$t(-240,.5,1)),eg=wl($t(-100,.75,.35),$t(80,1.5,.8)),rg=wl($t(260,.75,.35),$t(80,1.5,.8)),ig=$t(),og=Sa(Gy(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\")),ug=Sa(Gy(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\")),ag=Sa(Gy(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\")),cg=Sa(Gy(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\")),sg=function(t){return function(){return t}},fg=Math.abs,lg=Math.atan2,hg=Math.cos,pg=Math.max,dg=Math.min,vg=Math.sin,_g=Math.sqrt,yg=1e-12,gg=Math.PI,mg=gg/2,xg=2*gg;Oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var bg=function(t){return new Oa(t)},wg=function(){function t(t){var a,c,s,f=t.length,l=!1;for(null==i&&(u=o(s=ve())),a=0;a<=f;++a)!(a<f&&r(c=t[a],a,t))===l&&((l=!l)?u.lineStart():u.lineEnd()),l&&u.point(+n(c,a,t),+e(c,a,t));if(s)return u=null,s+\"\"||null}var n=Fa,e=Ia,r=sg(!0),i=null,o=bg,u=null;return t.x=function(e){return arguments.length?(n=\"function\"==typeof e?e:sg(+e),t):n},t.y=function(n){return arguments.length?(e=\"function\"==typeof n?n:sg(+n),t):e},t.defined=function(n){return arguments.length?(r=\"function\"==typeof n?n:sg(!!n),t):r},t.curve=function(n){return arguments.length?(o=n,null!=i&&(u=o(i)),t):o},t.context=function(n){return arguments.length?(null==n?i=u=null:u=o(i=n),t):i},t},Mg=function(){function t(t){var n,f,l,h,p,d=t.length,v=!1,_=new Array(d),y=new Array(d);for(null==a&&(s=c(p=ve())),n=0;n<=d;++n){if(!(n<d&&u(h=t[n],n,t))===v)if(v=!v)f=n,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),l=n-1;l>=f;--l)s.point(_[l],y[l]);s.lineEnd(),s.areaEnd()}v&&(_[n]=+e(h,n,t),y[n]=+i(h,n,t),s.point(r?+r(h,n,t):_[n],o?+o(h,n,t):y[n]))}if(p)return s=null,p+\"\"||null}function n(){return wg().defined(u).curve(c).context(a)}var e=Fa,r=null,i=sg(0),o=Ia,u=sg(!0),a=null,c=bg,s=null;return t.x=function(n){return arguments.length?(e=\"function\"==typeof n?n:sg(+n),r=null,t):e},t.x0=function(n){return arguments.length?(e=\"function\"==typeof n?n:sg(+n),t):e},t.x1=function(n){return arguments.length?(r=null==n?null:\"function\"==typeof n?n:sg(+n),t):r},t.y=function(n){return arguments.length?(i=\"function\"==typeof n?n:sg(+n),o=null,t):i},t.y0=function(n){return arguments.length?(i=\"function\"==typeof n?n:sg(+n),t):i},t.y1=function(n){return arguments.length?(o=null==n?null:\"function\"==typeof n?n:sg(+n),t):o},t.lineX0=t.lineY0=function(){return n().x(e).y(i)},t.lineY1=function(){return n().x(e).y(o)},t.lineX1=function(){return n().x(r).y(i)},t.defined=function(n){return arguments.length?(u=\"function\"==typeof n?n:sg(!!n),t):u},t.curve=function(n){return arguments.length?(c=n,null!=a&&(s=c(a)),t):c},t.context=function(n){return arguments.length?(null==n?a=s=null:s=c(a=n),t):a},t},Tg=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},kg=function(t){return t},Ng=Ba(bg);Ya.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var Sg=function(){return ja(wg().curve(Ng))},Eg=function(){var t=Mg().curve(Ng),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ja(e())},delete t.lineX0,t.lineEndAngle=function(){return ja(r())},delete t.lineX1,t.lineInnerRadius=function(){return ja(i())},delete t.lineY0,t.lineOuterRadius=function(){return ja(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(Ba(t)):n()._curve},t},Ag=function(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]},Cg=Array.prototype.slice,zg={draw:function(t,n){var e=Math.sqrt(n/gg);t.moveTo(e,0),t.arc(0,0,e,0,xg)}},Pg={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},Rg=Math.sqrt(1/3),Lg=2*Rg,qg={draw:function(t,n){var e=Math.sqrt(n/Lg),r=e*Rg;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},Ug=Math.sin(gg/10)/Math.sin(7*gg/10),Dg=Math.sin(xg/10)*Ug,Og=-Math.cos(xg/10)*Ug,Fg={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=Dg*e,i=Og*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var u=xg*o/5,a=Math.cos(u),c=Math.sin(u);t.lineTo(c*e,-a*e),t.lineTo(a*r-c*i,c*r+a*i)}t.closePath()}},Ig={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},Yg=Math.sqrt(3),Bg={draw:function(t,n){var e=-Math.sqrt(n/(3*Yg));t.moveTo(0,2*e),t.lineTo(-Yg*e,-e),t.lineTo(Yg*e,-e),t.closePath()}},jg=-.5,Hg=Math.sqrt(3)/2,Xg=1/Math.sqrt(12),$g=3*(Xg/2+1),Vg={draw:function(t,n){var e=Math.sqrt(n/$g),r=e/2,i=e*Xg,o=r,u=e*Xg+e,a=-o,c=u;t.moveTo(r,i),t.lineTo(o,u),t.lineTo(a,c),t.lineTo(jg*r-Hg*i,Hg*r+jg*i),t.lineTo(jg*o-Hg*u,Hg*o+jg*u),t.lineTo(jg*a-Hg*c,Hg*a+jg*c),t.lineTo(jg*r+Hg*i,jg*i-Hg*r),t.lineTo(jg*o+Hg*u,jg*u-Hg*o),t.lineTo(jg*a+Hg*c,jg*c-Hg*a),t.closePath()}},Wg=[zg,Pg,qg,Ig,Fg,Bg,Vg],Zg=function(){};Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ga(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ga(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};Qa.prototype={areaStart:Zg,areaEnd:Zg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Ga(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};Ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Ga(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};tc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],u=t[e]-i,a=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*u),this._beta*n[c]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var Gg=function t(n){function e(t){return 1===n?new Ja(t):new tc(t,n)}return e.beta=function(n){return t(+n)},e}(.85);ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:nc(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:nc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Jg=function t(n){function e(t){return new ec(t,n)}return e.tension=function(n){return t(+n)},e}(0);rc.prototype={areaStart:Zg,areaEnd:Zg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:nc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Qg=function t(n){function e(t){return new rc(t,n)}return e.tension=function(n){return t(+n)},e}(0);ic.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nc(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Kg=function t(n){function e(t){return new ic(t,n)}return e.tension=function(n){return t(+n)},e}(0);uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:oc(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var tm=function t(n){function e(t){return n?new uc(t,n):new ec(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);ac.prototype={areaStart:Zg,areaEnd:Zg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:oc(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var nm=function t(n){function e(t){return n?new ac(t,n):new rc(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oc(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var em=function t(n){function e(t){return n?new cc(t,n):new ic(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);sc.prototype={areaStart:Zg,areaEnd:Zg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pc(this,this._t0,hc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,pc(this,hc(this,e=lc(this,t,n)),e);break;default:pc(this,this._t0,e=lc(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(vc.prototype=Object.create(dc.prototype)).point=function(t,n){dc.prototype.point.call(this,n,t)},_c.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=gc(t),i=gc(n),o=0,u=1;u<e;++o,++u)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[u],n[u]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};mc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}};var rm=function(t,n){if((i=t.length)>1)for(var e,r,i,o=1,u=t[n[0]],a=u.length;o<i;++o)for(r=u,u=t[n[o]],e=0;e<a;++e)u[e][1]+=u[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]},im=function(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e},om=function(t){var n=t.map(bc);return im(t).sort(function(t,e){return n[t]-n[e]})},um=function(t){return function(){return t}};Tc.prototype={constructor:Tc,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=Ec(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(Nc(this,e),e=(t=e).U),e.C=!1,r.C=!0,Sc(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(Sc(this,e),e=(t=e).U),e.C=!1,r.C=!0,Nc(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,u=t.R;if(e=o?u?Ec(u):o:u,i?i.L===t?i.L=e:i.R=e:this._=e,o&&u?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==u?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=u,u.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,Nc(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,Sc(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,Nc(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,Sc(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,Nc(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,Sc(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var am,cm,sm,fm,lm,hm=[],pm=[],dm=1e-6,vm=1e-12;Kc.prototype={constructor:Kc,polygons:function(){var t=this.edges;return this.cells.map(function(n){var e=n.halfedges.map(function(e){return Dc(n,t[e])});return e.data=n.site.data,e})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(e,r){if(o=(i=e.halfedges).length)for(var i,o,u,a=e.site,c=-1,s=n[i[o-1]],f=s.left===a?s.right:s.left;++c<o;)u=f,f=(s=n[i[c]]).left===a?s.right:s.left,u&&f&&r<u.index&&r<f.index&&Jc(a,u,f)<0&&t.push([a.data,u.data,f.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,e){for(var r,i,o=this,u=o._found||0,a=o.cells.length;!(i=o.cells[u]);)if(++u>=a)return null;var c=t-i.site[0],s=n-i.site[1],f=c*c+s*s;do{i=o.cells[r=u],u=null,i.halfedges.forEach(function(e){var r=o.edges[e],a=r.left;if(a!==i.site&&a||(a=r.right)){var c=t-a[0],s=n-a[1],l=c*c+s*s;l<f&&(f=l,u=a.index)}})}while(null!==u);return o._found=r,null==e||f<=e*e?i.site:null}};var _m=function(t){return function(){return t}};ns.prototype={constructor:ns,scale:function(t){return 1===t?this:new ns(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new ns(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return\"translate(\"+this.x+\",\"+this.y+\") scale(\"+this.k+\")\"}};var ym=new ns(1,0,0);es.prototype=ns.prototype;var gm=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()};t.version=\"4.10.2\",t.bisect=hs,t.bisectRight=hs,t.bisectLeft=ps,t.ascending=ss,t.bisector=fs,t.cross=function(t,n,r){var i,o,u,a,c=t.length,s=n.length,f=new Array(c*s);for(null==r&&(r=e),i=u=0;i<c;++i)for(a=t[i],o=0;o<s;++o,++u)f[u]=r(a,n[o]);return f},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=_s,t.extent=ys,t.histogram=function(){function t(t){var o,u,a=t.length,c=new Array(a);for(o=0;o<a;++o)c[o]=n(t[o],o,t);var s=e(c),f=s[0],l=s[1],h=r(c,f,l);Array.isArray(h)||(h=i(f,l,h),h=Ms(Math.ceil(f/h)*h,Math.floor(l/h)*h,h));for(var p=h.length;h[0]<=f;)h.shift(),--p;for(;h[p-1]>l;)h.pop(),--p;var d,v=new Array(p+1);for(o=0;o<=p;++o)(d=v[o]=[]).x0=o>0?h[o-1]:f,d.x1=o<p?h[o]:l;for(o=0;o<a;++o)f<=(u=c[o])&&u<=l&&v[hs(h,u,0,p)].push(t[o]);return v}var n=ws,e=ys,r=Es;return t.value=function(e){return arguments.length?(n=\"function\"==typeof e?e:bs(e),t):n},t.domain=function(n){return arguments.length?(e=\"function\"==typeof n?n:bs([n[0],n[1]]),t):e},t.thresholds=function(n){return arguments.length?(r=\"function\"==typeof n?n:bs(Array.isArray(n)?ms.call(n):n),t):r},t},t.thresholdFreedmanDiaconis=function(t,n,e){return t=xs.call(t,ds).sort(ss),Math.ceil((e-n)/(2*(As(t,.75)-As(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*_s(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=Es,t.max=function(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r},t.mean=function(t,n){var e,r=t.length,i=r,o=-1,u=0;if(null==n)for(;++o<r;)isNaN(e=ds(t[o]))?--i:u+=e;else for(;++o<r;)isNaN(e=ds(n(t[o],o,t)))?--i:u+=e;if(i)return u/i},t.median=function(t,n){var e,r=t.length,i=-1,o=[];if(null==n)for(;++i<r;)isNaN(e=ds(t[i]))||o.push(e);else for(;++i<r;)isNaN(e=ds(n(t[i],i,t)))||o.push(e);return As(o.sort(ss),.5)},t.merge=Cs,t.min=zs,t.pairs=function(t,n){null==n&&(n=e);for(var r=0,i=t.length-1,o=t[0],u=new Array(i<0?0:i);r<i;)u[r]=n(o,o=t[++r]);return u},t.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},t.quantile=As,t.range=Ms,t.scan=function(t,n){if(e=t.length){var e,r,i=0,o=0,u=t[o];for(null==n&&(n=ss);++i<e;)(n(r=t[i],u)<0||0!==n(u,u))&&(u=r,o=i);return 0===n(u,u)?o:void 0}},t.shuffle=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},t.sum=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},t.ticks=Ss,t.tickIncrement=r,t.tickStep=i,t.transpose=Ps,t.variance=vs,t.zip=function(){return Ps(arguments)},t.axisTop=function(t){return l(qs,t)},t.axisRight=function(t){return l(Us,t)},t.axisBottom=function(t){return l(Ds,t)},t.axisLeft=function(t){return l(Os,t)},t.brush=function(){return he(Sh)},t.brushX=function(){return he(kh)},t.brushY=function(){return he(Nh)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.chord=function(){function t(t){var o,u,a,c,s,f,l=t.length,h=[],p=Ms(l),d=[],v=[],_=v.groups=new Array(l),y=new Array(l*l);for(o=0,s=-1;++s<l;){for(u=0,f=-1;++f<l;)u+=t[s][f];h.push(u),d.push(Ms(l)),o+=u}for(e&&p.sort(function(t,n){return e(h[t],h[n])}),r&&d.forEach(function(n,e){n.sort(function(n,i){return r(t[e][n],t[e][i])})}),c=(o=Oh(0,Dh-n*l)/o)?n:Dh/l,u=0,s=-1;++s<l;){for(a=u,f=-1;++f<l;){var g=p[s],m=d[g][f],x=t[g][m],b=u,w=u+=x*o;y[m*l+g]={index:g,subindex:m,startAngle:b,endAngle:w,value:x}}_[g]={index:g,startAngle:a,endAngle:u,value:h[g]},u+=c}for(s=-1;++s<l;)for(f=s-1;++f<l;){var M=y[f*l+s],T=y[s*l+f];(M.value||T.value)&&v.push(M.value<T.value?{source:T,target:M}:{source:M,target:T})}return i?v.sort(i):v}var n=0,e=null,r=null,i=null;return t.padAngle=function(e){return arguments.length?(n=Oh(0,e),t):n},t.sortGroups=function(n){return arguments.length?(e=n,t):e},t.sortSubgroups=function(n){return arguments.length?(r=n,t):r},t.sortChords=function(n){return arguments.length?(null==n?i=null:(i=pe(n))._=n,t):i&&i._},t},t.ribbon=function(){function t(){var t,a=Fh.call(arguments),c=n.apply(this,a),s=e.apply(this,a),f=+r.apply(this,(a[0]=c,a)),l=i.apply(this,a)-Uh,h=o.apply(this,a)-Uh,p=f*Rh(l),d=f*Lh(l),v=+r.apply(this,(a[0]=s,a)),_=i.apply(this,a)-Uh,y=o.apply(this,a)-Uh;if(u||(u=t=ve()),u.moveTo(p,d),u.arc(0,0,f,l,h),l===_&&h===y||(u.quadraticCurveTo(0,0,v*Rh(_),v*Lh(_)),u.arc(0,0,v,_,y)),u.quadraticCurveTo(0,0,p,d),u.closePath(),t)return u=null,t+\"\"||null}var n=_e,e=ye,r=ge,i=me,o=xe,u=null;return t.radius=function(n){return arguments.length?(r=\"function\"==typeof n?n:Ih(+n),t):r},t.startAngle=function(n){return arguments.length?(i=\"function\"==typeof n?n:Ih(+n),t):i},t.endAngle=function(n){return arguments.length?(o=\"function\"==typeof n?n:Ih(+n),t):o},t.source=function(e){return arguments.length?(n=e,t):n},t.target=function(n){return arguments.length?(e=n,t):e},t.context=function(n){return arguments.length?(u=null==n?null:n,t):u},t},t.nest=function(){function t(n,i,u,a){if(i>=o.length)return null!=e&&n.sort(e),null!=r?r(n):n;for(var c,s,f,l=-1,h=n.length,p=o[i++],d=we(),v=u();++l<h;)(f=d.get(c=p(s=n[l])+\"\"))?f.push(s):d.set(c,[s]);return d.each(function(n,e){a(v,e,t(n,i,u,a))}),v}function n(t,e){if(++e>o.length)return t;var i,a=u[e-1];return null!=r&&e>=o.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:n(t,e)})})),null!=a?i.sort(function(t,n){return a(t.key,n.key)}):i}var e,r,i,o=[],u=[];return i={object:function(n){return t(n,0,Me,Te)},map:function(n){return t(n,0,ke,Ne)},entries:function(e){return n(t(e,0,ke,Ne),0)},key:function(t){return o.push(t),i},sortKeys:function(t){return u[o.length-1]=t,i},sortValues:function(t){return e=t,i},rollup:function(t){return r=t,i}}},t.set=Ee,t.map=we,t.keys=function(t){var n=[];for(var e in t)n.push(e);return n},t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},t.color=Tt,t.rgb=Et,t.hsl=Pt,t.lab=Ut,t.hcl=jt,t.cubehelix=$t,t.dispatch=h,t.drag=function(){function n(t){t.on(\"mousedown.drag\",e).filter(bt).on(\"touchstart.drag\",o).on(\"touchmove.drag\",u).on(\"touchend.drag touchcancel.drag\",a).style(\"touch-action\",\"none\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}function e(){if(!p&&d.apply(this,arguments)){var n=c(\"mouse\",v.apply(this,arguments),Ks,this,arguments);n&&(cf(t.event.view).on(\"mousemove.drag\",r,!0).on(\"mouseup.drag\",i,!0),lf(t.event.view),vt(),l=!1,s=t.event.clientX,f=t.event.clientY,n(\"start\"))}}function r(){if(ff(),!l){var n=t.event.clientX-s,e=t.event.clientY-f;l=n*n+e*e>x}y.mouse(\"drag\")}function i(){cf(t.event.view).on(\"mousemove.drag mouseup.drag\",null),_t(t.event.view,l),ff(),y.mouse(\"end\")}function o(){if(d.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=v.apply(this,arguments),o=r.length;for(n=0;n<o;++n)(e=c(r[n].identifier,i,sf,this,arguments))&&(vt(),e(\"start\"))}}function u(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=y[r[n].identifier])&&(ff(),e(\"drag\"))}function a(){var n,e,r=t.event.changedTouches,i=r.length;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),n=0;n<i;++n)(e=y[r[n].identifier])&&(vt(),e(\"end\"))}function c(e,r,i,o,u){var a,c,s,f=i(r,e),l=g.copy();if(N(new yt(n,\"beforestart\",a,e,m,f[0],f[1],0,0,l),function(){return null!=(t.event.subject=a=_.apply(o,u))&&(c=a.x-f[0]||0,s=a.y-f[1]||0,!0)}))return function t(h){var p,d=f;switch(h){case\"start\":y[e]=t,p=m++;break;case\"end\":delete y[e],--m;case\"drag\":f=i(r,e),p=m}N(new yt(n,h,a,e,p,f[0]+c,f[1]+s,f[0]-d[0],f[1]-d[1],l),l.apply,l,[h,o,u])}}var s,f,l,p,d=gt,v=mt,_=xt,y={},g=h(\"start\",\"drag\",\"end\"),m=0,x=0;return n.filter=function(t){return arguments.length?(d=\"function\"==typeof t?t:hf(!!t),n):d},n.container=function(t){return arguments.length?(v=\"function\"==typeof t?t:hf(t),n):v},n.subject=function(t){return arguments.length?(_=\"function\"==typeof t?t:hf(t),n):_},n.on=function(){var t=g.on.apply(g,arguments);return t===g?n:t},n.clickDistance=function(t){return arguments.length?(x=(t=+t)*t,n):Math.sqrt(x)},n},t.dragDisable=lf,t.dragEnable=_t,t.dsvFormat=Gh,t.csvParse=Qh,t.csvParseRows=Kh,t.csvFormat=tp,t.csvFormatRows=np,t.tsvParse=rp,t.tsvParseRows=ip,t.tsvFormat=op,t.tsvFormatRows=up,t.easeLinear=function(t){return+t},t.easeQuad=Kn,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Kn,t.easeCubic=te,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=te,t.easePoly=Gl,t.easePolyIn=Wl,t.easePolyOut=Zl,t.easePolyInOut=Gl,t.easeSin=ne,t.easeSinIn=function(t){return 1-Math.cos(t*Ql)},t.easeSinOut=function(t){return Math.sin(t*Ql)},t.easeSinInOut=ne,t.easeExp=ee,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=ee,t.easeCircle=re,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=re,t.easeBounce=ie,t.easeBounceIn=function(t){return 1-ie(1-t)},t.easeBounceOut=ie,t.easeBounceInOut=function(t){return((t*=2)<=1?1-ie(1-t):ie(t-1)+1)/2},t.easeBack=lh,t.easeBackIn=sh,t.easeBackOut=fh,t.easeBackInOut=lh,t.easeElastic=dh,t.easeElasticIn=ph,t.easeElasticOut=dh,t.easeElasticInOut=vh,t.forceCenter=function(t,n){function e(){var e,i,o=r.length,u=0,a=0;for(e=0;e<o;++e)u+=(i=r[e]).x,a+=i.y;for(u=u/o-t,a=a/o-n,e=0;e<o;++e)(i=r[e]).x-=u,i.y-=a}var r;return null==t&&(t=0),null==n&&(n=0),e.initialize=function(t){r=t},e.x=function(n){return arguments.length?(t=+n,e):t},e.y=function(t){return arguments.length?(n=+t,e):n},e},t.forceCollide=function(t){function n(){for(var t,n,r,c,s,f,l,h=i.length,p=0;p<a;++p)for(n=qe(i,Oe,Fe).visitAfter(e),t=0;t<h;++t)r=i[t],f=o[r.index],l=f*f,c=r.x+r.vx,s=r.y+r.vy,n.visit(function(t,n,e,i,o){var a=t.data,h=t.r,p=f+h;if(!a)return n>c+p||i<c-p||e>s+p||o<s-p;if(a.index>r.index){var d=c-a.x-a.vx,v=s-a.y-a.vy,_=d*d+v*v;_<p*p&&(0===d&&(d=cp(),_+=d*d),0===v&&(v=cp(),_+=v*v),_=(p-(_=Math.sqrt(_)))/_*u,r.vx+=(d*=_)*(p=(h*=h)/(l+h)),r.vy+=(v*=_)*p,a.vx-=d*(p=1-p),a.vy-=v*p)}})}function e(t){if(t.data)return t.r=o[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function r(){if(i){var n,e,r=i.length;for(o=new Array(r),n=0;n<r;++n)e=i[n],o[e.index]=+t(e,n,i)}}var i,o,u=1,a=1;return\"function\"!=typeof t&&(t=ap(null==t?1:+t)),n.initialize=function(t){i=t,r()},n.iterations=function(t){return arguments.length?(a=+t,n):a},n.strength=function(t){return arguments.length?(u=+t,n):u},n.radius=function(e){return arguments.length?(t=\"function\"==typeof e?e:ap(+e),r(),n):t},n},t.forceLink=function(t){function n(n){for(var e=0,r=t.length;e<p;++e)for(var i,a,c,f,l,h,d,v=0;v<r;++v)a=(i=t[v]).source,f=(c=i.target).x+c.vx-a.x-a.vx||cp(),l=c.y+c.vy-a.y-a.vy||cp(),f*=h=((h=Math.sqrt(f*f+l*l))-u[v])/h*n*o[v],l*=h,c.vx-=f*(d=s[v]),c.vy-=l*d,a.vx+=f*(d=1-d),a.vy+=l*d}function e(){if(a){var n,e,l=a.length,h=t.length,p=we(a,f);for(n=0,c=new Array(l);n<h;++n)(e=t[n]).index=n,\"object\"!=typeof e.source&&(e.source=Ye(p,e.source)),\"object\"!=typeof e.target&&(e.target=Ye(p,e.target)),c[e.source.index]=(c[e.source.index]||0)+1,c[e.target.index]=(c[e.target.index]||0)+1;for(n=0,s=new Array(h);n<h;++n)e=t[n],s[n]=c[e.source.index]/(c[e.source.index]+c[e.target.index]);o=new Array(h),r(),u=new Array(h),i()}}function r(){if(a)for(var n=0,e=t.length;n<e;++n)o[n]=+l(t[n],n,t)}function i(){if(a)for(var n=0,e=t.length;n<e;++n)u[n]=+h(t[n],n,t)}var o,u,a,c,s,f=Ie,l=function(t){return 1/Math.min(c[t.source.index],c[t.target.index])},h=ap(30),p=1;return null==t&&(t=[]),n.initialize=function(t){a=t,e()},n.links=function(r){return arguments.length?(t=r,e(),n):t},n.id=function(t){return arguments.length?(f=t,n):f},n.iterations=function(t){return arguments.length?(p=+t,n):p},n.strength=function(t){return arguments.length?(l=\"function\"==typeof t?t:ap(+t),r(),n):l},n.distance=function(t){return arguments.length?(h=\"function\"==typeof t?t:ap(+t),i(),n):h},n},t.forceManyBody=function(){function t(t){var n,a=i.length,c=qe(i,Be,je).visitAfter(e);for(u=t,n=0;n<a;++n)o=i[n],c.visit(r)}function n(){if(i){var t,n,e=i.length;for(a=new Array(e),t=0;t<e;++t)n=i[t],a[n.index]=+c(n,t,i)}}function e(t){var n,e,r,i,o,u=0;if(t.length){for(r=i=o=0;o<4;++o)(n=t[o])&&(e=n.value)&&(u+=e,r+=e*n.x,i+=e*n.y);t.x=r/u,t.y=i/u}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=a[n.data.index]}while(n=n.next)}t.value=u}function r(t,n,e,r){if(!t.value)return!0;var i=t.x-o.x,c=t.y-o.y,h=r-n,p=i*i+c*c;if(h*h/l<p)return p<f&&(0===i&&(i=cp(),p+=i*i),0===c&&(c=cp(),p+=c*c),p<s&&(p=Math.sqrt(s*p)),o.vx+=i*t.value*u/p,o.vy+=c*t.value*u/p),!0;if(!(t.length||p>=f)){(t.data!==o||t.next)&&(0===i&&(i=cp(),p+=i*i),0===c&&(c=cp(),p+=c*c),p<s&&(p=Math.sqrt(s*p)));do{t.data!==o&&(h=a[t.data.index]*u/p,o.vx+=i*h,o.vy+=c*h)}while(t=t.next)}}var i,o,u,a,c=ap(-30),s=1,f=1/0,l=.81;return t.initialize=function(t){i=t,n()},t.strength=function(e){return arguments.length?(c=\"function\"==typeof e?e:ap(+e),n(),t):c},t.distanceMin=function(n){return arguments.length?(s=n*n,t):Math.sqrt(s)},t.distanceMax=function(n){return arguments.length?(f=n*n,t):Math.sqrt(f)},t.theta=function(n){return arguments.length?(l=n*n,t):Math.sqrt(l)},t},t.forceSimulation=function(t){function n(){e(),d.call(\"tick\",o),u<a&&(p.stop(),d.call(\"end\",o))}function e(){var n,e,r=t.length;for(u+=(s-u)*c,l.each(function(t){t(u)}),n=0;n<r;++n)null==(e=t[n]).fx?e.x+=e.vx*=f:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=f:(e.y=e.fy,e.vy=0)}function r(){for(var n,e=0,r=t.length;e<r;++e){if(n=t[e],n.index=e,isNaN(n.x)||isNaN(n.y)){var i=hp*Math.sqrt(e),o=e*pp;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function i(n){return n.initialize&&n.initialize(t),n}var o,u=1,a=.001,c=1-Math.pow(a,1/300),s=0,f=.6,l=we(),p=dn(n),d=h(\"tick\",\"end\");return null==t&&(t=[]),r(),o={tick:e,restart:function(){return p.restart(n),o},stop:function(){return p.stop(),o},nodes:function(n){return arguments.length?(t=n,r(),l.each(i),o):t},alpha:function(t){return arguments.length?(u=+t,o):u},alphaMin:function(t){return arguments.length?(a=+t,o):a},alphaDecay:function(t){return arguments.length?(c=+t,o):+c},alphaTarget:function(t){return arguments.length?(s=+t,o):s},velocityDecay:function(t){return arguments.length?(f=1-t,o):1-f},force:function(t,n){return arguments.length>1?(null==n?l.remove(t):l.set(t,i(n)),o):l.get(t)},find:function(n,e,r){var i,o,u,a,c,s=0,f=t.length;for(null==r?r=1/0:r*=r,s=0;s<f;++s)(u=(i=n-(a=t[s]).x)*i+(o=e-a.y)*o)<r&&(c=a,r=u);return c},on:function(t,n){return arguments.length>1?(d.on(t,n),o):d.on(t)}}},t.forceX=function(t){function n(t){for(var n,e=0,u=r.length;e<u;++e)(n=r[e]).vx+=(o[e]-n.x)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+u(r[n],n,r)}}var r,i,o,u=ap(.1);return\"function\"!=typeof t&&(t=ap(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(u=\"function\"==typeof t?t:ap(+t),e(),n):u},n.x=function(r){return arguments.length?(t=\"function\"==typeof r?r:ap(+r),e(),n):t},n},t.forceY=function(t){function n(t){for(var n,e=0,u=r.length;e<u;++e)(n=r[e]).vy+=(o[e]-n.y)*i[e]*t}function e(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)i[n]=isNaN(o[n]=+t(r[n],n,r))?0:+u(r[n],n,r)}}var r,i,o,u=ap(.1);return\"function\"!=typeof t&&(t=ap(null==t?0:+t)),n.initialize=function(t){r=t,e()},n.strength=function(t){return arguments.length?(u=\"function\"==typeof t?t:ap(+t),e(),n):u},n.y=function(r){return arguments.length?(t=\"function\"==typeof r?r:ap(+r),e(),n):t},n},t.formatDefaultLocale=$e,t.formatLocale=Tp,t.formatSpecifier=He,t.precisionFixed=kp,t.precisionPrefix=Np,t.precisionRound=Sp,t.geoArea=function(t){return Cd.reset(),Ed(t,zd),2*Cd},t.geoBounds=function(t){var n,e,r,i,o,u,a;if(Dp=Up=-(Lp=qp=1/0),Bp=[],Ed(t,Rd),e=Bp.length){for(Bp.sort(br),n=1,o=[r=Bp[0]];n<e;++n)wr(r,(i=Bp[n])[0])||wr(r,i[1])?(xr(r[0],i[1])>xr(r[0],r[1])&&(r[1]=i[1]),xr(i[0],r[1])>xr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(u=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(a=xr(r[1],i[0]))>u&&(u=a,Lp=i[0],Up=r[1])}return Bp=jp=null,Lp===1/0||qp===1/0?[[NaN,NaN],[NaN,NaN]]:[[Lp,qp],[Up,Dp]]},t.geoCentroid=function(t){Hp=Xp=$p=Vp=Wp=Zp=Gp=Jp=Qp=Kp=td=0,Ed(t,Ld);var n=Qp,e=Kp,r=td,i=n*n+e*e+r*r;return i<1e-12&&(n=Zp,e=Gp,r=Jp,Xp<ad&&(n=$p,e=Vp,r=Wp),(i=n*n+e*e+r*r)<1e-12)?[NaN,NaN]:[_d(e,n)*hd,Ge(r/Td(i))*hd]},t.geoCircle=function(){function t(){var t=r.apply(this,arguments),a=i.apply(this,arguments)*pd,c=o.apply(this,arguments)*pd;return n=[],e=Lr(-t[0]*pd,-t[1]*pd,0).invert,Or(u,a,c,1),t={type:\"Polygon\",coordinates:[n]},n=e=null,t}var n,e,r=qd([0,0]),i=qd(90),o=qd(6),u={point:function(t,r){n.push(t=e(t,r)),t[0]*=hd,t[1]*=hd}};return t.center=function(n){return arguments.length?(r=\"function\"==typeof n?n:qd([+n[0],+n[1]]),t):r},t.radius=function(n){return arguments.length?(i=\"function\"==typeof n?n:qd(+n),t):i},t.precision=function(n){return arguments.length?(o=\"function\"==typeof n?n:qd(+n),t):o},t},t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,u=500;return e={stream:function(e){return t&&n===e?t:t=Br(r,i,o,u)(n=e)},extent:function(a){return arguments.length?(r=+a[0][0],i=+a[0][1],o=+a[1][0],u=+a[1][1],t=n=null,e):[[r,i],[o,u]]}}},t.geoContains=function(t,n){return(t&&sv.hasOwnProperty(t.type)?sv[t.type]:$r)(t,n)},t.geoDistance=cv,t.geoGraticule=ti,t.geoGraticule10=function(){return ti()()},t.geoInterpolate=function(t,n){var e=t[0]*pd,r=t[1]*pd,i=n[0]*pd,o=n[1]*pd,u=yd(r),a=wd(r),c=yd(o),s=wd(o),f=u*yd(e),l=u*wd(e),h=c*yd(i),p=c*wd(i),d=2*Ge(Td(Je(o-r)+u*c*Je(i-e))),v=wd(d),_=d?function(t){var n=wd(t*=d)/v,e=wd(d-t)/v,r=e*f+n*h,i=e*l+n*p,o=e*a+n*s;return[_d(i,r)*hd,_d(o,Td(r*r+i*i))*hd]}:function(){return[e*hd,r*hd]};return _.distance=d,_},t.geoLength=ov,t.geoPath=function(t,n){function e(t){return t&&(\"function\"==typeof o&&i.pointRadius(+o.apply(this,arguments)),Ed(t,r(i))),i.result()}var r,i,o=4.5;return e.area=function(t){return Ed(t,r(dv)),dv.result()},e.measure=function(t){return Ed(t,r(Uv)),Uv.result()},e.bounds=function(t){return Ed(t,r(mv)),mv.result()},e.centroid=function(t){return Ed(t,r(Av)),Av.result()},e.projection=function(n){return arguments.length?(r=null==n?(t=null,lv):(t=n).stream,e):t},e.context=function(t){return arguments.length?(i=null==t?(n=null,new yi):new di(n=t),\"function\"!=typeof o&&i.pointRadius(o),e):n},e.pointRadius=function(t){return arguments.length?(o=\"function\"==typeof t?t:(i.pointRadius(+t),+t),e):o},e.projection(t).context(n)},t.geoAlbers=Xv,t.geoAlbersUsa=function(){function t(t){var n=t[0],e=t[1];return a=null,i.point(n,e),a||(o.point(n,e),a)||(u.point(n,e),a)}function n(){return e=r=null,t}var e,r,i,o,u,a,c=Xv(),s=Hv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f=Hv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){a=[t,n]}};return t.invert=function(t){var n=c.scale(),e=c.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?f:c).invert(t)},t.stream=function(t){return e&&r===t?e:e=Ri([c.stream(r=t),s.stream(t),f.stream(t)])},t.precision=function(t){return arguments.length?(c.precision(t),s.precision(t),f.precision(t),n()):c.precision()},t.scale=function(n){return arguments.length?(c.scale(n),s.scale(.35*n),f.scale(n),t.translate(c.translate())):c.scale()},t.translate=function(t){if(!arguments.length)return c.translate();var e=c.scale(),r=+t[0],a=+t[1];return i=c.translate(t).clipExtent([[r-.455*e,a-.238*e],[r+.455*e,a+.238*e]]).stream(l),o=s.translate([r-.307*e,a+.201*e]).clipExtent([[r-.425*e+ad,a+.12*e+ad],[r-.214*e-ad,a+.234*e-ad]]).stream(l),u=f.translate([r-.205*e,a+.212*e]).clipExtent([[r-.214*e+ad,a+.166*e+ad],[r-.115*e-ad,a+.234*e-ad]]).stream(l),n()},t.fitExtent=function(n,e){return Ti(t,n,e)},t.fitSize=function(n,e){return ki(t,n,e)},t.scale(1070)},t.geoAzimuthalEqualArea=function(){return Ei($v).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=$v,t.geoAzimuthalEquidistant=function(){return Ei(Vv).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Vv,t.geoConicConformal=function(){return Ci(Fi).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Fi,t.geoConicEqualArea=Hv,t.geoConicEqualAreaRaw=Pi,t.geoConicEquidistant=function(){return Ci(Yi).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Yi,t.geoEquirectangular=function(){return Ei(Ii).scale(152.63)},t.geoEquirectangularRaw=Ii,t.geoGnomonic=function(){return Ei(Bi).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Bi,t.geoIdentity=function(){function t(){return i=o=null,u}var n,e,r,i,o,u,a=1,c=0,s=0,f=1,l=1,h=lv,p=null,d=lv;return u={stream:function(t){return i&&o===t?i:i=h(d(o=t))},clipExtent:function(i){return arguments.length?(d=null==i?(p=n=e=r=null,lv):Br(p=+i[0][0],n=+i[0][1],e=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,n],[e,r]]},scale:function(n){return arguments.length?(h=ji((a=+n)*f,a*l,c,s),t()):a},translate:function(n){return arguments.length?(h=ji(a*f,a*l,c=+n[0],s=+n[1]),t()):[c,s]},reflectX:function(n){return arguments.length?(h=ji(a*(f=n?-1:1),a*l,c,s),t()):f<0},reflectY:function(n){return arguments.length?(h=ji(a*f,a*(l=n?-1:1),c,s),t()):l<0},fitExtent:function(t,n){return Ti(u,t,n)},fitSize:function(t,n){return ki(u,t,n)}}},t.geoProjection=Ei,t.geoProjectionMutator=Ai,t.geoMercator=function(){return Di(Ui).scale(961/ld)},t.geoMercatorRaw=Ui,t.geoOrthographic=function(){return Ei(Hi).scale(249.5).clipAngle(90+ad)},t.geoOrthographicRaw=Hi,t.geoStereographic=function(){return Ei(Xi).scale(250).clipAngle(142)},t.geoStereographicRaw=Xi,t.geoTransverseMercator=function(){var t=Di($i),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=$i,t.geoRotation=Wd,t.geoStream=Ed,t.geoTransform=function(t){return{stream:wi(t)}},t.cluster=function(){function t(t){var o,u=0;t.eachAfter(function(t){var e=t.children;e?(t.x=Wi(e),t.y=Gi(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var a=Qi(t),c=Ki(t),s=a.x-n(a,c)/2,f=c.x+n(c,a)/2;return t.eachAfter(i?function(n){n.x=(n.x-t.x)*e,n.y=(t.y-n.y)*r}:function(n){n.x=(n.x-s)/(f-s)*e,n.y=(1-(t.y?n.y/t.y:1))*r})}var n=Vi,e=1,r=1,i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(n){return arguments.length?(i=!1,e=+n[0],r=+n[1],t):i?null:[e,r]},t.nodeSize=function(n){return arguments.length?(i=!0,e=+n[0],r=+n[1],t):i?[e,r]:null},t},t.hierarchy=eo,t.pack=function(){function t(t){return t.x=e/2,t.y=r/2,n?t.eachBefore(No(n)).eachAfter(So(i,.5)).eachBefore(Eo(1)):t.eachBefore(No(ko)).eachAfter(So(To,1)).eachAfter(So(i,t.r/Math.min(e,r))).eachBefore(Eo(Math.min(e,r)/(2*t.r))),t}var n=null,e=1,r=1,i=To;return t.radius=function(e){return arguments.length?(n=wo(e),t):n},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i=\"function\"==typeof n?n:Gv(+n),t):i},t},t.packSiblings=function(t){return bo(t),t},t.packEnclose=Zv,t.partition=function(){function t(t){var u=t.height+1;return t.x0=t.y0=i,t.x1=e,t.y1=r/u,t.eachBefore(n(r,u)),o&&t.eachBefore(Jv),t}function n(t,n){return function(e){e.children&&Qv(e,e.x0,t*(e.depth+1)/n,e.x1,t*(e.depth+2)/n);var r=e.x0,o=e.y0,u=e.x1-i,a=e.y1-i;u<r&&(r=u=(r+u)/2),a<o&&(o=a=(o+a)/2),e.x0=r,e.y0=o,e.x1=u,e.y1=a}}var e=1,r=1,i=0,o=!1;return t.round=function(n){return arguments.length?(o=!!n,t):o},t.size=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.padding=function(n){return arguments.length?(i=+n,t):i},t},t.stratify=function(){function t(t){var r,i,o,u,a,c,s,f=t.length,l=new Array(f),h={};for(i=0;i<f;++i)r=t[i],a=l[i]=new uo(r),null!=(c=n(r,i,t))&&(c+=\"\")&&(h[s=Kv+(a.id=c)]=s in h?n_:a);for(i=0;i<f;++i)if(a=l[i],null!=(c=e(t[i],i,t))&&(c+=\"\")){if(!(u=h[Kv+c]))throw new Error(\"missing: \"+c);if(u===n_)throw new Error(\"ambiguous: \"+c);u.children?u.children.push(a):u.children=[a],a.parent=u}else{if(o)throw new Error(\"multiple roots\");o=a}if(!o)throw new Error(\"no root\");if(o.parent=t_,o.eachBefore(function(t){t.depth=t.parent.depth+1,--f}).eachBefore(oo),o.parent=null,f>0)throw new Error(\"cycle\");return o}var n=Ao,e=Co;return t.id=function(e){return arguments.length?(n=Mo(e),t):n},t.parentId=function(n){return arguments.length?(e=Mo(n),t):e},t},t.tree=function(){function t(t){var r=Oo(t);if(r.eachAfter(n),r.parent.m=-r.z,r.eachBefore(e),c)t.eachBefore(i);else{var s=t,f=t,l=t;t.eachBefore(function(t){t.x<s.x&&(s=t),t.x>f.x&&(f=t),t.depth>l.depth&&(l=t)});var h=s===f?1:o(s,f)/2,p=h-s.x,d=u/(f.x+h+p),v=a/(l.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return t}function n(t){var n=t.children,e=t.parent.children,i=t.i?e[t.i-1]:null;if(n){qo(t);var u=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-u):t.z=u}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||e[0])}function e(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,n,e){if(n){for(var r,i=t,u=t,a=n,c=i.parent.children[0],s=i.m,f=u.m,l=a.m,h=c.m;a=Ro(a),i=Po(i),a&&i;)c=Po(c),(u=Ro(u)).a=t,(r=a.z+l-i.z-s+o(a._,i._))>0&&(Lo(Uo(a,t,e),t,r),s+=r,f+=r),l+=a.m,s+=i.m,h+=c.m,f+=u.m;a&&!Ro(u)&&(u.t=a,u.m+=l-f),i&&!Po(c)&&(c.t=i,c.m+=s-h,e=t)}return e}function i(t){t.x*=u,t.y=t.depth*a}var o=zo,u=1,a=1,c=null;return t.separation=function(n){return arguments.length?(o=n,t):o},t.size=function(n){return arguments.length?(c=!1,u=+n[0],a=+n[1],t):c?null:[u,a]},t.nodeSize=function(n){return arguments.length?(c=!0,u=+n[0],a=+n[1],t):c?[u,a]:null},t},t.treemap=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(n),u=[0],r&&t.eachBefore(Jv),t}function n(t){var n=u[t.depth],r=t.x0+n,i=t.y0+n,o=t.x1-n,h=t.y1-n;o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=h,t.children&&(n=u[t.depth+1]=a(t)/2,r+=l(t)-n,i+=c(t)-n,o-=s(t)-n,h-=f(t)-n,o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),e(t,r,i,o,h))}var e=i_,r=!1,i=1,o=1,u=[0],a=To,c=To,s=To,f=To,l=To;return t.round=function(n){return arguments.length?(r=!!n,t):r},t.size=function(n){return arguments.length?(i=+n[0],o=+n[1],t):[i,o]},t.tile=function(n){return arguments.length?(e=Mo(n),t):e},t.padding=function(n){return arguments.length?t.paddingInner(n).paddingOuter(n):t.paddingInner()},t.paddingInner=function(n){return arguments.length?(a=\"function\"==typeof n?n:Gv(+n),t):a},t.paddingOuter=function(n){return arguments.length?t.paddingTop(n).paddingRight(n).paddingBottom(n).paddingLeft(n):t.paddingTop()},t.paddingTop=function(n){return arguments.length?(c=\"function\"==typeof n?n:Gv(+n),t):c},t.paddingRight=function(n){return arguments.length?(s=\"function\"==typeof n?n:Gv(+n),t):s},t.paddingBottom=function(n){return arguments.length?(f=\"function\"==typeof n?n:Gv(+n),t):f},t.paddingLeft=function(n){return arguments.length?(l=\"function\"==typeof n?n:Gv(+n),t):l},t},t.treemapBinary=function(t,n,e,r,i){function o(t,n,e,r,i,u,a){if(t>=n-1){var s=c[t];return s.x0=r,s.y0=i,s.x1=u,void(s.y1=a)}for(var l=f[t],h=e/2+l,p=t+1,d=n-1;p<d;){var v=p+d>>>1;f[v]<h?p=v+1:d=v}h-f[p-1]<f[p]-h&&t+1<p&&--p;var _=f[p]-l,y=e-_;if(u-r>a-i){var g=(r*y+u*_)/e;o(t,p,_,r,i,g,a),o(p,n,y,g,i,u,a)}else{var m=(i*y+a*_)/e;o(t,p,_,r,i,u,m),o(p,n,y,r,m,u,a)}}var u,a,c=t.children,s=c.length,f=new Array(s+1);for(f[0]=a=u=0;u<s;++u)f[u+1]=a+=c[u].value;o(0,s,t.value,n,e,r,i)},t.treemapDice=Qv,t.treemapSlice=e_,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?e_:Qv)(t,n,e,r,i)},t.treemapSquarify=i_,t.treemapResquarify=o_,t.interpolate=cl,t.interpolateArray=nl,t.interpolateBasis=Zf,t.interpolateBasisClosed=Gf,t.interpolateDate=el,t.interpolateNumber=rl,t.interpolateObject=il,t.interpolateRound=sl,t.interpolateString=al,t.interpolateTransformCss=pl,t.interpolateTransformSvg=dl,t.interpolateZoom=_l,t.interpolateRgb=Qf,t.interpolateRgbBasis=Kf,t.interpolateRgbBasisClosed=tl,t.interpolateHsl=yl,t.interpolateHslLong=gl,t.interpolateLab=function(t,n){var e=Kt((t=Ut(t)).l,(n=Ut(n)).l),r=Kt(t.a,n.a),i=Kt(t.b,n.b),o=Kt(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+\"\"}},t.interpolateHcl=ml,t.interpolateHclLong=xl,t.interpolateCubehelix=bl,t.interpolateCubehelixLong=wl,t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.path=ve,t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,u=0,a=t[i-1],c=0;++r<i;)n=a,a=t[r],c+=e=n[0]*a[1]-a[0]*n[1],o+=(n[0]+a[0])*e,u+=(n[1]+a[1])*e;return c*=3,[o/c,u/c]},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(Io),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=Yo(r),u=Yo(i),a=u[0]===o[0],c=u[u.length-1]===o[o.length-1],s=[];for(n=o.length-1;n>=0;--n)s.push(t[r[o[n]][2]]);for(n=+a;n<u.length-c;++n)s.push(t[r[u[n]][2]]);return s},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],u=n[0],a=n[1],c=o[0],s=o[1],f=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>a!=s>a&&u<(c-e)*(a-r)/(s-r)+e&&(f=!f),c=e,s=r;return f},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],u=o[0],a=o[1],c=0;++r<i;)n=u,e=a,n-=u=(o=t[r])[0],e-=a=o[1],c+=Math.sqrt(n*n+e*e);return c},t.quadtree=qe,t.queue=Wo,t.randomUniform=f_,t.randomNormal=l_,t.randomLogNormal=h_,t.randomBates=d_,t.randomIrwinHall=p_,t.randomExponential=v_,t.request=__,t.html=g_,t.json=m_,t.text=x_,t.xml=b_,t.csv=M_,t.tsv=T_,t.scaleBand=Ko,t.scalePoint=function(){return tu(Ko().paddingInner(1))},t.scaleIdentity=fu,t.scaleLinear=su,t.scaleLog=yu,t.scaleOrdinal=Qo,t.scaleImplicit=E_,t.scalePow=mu,t.scaleSqrt=function(){return mu().exponent(.5)},t.scaleQuantile=xu,t.scaleQuantize=bu,t.scaleThreshold=wu,t.scaleTime=function(){return Na(fy,cy,W_,$_,H_,B_,I_,U_,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Na(Ly,Py,gy,_y,dy,hy,I_,U_,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=Jy,t.schemeCategory20b=Qy,t.schemeCategory20c=Ky,t.schemeCategory20=tg,t.interpolateCubehelixDefault=ng,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return ig.h=360*t-100,ig.s=1.5-1.5*n,ig.l=.8-.9*n,ig+\"\"},t.interpolateWarm=eg,t.interpolateCool=rg,t.interpolateViridis=og,t.interpolateMagma=ug,t.interpolateInferno=ag,t.interpolatePlasma=cg,t.scaleSequential=Ea,t.creator=Hs,t.local=m,t.matcher=Zs,t.mouse=Ks,t.namespace=js,t.namespaces=Bs,t.select=cf,t.selectAll=function(t){return\"string\"==typeof t?new pt([document.querySelectorAll(t)],[document.documentElement]):new pt([null==t?[]:t],af)},t.selection=dt,t.selector=tf,t.selectorAll=nf,t.style=B,t.touch=sf,t.touches=function(t,n){null==n&&(n=Js().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=Qs(t,n[e]);return i},t.window=uf,t.customEvent=N,t.arc=function(){function t(){var t,s,f=+n.apply(this,arguments),l=+e.apply(this,arguments),h=o.apply(this,arguments)-mg,p=u.apply(this,arguments)-mg,d=fg(p-h),v=p>h;if(c||(c=t=ve()),l<f&&(s=l,l=f,f=s),l>yg)if(d>xg-yg)c.moveTo(l*hg(h),l*vg(h)),c.arc(0,0,l,h,p,!v),f>yg&&(c.moveTo(f*hg(p),f*vg(p)),c.arc(0,0,f,p,h,v));else{var _,y,g=h,m=p,x=h,b=p,w=d,M=d,T=a.apply(this,arguments)/2,k=T>yg&&(i?+i.apply(this,arguments):_g(f*f+l*l)),N=dg(fg(l-f)/2,+r.apply(this,arguments)),S=N,E=N;if(k>yg){var A=Ca(k/f*vg(T)),C=Ca(k/l*vg(T));(w-=2*A)>yg?(A*=v?1:-1,x+=A,b-=A):(w=0,x=b=(h+p)/2),(M-=2*C)>yg?(C*=v?1:-1,g+=C,m-=C):(M=0,g=m=(h+p)/2)}var z=l*hg(g),P=l*vg(g),R=f*hg(b),L=f*vg(b);if(N>yg){var q=l*hg(m),U=l*vg(m),D=f*hg(x),O=f*vg(x);if(d<gg){var F=w>yg?Ua(z,P,D,O,q,U,R,L):[R,L],I=z-F[0],Y=P-F[1],B=q-F[0],j=U-F[1],H=1/vg(Aa((I*B+Y*j)/(_g(I*I+Y*Y)*_g(B*B+j*j)))/2),X=_g(F[0]*F[0]+F[1]*F[1]);S=dg(N,(f-X)/(H-1)),E=dg(N,(l-X)/(H+1))}}M>yg?E>yg?(_=Da(D,O,z,P,l,E,v),y=Da(q,U,R,L,l,E,v),c.moveTo(_.cx+_.x01,_.cy+_.y01),E<N?c.arc(_.cx,_.cy,E,lg(_.y01,_.x01),lg(y.y01,y.x01),!v):(c.arc(_.cx,_.cy,E,lg(_.y01,_.x01),lg(_.y11,_.x11),!v),c.arc(0,0,l,lg(_.cy+_.y11,_.cx+_.x11),lg(y.cy+y.y11,y.cx+y.x11),!v),c.arc(y.cx,y.cy,E,lg(y.y11,y.x11),lg(y.y01,y.x01),!v))):(c.moveTo(z,P),c.arc(0,0,l,g,m,!v)):c.moveTo(z,P),f>yg&&w>yg?S>yg?(_=Da(R,L,q,U,f,-S,v),y=Da(z,P,D,O,f,-S,v),c.lineTo(_.cx+_.x01,_.cy+_.y01),S<N?c.arc(_.cx,_.cy,S,lg(_.y01,_.x01),lg(y.y01,y.x01),!v):(c.arc(_.cx,_.cy,S,lg(_.y01,_.x01),lg(_.y11,_.x11),!v),c.arc(0,0,f,lg(_.cy+_.y11,_.cx+_.x11),lg(y.cy+y.y11,y.cx+y.x11),v),c.arc(y.cx,y.cy,S,lg(y.y11,y.x11),lg(y.y01,y.x01),!v))):c.arc(0,0,f,b,x,v):c.lineTo(R,L)}else c.moveTo(0,0);if(c.closePath(),t)return c=null,t+\"\"||null}var n=za,e=Pa,r=sg(0),i=null,o=Ra,u=La,a=qa,c=null;return t.centroid=function(){var t=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-gg/2;return[hg(r)*t,vg(r)*t]},t.innerRadius=function(e){return arguments.length?(n=\"function\"==typeof e?e:sg(+e),t):n},t.outerRadius=function(n){return arguments.length?(e=\"function\"==typeof n?n:sg(+n),t):e},t.cornerRadius=function(n){return arguments.length?(r=\"function\"==typeof n?n:sg(+n),t):r},t.padRadius=function(n){return arguments.length?(i=null==n?null:\"function\"==typeof n?n:sg(+n),t):i},t.startAngle=function(n){return arguments.length?(o=\"function\"==typeof n?n:sg(+n),t):o},t.endAngle=function(n){return arguments.length?(u=\"function\"==typeof n?n:sg(+n),t):u},t.padAngle=function(n){return arguments.length?(a=\"function\"==typeof n?n:sg(+n),t):a},t.context=function(n){return arguments.length?(c=null==n?null:n,t):c},t},t.area=Mg,t.line=wg,t.pie=function(){function t(t){var a,c,s,f,l,h=t.length,p=0,d=new Array(h),v=new Array(h),_=+i.apply(this,arguments),y=Math.min(xg,Math.max(-xg,o.apply(this,arguments)-_)),g=Math.min(Math.abs(y)/h,u.apply(this,arguments)),m=g*(y<0?-1:1);for(a=0;a<h;++a)(l=v[d[a]=a]=+n(t[a],a,t))>0&&(p+=l);for(null!=e?d.sort(function(t,n){return e(v[t],v[n])}):null!=r&&d.sort(function(n,e){return r(t[n],t[e])}),a=0,s=p?(y-h*m)/p:0;a<h;++a,_=f)c=d[a],f=_+((l=v[c])>0?l*s:0)+m,v[c]={data:t[c],index:a,value:l,startAngle:_,endAngle:f,padAngle:g};return v}var n=kg,e=Tg,r=null,i=sg(0),o=sg(xg),u=sg(0);return t.value=function(e){return arguments.length?(n=\"function\"==typeof e?e:sg(+e),t):n},t.sortValues=function(n){return arguments.length?(e=n,r=null,t):e},t.sort=function(n){return arguments.length?(r=n,e=null,t):r},t.startAngle=function(n){return arguments.length?(i=\"function\"==typeof n?n:sg(+n),t):i},t.endAngle=function(n){return arguments.length?(o=\"function\"==typeof n?n:sg(+n),t):o},t.padAngle=function(n){return arguments.length?(u=\"function\"==typeof n?n:sg(+n),t):u},t},t.areaRadial=Eg,t.radialArea=Eg,t.lineRadial=Sg,t.radialLine=Sg,t.pointRadial=Ag,t.linkHorizontal=function(){return $a(Va)},t.linkVertical=function(){return $a(Wa)},t.linkRadial=function(){var t=$a(Za);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){function t(){var t;if(r||(r=t=ve()),n.apply(this,arguments).draw(r,+e.apply(this,arguments)),t)return r=null,t+\"\"||null}var n=sg(zg),e=sg(64),r=null;return t.type=function(e){return arguments.length?(n=\"function\"==typeof e?e:sg(e),t):n},t.size=function(n){return arguments.length?(e=\"function\"==typeof n?n:sg(+n),t):e},t.context=function(n){return arguments.length?(r=null==n?null:n,t):r},t},t.symbols=Wg,t.symbolCircle=zg,t.symbolCross=Pg,t.symbolDiamond=qg,t.symbolSquare=Ig,t.symbolStar=Fg,t.symbolTriangle=Bg,t.symbolWye=Vg,t.curveBasisClosed=function(t){return new Qa(t)},t.curveBasisOpen=function(t){return new Ka(t)},t.curveBasis=function(t){return new Ja(t)},t.curveBundle=Gg,t.curveCardinalClosed=Qg,t.curveCardinalOpen=Kg,t.curveCardinal=Jg,t.curveCatmullRomClosed=nm,t.curveCatmullRomOpen=em,t.curveCatmullRom=tm,t.curveLinearClosed=function(t){return new sc(t)},t.curveLinear=bg,t.curveMonotoneX=function(t){return new dc(t)},t.curveMonotoneY=function(t){return new vc(t)},t.curveNatural=function(t){return new yc(t)},t.curveStep=function(t){return new mc(t,.5)},t.curveStepAfter=function(t){return new mc(t,1)},t.curveStepBefore=function(t){return new mc(t,0)},t.stack=function(){function t(t){var o,u,a=n.apply(this,arguments),c=t.length,s=a.length,f=new Array(s);for(o=0;o<s;++o){for(var l,h=a[o],p=f[o]=new Array(c),d=0;d<c;++d)p[d]=l=[0,+i(t[d],h,d,t)],l.data=t[d];p.key=h}for(o=0,u=e(f);o<s;++o)f[u[o]].index=o;return r(f,u),f}var n=sg([]),e=im,r=rm,i=xc;return t.keys=function(e){return arguments.length?(n=\"function\"==typeof e?e:sg(Cg.call(e)),t):n},t.value=function(n){return arguments.length?(i=\"function\"==typeof n?n:sg(+n),t):i},t.order=function(n){return arguments.length?(e=null==n?im:\"function\"==typeof n?n:sg(Cg.call(n)),t):e},t.offset=function(n){return arguments.length?(r=null==n?rm:n,t):r},t},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,u=t[0].length;o<u;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}rm(t,n)}},t.stackOffsetDiverging=function(t,n){if((a=t.length)>1)for(var e,r,i,o,u,a,c=0,s=t[n[0]].length;c<s;++c)for(o=u=0,e=0;e<a;++e)(i=(r=t[n[e]][c])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=u,r[0]=u+=i):r[0]=o},t.stackOffsetNone=rm,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var u=0,a=0;u<e;++u)a+=t[u][r][1]||0;i[r][1]+=i[r][0]=-a/2}rm(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,u=1;u<r;++u){for(var a=0,c=0,s=0;a<i;++a){for(var f=t[n[a]],l=f[u][1]||0,h=(l-(f[u-1][1]||0))/2,p=0;p<a;++p){var d=t[n[p]];h+=(d[u][1]||0)-(d[u-1][1]||0)}c+=l,s+=h*l}e[u-1][1]+=e[u-1][0]=o,c&&(o-=s/c)}e[u-1][1]+=e[u-1][0]=o,rm(t,n)}},t.stackOrderAscending=om,t.stackOrderDescending=function(t){return om(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(bc),o=im(t).sort(function(t,n){return i[n]-i[t]}),u=0,a=0,c=[],s=[];for(n=0;n<r;++n)e=o[n],u<a?(u+=i[e],c.push(e)):(a+=i[e],s.push(e));return s.reverse().concat(c)},t.stackOrderNone=im,t.stackOrderReverse=function(t){return im(t).reverse()},t.timeInterval=Mu,t.timeMillisecond=U_,t.timeMilliseconds=D_,t.utcMillisecond=U_,t.utcMilliseconds=D_,t.timeSecond=I_,t.timeSeconds=Y_,t.utcSecond=I_,t.utcSeconds=Y_,t.timeMinute=B_,t.timeMinutes=j_,t.timeHour=H_,t.timeHours=X_,t.timeDay=$_,t.timeDays=V_,t.timeWeek=W_,t.timeWeeks=ny,t.timeSunday=W_,t.timeSundays=ny,t.timeMonday=Z_,t.timeMondays=ey,t.timeTuesday=G_,t.timeTuesdays=ry,t.timeWednesday=J_,t.timeWednesdays=iy,t.timeThursday=Q_,t.timeThursdays=oy,t.timeFriday=K_,t.timeFridays=uy,t.timeSaturday=ty,t.timeSaturdays=ay,t.timeMonth=cy,t.timeMonths=sy,t.timeYear=fy,t.timeYears=ly,t.utcMinute=hy,t.utcMinutes=py,t.utcHour=dy,t.utcHours=vy,t.utcDay=_y,t.utcDays=yy,t.utcWeek=gy,t.utcWeeks=ky,t.utcSunday=gy,t.utcSundays=ky,t.utcMonday=my,t.utcMondays=Ny,t.utcTuesday=xy,t.utcTuesdays=Sy,t.utcWednesday=by,t.utcWednesdays=Ey,t.utcThursday=wy,t.utcThursdays=Ay,t.utcFriday=My,t.utcFridays=Cy,t.utcSaturday=Ty,t.utcSaturdays=zy,t.utcMonth=Py,t.utcMonths=Ry,t.utcYear=Ly,t.utcYears=Uy,t.timeFormatDefaultLocale=Ma,t.timeFormatLocale=Au,t.isoFormat=Yy,t.isoParse=By,t.now=ln,t.timer=dn,t.timerFlush=vn,t.timeout=Pl,t.interval=function(t,n,e){var r=new pn,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?ln():+e,r.restart(function o(u){u+=i,r.restart(o,i+=n,e),t(u)},n,e),r)},t.transition=Jn,t.active=function(t,n){var e,r,i=t.__transition;if(i){n=null==n?null:n+\"\";for(r in i)if((e=i[r]).state>Ul&&e.name===n)return new Gn([[t]],yh,n,+r)}return null},t.interrupt=jl,t.voronoi=function(){function t(t){return new Kc(t.map(function(r,i){var o=[Math.round(n(r,i,t)/dm)*dm,Math.round(e(r,i,t)/dm)*dm];return o.index=i,o.data=r,o}),r)}var n=wc,e=Mc,r=null;return t.polygons=function(n){return t(n).polygons()},t.links=function(n){return t(n).links()},t.triangles=function(n){return t(n).triangles()},t.x=function(e){return arguments.length?(n=\"function\"==typeof e?e:um(+e),t):n},t.y=function(n){return arguments.length?(e=\"function\"==typeof n?n:um(+n),t):e},t.extent=function(n){return arguments.length?(r=null==n?null:[[+n[0][0],+n[0][1]],[+n[1][0],+n[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(n){return arguments.length?(r=null==n?null:[[0,0],[+n[0],+n[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},t.zoom=function(){function n(t){t.property(\"__zoom\",us).on(\"wheel.zoom\",s).on(\"mousedown.zoom\",f).on(\"dblclick.zoom\",l).filter(cs).on(\"touchstart.zoom\",p).on(\"touchmove.zoom\",d).on(\"touchend.zoom touchcancel.zoom\",v).style(\"touch-action\",\"none\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}function e(t,n){return(n=Math.max(b,Math.min(w,n)))===t.k?t:new ns(n,t.x,t.y)}function r(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new ns(t.k,r,i)}function i(t,n){var e=t.invertX(n[0][0])-M,r=t.invertX(n[1][0])-T,i=t.invertY(n[0][1])-k,o=t.invertY(n[1][1])-S;return t.translate(r>e?(e+r)/2:Math.min(0,e)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function o(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function u(t,n,e){t.on(\"start.zoom\",function(){a(this,arguments).start()}).on(\"interrupt.zoom end.zoom\",function(){a(this,arguments).end()}).tween(\"zoom\",function(){var t=this,r=arguments,i=a(t,r),u=m.apply(t,r),c=e||o(u),s=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),f=t.__zoom,l=\"function\"==typeof n?n.apply(t,r):n,h=A(f.invert(c).concat(s/f.k),l.invert(c).concat(s/l.k));return function(t){if(1===t)t=l;else{var n=h(t),e=s/n[2];t=new ns(e,c[0]-n[0]*e,c[1]-n[1]*e)}i.zoom(null,t)}})}function a(t,n){for(var e,r=0,i=C.length;r<i;++r)if((e=C[r]).that===t)return e;return new c(t,n)}function c(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=m.apply(t,n)}function s(){if(g.apply(this,arguments)){var t=a(this,arguments),n=this.__zoom,o=Math.max(b,Math.min(w,n.k*Math.pow(2,x.apply(this,arguments)))),u=Ks(this);if(t.wheel)t.mouse[0][0]===u[0]&&t.mouse[0][1]===u[1]||(t.mouse[1]=n.invert(t.mouse[0]=u)),clearTimeout(t.wheel);else{if(n.k===o)return;t.mouse=[u,n.invert(u)],jl(this),t.start()}gm(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},R),t.zoom(\"mouse\",i(r(e(n,o),t.mouse[0],t.mouse[1]),t.extent))}}function f(){if(!y&&g.apply(this,arguments)){var n=a(this,arguments),e=cf(t.event.view).on(\"mousemove.zoom\",function(){if(gm(),!n.moved){var e=t.event.clientX-u,o=t.event.clientY-c;n.moved=e*e+o*o>L}n.zoom(\"mouse\",i(r(n.that.__zoom,n.mouse[0]=Ks(n.that),n.mouse[1]),n.extent))},!0).on(\"mouseup.zoom\",function(){e.on(\"mousemove.zoom mouseup.zoom\",null),_t(t.event.view,n.moved),gm(),n.end()},!0),o=Ks(this),u=t.event.clientX,c=t.event.clientY;lf(t.event.view),rs(),n.mouse=[o,this.__zoom.invert(o)],jl(this),n.start()}}function l(){if(g.apply(this,arguments)){var o=this.__zoom,a=Ks(this),c=o.invert(a),s=i(r(e(o,o.k*(t.event.shiftKey?.5:2)),a,c),m.apply(this,arguments));gm(),E>0?cf(this).transition().duration(E).call(u,s,a):cf(this).call(n.transform,s)}}function p(){if(g.apply(this,arguments)){var n,e,r,i,o=a(this,arguments),u=t.event.changedTouches,c=u.length;for(rs(),e=0;e<c;++e)r=u[e],i=[i=sf(this,u,r.identifier),this.__zoom.invert(i),r.identifier],o.touch0?o.touch1||(o.touch1=i):(o.touch0=i,n=!0);if(_&&(_=clearTimeout(_),!o.touch1))return o.end(),void((i=cf(this).on(\"dblclick.zoom\"))&&i.apply(this,arguments));n&&(_=setTimeout(function(){_=null},P),jl(this),o.start())}}function d(){var n,o,u,c,s=a(this,arguments),f=t.event.changedTouches,l=f.length;for(gm(),_&&(_=clearTimeout(_)),n=0;n<l;++n)o=f[n],u=sf(this,f,o.identifier),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=u:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=u);if(o=s.that.__zoom,s.touch1){var h=s.touch0[0],p=s.touch0[1],d=s.touch1[0],v=s.touch1[1],y=(y=d[0]-h[0])*y+(y=d[1]-h[1])*y,g=(g=v[0]-p[0])*g+(g=v[1]-p[1])*g;o=e(o,Math.sqrt(y/g)),u=[(h[0]+d[0])/2,(h[1]+d[1])/2],c=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else{if(!s.touch0)return;u=s.touch0[0],c=s.touch0[1]}s.zoom(\"touch\",i(r(o,u,c),s.extent))}function v(){var n,e,r=a(this,arguments),i=t.event.changedTouches,o=i.length;for(rs(),y&&clearTimeout(y),y=setTimeout(function(){y=null},P),n=0;n<o;++n)e=i[n],r.touch0&&r.touch0[2]===e.identifier?delete r.touch0:r.touch1&&r.touch1[2]===e.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}var _,y,g=is,m=os,x=as,b=0,w=1/0,M=-w,T=w,k=M,S=T,E=250,A=_l,C=[],z=h(\"start\",\"zoom\",\"end\"),P=500,R=150,L=0;return n.transform=function(t,n){var e=t.selection?t.selection():t;e.property(\"__zoom\",us),t!==e?u(t,n):e.interrupt().each(function(){a(this,arguments).start().zoom(null,\"function\"==typeof n?n.apply(this,arguments):n).end()})},n.scaleBy=function(t,e){n.scaleTo(t,function(){return this.__zoom.k*(\"function\"==typeof e?e.apply(this,arguments):e)})},n.scaleTo=function(t,u){n.transform(t,function(){var t=m.apply(this,arguments),n=this.__zoom,a=o(t),c=n.invert(a);return i(r(e(n,\"function\"==typeof u?u.apply(this,arguments):u),a,c),t)})},n.translateBy=function(t,e,r){n.transform(t,function(){return i(this.__zoom.translate(\"function\"==typeof e?e.apply(this,arguments):e,\"function\"==typeof r?r.apply(this,arguments):r),m.apply(this,arguments))})},n.translateTo=function(t,e,r){n.transform(t,function(){var t=m.apply(this,arguments),n=this.__zoom,u=o(t);return i(ym.translate(u[0],u[1]).scale(n.k).translate(\"function\"==typeof e?-e.apply(this,arguments):-e,\"function\"==typeof r?-r.apply(this,arguments):-r),t)})},c.prototype={start:function(){return 1==++this.active&&(this.index=C.push(this)-1,this.emit(\"start\")),this},zoom:function(t,n){return this.mouse&&\"mouse\"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&\"touch\"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&\"touch\"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit(\"zoom\"),this},end:function(){return 0==--this.active&&(C.splice(this.index,1),this.index=-1,this.emit(\"end\")),this},emit:function(t){N(new ts(n,t,this.that.__zoom),z.apply,z,[t,this.that,this.args])}},n.wheelDelta=function(t){return arguments.length?(x=\"function\"==typeof t?t:_m(+t),n):x},n.filter=function(t){return arguments.length?(g=\"function\"==typeof t?t:_m(!!t),n):g},n.extent=function(t){return arguments.length?(m=\"function\"==typeof t?t:_m([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):m},n.scaleExtent=function(t){return arguments.length?(b=+t[0],w=+t[1],n):[b,w]},n.translateExtent=function(t){return arguments.length?(M=+t[0][0],T=+t[1][0],k=+t[0][1],S=+t[1][1],n):[[M,k],[T,S]]},n.duration=function(t){return arguments.length?(E=+t,n):E},n.interpolate=function(t){return arguments.length?(A=t,n):A},n.on=function(){var t=z.on.apply(z,arguments);return t===z?n:t},n.clickDistance=function(t){return arguments.length?(L=(t=+t)*t,n):Math.sqrt(L)},n},t.zoomTransform=es,t.zoomIdentity=ym,Object.defineProperty(t,\"__esModule\",{value:!0})});"

/***/ }),
/* 46 */
/***/ (function(module, exports) {

module.exports = "!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).vl=e()}}(function(){return function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var l=\"function\"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error(\"Cannot find module '\"+o+\"'\");throw u.code=\"MODULE_NOT_FOUND\",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n||e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var a=\"function\"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){var i=\"undefined\"!=typeof JSON?JSON:e(\"jsonify\");t.exports=function(e,t){t||(t={}),\"function\"==typeof t&&(t={cmp:t});var n=t.space||\"\";\"number\"==typeof n&&(n=Array(n+1).join(\" \"));var o=\"boolean\"==typeof t.cycles&&t.cycles,s=t.replacer||function(e,t){return t},l=t.cmp&&function(e){return function(t){return function(n,i){var r={key:n,value:t[n]},a={key:i,value:t[i]};return e(r,a)}}}(t.cmp),u=[];return function e(t,c,f,d){var p=n?\"\\n\"+new Array(d+1).join(n):\"\",m=n?\": \":\":\";if(f&&f.toJSON&&\"function\"==typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=s.call(t,c,f))){if(\"object\"!=typeof f||null===f)return i.stringify(f);if(r(f)){for(var g=[],h=0;h<f.length;h++){var v=e(f,h,f[h],d+1)||i.stringify(null);g.push(p+n+v)}return\"[\"+g.join(\",\")+p+\"]\"}if(-1!==u.indexOf(f)){if(o)return i.stringify(\"__cycle__\");throw new TypeError(\"Converting circular structure to JSON\")}u.push(f);for(var y=a(f).sort(l&&l(f)),g=[],h=0;h<y.length;h++){var b=e(f,c=y[h],f[c],d+1);if(b){var _=i.stringify(c)+m+b;g.push(p+n+_)}}return u.splice(u.indexOf(f),1),\"{\"+g.join(\",\")+p+\"}\"}}({\"\":e},\"\",e,0)};var r=Array.isArray||function(e){return\"[object Array]\"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var i in e)t.call(e,i)&&n.push(i);return n}},{jsonify:2}],2:[function(e,t,n){n.parse=e(\"./lib/parse\"),n.stringify=e(\"./lib/stringify\")},{\"./lib/parse\":3,\"./lib/stringify\":4}],3:[function(e,t,n){var i,r,a,o,s={'\"':'\"',\"\\\\\":\"\\\\\",\"/\":\"/\",b:\"\\b\",f:\"\\f\",n:\"\\n\",r:\"\\r\",t:\"\\t\"},l=function(e){throw{name:\"SyntaxError\",message:e,at:i,text:a}},u=function(e){return e&&e!==r&&l(\"Expected '\"+e+\"' instead of '\"+r+\"'\"),r=a.charAt(i),i+=1,r},c=function(){var e,t=\"\";for(\"-\"===r&&(t=\"-\",u(\"-\"));r>=\"0\"&&r<=\"9\";)t+=r,u();if(\".\"===r)for(t+=\".\";u()&&r>=\"0\"&&r<=\"9\";)t+=r;if(\"e\"===r||\"E\"===r)for(t+=r,u(),\"-\"!==r&&\"+\"!==r||(t+=r,u());r>=\"0\"&&r<=\"9\";)t+=r,u();if(e=+t,isFinite(e))return e;l(\"Bad number\")},f=function(){var e,t,n,i=\"\";if('\"'===r)for(;u();){if('\"'===r)return u(),i;if(\"\\\\\"===r)if(u(),\"u\"===r){for(n=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)n=16*n+e;i+=String.fromCharCode(n)}else{if(\"string\"!=typeof s[r])break;i+=s[r]}else i+=r}l(\"Bad string\")},d=function(){for(;r&&r<=\" \";)u()},p=function(){switch(r){case\"t\":return u(\"t\"),u(\"r\"),u(\"u\"),u(\"e\"),!0;case\"f\":return u(\"f\"),u(\"a\"),u(\"l\"),u(\"s\"),u(\"e\"),!1;case\"n\":return u(\"n\"),u(\"u\"),u(\"l\"),u(\"l\"),null}l(\"Unexpected '\"+r+\"'\")},m=function(){var e=[];if(\"[\"===r){if(u(\"[\"),d(),\"]\"===r)return u(\"]\"),e;for(;r;){if(e.push(o()),d(),\"]\"===r)return u(\"]\"),e;u(\",\"),d()}}l(\"Bad array\")},g=function(){var e,t={};if(\"{\"===r){if(u(\"{\"),d(),\"}\"===r)return u(\"}\"),t;for(;r;){if(e=f(),d(),u(\":\"),Object.hasOwnProperty.call(t,e)&&l('Duplicate key \"'+e+'\"'),t[e]=o(),d(),\"}\"===r)return u(\"}\"),t;u(\",\"),d()}}l(\"Bad object\")};o=function(){switch(d(),r){case\"{\":return g();case\"[\":return m();case'\"':return f();case\"-\":return c();default:return r>=\"0\"&&r<=\"9\"?c():p()}},t.exports=function(e,t){var n;return a=e,i=0,r=\" \",n=o(),d(),r&&l(\"Syntax error\"),\"function\"==typeof t?function e(n,i){var r,a,o=n[i];if(o&&\"object\"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(a=e(o,r))?o[r]=a:delete o[r]);return t.call(n,i,o)}({\"\":n},\"\"):n}},{}],4:[function(e,t,n){function i(e){return l.lastIndex=0,l.test(e)?'\"'+e.replace(l,function(e){var t=u[e];return\"string\"==typeof t?t:\"\\\\u\"+(\"0000\"+e.charCodeAt(0).toString(16)).slice(-4)})+'\"':'\"'+e+'\"'}function r(e,t){var n,l,u,c,f,d=a,p=t[e];switch(p&&\"object\"==typeof p&&\"function\"==typeof p.toJSON&&(p=p.toJSON(e)),\"function\"==typeof s&&(p=s.call(t,e,p)),typeof p){case\"string\":return i(p);case\"number\":return isFinite(p)?String(p):\"null\";case\"boolean\":case\"null\":return String(p);case\"object\":if(!p)return\"null\";if(a+=o,f=[],\"[object Array]\"===Object.prototype.toString.apply(p)){for(c=p.length,n=0;n<c;n+=1)f[n]=r(n,p)||\"null\";return u=0===f.length?\"[]\":a?\"[\\n\"+a+f.join(\",\\n\"+a)+\"\\n\"+d+\"]\":\"[\"+f.join(\",\")+\"]\",a=d,u}if(s&&\"object\"==typeof s)for(c=s.length,n=0;n<c;n+=1)\"string\"==typeof(l=s[n])&&(u=r(l,p))&&f.push(i(l)+(a?\": \":\":\")+u);else for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&(u=r(l,p))&&f.push(i(l)+(a?\": \":\":\")+u);return u=0===f.length?\"{}\":a?\"{\\n\"+a+f.join(\",\\n\"+a)+\"\\n\"+d+\"}\":\"{\"+f.join(\",\")+\"}\",a=d,u}}var a,o,s,l=/[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,u={\"\\b\":\"\\\\b\",\"\\t\":\"\\\\t\",\"\\n\":\"\\\\n\",\"\\f\":\"\\\\f\",\"\\r\":\"\\\\r\",'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\"};t.exports=function(e,t,n){var i;if(a=\"\",o=\"\",\"number\"==typeof n)for(i=0;i<n;i+=1)o+=\" \";else\"string\"==typeof n&&(o=n);if(s=t,t&&\"function\"!=typeof t&&(\"object\"!=typeof t||\"number\"!=typeof t.length))throw new Error(\"JSON.stringify\");return r(\"\",{\"\":e})}},{}],5:[function(e,t,n){function i(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function a(e){if(f===setTimeout)return setTimeout(e,0);if((f===i||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){h&&m&&(h=!1,m.length?g=m.concat(g):v=-1,g.length&&l())}function l(){if(!h){var e=a(s);h=!0;for(var t=g.length;t;){for(m=g,g=[];++v<t;)m&&m[v].run();v=-1,t=g.length}m=null,h=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,d,p=t.exports={};!function(){try{f=\"function\"==typeof setTimeout?setTimeout:i}catch(e){f=i}try{d=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var m,g=[],h=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new u(e,t)),1!==g.length||h||a(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title=\"browser\",p.browser=!0,p.env={},p.argv=[],p.version=\"\",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error(\"process.binding is not supported\")},p.cwd=function(){return\"/\"},p.chdir=function(e){throw new Error(\"process.chdir is not supported\")},p.umask=function(){return 0}},{}],6:[function(e,t,n){(function(e){var n,i,r,a,o,s,l,u,c,f,d,p,m,g,h,v;!function(n){function i(e,t){return function(n,i){return e[n]=t?t(n,i):i}}var r=\"object\"==typeof e?e:\"object\"==typeof self?self:\"object\"==typeof this?this:{};n(\"object\"==typeof t&&\"object\"==typeof t.exports?i(r,i(t.exports)):i(r))}(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};n=function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)},i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]]);return n},a=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},o=function(e,t){return function(n,i){t(n,i,e)}},s=function(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})},u=function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(r)throw new TypeError(\"Generator is already executing.\");for(;l;)try{if(r=1,a&&(o=a[2&n[0]?\"return\":n[0]?\"throw\":\"next\"])&&!(o=o.call(a,n[1])).done)return o;switch(a=0,o&&(n=[0,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(o=l.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){l.label=n[1];break}if(6===n[0]&&l.label<o[1]){l.label=o[1],o=n;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(n);break}o[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{r=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,a,o,s,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},\"function\"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},c=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},f=function(e){var t=\"function\"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},d=function(e,t){var n=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},m=function(e){return this instanceof m?(this.v=e,this):new m(e)},g=function(e,t,n){function i(e){c[e]&&(u[e]=function(t){return new Promise(function(n,i){f.push([e,t,n,i])>1||r(e,t)})})}function r(e,t){try{a(c[e](t))}catch(e){l(f[0][3],e)}}function a(e){e.value instanceof m?Promise.resolve(e.value.v).then(o,s):l(f[0][2],e)}function o(e){r(\"next\",e)}function s(e){r(\"throw\",e)}function l(e,t){e(t),f.shift(),f.length&&r(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var u,c=n.apply(e,t||[]),f=[];return u={},i(\"next\"),i(\"throw\"),i(\"return\"),u[Symbol.asyncIterator]=function(){return this},u},h=function(e){function t(t,r){e[t]&&(n[t]=function(n){return(i=!i)?{value:m(e[t](n)),done:\"return\"===t}:r?r(n):n})}var n,i;return n={},t(\"next\"),t(\"throw\",function(e){throw e}),t(\"return\"),n[Symbol.iterator]=function(){return this},n},v=function(e){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var t=e[Symbol.asyncIterator];return t?t.call(e):\"function\"==typeof f?f(e):e[Symbol.iterator]()},e(\"__extends\",n),e(\"__assign\",i),e(\"__rest\",r),e(\"__decorate\",a),e(\"__param\",o),e(\"__metadata\",s),e(\"__awaiter\",l),e(\"__generator\",u),e(\"__exportStar\",c),e(\"__values\",f),e(\"__read\",d),e(\"__spread\",p),e(\"__await\",m),e(\"__asyncGenerator\",g),e(\"__asyncDelegator\",h),e(\"__asyncValues\",v)})}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],7:[function(e,t,n){\"function\"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],8:[function(e,t,n){t.exports=function(e){return e&&\"object\"==typeof e&&\"function\"==typeof e.copy&&\"function\"==typeof e.fill&&\"function\"==typeof e.readUInt8}},{}],9:[function(e,t,n){(function(t,i){function r(e,t){var i={seen:[],stylize:o};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(t)?i.showHidden=t:t&&n._extend(i,t),b(i.showHidden)&&(i.showHidden=!1),b(i.depth)&&(i.depth=2),b(i.colors)&&(i.colors=!1),b(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=a),l(i,e,i.depth)}function a(e,t){var n=r.styles[t];return n?\"\u001b[\"+r.colors[n][0]+\"m\"+e+\"\u001b[\"+r.colors[n][1]+\"m\":e}function o(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,t,i){if(e.customInspect&&t&&O(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return y(r)||(r=l(e,r,i)),r}var a=u(e,t);if(a)return a;var o=Object.keys(t),g=s(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),E(t)&&(o.indexOf(\"message\")>=0||o.indexOf(\"description\")>=0))return c(t);if(0===o.length){if(O(t)){var h=t.name?\": \"+t.name:\"\";return e.stylize(\"[Function\"+h+\"]\",\"special\")}if(_(t))return e.stylize(RegExp.prototype.toString.call(t),\"regexp\");if(x(t))return e.stylize(Date.prototype.toString.call(t),\"date\");if(E(t))return c(t)}var v=\"\",b=!1,S=[\"{\",\"}\"];if(m(t)&&(b=!0,S=[\"[\",\"]\"]),O(t)&&(v=\" [Function\"+(t.name?\": \"+t.name:\"\")+\"]\"),_(t)&&(v=\" \"+RegExp.prototype.toString.call(t)),x(t)&&(v=\" \"+Date.prototype.toUTCString.call(t)),E(t)&&(v=\" \"+c(t)),0===o.length&&(!b||0==t.length))return S[0]+v+S[1];if(i<0)return _(t)?e.stylize(RegExp.prototype.toString.call(t),\"regexp\"):e.stylize(\"[Object]\",\"special\");e.seen.push(t);var N;return N=b?f(e,t,i,g,o):o.map(function(n){return d(e,t,i,g,n,b)}),e.seen.pop(),p(N,v,S)}function u(e,t){if(b(t))return e.stylize(\"undefined\",\"undefined\");if(y(t)){var n=\"'\"+JSON.stringify(t).replace(/^\"|\"$/g,\"\").replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"')+\"'\";return e.stylize(n,\"string\")}return v(t)?e.stylize(\"\"+t,\"number\"):g(t)?e.stylize(\"\"+t,\"boolean\"):h(t)?e.stylize(\"null\",\"null\"):void 0}function c(e){return\"[\"+Error.prototype.toString.call(e)+\"]\"}function f(e,t,n,i,r){for(var a=[],o=0,s=t.length;o<s;++o)k(t,String(o))?a.push(d(e,t,n,i,String(o),!0)):a.push(\"\");return r.forEach(function(r){r.match(/^\\d+$/)||a.push(d(e,t,n,i,r,!0))}),a}function d(e,t,n,i,r,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=u.set?e.stylize(\"[Getter/Setter]\",\"special\"):e.stylize(\"[Getter]\",\"special\"):u.set&&(s=e.stylize(\"[Setter]\",\"special\")),k(i,r)||(o=\"[\"+r+\"]\"),s||(e.seen.indexOf(u.value)<0?(s=h(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf(\"\\n\")>-1&&(s=a?s.split(\"\\n\").map(function(e){return\"  \"+e}).join(\"\\n\").substr(2):\"\\n\"+s.split(\"\\n\").map(function(e){return\"   \"+e}).join(\"\\n\")):s=e.stylize(\"[Circular]\",\"special\")),b(o)){if(a&&r.match(/^\\d+$/))return s;(o=JSON.stringify(\"\"+r)).match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,\"name\")):(o=o.replace(/'/g,\"\\\\'\").replace(/\\\\\"/g,'\"').replace(/(^\"|\"$)/g,\"'\"),o=e.stylize(o,\"string\"))}return o+\": \"+s}function p(e,t,n){var i=0;return e.reduce(function(e,t){return i++,t.indexOf(\"\\n\")>=0&&i++,e+t.replace(/\\u001b\\[\\d\\d?m/g,\"\").length+1},0)>60?n[0]+(\"\"===t?\"\":t+\"\\n \")+\" \"+e.join(\",\\n  \")+\" \"+n[1]:n[0]+t+\" \"+e.join(\", \")+\" \"+n[1]}function m(e){return Array.isArray(e)}function g(e){return\"boolean\"==typeof e}function h(e){return null===e}function v(e){return\"number\"==typeof e}function y(e){return\"string\"==typeof e}function b(e){return void 0===e}function _(e){return S(e)&&\"[object RegExp]\"===N(e)}function S(e){return\"object\"==typeof e&&null!==e}function x(e){return S(e)&&\"[object Date]\"===N(e)}function E(e){return S(e)&&(\"[object Error]\"===N(e)||e instanceof Error)}function O(e){return\"function\"==typeof e}function N(e){return Object.prototype.toString.call(e)}function w(e){return e<10?\"0\"+e.toString(10):e.toString(10)}function T(){var e=new Date,t=[w(e.getHours()),w(e.getMinutes()),w(e.getSeconds())].join(\":\");return[e.getDate(),M[e.getMonth()],t].join(\" \")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;n.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(\" \")}for(var n=1,i=arguments,a=i.length,o=String(e).replace(D,function(e){if(\"%%\"===e)return\"%\";if(n>=a)return e;switch(e){case\"%s\":return String(i[n++]);case\"%d\":return Number(i[n++]);case\"%j\":try{return JSON.stringify(i[n++])}catch(e){return\"[Circular]\"}default:return e}}),s=i[n];n<a;s=i[++n])h(s)||!S(s)?o+=\" \"+s:o+=\" \"+r(s);return o},n.deprecate=function(e,r){if(b(i.process))return function(){return n.deprecate(e,r).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),a=!0}return e.apply(this,arguments)}};var C,A={};n.debuglog=function(e){if(b(C)&&(C=t.env.NODE_DEBUG||\"\"),e=e.toUpperCase(),!A[e])if(new RegExp(\"\\\\b\"+e+\"\\\\b\",\"i\").test(C)){var i=t.pid;A[e]=function(){var t=n.format.apply(n,arguments);console.error(\"%s %d: %s\",e,i,t)}}else A[e]=function(){};return A[e]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:\"cyan\",number:\"yellow\",boolean:\"yellow\",undefined:\"grey\",null:\"bold\",string:\"green\",date:\"magenta\",regexp:\"red\"},n.isArray=m,n.isBoolean=g,n.isNull=h,n.isNullOrUndefined=function(e){return null==e},n.isNumber=v,n.isString=y,n.isSymbol=function(e){return\"symbol\"==typeof e},n.isUndefined=b,n.isRegExp=_,n.isObject=S,n.isDate=x,n.isError=E,n.isFunction=O,n.isPrimitive=function(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"==typeof e||void 0===e},n.isBuffer=e(\"./support/isBuffer\");var M=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];n.log=function(){console.log(\"%s - %s\",T(),n.format.apply(n,arguments))},n.inherits=e(\"inherits\"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,e(\"_process\"),\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{\"./support/isBuffer\":8,_process:5,inherits:7}],10:[function(e,t,n){!function(e,i){i(\"object\"==typeof n&&void 0!==t?n:e.vega=e.vega||{})}(this,function(e){\"use strict\";function t(e){return u.hasOwnProperty(e)}function n(e,t,n,i,r){for(var a,o=0,s=e.length;t<s;++t){if(a=e[t],!o&&a===n)return t;r&&r.indexOf(a)>=0?--o:i&&i.indexOf(a)>=0&&++o}return t}function i(e){for(var t=[],i=0,r=e.length,a=0;a<r;)a=n(e,a,h,f+p,d+m),t.push(e.substring(i,a).trim()),i=++a;if(0===t.length)throw\"Empty event selector: \"+e;return t}function r(e){return\"[\"===e[0]?a(e):o(e)}function a(e){var t,a,o=e.length,s=1;if((s=n(e,s,d,f,d))===o)throw\"Empty between selector: \"+e;if(2!==(t=i(e.substring(1,s))).length)throw\"Between selector must have two elements: \"+e;if((e=e.slice(s+1).trim())[0]!==y)throw\"Expected '>' after between selector: \"+e;return t=t.map(r),(a=r(e.slice(1).trim())).between?{between:t,stream:a}:(a.between=t,a)}function o(e){var i,r,a={source:l},o=[],u=[0,0],c=0,h=0,y=e.length,_=0;if(e[y-1]===m){if(!((_=e.lastIndexOf(p))>=0))throw\"Unmatched right brace: \"+e;try{u=s(e.substring(_+1,y-1))}catch(t){throw\"Invalid throttle specification: \"+e}y=(e=e.slice(0,_).trim()).length,_=0}if(!y)throw e;if(e[0]===v&&(c=++_),(i=n(e,_,g))<y&&(o.push(e.substring(h,i).trim()),h=_=++i),(_=n(e,_,f))===y)o.push(e.substring(h,y).trim());else if(o.push(e.substring(h,_).trim()),r=[],(h=++_)===y)throw\"Unmatched left bracket: \"+e;for(;_<y;){if((_=n(e,_,d))===y)throw\"Unmatched left bracket: \"+e;if(r.push(e.substring(h,_).trim()),_<y-1&&e[++_]!==f)throw\"Expected left bracket: \"+e;h=++_}if(!(y=o.length)||b.test(o[y-1]))throw\"Invalid event selector: \"+e;return y>1?(a.type=o[1],c?a.markname=o[0].slice(1):t(o[0])?a.marktype=o[0]:a.source=o[0]):a.type=o[0],\"!\"===a.type.slice(-1)&&(a.consume=!0,a.type=a.type.slice(0,-1)),null!=r&&(a.filter=r),u[0]&&(a.throttle=u[0]),u[1]&&(a.debounce=u[1]),a}function s(e){var t=e.split(h);if(!e.length||t.length>2)throw e;return t.map(function(t){var n=+t;if(n!==n)throw e;return n})}var l,u,c=\"view\",f=\"[\",d=\"]\",p=\"{\",m=\"}\",g=\":\",h=\",\",v=\"@\",y=\">\",b=/[[\\]{}]/,_={\"*\":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};e.selector=function(e,t,n){return l=t||c,u=n||_,i(e.trim()).map(r)},Object.defineProperty(e,\"__esModule\",{value:!0})})},{}],11:[function(e,t,n){!function(e,i){i(\"object\"==typeof n&&void 0!==t?n:e.vega=e.vega||{})}(this,function(e){\"use strict\";function t(e){return null==e?null:e.fields}function n(e){return l(e)?\"[\"+e.map(n)+\"]\":u(e)||c(e)?JSON.stringify(e).replace(\"\\u2028\",\"\\\\u2028\").replace(\"\\u2029\",\"\\\\u2029\"):e}function i(e,t,n){var i=[t].concat([].slice.call(n));console[e].apply(console,i)}function r(e){return E(e)?e:x(e)?e:Date.parse(e)}var a=function(e,t,n){return e.fields=t||[],e.fname=n,e},o=function(e){throw Error(e)},s=function(e){function t(){a.push(c+e.substring(n,i)),c=\"\",n=i+1}var n,i,r,a=[],s=null,l=0,u=e.length,c=\"\";for(e+=\"\",n=i=0;i<u;++i)if(\"\\\\\"===(r=e[i]))c+=e.substring(n,i),n=++i;else if(r===s)t(),s=null,l=-1;else{if(s)continue;n===l&&'\"'===r?(n=i+1,s=r):n===l&&\"'\"===r?(n=i+1,s=r):\".\"!==r||l?\"[\"===r?(i>n&&t(),l=n=i+1):\"]\"===r&&(l||o(\"Access path missing open bracket: \"+e),l>0&&t(),l=0,n=i+1):i>n?t():n=i+1}return l&&o(\"Access path missing closing bracket: \"+e),s&&o(\"Access path missing closing quote: \"+e),i>n&&(i++,t()),a},l=Array.isArray,u=function(e){return e===Object(e)},c=function(e){return\"string\"==typeof e},f=function(e,t){var i=s(e),r=\"return _[\"+i.map(n).join(\"][\")+\"];\";return a(Function(\"_\",r),[e=1===i.length?i[0]:e],t||e)},d=[],p=f(\"id\"),m=a(function(e){return e},d,\"identity\"),g=a(function(){return 0},d,\"zero\"),h=a(function(){return 1},d,\"one\"),v=a(function(){return!0},d,\"true\"),y=a(function(){return!1},d,\"false\"),b=function(e){return null!=e?l(e)?e:[e]:[]},_=function(e){return\"function\"==typeof e},S={},x=function(e){return\"[object Date]\"===Object.prototype.toString.call(e)},E=function(e){return\"number\"==typeof e},O=function(e,t){for(var n=\"\";--t>=0;)n+=e;return n};e.accessor=a,e.accessorName=function(e){return null==e?null:e.fname},e.accessorFields=t,e.id=p,e.identity=m,e.zero=g,e.one=h,e.truthy=v,e.falsy=y,e.logger=function(e){var t=e||0;return{level:function(e){return arguments.length?(t=+e,this):t},error:function(){return t>=1&&i(\"error\",\"ERROR\",arguments),this},warn:function(){return t>=2&&i(\"warn\",\"WARN\",arguments),this},info:function(){return t>=3&&i(\"log\",\"INFO\",arguments),this},debug:function(){return t>=4&&i(\"log\",\"DEBUG\",arguments),this}}},e.None=0,e.Error=1,e.Warn=2,e.Info=3,e.Debug=4,e.array=b,e.compare=function(e,i){var r,o,l,u,c,f,d,p,m,g=[],h=(e=b(e)).map(function(e,t){return null==e?null:(g.push(t),_(e)?e:s(e).map(n).join(\"][\"))}),v=g.length-1,y=b(i),S=\"var u,v;return \";if(v<0)return null;for(o=0;o<=v;++o)l=h[r=g[o]],_(l)?(u=\"(u=this.\"+(f=\"f\"+r)+\"(a))\",c=\"(v=this.\"+f+\"(b))\",(d=d||{})[f]=l):(u=\"(u=a[\"+l+\"])\",c=\"(v=b[\"+l+\"])\"),f=\"((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))\",\"descending\"!==y[r]?(m=1,p=-1):(m=-1,p=1),S+=\"(\"+u+\"<\"+c+\"||u==null)&&v!=null?\"+p+\":(u>v||v==null)&&u!=null?\"+m+\":\"+f+\"!==u&&v===v?\"+p+\":v!==v&&u===u?\"+m+(r<v?\":\":\":0\");return l=Function(\"a\",\"b\",S+\";\"),d&&(l=l.bind(d)),e=e.reduce(function(e,n){return _(n)?(t(n)||[]).forEach(function(t){e[t]=1}):null!=n&&(e[n+\"\"]=1),e},{}),a(l,Object.keys(e))},e.constant=function(e){return _(e)?e:function(){return e}},e.debounce=function(e,t){function n(){t(r),i=r=null}var i,r;return function(t){r=t,i&&clearTimeout(i),i=setTimeout(n,e)}},e.error=o,e.extend=function(e){for(var t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e},e.extentIndex=function(e,t){var n,i,r,a,o,s=-1,l=e.length;if(null==t){for(;++s<l;)if(null!=(i=e[s])&&i>=i){n=r=i;break}for(a=o=s;++s<l;)null!=(i=e[s])&&(n>i&&(n=i,a=s),r<i&&(r=i,o=s))}else{for(;++s<l;)if(null!=(i=t(e[s],s,e))&&i>=i){n=r=i;break}for(a=o=s;++s<l;)null!=(i=t(e[s],s,e))&&(n>i&&(n=i,a=s),r<i&&(r=i,o=s))}return[a,o]},e.fastmap=function(e){function t(e){return r.hasOwnProperty(e)&&r[e]!==S}var n,i,r={};return n={size:0,empty:0,object:r,has:t,get:function(e){return t(e)?r[e]:void 0},set:function(e,i){return t(e)||(++n.size,r[e]===S&&--n.empty),r[e]=i,this},delete:function(e){return t(e)&&(--n.size,++n.empty,r[e]=S),this},clear:function(){n.size=n.empty=0,n.object=r={}},test:function(e){return arguments.length?(i=e,n):i},clean:function(){var e,t,a={},o=0;for(e in r)(t=r[e])===S||i&&i(t)||(a[e]=t,++o);n.size=o,n.empty=0,n.object=r=a}},e&&Object.keys(e).forEach(function(t){n.set(t,e[t])}),n},e.field=f,e.inherits=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},e.isArray=l,e.isBoolean=function(e){return\"boolean\"==typeof e},e.isDate=x,e.isFunction=_,e.isNumber=E,e.isObject=u,e.isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},e.isString=c,e.key=function(e){var t=(e=e?b(e):e)&&e.length?Function(\"_\",\"return ''+\"+e.map(function(e){return\"_[\"+s(e).map(n).join(\"][\")+\"]\"}).join(\"+'|'+\")+\";\"):function(){return\"\"};return a(t,e,\"key\")},e.merge=function(e,t,n,i){var r=t.length,a=n.length;if(!a)return t;if(!r)return n;for(var o=i||new t.constructor(r+a),s=0,l=0,u=0;s<r&&l<a;++u)o[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<r;++s,++u)o[u]=t[s];for(;l<a;++l,++u)o[u]=n[l];return o},e.pad=function(e,t,n,i){var r=n||\" \",a=e+\"\",o=t-a.length;return o<=0?a:\"left\"===i?O(r,o)+a:\"center\"===i?O(r,~~(o/2))+a+O(r,Math.ceil(o/2)):a+O(r,o)},e.peek=function(e){return e[e.length-1]},e.repeat=O,e.splitAccessPath=s,e.stringValue=n,e.toBoolean=function(e){return null==e||\"\"===e?null:!(!e||\"false\"===e||\"0\"===e||!e)},e.toDate=function(e,t){return t=t||r,null==e||\"\"===e?null:t(e)},e.toNumber=function(e){return null==e||\"\"===e?null:+e},e.toString=function(e){return null==e||\"\"===e?null:e+\"\"},e.toSet=function(e){for(var t={},n=0,i=e.length;n<i;++n)t[e[n]]=1;return t},e.truncate=function(e,t,n,i){var r=null!=i?i:\"\",a=e+\"\",o=a.length,s=Math.max(0,t-r.length);return o<=t?a:\"left\"===n?r+a.slice(o-s):\"center\"===n?a.slice(0,Math.ceil(s/2))+r+a.slice(o-~~(s/2)):a.slice(0,s)+r},e.visitArray=function(e,t,n){if(e){var i,r=0,a=e.length;if(t)for(;r<a;++r)(i=t(e[r]))&&n(i,r,e);else e.forEach(n)}},Object.defineProperty(e,\"__esModule\",{value:!0})})},{}],12:[function(e,t,n){t.exports={name:\"vega-lite\",author:'Jeffrey Heer, Dominik Moritz, Kanit \"Ham\" Wongsuphasawat',version:\"2.0.0-rc3\",collaborators:[\"Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)\",\"Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)\",\"Jeffrey Heer <jheer@uw.edu> (http://jheer.org)\"],homepage:\"https://vega.github.io/vega-lite/\",description:\"Vega-lite provides a higher-level grammar for visual analysis, comparable to ggplot or Tableau, that generates complete Vega specifications.\",main:\"build/src/index.js\",types:\"typings/vega-lite.d.ts\",bin:{vl2png:\"./bin/vl2png\",vl2svg:\"./bin/vl2svg\",vl2vg:\"./bin/vl2vg\"},directories:{test:\"test\"},scripts:{pretsc:\"mkdir -p build && rm -rf build/*/** && cp package.json build/\",tsc:\"tsc\",prebuild:\"mkdir -p build/site build/test-gallery\",build:\"npm run build:only\",\"build:only\":\"npm run tsc && cp package.json build && browserify src/index.ts -p tsify -d -s vl | exorcist build/vega-lite.js.map > build/vega-lite.js\",postbuild:\"node node_modules/uglify-js/bin/uglifyjs build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema\",\"build:examples\":\"npm run data && npm run build:only && npm run build:examples-only\",\"build:examples-only\":\"TZ=America/Los_Angeles ./scripts/build-examples.sh && rm -f examples/specs/normalized/*.vl.json && scripts/build-normalized-examples\",\"build:example\":\"./scripts/build-example.sh\",\"build:toc\":\"bundle exec jekyll build -q && scripts/generate-toc\",\"build:site\":\"browserify site/static/main.ts -p [tsify -p site] -d | exorcist build/site/main.js.map > build/site/main.js\",\"build:versions\":\"scripts/update-version.sh\",\"build:test-gallery\":\"browserify test-gallery/main.ts -p [tsify -p test-gallery] -d > build/test-gallery/main.js\",\"check:examples\":\"scripts/check-examples.sh\",\"check:schema\":\"scripts/check-schema.sh\",clean:\"rm -rf build && rm -f vega-lite.* & find -E src test site examples -regex '.*\\\\.(js|js.map|d.ts)' -delete\",data:\"rsync -r node_modules/vega-datasets/data/* data\",link:\"npm link && npm link vega-lite\",deploy:\"scripts/deploy.sh\",\"deploy:gh\":\"scripts/deploy-gh.sh\",\"deploy:schema\":\"scripts/deploy-schema.sh\",prestart:\"npm run data && npm run build && scripts/index-examples\",start:\"nodemon -x 'npm run build:test-gallery' & browser-sync start --server --files 'build/test-gallery/main.js' --index 'test-gallery/index.html'\",poststart:\"rm examples/all-examples.json\",preschema:\"npm run prebuild\",schema:\"ts-json-schema-generator --path tsconfig.json --type TopLevelExtendedSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/\",renameschema:\"scripts/rename-schema.sh\",presite:\"npm run build && npm run data && npm run build:site && npm run build:toc && npm run build:versions\",site:\"bundle exec jekyll serve\",lint:\"tslint --project tsconfig.json -c tslint.json --type-check\",test:\"npm run build:only && npm run test:only && npm run test:runtime && npm run lint\",posttest:\"npm run schema && npm run data && npm run mocha:examples\",\"test:nocompile\":\"npm run test:only && npm run test:runtime && npm run lint && npm run mocha:examples\",\"test:only\":\"nyc --reporter=html --reporter=text-summary npm run mocha:test\",\"test:runtime\":\"TZ=America/Los_Angeles wdio wdio.conf.js\",\"test:runtime:generate\":\"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime\",\"test:debug\":\"npm run tsc && mocha --recursive --debug-brk --inspect build/test\",\"test:debug-examples\":\"npm run tsc && npm run schema && mocha --recursive --debug-brk --inspect build/examples\",\"mocha:test\":\"mocha --require source-map-support/register --reporter dot --recursive build/test\",\"mocha:examples\":\"mocha --require source-map-support/register --reporter dot --recursive build/examples\",codecov:\"nyc report --reporter=json && codecov -f coverage/*.json\",\"watch:build\":\"watchify src/index.ts -p tsify -v -d -s vl -o 'exorcist build/vega-lite.js.map > build/vega-lite.js'\",\"watch:tsc\":\"npm run tsc -- -w\",\"watch:test\":\"nodemon -x 'npm test'\",watch:\"nodemon -x 'npm run build && npm run test:nocompile' # already ran schema in build\"},repository:{type:\"git\",url:\"https://github.com/vega/vega-lite.git\"},license:\"BSD-3-Clause\",bugs:{url:\"https://github.com/vega/vega-lite/issues\"},devDependencies:{\"@types/chai\":\"^4.0.2\",\"@types/d3\":\"^4.10.0\",\"@types/highlight.js\":\"^9.1.9\",\"@types/json-stable-stringify\":\"^1.0.31\",\"@types/mkdirp\":\"^0.5.0\",\"@types/mocha\":\"^2.2.41\",\"@types/node\":\"^8.0.19\",\"@types/webdriverio\":\"^4.8.4\",ajv:\"5.2.2\",\"browser-sync\":\"^2.18.13\",browserify:\"^14.4.0\",\"browserify-shim\":\"^3.8.14\",chai:\"^4.1.0\",cheerio:\"^1.0.0-rc.2\",chromedriver:\"^2.30.1\",codecov:\"^2.3.0\",d3:\"^4.10.0\",exorcist:\"^0.4.0\",\"highlight.js\":\"^9.12.0\",mkdirp:\"^0.5.1\",mocha:\"^3.5.0\",nodemon:\"^1.11.0\",nyc:\"^11.1.0\",\"source-map-support\":\"^0.4.15\",\"ts-json-schema-generator\":\"^0.12.0\",\"ts-node\":\"^3.2.1\",tsify:\"^3.0.1\",tslint:\"5.4.3\",\"tslint-eslint-rules\":\"^4.1.1\",typescript:\"^2.4.2\",\"uglify-js\":\"^3.0.27\",vega:\"^3.0.0\",\"vega-datasets\":\"vega/vega-datasets#gh-pages\",\"vega-embed\":\"^3.0.0-beta.20\",\"vega-tooltip\":\"^0.4.2\",watchify:\"^3.9.0\",\"wdio-chromedriver-service\":\"^0.1.0\",\"wdio-dot-reporter\":\"0.0.9\",\"wdio-mocha-framework\":\"^0.5.10\",\"wdio-static-server-service\":\"^1.0.1\",webdriverio:\"^4.8.0\",\"yaml-front-matter\":\"^3.4.0\"},dependencies:{\"json-stable-stringify\":\"^1.0.1\",tslib:\"^1.7.1\",\"vega-event-selector\":\"^2.0.0\",\"vega-util\":\"^1.5.0\",yargs:\"^8.0.2\"}}},{}],13:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"./util\"),r={values:1,count:1,valid:1,missing:1,distinct:1,sum:1,mean:1,average:1,variance:1,variancep:1,stdev:1,stdevp:1,median:1,q1:1,q3:1,ci0:1,ci1:1,min:1,max:1,argmin:1,argmax:1};n.AGGREGATE_OPS=i.flagKeys(r),n.isAggregateOp=function(e){return!!r[e]},n.COUNTING_OPS=[\"count\",\"valid\",\"missing\",\"distinct\"],n.isCountingAggregateOp=function(e){return e&&i.contains(n.COUNTING_OPS,e)},n.SUM_OPS=[\"count\",\"sum\",\"distinct\",\"valid\",\"missing\"],n.SHARED_DOMAIN_OPS=[\"mean\",\"average\",\"median\",\"q1\",\"q3\",\"min\",\"max\"],n.SHARED_DOMAIN_OP_INDEX=i.toSet(n.SHARED_DOMAIN_OPS)},{\"./util\":119}],14:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.AXIS_PROPERTY_TYPE={grid:\"grid\",labelOverlap:\"main\",offset:\"main\",title:\"main\"},n.AXIS_PROPERTIES=[\"domain\",\"format\",\"grid\",\"labelPadding\",\"labels\",\"labelOverlap\",\"maxExtent\",\"minExtent\",\"offset\",\"orient\",\"position\",\"tickCount\",\"ticks\",\"tickSize\",\"title\",\"titlePadding\",\"values\",\"zindex\"],n.VG_AXIS_PROPERTIES=[].concat(n.AXIS_PROPERTIES,[\"gridScale\"])},{}],15:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"./channel\"),r=e(\"./util\");n.binToString=function(e){return r.isBoolean(e)?\"bin\":\"bin\"+r.keys(e).map(function(t){return\"_\"+t+\"_\"+e[t]}).join(\"\")},n.autoMaxBins=function(e){switch(e){case i.ROW:case i.COLUMN:case i.SIZE:case i.COLOR:case i.OPACITY:case i.SHAPE:return 6;default:return 10}}},{\"./channel\":16,\"./util\":119}],16:[function(e,t,n){\"use strict\";function i(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.DETAIL:case n.TOOLTIP:case n.ORDER:case n.OPACITY:case n.ROW:case n.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,rect:!0,line:!0,area:!0,text:!0};case n.X2:case n.Y2:return{rule:!0,bar:!0,rect:!0,area:!0};case n.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0,line:!0};case n.SHAPE:return{point:!0};case n.TEXT:return{text:!0}}}Object.defineProperty(n,\"__esModule\",{value:!0});var r,a=e(\"tslib\"),o=e(\"./util\");!function(e){e.ROW=\"row\",e.COLUMN=\"column\",e.X=\"x\",e.Y=\"y\",e.X2=\"x2\",e.Y2=\"y2\",e.COLOR=\"color\",e.SHAPE=\"shape\",e.SIZE=\"size\",e.OPACITY=\"opacity\",e.TEXT=\"text\",e.ORDER=\"order\",e.DETAIL=\"detail\",e.TOOLTIP=\"tooltip\"}(r=n.Channel||(n.Channel={})),n.X=r.X,n.Y=r.Y,n.X2=r.X2,n.Y2=r.Y2,n.ROW=r.ROW,n.COLUMN=r.COLUMN,n.SHAPE=r.SHAPE,n.SIZE=r.SIZE,n.COLOR=r.COLOR,n.TEXT=r.TEXT,n.DETAIL=r.DETAIL,n.ORDER=r.ORDER,n.OPACITY=r.OPACITY,n.TOOLTIP=r.TOOLTIP;var s={x:1,y:1,x2:1,y2:1,size:1,shape:1,color:1,order:1,opacity:1,text:1,detail:1,tooltip:1},l={row:1,column:1},u=a.__assign({},s,l);n.CHANNELS=o.flagKeys(u);u.order,u.detail;var c=a.__rest(u,[\"order\",\"detail\"]);n.SINGLE_DEF_CHANNELS=o.flagKeys(c),n.isChannel=function(e){return!!u[e]},n.UNIT_CHANNELS=o.flagKeys(s);var f=a.__rest(s,[\"x\",\"y\",\"x2\",\"y2\"]);n.NONPOSITION_CHANNELS=o.flagKeys(f);var d={x:1,y:1};n.POSITION_SCALE_CHANNELS=o.flagKeys(d);f.text,f.tooltip,f.detail,f.order;var p=a.__rest(f,[\"text\",\"tooltip\",\"detail\",\"order\"]);n.NONPOSITION_SCALE_CHANNELS=o.flagKeys(p);var m=a.__assign({},d,p);n.SCALE_CHANNELS=o.flagKeys(m),n.isScaleChannel=function(e){return!!m[e]},n.supportMark=function(e,t){return t in i(e)},n.getSupportedMark=i,n.rangeType=function(e){switch(e){case n.X:case n.Y:case n.SIZE:case n.OPACITY:case n.X2:case n.Y2:return\"continuous\";case n.ROW:case n.COLUMN:case n.SHAPE:case n.TEXT:case n.TOOLTIP:return\"discrete\";case n.COLOR:return\"flexible\";case n.DETAIL:case n.ORDER:return}throw new Error(\"getSupportedRole not implemented for \"+e)}},{\"./util\":119,tslib:6}],17:[function(e,t,n){\"use strict\";function i(e){return function(t,n){return n[e]&&t.push(n[e].combine()),t}}Object.defineProperty(n,\"__esModule\",{value:!0});var r=i(\"main\"),a=i(\"grid\");n.assembleAxes=function(e){return[].concat(e.x?[].concat(e.x.reduce(r,[]),e.x.reduce(a,[])):[],e.y?[].concat(e.y.reduce(r,[]),e.y.reduce(a,[])):[])}},{}],18:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t}(e(\"../split\").Split);n.AxisComponentPart=r},{\"../split\":90,tslib:6}],19:[function(e,t,n){\"use strict\";function i(e,t,n){return void 0!==e.labelAngle?(e.labelAngle%360+360)%360:t===o.X&&(c.contains([u.NOMINAL,u.ORDINAL],n.type)||n.bin||s.isTimeFieldDef(n))?270:void 0}function r(e,t){if(e&&e>0){if(e>180)return\"top\"===t?\"left\":\"right\";if(e<180)return\"top\"===t?\"right\":\"left\"}}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"../../channel\"),s=e(\"../../fielddef\"),l=e(\"../../scale\"),u=e(\"../../type\"),c=e(\"../../util\"),f=e(\"../common\");n.labels=function(e,t,n,o){var u=e.fieldDef(t)||(\"x\"===t?e.fieldDef(\"x2\"):\"y\"===t?e.fieldDef(\"y2\"):void 0),d=e.axis(t),p=e.config,m={};if(s.isTimeFieldDef(u)){var g=e.getScaleComponent(t).get(\"type\")===l.ScaleType.UTC;m.text={signal:f.timeFormatExpression(\"datum.value\",u.timeUnit,d.format,p.axis.shortTimeLabels,p.timeFormat,g)}}var h=i(d,t,u);if(h&&(m.angle={value:h}),m.angle&&\"x\"===t){var v=r(h,o.get(\"orient\"));v&&(m.align={value:v}),c.contains([90,270],h)&&(m.baseline={value:\"middle\"})}return m=a.__assign({},m,n),0===c.keys(m).length?void 0:m},n.labelAngle=i,n.labelAlign=r},{\"../../channel\":16,\"../../fielddef\":101,\"../../scale\":109,\"../../type\":118,\"../../util\":119,\"../common\":24,tslib:6}],20:[function(e,t,n){\"use strict\";function i(e,t){if(!e)return t.map(function(e){return d.__assign({},e.main?{main:e.main.clone()}:{},e.grid?{grid:e.grid.clone()}:{})});if(e.length===t.length){for(var n=e.length,i=0;i<n;i++){var a=e[i].main,o=t[i].main;if(!!a!=!!o)return;if(a&&o){var s=a.getWithExplicit(\"orient\"),l=o.getWithExplicit(\"orient\");if(s.explicit&&l.explicit&&s.value!==l.value)return;e[i].main=r(a,o)}var u=e[i].grid,c=t[i].grid;if(!!u!=!!c)return;u&&c&&(e[i].grid=r(u,c))}return e}}function r(e,t){for(var n=0,i=p.VG_AXIS_PROPERTIES;n<i.length;n++)!function(n){var i=y.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,\"axis\",function(e,t){switch(n){case\"title\":return h.titleMerger(e,t);case\"gridScale\":return{explicit:e.explicit,value:e.value||t.value}}return y.defaultTieBreaker(e,t,n,\"axis\")});e.setWithExplicit(n,i)}(i[n]);return e}function a(e){return!1===e||null===e}function o(e){return g.some(x,function(t){return s(e,t)})}function s(e,t){return\"axis\"===t||(\"grid\"===t||\"title\"===t?!!e.get(t):!a(e.get(t)))}function l(e,t){return c(e,t,!0)}function u(e,t){return c(e,t,!1)}function c(e,t,n){var i=t.axis(e),r=new b.AxisComponentPart({},{scale:t.scaleName(e)});p.AXIS_PROPERTIES.forEach(function(a){var o=f(a,i,e,t,n);if(void 0!==o){var s=\"values\"===a?!!i.values:o===i[a];r.set(a,o,s)}});var a=S.gridScale(t,e,n);void 0!==a&&r.set(\"gridScale\",a,!1);var o=i.encoding||{},l=x.reduce(function(n,i){if(!s(r,i))return n;var a=\"labels\"===i?_.labels(t,e,o.labels||{},r):o[i]||{};return void 0!==a&&g.keys(a).length>0&&(n[i]={update:a}),n},{});return g.keys(l).length>0&&r.set(\"encode\",l,!!i.encoding||!!i.labelAngle),r}function f(e,t,n,i,r){var a=i.fieldDef(n);if(!(r&&\"main\"===p.AXIS_PROPERTY_TYPE[e]||!r&&\"grid\"===p.AXIS_PROPERTY_TYPE[e])){switch(e){case\"domain\":return S.domain(e,t,r,n);case\"format\":return h.numberFormat(a,t.format,i.config);case\"grid\":o=i.getScaleComponent(n).get(\"type\");return h.getSpecifiedOrDefaultValue(t.grid,S.grid(o,a));case\"labels\":return!r&&t.labels;case\"labelOverlap\":o=i.getScaleComponent(n).get(\"type\");return S.labelOverlap(a,t,n,o);case\"minExtent\":return S.minMaxExtent(t.minExtent,r);case\"maxExtent\":return S.minMaxExtent(t.maxExtent,r);case\"orient\":return h.getSpecifiedOrDefaultValue(t.orient,S.orient(n));case\"tickCount\":var o=i.getScaleComponent(n).get(\"type\"),s=\"x\"===n?\"width\":\"y\"===n?\"height\":void 0,l=s?i.getSizeSignalRef(s):void 0;return h.getSpecifiedOrDefaultValue(t.tickCount,S.tickCount(n,a,o,l));case\"ticks\":return S.ticks(e,t,r,n);case\"title\":return h.getSpecifiedOrDefaultValue(t.title,S.title(t.titleMaxLength,a,i.config));case\"values\":return S.values(t,i,a);case\"zindex\":return h.getSpecifiedOrDefaultValue(t.zindex,S.zindex(r))}return t[e]}}Object.defineProperty(n,\"__esModule\",{value:!0});var d=e(\"tslib\"),p=e(\"../../axis\"),m=e(\"../../channel\"),g=e(\"../../util\"),h=e(\"../common\"),v=e(\"../resolve\"),y=e(\"../split\"),b=e(\"./component\"),_=e(\"./encode\"),S=e(\"./properties\"),x=[\"domain\",\"grid\",\"labels\",\"ticks\",\"title\"];n.parseUnitAxis=function(e){return m.POSITION_SCALE_CHANNELS.reduce(function(t,n){if(e.axis(n)){var i={},r=u(n,e);r&&o(r)&&(i.main=r);var a=l(n,e);a&&o(a)&&(i.grid=a),t[n]=[i]}return t},{})};var E={bottom:\"top\",top:\"bottom\",left:\"right\",right:\"left\"};n.parseLayerAxis=function(e){for(var t=e.component,n=t.axes,r=t.resolve,a={top:0,bottom:0,right:0,left:0},o=0,s=e.children;o<s.length;o++)!function(t){t.parseAxisAndHeader(),g.keys(t.component.axes).forEach(function(a){r.axis[a]=v.parseGuideResolve(e.component.resolve,a),\"shared\"===r.axis[a]&&(n[a]=i(n[a],t.component.axes[a]),n[a]||(r.axis[a]=\"independent\",delete n[a]))})}(s[o]);[\"x\",\"y\"].forEach(function(t){for(var i=0,o=e.children;i<o.length;i++){var s=o[i];s.component.axes[t]&&(\"independent\"===r.axis[t]&&(n[t]=(n[t]||[]).concat(s.component.axes[t]),s.component.axes[t].forEach(function(e){var t=e.main.getWithExplicit(\"orient\"),n=t.value,i=t.explicit;if(a[n]>0&&!i){var r=E[n];a[n]>a[r]&&e.main.set(\"orient\",r,!1)}a[n]++})),delete s.component.axes[t])}})},n.parseGridAxis=l,n.parseMainAxis=u},{\"../../axis\":14,\"../../channel\":16,\"../../util\":119,\"../common\":24,\"../resolve\":70,\"../split\":90,\"./component\":18,\"./encode\":19,\"./properties\":21,tslib:6}],21:[function(e,t,n){\"use strict\";function i(e,t,n,i){return!n&&t[e]}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"../../channel\"),a=e(\"../../datetime\"),o=e(\"../../fielddef\"),s=e(\"../../log\"),l=e(\"../../scale\"),u=e(\"../../util\");n.domainAndTicks=i,n.domain=i,n.ticks=i,n.grid=function(e,t){return!l.hasDiscreteDomain(e)&&!t.bin},n.gridScale=function(e,t,n){if(n){var i=\"x\"===t?\"y\":\"x\";if(e.getScaleComponent(i))return e.scaleName(i)}},n.labelOverlap=function(e,t,n,i){if(\"nominal\"!==e.type)return\"log\"!==i||\"greedy\"},n.minMaxExtent=function(e,t){return t?0:e},n.orient=function(e){switch(e){case r.X:return\"bottom\";case r.Y:return\"left\"}throw new Error(s.message.INVALID_CHANNEL_FOR_AXIS)},n.tickCount=function(e,t,n,i){if(!l.hasDiscreteDomain(n)&&\"log\"!==n&&!u.contains([\"month\",\"hours\",\"day\",\"quarter\"],t.timeUnit))return t.bin?{signal:\"min(ceil(\"+i.signal+\"/40), \"+t.bin.maxbins+\")\"}:{signal:\"ceil(\"+i.signal+\"/40)\"}},n.title=function(e,t,n){var i=o.title(t,n);return e?u.truncate(i,e):i},n.values=function(e,t,n){var i=e.values;return e.values&&a.isDateTime(i[0])?i.map(function(e){return{signal:a.dateTimeExpr(e,!0)}}):i},n.zindex=function(e){return e?0:1}},{\"../../channel\":16,\"../../datetime\":98,\"../../fielddef\":101,\"../../log\":106,\"../../scale\":109,\"../../util\":119}],22:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../util\"),a=e(\"./data/parse\"),o=e(\"./layoutsize/assemble\"),s=function(e){function t(t,n,i,r,a){return e.call(this,t,n,i,r,a)||this}return i.__extends(t,e),t.prototype.parseData=function(){this.component.data=a.parseData(this),this.children.forEach(function(e){e.parseData()})},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=0,n=this.children;t<n.length;t++)!function(t){t.parseSelection(),r.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})}(n[t])},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].parseAxisAndHeader()},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.forEach(function(e){return e.assembleSelectionSignals()}),[]},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},o.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleMarks=function(){return this.children.map(function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleLayoutSize();return i.__assign({type:\"group\",name:e.getName(\"group\")},t?{title:t}:{},n?{style:n}:{},r?{encode:{update:r}}:{},e.assembleGroup())})},t}(e(\"./model\").Model);n.BaseConcatModel=s},{\"../util\":119,\"./data/parse\":41,\"./layoutsize/assemble\":48,\"./model\":67,tslib:6}],23:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../log\"),r=e(\"../spec\"),a=e(\"./concat\"),o=e(\"./facet\"),s=e(\"./layer\"),l=e(\"./repeat\"),u=e(\"./unit\");n.buildModel=function(e,t,n,c,f,d,p){if(r.isFacetSpec(e))return new o.FacetModel(e,t,n,f,d);if(r.isLayerSpec(e))return new s.LayerModel(e,t,n,c,f,d,p);if(r.isUnitSpec(e))return new u.UnitModel(e,t,n,c,f,d,p);if(r.isRepeatSpec(e))return new l.RepeatModel(e,t,n,f,d);if(r.isConcatSpec(e))return new a.ConcatModel(e,t,n,f,d);throw new Error(i.message.INVALID_SPEC)}},{\"../log\":106,\"../spec\":112,\"./concat\":26,\"./facet\":45,\"./layer\":46,\"./repeat\":68,\"./unit\":91}],24:[function(e,t,n){\"use strict\";function i(e){return e.style?g.isArray(e.style)?e.style:[e.style]:[e.type]}function r(e,t,n){var r=n.mark[e],a=n[t.type];void 0!==a[e]&&(r=a[e]);for(var o=0,s=i(t);o<s.length;o++){var l=s[o],u=n.style[l],c=e;u&&void 0!==u[c]&&(r=u[c])}return r}function a(e,t,n){if(e.type===m.QUANTITATIVE)return t||n.numberFormat}function o(e,t){return\"format(\"+e+', \"'+(t||\"\")+'\")'}function s(e,t,n){return o(e,t||n.numberFormat)}function l(e,t,n,i){return e+\" === null || isNaN(\"+e+') ? \"null\" : '+s(e,n,i)+' + \" - \" + '+s(t,n,i)}function u(e,t,n,i,r,a){if(!t||n){var o=n||r;return a?\"utcFormat(\"+e+\", '\"+o+\"')\":\"timeFormat(\"+e+\", '\"+o+\"')\"}return p.formatExpression(t,e,i,a)}Object.defineProperty(n,\"__esModule\",{value:!0});var c=e(\"../channel\"),f=e(\"../fielddef\"),d=e(\"../scale\"),p=e(\"../timeunit\"),m=e(\"../type\"),g=e(\"../util\");n.applyConfig=function(e,t,n){for(var i=0,r=n;i<r.length;i++){var a=r[i],o=t[a];void 0!==o&&(e[a]={value:o})}return e},n.applyMarkConfig=function(e,t,n){for(var i=0,a=n;i<a.length;i++){var o=a[i],s=r(o,t.markDef,t.config);void 0!==s&&(e[o]={value:s})}return e},n.getStyles=i,n.getMarkConfig=r,n.formatSignalRef=function(e,t,n,i){var r=a(e,t,i);if(e.bin)return{signal:l(f.field(e,{expr:n}),f.field(e,{expr:n,binSuffix:\"end\"}),r,i)};if(\"quantitative\"===e.type)return{signal:\"\"+o(f.field(e,{expr:n}),r)};if(f.isTimeFieldDef(e)){var s=f.isScaleFieldDef(e)&&e.scale&&e.scale.type===d.ScaleType.UTC;return{signal:u(f.field(e,{expr:n}),e.timeUnit,t,i.text.shortTimeLabels,i.timeFormat,s)}}return{signal:\"''+\"+f.field(e,{expr:n})}},n.getSpecifiedOrDefaultValue=function(e,t){return void 0!==e?e:t},n.numberFormat=a,n.numberFormatExpr=s,n.binFormatExpression=l,n.timeFormatExpression=u,n.sortParams=function(e,t){return(g.isArray(e)?e:[e]).reduce(function(e,n){return e.field.push(f.field(n,t)),e.order.push(n.sort||\"ascending\"),e},{field:[],order:[]})},n.titleMerger=function(e,t){return{explicit:e.explicit,value:e.value===t.value?e.value:e.value+\", \"+t.value}},n.binRequiresRange=function(e,t){return e.bin?c.isScaleChannel(t)&&g.contains([\"ordinal\",\"nominal\"],e.type):(console.warn(\"Only use this method with binned field defs\"),!1)}},{\"../channel\":16,\"../fielddef\":101,\"../scale\":109,\"../timeunit\":114,\"../type\":118,\"../util\":119}],25:[function(e,t,n){\"use strict\";function i(e,t,n){return a.__assign({autosize:1===c.keys(n).length&&n.type?n.type:n},u.extractTopLevelProperties(t),u.extractTopLevelProperties(e))}function r(e,t){var n=e.config?o.stripAndRedirectConfig(e.config):void 0,i=e.assembleTitle(),r=e.assembleGroupStyle(),s=e.assembleLayoutSignals();return s=s.filter(function(e){return\"width\"!==e.name&&\"height\"!==e.name||void 0===e.value||(t[e.name]=e.value,!1)}),{spec:a.__assign({$schema:\"https://vega.github.io/schema/vega/v3.0.json\"},e.description?{description:e.description}:{},t,i?{title:i}:{},r?{style:r}:{},{data:[].concat(e.assembleSelectionData([]),d.assembleRootData(e.component.data))},e.assembleGroup(s.concat(e.assembleSelectionTopLevelSignals([]))),n?{config:n}:{})}}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"../config\"),s=e(\"../log\"),l=e(\"../spec\"),u=e(\"../toplevelprops\"),c=e(\"../util\"),f=e(\"./buildmodel\"),d=e(\"./data/assemble\"),p=e(\"./data/optimize\");n.compile=function(e,t){t&&s.set(t);try{var n=o.initConfig(e.config),a=l.normalize(e,n),c=u.normalizeAutoSize(e.autosize,l.isLayerSpec(a)||l.isUnitSpec(a)),d=f.buildModel(a,null,\"\",void 0,void 0,n,\"fit\"===c.type);return d.parse(),p.optimizeDataflow(d.component.data),r(d,i(e,n,c))}finally{t&&s.reset()}}},{\"../config\":96,\"../log\":106,\"../spec\":112,\"../toplevelprops\":116,\"../util\":119,\"./buildmodel\":23,\"./data/assemble\":28,\"./data/optimize\":39,tslib:6}],26:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../spec\"),a=e(\"./baseconcat\"),o=e(\"./buildmodel\"),s=e(\"./layoutsize/parse\"),l=function(e){function t(t,n,i,a,s){var l=e.call(this,t,n,i,s,t.resolve)||this;return l.type=\"concat\",l.isVConcat=r.isVConcatSpec(t),l.children=(r.isVConcatSpec(t)?t.vconcat:t.hconcat).map(function(e,t){return o.buildModel(e,l,l.getName(\"concat_\"+t),void 0,a,s,!1)}),l}return i.__extends(t,e),t.prototype.parseLayoutSize=function(){s.parseConcatLayoutSize(this)},t.prototype.parseAxisGroup=function(){return null},t.prototype.assembleLayout=function(){return i.__assign({padding:{row:10,column:10},offset:10},this.isVConcat?{columns:1}:{},{bounds:\"full\",align:\"each\"})},t}(a.BaseConcatModel);n.ConcatModel=l},{\"../spec\":112,\"./baseconcat\":22,\"./buildmodel\":23,\"./layoutsize/parse\":49,tslib:6}],27:[function(e,t,n){\"use strict\";function i(e,t,n){return n.bin?(e[s.field(n,{})]=!0,e[s.field(n,{binSuffix:\"end\"})]=!0,c.binRequiresRange(n,t)&&(e[s.field(n,{binSuffix:\"range\"})]=!0)):e[s.field(n)]=!0,e}function r(e,t){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];for(var r in i)i.hasOwnProperty(r)&&(n in e?e[n][r]=i[r]:e[n]={op:i[r]})}}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"../../channel\"),s=e(\"../../fielddef\"),l=e(\"../../log\"),u=e(\"../../util\"),c=e(\"../common\"),f=function(e){function t(t,n){var i=e.call(this)||this;return i.dimensions=t,i.measures=n,i}return a.__extends(t,e),t.prototype.clone=function(){return new t(a.__assign({},this.dimensions),u.duplicate(this.measures))},t.makeFromEncoding=function(e){var n=!1;e.forEachFieldDef(function(e){e.aggregate&&(n=!0)});var r={},a={};return n?(e.forEachFieldDef(function(t,n){t.aggregate?\"count\"===t.aggregate?(r[\"*\"]=r[\"*\"]||{},r[\"*\"].count=s.field(t,{aggregate:\"count\"})):(r[t.field]=r[t.field]||{},r[t.field][t.aggregate]=s.field(t),o.isScaleChannel(n)&&\"unaggregated\"===e.scaleDomain(n)&&(r[t.field].min=s.field(t,{aggregate:\"min\"}),r[t.field].max=s.field(t,{aggregate:\"max\"}))):i(a,n,t)}),u.keys(a).length+u.keys(r).length===0?null:new t(a,r)):null},t.makeFromTransform=function(e){for(var n={},i={},r=0,a=e.summarize;r<a.length;r++)(c=a[r]).aggregate&&(\"count\"===c.aggregate?(i[\"*\"]=i[\"*\"]||{},i[\"*\"].count=c.as||s.field(c)):(i[c.field]=i[c.field]||{},i[c.field][c.aggregate]=c.as||s.field(c)));for(var o=0,l=e.groupby;o<l.length;o++){var c=l[o];n[c]=!0}return u.keys(n).length+u.keys(i).length===0?null:new t(n,i)},t.prototype.merge=function(e){u.differ(this.dimensions,e.dimensions)?l.debug(\"different dimensions, cannot merge\"):(r(this.measures,e.measures),e.remove())},t.prototype.addDimensions=function(e){var t=this;e.forEach(function(e){return t.dimensions[e]=!0})},t.prototype.dependentFields=function(){var e={};return u.keys(this.dimensions).forEach(function(t){return e[t]=!0}),u.keys(this.measures).forEach(function(t){return e[t]=!0}),e},t.prototype.producedFields=function(){var e=this,t={};return u.keys(this.measures).forEach(function(n){u.keys(e.measures[n]).forEach(function(e){t[e+\"_\"+n]=!0})}),t},t.prototype.assemble=function(){var e=this,t=[],n=[],i=[];return u.keys(this.measures).forEach(function(r){u.keys(e.measures[r]).forEach(function(a){i.push(e.measures[r][a]),t.push(a),n.push(r)})}),{type:\"aggregate\",groupby:u.keys(this.dimensions),ops:t,fields:n,as:i}},t}(e(\"./dataflow\").DataFlowNode);n.AggregateNode=f},{\"../../channel\":16,\"../../fielddef\":101,\"../../log\":106,\"../../util\":119,\"../common\":24,\"./dataflow\":31,tslib:6}],28:[function(e,t,n){\"use strict\";function i(e){function t(i,o){if(i instanceof y.SourceNode&&(a.isUrlData(i.data)||(e.push(o),o=S={name:null,source:o.name,transform:[]})),i instanceof p.ParseNode&&(i.parent instanceof y.SourceNode&&!o.source?o.format=r.__assign({},o.format||{},{parse:i.assembleFormatParse()}):o.transform=o.transform.concat(i.assembleTransforms())),i instanceof f.FacetNode)return o.name||(o.name=\"data_\"+n++),!o.source||o.transform.length>0?(e.push(o),i.data=o.name):i.data=o.source,void i.assemble().forEach(function(t){return e.push(t)});if((i instanceof d.FilterNode||i instanceof v.NullFilterNode||i instanceof u.CalculateNode||i instanceof s.AggregateNode||i instanceof g.LookupNode||i instanceof m.IdentifierNode)&&o.transform.push(i.assemble()),(i instanceof h.NonPositiveFilterNode||i instanceof l.BinNode||i instanceof _.TimeUnitNode||i instanceof b.StackNode)&&(o.transform=o.transform.concat(i.assemble())),i instanceof s.AggregateNode&&(o.name||(o.name=\"data_\"+n++)),i instanceof c.OutputNode)if(o.source&&0===o.transform.length)i.setSource(o.source);else if(i.parent instanceof c.OutputNode)i.setSource(o.name);else if(o.name||(o.name=\"data_\"+n++),i.setSource(o.name),1===i.numChildren()){e.push(o);var S={name:null,source:o.name,transform:[]};o=S}switch(i.numChildren()){case 0:i instanceof c.OutputNode&&(!o.source||o.transform.length>0)&&e.push(o);break;case 1:t(i.children[0],o);break;default:o.name||(o.name=\"data_\"+n++);var x=o.name;!o.source||o.transform.length>0?e.push(o):x=o.source,i.children.forEach(function(e){t(e,{name:null,source:x,transform:[]})})}}var n=0;return t}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"../../data\"),o=e(\"../../util\"),s=e(\"./aggregate\"),l=e(\"./bin\"),u=e(\"./calculate\"),c=e(\"./dataflow\"),f=e(\"./facet\"),d=e(\"./filter\"),p=e(\"./formatparse\"),m=e(\"./indentifier\"),g=e(\"./lookup\"),h=e(\"./nonpositivefilter\"),v=e(\"./nullfilter\"),y=e(\"./source\"),b=e(\"./stack\"),_=e(\"./timeunit\");n.assembleFacetData=function(e){var t=[],n=i(t);return e.children.forEach(function(t){return n(t,{source:e.name,name:null,transform:[]})}),t},n.assembleRootData=function(e){var t=o.vals(e.sources),n=[],r=i(n),a=0;t.forEach(function(e){e.hasName()||(e.dataName=\"source_\"+a++);var t=e.assemble();r(e,t)}),n.forEach(function(e){0===e.transform.length&&delete e.transform}),n.sort(function(e,t){return 0===(e.transform||[]).length?-1:0===(t.transform||[]).length?1:0});for(var s=0,l=n;s<l.length;s++)for(var u=0,c=l[s].transform||[];u<c.length;u++){var f=c[u];\"lookup\"===f.type&&(f.from=e.outputNodes[f.from].getSource())}return n}},{\"../../data\":97,\"../../util\":119,\"./aggregate\":27,\"./bin\":29,\"./calculate\":30,\"./dataflow\":31,\"./facet\":32,\"./filter\":33,\"./formatparse\":34,\"./indentifier\":35,\"./lookup\":36,\"./nonpositivefilter\":37,\"./nullfilter\":38,\"./source\":42,\"./stack\":43,\"./timeunit\":44,tslib:6}],29:[function(e,t,n){\"use strict\";function i(e,t,n,i){if(d.binRequiresRange(t,n)){var r=p.isUnitModel(e)?e.axis(n)||e.legend(n)||{}:{},a=c.field(t,{expr:\"datum\"}),o=c.field(t,{expr:\"datum\",binSuffix:\"end\"});return{formulaAs:c.field(t,{binSuffix:\"range\"}),formula:d.binFormatExpression(a,o,r.format,i)}}return{}}function r(e,t){return u.binToString(e)+\"_\"+t}function a(e){return!!e.model}function o(e,t){if(a(e)){var n=e.model;return{signal:n.getName(t+\"_bins\"),extentSignal:n.getName(t+\"_extent\")}}return e}function s(e,t){var n=c.normalizeBin(e.bin,void 0)||{},i=r(n,e.field),a=o(t,i),s=a.signal,u=a.extentSignal;return{key:i,binComponent:l.__assign({bin:n,field:e.field,as:[c.field(e,{}),c.field(e,{binSuffix:\"end\"})]},s?{signal:s}:{},u?{extentSignal:u}:{})}}Object.defineProperty(n,\"__esModule\",{value:!0});var l=e(\"tslib\"),u=e(\"../../bin\"),c=e(\"../../fielddef\"),f=e(\"../../util\"),d=e(\"../common\"),p=e(\"../model\"),m=function(e){function t(t){var n=e.call(this)||this;return n.bins=t,n}return l.__extends(t,e),t.prototype.clone=function(){return new t(f.duplicate(this.bins))},t.makeBinFromEncoding=function(e){var n=e.reduceFieldDef(function(t,n,r){if(n.bin){var a=s(n,{model:e}),o=a.key,u=a.binComponent;t[o]=l.__assign({},u,t[o],i(e,n,r,e.config))}return t},{});return 0===f.keys(n).length?null:new t(n)},t.makeFromTransform=function(e,n){var i=s(e,n),r=i.key,a=i.binComponent;return new t((o={},o[r]=a,o));var o},t.prototype.merge=function(e){this.bins=l.__assign({},this.bins,e.bins),e.remove()},t.prototype.producedFields=function(){var e={};return f.vals(this.bins).forEach(function(t){t.as.forEach(function(t){return e[t]=!0})}),e},t.prototype.dependentFields=function(){var e={};return f.vals(this.bins).forEach(function(t){e[t.field]=!0}),e},t.prototype.assemble=function(){return f.flatten(f.vals(this.bins).map(function(e){var t=[],n=l.__assign({type:\"bin\",field:e.field,as:e.as,signal:e.signal},e.bin);return!e.bin.extent&&e.extentSignal&&(t.push({type:\"extent\",field:e.field,signal:e.extentSignal}),n.extent={signal:e.extentSignal}),t.push(n),e.formula&&t.push({type:\"formula\",expr:e.formula,as:e.formulaAs}),t}))},t}(e(\"./dataflow\").DataFlowNode);n.BinNode=m},{\"../../bin\":15,\"../../fielddef\":101,\"../../util\":119,\"../common\":24,\"../model\":67,\"./dataflow\":31,tslib:6}],30:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../util\"),a=function(e){function t(t){var n=e.call(this)||this;return n.transform=t,n}return i.__extends(t,e),t.prototype.clone=function(){return new t(r.duplicate(this.transform))},t.prototype.producedFields=function(){var e={};return e[this.transform.as]=!0,e},t.prototype.assemble=function(){return{type:\"formula\",expr:this.transform.calculate,as:this.transform.as}},t}(e(\"./dataflow\").DataFlowNode);n.CalculateNode=a},{\"../../util\":119,\"./dataflow\":31,tslib:6}],31:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=function(){function e(e){this.debugName=e,this._children=[],this._parent=null}return e.prototype.clone=function(){throw new Error(\"Cannot clone node\")},e.prototype.producedFields=function(){return{}},e.prototype.dependentFields=function(){return{}},Object.defineProperty(e.prototype,\"parent\",{get:function(){return this._parent},set:function(e){this._parent=e,e.addChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"children\",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return this._children.length},e.prototype.addChild=function(e){this._children.push(e)},e.prototype.removeChild=function(e){this._children.splice(this._children.indexOf(e),1)},e.prototype.remove=function(){for(var e=0,t=this._children;e<t.length;e++)t[e].parent=this._parent;this._parent.removeChild(this)},e.prototype.insertAsParentOf=function(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this},e.prototype.swapWithParent=function(){for(var e=this._parent,t=e.parent,n=0,i=this._children;n<i.length;n++)i[n].parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this},e}();n.DataFlowNode=r;var a=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.type=n,r.refCounts=i,r._source=r._name=t,!r.refCounts||r._name in r.refCounts||(r.refCounts[r._name]=0),r}return i.__extends(t,e),t.prototype.clone=function(){var e=new this.constructor;return e.debugName=\"clone_\"+this.debugName,e._source=this._source,e._name=\"clone_\"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e},t.prototype.getSource=function(){return this.refCounts[this._name]++,this._source},t.prototype.isRequired=function(){return!!this.refCounts[this._name]},t.prototype.setSource=function(e){this._source=e},t}(r);n.OutputNode=a},{tslib:6}],32:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../channel\"),a=e(\"../../log\"),o=e(\"../../scale\"),s=e(\"../../vega.schema\"),l=e(\"../scale/domain\"),u=function(e){function t(t,n,i){var a=e.call(this)||this;return a.model=t,a.name=n,a.data=i,t.facet.column&&(a.columnFields=[t.field(r.COLUMN)],a.columnName=t.getName(\"column_domain\"),t.fieldDef(r.COLUMN).bin&&a.columnFields.push(t.field(r.COLUMN,{binSuffix:\"end\"}))),t.facet.row&&(a.rowFields=[t.field(r.ROW)],a.rowName=t.getName(\"row_domain\"),t.fieldDef(r.ROW).bin&&a.rowFields.push(t.field(r.ROW,{binSuffix:\"end\"}))),a.childModel=t.child,a}return i.__extends(t,e),Object.defineProperty(t.prototype,\"fields\",{get:function(){var e=[];return this.columnFields&&(e=e.concat(this.columnFields)),this.rowFields&&(e=e.concat(this.rowFields)),e},enumerable:!0,configurable:!0}),t.prototype.getSource=function(){return this.name},t.prototype.getChildIndependentFieldsWithStep=function(){for(var e={},t=0,n=[\"x\",\"y\"];t<n.length;t++){var i=n[t],r=this.childModel.component.scales[i];if(r&&!r.merged){var u=r.get(\"type\"),c=r.get(\"range\");if(o.hasDiscreteDomain(u)&&s.isVgRangeStep(c)){var f=l.assembleDomain(this.childModel,i),d=l.getFieldFromDomain(f);d?e[i]=d:a.warn(\"Unknown field for ${channel}.  Cannot calculate view size.\")}}}return e},t.prototype.assembleRowColumnData=function(e,t,n){var r={},a=\"row\"===e?\"y\":\"x\";return n[a]&&(r=t?{fields:[\"distinct_\"+n[a]],ops:[\"max\"],as:[\"distinct_\"+n[a]]}:{fields:[n[a]],ops:[\"distinct\"]}),{name:\"row\"===e?this.rowName:this.columnName,source:t||this.data,transform:[i.__assign({type:\"aggregate\",groupby:\"row\"===e?this.rowFields:this.columnFields},r)]}},t.prototype.assemble=function(){var e=[],t=null,n=this.getChildIndependentFieldsWithStep();if(this.columnName&&this.rowName&&(n.x||n.y)){t=\"cross_\"+this.columnName+\"_\"+this.rowName;var i=[].concat(n.x?[n.x]:[],n.y?[n.y]:[]),r=i.map(function(){return\"distinct\"});e.push({name:t,source:this.data,transform:[{type:\"aggregate\",groupby:this.columnFields.concat(this.rowFields),fields:i,ops:r}]})}return this.columnName&&e.push(this.assembleRowColumnData(\"column\",t,n)),this.rowName&&e.push(this.assembleRowColumnData(\"row\",t,n)),e},t}(e(\"./dataflow\").DataFlowNode);n.FacetNode=u},{\"../../channel\":16,\"../../log\":106,\"../../scale\":109,\"../../vega.schema\":121,\"../scale/domain\":73,\"./dataflow\":31,tslib:6}],33:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../filter\"),a=e(\"../../util\"),o=function(e){function t(t,n){var i=e.call(this)||this;return i.model=t,i.filter=n,i.expr=r.expression(i.model,i.filter,i),i}return i.__extends(t,e),t.prototype.clone=function(){return new t(this.model,a.duplicate(this.filter))},t.prototype.assemble=function(){return{type:\"filter\",expr:this.expr}},t}(e(\"./dataflow\").DataFlowNode);n.FilterNode=o},{\"../../filter\":102,\"../../util\":119,\"./dataflow\":31,tslib:6}],34:[function(e,t,n){\"use strict\";function i(e,t){var n=\"datum[\"+f.stringValue(e)+\"]\";if(\"number\"===t)return\"toNumber(\"+n+\")\";if(\"boolean\"===t)return\"toBoolean(\"+n+\")\";if(\"string\"===t)return\"toString(\"+n+\")\";if(\"date\"===t)return\"toDate(\"+n+\")\";if(0===t.indexOf(\"date:\"))return\"timeParse(\"+n+\",\"+(i=t.slice(5,t.length))+\")\";if(0===t.indexOf(\"utc:\")){var i=t.slice(4,t.length);return\"utcParse(\"+n+\",\"+i+\")\"}return l.warn(l.message.unrecognizedParse(t)),null}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"../../aggregate\"),o=e(\"../../fielddef\"),s=e(\"../../filter\"),l=e(\"../../log\"),u=e(\"../../logical\"),c=e(\"../../transform\"),f=e(\"../../util\"),d=e(\"../model\"),p=function(e){function t(t){var n=e.call(this)||this;return n._parse={},n._parse=t,n}return r.__extends(t,e),t.prototype.clone=function(){return new t(f.duplicate(this.parse))},t.make=function(e){var n={},i={};(e.transforms||[]).forEach(function(e){c.isCalculate(e)?i[e.as]=!0:c.isFilter(e)&&u.forEachLeave(e.filter,function(e){(s.isEqualFilter(e)||s.isRangeFilter(e)||s.isOneOfFilter(e))&&e.timeUnit&&(n[e.field]=\"date\")})},{}),(d.isUnitModel(e)||d.isFacetModel(e))&&e.forEachFieldDef(function(e){if(o.isTimeFieldDef(e))n[e.field]=\"date\";else if(o.isNumberFieldDef(e)){if(i[e.field]||a.isCountingAggregateOp(e.aggregate))return;n[e.field]=\"number\"}});var r=e.data;if(r&&r.format&&r.format.parse){var p=r.format.parse;f.keys(p).forEach(function(e){n[e]=p[e]})}var m=e.component.data.ancestorParse;return f.keys(m).forEach(function(e){n[e]!==m[e]?l.warn(l.message.differentParse(e,n[e],m[e])):delete n[e]}),0===f.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,\"parse\",{get:function(){return this._parse},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){this._parse=r.__assign({},this._parse,e.parse),e.remove()},t.prototype.assembleFormatParse=function(){return this._parse},t.prototype.producedFields=function(){return f.toSet(f.keys(this.parse))},t.prototype.dependentFields=function(){return f.toSet(f.keys(this.parse))},t.prototype.assembleTransforms=function(){var e=this;return f.keys(this._parse).map(function(t){var n=i(t,e._parse[t]);return n?{type:\"formula\",expr:n,as:t}:null}).filter(function(e){return null!==e})},t}(e(\"./dataflow\").DataFlowNode);n.ParseNode=p},{\"../../aggregate\":13,\"../../fielddef\":101,\"../../filter\":102,\"../../log\":106,\"../../logical\":107,\"../../transform\":117,\"../../util\":119,\"../model\":67,\"./dataflow\":31,tslib:6}],35:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../selection\"),a=function(e){function t(){return e.call(this)||this}return i.__extends(t,e),t.prototype.clone=function(){return new t},t.prototype.producedFields=function(){return e={},e[r.SELECTION_ID]=!0,e;var e},t.prototype.assemble=function(){return{type:\"identifier\",as:r.SELECTION_ID}},t}(e(\"./dataflow\").DataFlowNode);n.IdentifierNode=a},{\"../../selection\":110,\"./dataflow\":31,tslib:6}],36:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"vega-util\"),a=e(\"../../log\"),o=e(\"./dataflow\"),s=e(\"./source\"),l=function(e){function t(t,n){var i=e.call(this)||this;return i.transform=t,i.secondary=n,i}return i.__extends(t,e),t.make=function(e,n,i){var r=e.component.data.sources,a=new s.SourceNode(n.from.data),l=r[a.hash()];l||(r[a.hash()]=a,l=a);var u=e.getName(\"lookup_\"+i),c=new o.OutputNode(u,\"lookup\",e.component.data.outputNodeRefCounts);return c.parent=l,e.component.data.outputNodes[u]=c,new t(n,c.getSource())},t.prototype.producedFields=function(){return r.toSet(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))},t.prototype.assemble=function(){var e;if(this.transform.from.fields)e=i.__assign({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;r.isString(t)||(a.warn(a.message.NO_FIELDS_NEEDS_AS),t=\"_lookup\"),e={as:[t]}}return i.__assign({type:\"lookup\",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})},t}(o.DataFlowNode);n.LookupNode=l},{\"../../log\":106,\"./dataflow\":31,\"./source\":42,tslib:6,\"vega-util\":11}],37:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../channel\"),a=e(\"../../scale\"),o=e(\"../../util\"),s=function(e){function t(t){var n=e.call(this)||this;return n._filter=t,n}return i.__extends(t,e),t.prototype.clone=function(){return new t(i.__assign({},this._filter))},t.make=function(e){var n=r.SCALE_CHANNELS.reduce(function(t,n){var i=e.getScaleComponent(n);return i&&e.field(n)?(t[e.field(n)]=i.get(\"type\")===a.ScaleType.LOG,t):t},{});return o.keys(n).length?new t(n):null},Object.defineProperty(t.prototype,\"filter\",{get:function(){return this._filter},enumerable:!0,configurable:!0}),t.prototype.assemble=function(){var e=this;return o.keys(this._filter).filter(function(t){return e._filter[t]}).map(function(e){return{type:\"filter\",expr:\"datum[\"+o.stringValue(e)+\"] > 0\"}})},t}(e(\"./dataflow\").DataFlowNode);n.NonPositiveFilterNode=s},{\"../../channel\":16,\"../../scale\":109,\"../../util\":119,\"./dataflow\":31,tslib:6}],38:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../channel\"),a=e(\"../../scale\"),o=e(\"../../type\"),s=e(\"../../util\"),l=function(e){function t(t){var n=e.call(this)||this;return n._filteredFields=t,n}return i.__extends(t,e),t.prototype.clone=function(){return new t(s.duplicate(this._filteredFields))},t.make=function(e){var n=e.reduceFieldDef(function(t,n,i){if(\"filter\"===e.config.invalidValues&&!n.aggregate&&n.field){var o=r.isScaleChannel(i)&&e.getScaleComponent(i);if(o){var s=o.get(\"type\");a.hasContinuousDomain(s)&&(t[n.field]=n)}}return t},{});return 0===s.keys(n).length?null:new t(n)},Object.defineProperty(t.prototype,\"filteredFields\",{get:function(){return this._filteredFields},enumerable:!0,configurable:!0}),t.prototype.merge=function(e){var t=this,n=s.keys(this._filteredFields).map(function(e){return e+\" \"+s.hash(t._filteredFields[e])}),r=s.keys(e.filteredFields).map(function(t){return t+\" \"+s.hash(e.filteredFields[t])});s.differArray(n,r)||(this._filteredFields=i.__assign({},this._filteredFields,e._filteredFields),e.remove())},t.prototype.assemble=function(){var e=this,t=s.keys(this._filteredFields).reduce(function(t,n){var i=e._filteredFields[n];return null!==i&&(t.push(\"datum[\"+s.stringValue(i.field)+\"] !== null\"),s.contains([o.QUANTITATIVE,o.TEMPORAL],i.type)&&t.push(\"!isNaN(datum[\"+s.stringValue(i.field)+\"])\")),t},[]);return t.length>0?{type:\"filter\",expr:t.join(\" && \")}:null},t}(e(\"./dataflow\").DataFlowNode);n.NullFilterNode=l},{\"../../channel\":16,\"../../scale\":109,\"../../type\":118,\"../../util\":119,\"./dataflow\":31,tslib:6}],39:[function(e,t,n){\"use strict\";function i(e){function t(i){if(!(i instanceof d.FacetNode)){var r=i.clone();if(r instanceof f.OutputNode){var a=n.FACET_SCALE_PREFIX+r.getSource();r.setSource(a),e.model.component.data.outputNodes[a]=r}else(r instanceof c.AggregateNode||r instanceof h.StackNode)&&r.addDimensions(e.fields);return u.flatten(i.children.map(t)).forEach(function(e){return e.parent=r}),[r]}return u.flatten(i.children.map(t))}return t}function r(e){if(e instanceof d.FacetNode)if(1!==e.numChildren()||e.children[0]instanceof f.OutputNode)a(e.model.component.data.main),u.flatten(e.children.map(i(e))).forEach(function(t){return t.parent=e.model.component.data.main});else{var t=e.children[0];(t instanceof c.AggregateNode||t instanceof h.StackNode)&&t.addDimensions(e.fields),t.swapWithParent(),r(e)}else e.children.forEach(r)}function a(e){if(e instanceof f.OutputNode&&e.type===l.MAIN&&1===e.numChildren()){var t=e.children[0];t instanceof d.FacetNode||(t.swapWithParent(),a(e))}}function o(e){e instanceof p.NonPositiveFilterNode&&u.every(u.vals(e.filter),function(e){return!1===e})&&e.remove(),e instanceof m.NullFilterNode&&u.every(u.vals(e.filteredFields),function(e){return null===e})&&e.remove(),e instanceof f.OutputNode&&!e.isRequired()&&e.remove(),e.children.forEach(o)}function s(e){function t(e){0===e.numChildren()?n.push(e):e.children.forEach(t)}var n=[];return e.forEach(t),n}Object.defineProperty(n,\"__esModule\",{value:!0});var l=e(\"../../data\"),u=e(\"../../util\"),c=e(\"./aggregate\"),f=e(\"./dataflow\"),d=e(\"./facet\"),p=e(\"./nonpositivefilter\"),m=e(\"./nullfilter\"),g=e(\"./optimizers\"),h=e(\"./stack\");n.FACET_SCALE_PREFIX=\"scale_\",n.optimizeDataflow=function(e){var t=u.vals(e.sources);t.forEach(o),s(t=t.filter(function(e){return e.numChildren()>0})).forEach(g.iterateFromLeaves(g.removeUnusedSubtrees)),s(t=t.filter(function(e){return e.numChildren()>0})).forEach(g.iterateFromLeaves(g.moveParseUp)),s(t).forEach(g.removeDuplicateTimeUnits),t.forEach(r),u.keys(e.sources).forEach(function(t){0===e.sources[t].numChildren()&&delete e.sources[t]})}},{\"../../data\":97,\"../../util\":119,\"./aggregate\":27,\"./dataflow\":31,\"./facet\":32,\"./nonpositivefilter\":37,\"./nullfilter\":38,\"./optimizers\":40,\"./stack\":43}],40:[function(e,t,n){\"use strict\";function i(e){function t(n){if(!(n instanceof l.SourceNode)){var i=n.parent;e(n)&&t(i)}}return t}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"../../util\"),o=e(\"./dataflow\"),s=e(\"./formatparse\"),l=e(\"./source\"),u=e(\"./timeunit\");n.iterateFromLeaves=i,n.moveParseUp=function(e){var t=e.parent;if(e instanceof s.ParseNode){if(t instanceof l.SourceNode)return!1;if(t.numChildren()>1)return!0;if(t instanceof s.ParseNode)t.merge(e);else{if(a.hasIntersection(t.producedFields(),e.dependentFields()))return!0;e.swapWithParent()}}return!0},n.removeUnusedSubtrees=function(e){return!(e instanceof o.OutputNode||e.numChildren()>0||(e.remove(),0))},n.removeDuplicateTimeUnits=function(e){var t={};return i(function(e){if(e instanceof u.TimeUnitNode){var n=e.producedFields();a.keys(n).every(function(e){return!!t[e]})?e.remove():t=r.__assign({},t,n)}return!0})(e)}},{\"../../util\":119,\"./dataflow\":31,\"./formatparse\":34,\"./source\":42,\"./timeunit\":44,tslib:6}],41:[function(e,t,n){\"use strict\";function i(e,t){if(e.data||!e.parent){var n=new w.SourceNode(e.data),i=n.hash();return i in t?t[i]:(t[i]=n,n)}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function r(e){function t(e){r?e.parent?i.insertAsParentOf(e):e.parent=i:r=e.parent||e,i=e}var n,i,r=null,a=0;return e.transforms.forEach(function(i){if(f.isCalculate(i))n=new v.CalculateNode(i);else if(f.isFilter(i)){var r={},s=i.filter,p=null;u.isEqualFilter(s)?p=s.equal:u.isRangeFilter(s)?p=s.range[0]:u.isOneOfFilter(s)&&(p=(s.oneOf||s.in)[0]),p&&(l.isDateTime(p)?r[s.field]=\"date\":o.isNumber(p)?r[s.field]=\"number\":o.isString(p)&&(r[s.field]=\"string\")),d.keys(r).length>0&&t(new S.ParseNode(r)),n=new _.FilterNode(e,i.filter)}else if(f.isBin(i))n=h.BinNode.makeFromTransform(i,{model:e});else if(f.isTimeUnit(i))n=k.TimeUnitNode.makeFromTransform(i);else if(f.isSummarize(i))n=g.AggregateNode.makeFromTransform(i),m.requiresSelectionId(e)&&(t(n),n=new x.IdentifierNode);else{if(!f.isLookup(i))return void c.warn(c.message.invalidTransformIgnored(i));n=E.LookupNode.make(e,i,a++)}t(n)}),{first:r,last:n}}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"vega-util\"),s=e(\"../../data\"),l=e(\"../../datetime\"),u=e(\"../../filter\"),c=e(\"../../log\"),f=e(\"../../transform\"),d=e(\"../../util\"),p=e(\"../model\"),m=e(\"../selection/selection\"),g=e(\"./aggregate\"),h=e(\"./bin\"),v=e(\"./calculate\"),y=e(\"./dataflow\"),b=e(\"./facet\"),_=e(\"./filter\"),S=e(\"./formatparse\"),x=e(\"./indentifier\"),E=e(\"./lookup\"),O=e(\"./nonpositivefilter\"),N=e(\"./nullfilter\"),w=e(\"./source\"),T=e(\"./stack\"),k=e(\"./timeunit\");n.parseTransformArray=r,n.parseData=function(e){var t=i(e,e.component.data.sources),n=e.component.data.outputNodes,o=e.component.data.outputNodeRefCounts,l=t;m.requiresSelectionId(e)&&!e.parent&&((M=new x.IdentifierNode).parent=l,l=M);var u=e.parent&&p.isLayerModel(e.parent);if((p.isUnitModel(e)||p.isFacetModel(e))&&u&&(E=h.BinNode.makeBinFromEncoding(e))&&(E.parent=l,l=E),e.transforms.length>0){var c=r(e),f=c.first,d=c.last;f.parent=l,l=d}var v=S.ParseNode.make(e);if(v&&(v.parent=l,l=v),p.isUnitModel(e)||p.isFacetModel(e)){var _=N.NullFilterNode.make(e);if(_&&(_.parent=l,l=_),!u){var E=h.BinNode.makeBinFromEncoding(e);E&&(E.parent=l,l=E)}var w=k.TimeUnitNode.makeFromEncoding(e);w&&(w.parent=l,l=w)}var D=e.getName(s.RAW),C=new y.OutputNode(D,s.RAW,o);if(n[D]=C,C.parent=l,l=C,p.isUnitModel(e)){var A=g.AggregateNode.makeFromEncoding(e);if(A&&(A.parent=l,l=A,m.requiresSelectionId(e))){var M=new x.IdentifierNode;M.parent=l,l=M}var P=T.StackNode.make(e);P&&(P.parent=l,l=P);var R=O.NonPositiveFilterNode.make(e);R&&(R.parent=l,l=R)}var I=e.getName(s.MAIN),L=new y.OutputNode(I,s.MAIN,o);n[I]=L,L.parent=l,l=L;var F=null;if(p.isFacetModel(e)){var U=e.getName(\"facet\");F=new b.FacetNode(e,U,L.getSource()),n[U]=F,F.parent=l,l=F}var j=a.__assign({},e.component.data.ancestorParse,v?v.parse:{});return a.__assign({},e.component.data,{outputNodes:n,outputNodeRefCounts:o,raw:C,main:L,facetRoot:F,ancestorParse:j})}},{\"../../data\":97,\"../../datetime\":98,\"../../filter\":102,\"../../log\":106,\"../../transform\":117,\"../../util\":119,\"../model\":67,\"../selection/selection\":80,\"./aggregate\":27,\"./bin\":29,\"./calculate\":30,\"./dataflow\":31,\"./facet\":32,\"./filter\":33,\"./formatparse\":34,\"./indentifier\":35,\"./lookup\":36,\"./nonpositivefilter\":37,\"./nullfilter\":38,\"./source\":42,\"./stack\":43,\"./timeunit\":44,tslib:6,\"vega-util\":11}],42:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../data\"),a=e(\"../../util\"),o=0,s=function(e){function t(t){var n=e.call(this)||this;if(n._id=o++,t=t||{name:\"source\"},r.isInlineData(t))n._data={values:t.values};else if(r.isUrlData(t)){if(n._data={url:t.url},t.format||(t.format={}),!t.format||!t.format.type){var s=/(?:\\.([^.]+))?$/.exec(t.url)[1];a.contains([\"json\",\"csv\",\"tsv\",\"topojson\"],s)||(s=\"json\"),t.format.type=s}}else r.isNamedData(t)&&(n._name=t.name,n._data={});if(!r.isNamedData(t)){var l=i.__assign({type:\"json\"},t.format||{}),u=(l.parse,i.__rest(l,[\"parse\"]));n._data.format=u}return n}return i.__extends(t,e),Object.defineProperty(t.prototype,\"data\",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.hasName=function(){return!!this._name},Object.defineProperty(t.prototype,\"dataName\",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"parent\",{set:function(e){throw new Error(\"Source nodes have to be roots.\")},enumerable:!0,configurable:!0}),t.prototype.remove=function(){throw new Error(\"Source nodes are roots and cannot be removed.\")},t.prototype.hash=function(){return r.isInlineData(this._data)?this._data.values.length>1e3?a.hash([this._data.format,this._id]):a.hash(this._data):r.isUrlData(this._data)?a.hash([this._data.url,this._data.format]):this._name},t.prototype.assemble=function(){return i.__assign({name:this._name},this._data,{transform:[]})},t}(e(\"./dataflow\").DataFlowNode);n.SourceNode=s},{\"../../data\":97,\"../../util\":119,\"./dataflow\":31,tslib:6}],43:[function(e,t,n){\"use strict\";function i(e){return e.stack.stackBy.reduce(function(e,t){var n=t.fieldDef,i=o.field(n);return i&&e.push(i),e},[])}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"vega-util\"),o=e(\"../../fielddef\"),s=e(\"../../util\"),l=e(\"../common\"),u=function(e){function t(t){var n=e.call(this)||this;return n._stack=t,n}return r.__extends(t,e),t.prototype.clone=function(){return new t(s.duplicate(this._stack))},t.make=function(e){var n=e.stack;if(!n)return null;var r;n.groupbyChannel&&(r=e.fieldDef(n.groupbyChannel));var a,o=i(e),s=e.encoding.order;return a=s?l.sortParams(s):o.reduce(function(e,t){return e.field.push(t),e.order.push(\"descending\"),e},{field:[],order:[]}),new t({dimensionFieldDef:r,field:e.field(n.fieldChannel),facetby:[],stackby:o,sort:a,offset:n.offset,impute:n.impute})},Object.defineProperty(t.prototype,\"stack\",{get:function(){return this._stack},enumerable:!0,configurable:!0}),t.prototype.addDimensions=function(e){this._stack.facetby=this._stack.facetby.concat(e)},t.prototype.dependentFields=function(){var e={};e[this._stack.field]=!0,this.getGroupbyFields().forEach(function(t){return e[t]=!0}),this._stack.facetby.forEach(function(t){return e[t]=!0});var t=this._stack.sort.field;return a.isArray(t)?t.forEach(function(t){return e[t]=!0}):e[t]=!0,e},t.prototype.producedFields=function(){var e={};return e[this._stack.field+\"_start\"]=!0,e[this._stack.field+\"_end\"]=!0,e},t.prototype.getGroupbyFields=function(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute;return t?t.bin?n?[o.field(t,{binSuffix:\"mid\"})]:[o.field(t,{}),o.field(t,{binSuffix:\"end\"})]:[o.field(t)]:[]},t.prototype.assemble=function(){var e=[],t=this._stack,n=t.facetby,i=t.field,r=t.dimensionFieldDef,a=t.impute,s=t.offset,l=t.sort,u=t.stackby;if(a&&r){var c=r?o.field(r,{binSuffix:\"mid\"}):void 0;r.bin&&e.push({type:\"formula\",expr:\"(\"+o.field(r,{expr:\"datum\"})+\"+\"+o.field(r,{expr:\"datum\",binSuffix:\"end\"})+\")/2\",as:c}),e.push({type:\"impute\",field:i,groupby:u,key:c,method:\"value\",value:0})}return e.push({type:\"stack\",groupby:this.getGroupbyFields().concat(n),field:i,sort:l,as:[i+\"_start\",i+\"_end\"],offset:s}),e},t}(e(\"./dataflow\").DataFlowNode);n.StackNode=u},{\"../../fielddef\":101,\"../../util\":119,\"../common\":24,\"./dataflow\":31,tslib:6,\"vega-util\":11}],44:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../fielddef\"),a=e(\"../../timeunit\"),o=e(\"../../util\"),s=function(e){function t(t){var n=e.call(this)||this;return n.formula=t,n}return i.__extends(t,e),t.prototype.clone=function(){return new t(o.duplicate(this.formula))},t.makeFromEncoding=function(e){var n=e.reduceFieldDef(function(e,t){if(t.timeUnit){var n=r.field(t);e[n]={as:n,timeUnit:t.timeUnit,field:t.field}}return e},{});return 0===o.keys(n).length?null:new t(n)},t.makeFromTransform=function(e){return new t((n={},n[e.field]={as:e.as,timeUnit:e.timeUnit,field:e.field},n));var n},t.prototype.merge=function(e){this.formula=i.__assign({},this.formula,e.formula),e.remove()},t.prototype.producedFields=function(){var e={};return o.vals(this.formula).forEach(function(t){e[t.as]=!0}),e},t.prototype.dependentFields=function(){var e={};return o.vals(this.formula).forEach(function(t){e[t.field]=!0}),e},t.prototype.assemble=function(){return o.vals(this.formula).map(function(e){return{type:\"formula\",as:e.as,expr:a.fieldExpr(e.timeUnit,e.field)}})},t}(e(\"./dataflow\").DataFlowNode);n.TimeUnitNode=s},{\"../../fielddef\":101,\"../../timeunit\":114,\"../../util\":119,\"./dataflow\":31,tslib:6}],45:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../channel\"),a=e(\"../encoding\"),o=e(\"../fielddef\"),s=e(\"../log\"),l=e(\"../scale\"),u=e(\"../util\"),c=e(\"../vega.schema\"),f=e(\"./buildmodel\"),d=e(\"./data/assemble\"),p=e(\"./data/parse\"),m=e(\"./layout/header\"),g=e(\"./layoutsize/parse\"),h=e(\"./model\"),v=e(\"./repeater\"),y=e(\"./resolve\"),b=e(\"./scale/domain\"),_=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n,i,a,t.resolve)||this;o.type=\"facet\",o.child=f.buildModel(t.spec,o,o.getName(\"child\"),void 0,r,a,!1),o.children=[o.child];var s=v.replaceRepeaterInFacet(t.facet,r);return o.facet=o.initFacet(s),o}return i.__extends(t,e),t.prototype.initFacet=function(e){return a.reduce(e,function(e,t,n){return u.contains([r.ROW,r.COLUMN],n)?void 0===t.field?(s.warn(s.message.emptyFieldDef(t,n)),e):(e[n]=o.normalize(t,n),e):(s.warn(s.message.incompatibleChannel(n,\"facet\")),e)},{})},t.prototype.channelHasField=function(e){return!!this.facet[e]},t.prototype.fieldDef=function(e){return this.facet[e]},t.prototype.parseData=function(){this.component.data=p.parseData(this),this.child.parseData()},t.prototype.parseLayoutSize=function(){g.parseChildrenLayoutSize(this)},t.prototype.parseSelection=function(){this.child.parseSelection(),this.component.selection=this.child.component.selection},t.prototype.parseMarkGroup=function(){this.child.parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){this.child.parseAxisAndHeader(),this.parseHeader(\"column\"),this.parseHeader(\"row\"),this.mergeChildAxis(\"x\"),this.mergeChildAxis(\"y\")},t.prototype.parseHeader=function(e){if(this.channelHasField(e)){var t=this.facet[e],n=t.header||{},i=void 0!==n.title?n.title:o.title(t,this.config);this.child.component.layoutHeaders[e].title&&(i+=\" / \"+this.child.component.layoutHeaders[e].title,this.child.component.layoutHeaders[e].title=null),this.component.layoutHeaders[e]={title:i,facetFieldDef:t,header:[this.makeHeaderComponent(e,!0)]}}},t.prototype.makeHeaderComponent=function(e,t){var n=\"row\"===e?\"height\":\"width\";return{labels:t,sizeSignal:this.child.component.layoutSize.get(n)?this.child.getSizeSignalRef(n):void 0,axes:[]}},t.prototype.mergeChildAxis=function(e){var t=this.child;if(t.component.axes[e]){var n=this.component,i=n.layoutHeaders,r=n.resolve;if(r.axis[e]=y.parseGuideResolve(r,e),\"shared\"===r.axis[e])for(var a=\"x\"===e?\"column\":\"row\",o=i[a],s=0,l=t.component.axes[e];s<l.length;s++){var u=l[s],c=u.main,f=m.getHeaderType(c.get(\"orient\"));o[f]=o[f]||[this.makeHeaderComponent(a,!1)],o[f][0].axes.push(c.combine()),delete u.main}}},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.child.assembleSelectionTopLevelSignals(e)},t.prototype.assembleSelectionSignals=function(){return this.child.assembleSelectionSignals(),[]},t.prototype.assembleSelectionData=function(e){return this.child.assembleSelectionData(e)},t.prototype.getLayoutBandMixins=function(e){for(var t={},n=\"header\"===e?\"headerBand\":\"footerBand\",i=0,r=[\"row\",\"column\"];i<r.length;i++){var a=r[i],o=this.component.layoutHeaders[a][e];if(o&&o[0]){var s=\"row\"===a?\"height\":\"width\";this.child.component.layoutSize.get(s)||(t[n]=t[n]||{},t[n][a]=.5)}}return t},t.prototype.assembleLayout=function(){var e=this.channelHasField(\"column\")?this.columnDistinctSignal():1;return i.__assign({padding:{row:10,column:10}},this.getLayoutBandMixins(\"header\"),this.getLayoutBandMixins(\"footer\"),{offset:10,columns:e,bounds:\"full\",align:\"all\"})},t.prototype.assembleLayoutSignals=function(){return this.child.assembleLayoutSignals()},t.prototype.columnDistinctSignal=function(){return this.parent&&this.parent instanceof t?void 0:{signal:\"length(data('\"+this.getName(\"column_domain\")+\"'))\"}},t.prototype.assembleGroup=function(n){return this.parent&&this.parent instanceof t?i.__assign({},this.channelHasField(\"column\")?{encode:{update:{columns:{field:o.field(this.facet.column,{prefix:\"distinct\"})}}}}:{},e.prototype.assembleGroup.call(this,n)):e.prototype.assembleGroup.call(this,n)},t.prototype.getCardinalityAggregateForChild=function(){var e=[],n=[];if(this.child instanceof t)this.child.channelHasField(\"column\")&&(e.push(o.field(this.child.facet.column)),n.push(\"distinct\"));else for(var i=0,r=[\"x\",\"y\"];i<r.length;i++){var a=r[i],u=this.child.component.scales[a];if(u&&!u.merged){var f=u.get(\"type\"),d=u.get(\"range\");if(l.hasDiscreteDomain(f)&&c.isVgRangeStep(d)){var p=b.assembleDomain(this.child,a),m=b.getFieldFromDomain(p);m?(e.push(m),n.push(\"distinct\")):s.warn(\"Unknown field for ${channel}.  Cannot calculate view size.\")}}}return e.length?{fields:e,ops:n}:void 0},t.prototype.assembleMarks=function(){var e=this,t=e.child,n=e.facet,a=this.component.data.facetRoot,o=d.assembleFacetData(a),s=this.channelHasField(r.ROW),l=this.channelHasField(r.COLUMN),u=t.assembleLayoutSize(),c={};s&&l&&(c.aggregate={cross:!0});var f=this.getCardinalityAggregateForChild();f&&(c.aggregate=i.__assign({},c.aggregate,f));var p=t.assembleTitle(),m=t.assembleGroupStyle();return[i.__assign({name:this.getName(\"cell\"),type:\"group\"},p?{title:p}:{},m?{style:m}:{},{from:{facet:i.__assign({name:a.name,data:a.data,groupby:[].concat(s?[this.field(r.ROW)]:[],l?[this.field(r.COLUMN)]:[])},c)},sort:{field:[].concat(s?[this.field(r.ROW,{expr:\"datum\"})]:[],l?[this.field(r.COLUMN,{expr:\"datum\"})]:[]),order:[].concat(s?[n.row.sort||\"ascending\"]:[],l?[n.column.sort||\"ascending\"]:[])}},o.length>0?{data:o}:{},u?{encode:{update:u}}:{},t.assembleGroup())]},t.prototype.getMapping=function(){return this.facet},t}(h.ModelWithField);n.FacetModel=_},{\"../channel\":16,\"../encoding\":99,\"../fielddef\":101,\"../log\":106,\"../scale\":109,\"../util\":119,\"../vega.schema\":121,\"./buildmodel\":23,\"./data/assemble\":28,\"./data/parse\":41,\"./layout/header\":47,\"./layoutsize/parse\":49,\"./model\":67,\"./repeater\":69,\"./resolve\":70,\"./scale/domain\":73,tslib:6}],46:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../log\"),a=e(\"../spec\"),o=e(\"../util\"),s=e(\"./axis/parse\"),l=e(\"./data/parse\"),u=e(\"./layoutsize/assemble\"),c=e(\"./layoutsize/parse\"),f=e(\"./legend/assemble\"),d=e(\"./model\"),p=e(\"./selection/selection\"),m=e(\"./unit\"),g=function(e){function t(n,o,s,l,u,c,f){var d=e.call(this,n,o,s,c,n.resolve)||this;d.type=\"layer\";var p=i.__assign({},l,n.width?{width:n.width}:{},n.height?{height:n.height}:{});return d.initSize(p),d.children=n.layer.map(function(e,n){if(a.isLayerSpec(e))return new t(e,d,d.getName(\"layer_\"+n),p,u,c,f);if(a.isUnitSpec(e))return new m.UnitModel(e,d,d.getName(\"layer_\"+n),p,u,c,f);throw new Error(r.message.INVALID_SPEC)}),d}return i.__extends(t,e),t.prototype.parseData=function(){this.component.data=l.parseData(this);for(var e=0,t=this.children;e<t.length;e++)t[e].parseData()},t.prototype.parseLayoutSize=function(){c.parseLayerLayoutSize(this)},t.prototype.parseSelection=function(){var e=this;this.component.selection={};for(var t=0,n=this.children;t<n.length;t++)!function(t){t.parseSelection(),o.keys(t.component.selection).forEach(function(n){e.component.selection[n]=t.component.selection[n]})}(n[t])},t.prototype.parseMarkGroup=function(){for(var e=0,t=this.children;e<t.length;e++)t[e].parseMarkGroup()},t.prototype.parseAxisAndHeader=function(){s.parseLayerAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionTopLevelSignals(e)},e)},t.prototype.assembleSelectionSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleSelectionSignals())},[])},t.prototype.assembleLayoutSignals=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLayoutSignals())},u.assembleLayoutSignals(this))},t.prototype.assembleSelectionData=function(e){return this.children.reduce(function(e,t){return t.assembleSelectionData(e)},[])},t.prototype.assembleTitle=function(){var t=e.prototype.assembleTitle.call(this);if(t)return t;for(var n=0,i=this.children;n<i.length;n++)if(t=i[n].assembleTitle())return t},t.prototype.assembleLayout=function(){return null},t.prototype.assembleMarks=function(){return p.assembleLayerSelectionMarks(this,o.flatten(this.children.map(function(e){return e.assembleMarks()})))},t.prototype.assembleLegends=function(){return this.children.reduce(function(e,t){return e.concat(t.assembleLegends())},f.assembleLegends(this))},t}(d.Model);n.LayerModel=g},{\"../log\":106,\"../spec\":112,\"../util\":119,\"./axis/parse\":20,\"./data/parse\":41,\"./layoutsize/assemble\":48,\"./layoutsize/parse\":49,\"./legend/assemble\":50,\"./model\":67,\"./selection/selection\":80,\"./unit\":91,tslib:6}],47:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../fielddef\"),a=e(\"../common\");n.HEADER_CHANNELS=[\"row\",\"column\"],n.HEADER_TYPES=[\"header\",\"footer\"],n.getHeaderType=function(e){return\"top\"===e||\"left\"===e?\"header\":\"footer\"},n.getTitleGroup=function(e,t){var n=e.component.layoutHeaders[t].title,r=\"row\"===t?\"vertical\":void 0;return{name:e.getName(t+\"_title\"),role:t+\"-title\",type:\"group\",marks:[{type:\"text\",role:t+\"-title-text\",style:\"guide-title\",encode:{update:i.__assign({align:{value:\"center\"},text:{value:n}},\"vertical\"===r?{angle:{value:270}}:{})}}]}},n.getHeaderGroup=function(e,t,n,o,s){if(s){var l=null;if(o.facetFieldDef&&s.labels){var u=o.facetFieldDef,c=u.header?u.header.format:void 0;l={text:a.formatSignalRef(u,c,\"parent\",e.config),offset:10,orient:\"row\"===t?\"left\":\"top\",style:\"guide-label\",encode:{update:i.__assign({fontWeight:{value:\"normal\"},angle:{value:0},fontSize:{value:10}},\"row\"===t?{align:{value:\"right\"},baseline:{value:\"middle\"}}:{})}}}var f=s.axes,d=f&&f.length>0;if(l||d){var p=\"row\"===t?\"height\":\"width\";return i.__assign({name:e.getName(t+\"_\"+n),type:\"group\",role:t+\"-\"+n},o.facetFieldDef?{from:{data:e.getName(t+\"_domain\")},sort:{field:r.field(o.facetFieldDef,{expr:\"datum\"}),order:o.facetFieldDef.header&&o.facetFieldDef.sort||\"ascending\"}}:{},l?{title:l}:{},s.sizeSignal?{encode:{update:(m={},m[p]=s.sizeSignal,m)}}:{},d?{axes:f}:{})}}return null;var m}},{\"../../fielddef\":101,\"../common\":24,tslib:6}],48:[function(e,t,n){\"use strict\";function i(e,t){var n=\"width\"===t?\"x\":\"y\",i=e.component.layoutSize.get(t);if(!i||\"merged\"===i)return[];var u=e.getSizeSignalRef(t).signal;if(\"range-step\"===i){var c=e.getScaleComponent(n);if(c){var f=c.get(\"type\"),d=c.get(\"range\");if(o.hasDiscreteDomain(f)&&s.isVgRangeStep(d)){var p=e.scaleName(n);return l.isFacetModel(e.parent)&&\"independent\"===e.parent.component.resolve.scale[n]?[r(p,d)]:[r(p,d),{name:u,update:a(p,c,\"domain('\"+p+\"').length\")}]}}throw new Error(\"layout size is range step although there is no rangeStep.\")}return[{name:u,value:i}]}function r(e,t){return{name:e+\"_step\",value:t.step}}function a(e,t,n){var i=t.get(\"type\"),r=t.get(\"padding\"),a=t.get(\"paddingOuter\");a=void 0!==a?a:r;var o=t.get(\"paddingInner\");return o=\"band\"===i?void 0!==o?o:r:1,\"bandspace(\"+n+\", \"+o+\", \"+a+\") * \"+e+\"_step\"}Object.defineProperty(n,\"__esModule\",{value:!0});var o=e(\"../../scale\"),s=e(\"../../vega.schema\"),l=e(\"../model\");n.assembleLayoutSignals=function(e){return[].concat(i(e,\"width\"),i(e,\"height\"))},n.sizeSignals=i,n.sizeExpr=a},{\"../../scale\":109,\"../../vega.schema\":121,\"../model\":67}],49:[function(e,t,n){\"use strict\";function i(e){r(e);var t=e.component.layoutSize;t.setWithExplicit(\"width\",a(e,\"width\")),t.setWithExplicit(\"height\",a(e,\"height\"))}function r(e){for(var t=0,n=e.children;t<n.length;t++)n[t].parseLayoutSize()}function a(e,t){for(var n,i=\"width\"===t?\"x\":\"y\",r=e.component.resolve,a=0,o=e.children;a<o.length;a++){var s=(d=o[a]).component.layoutSize.getWithExplicit(t),l=r.scale[i];if(\"independent\"===l&&\"range-step\"===s.value){n=void 0;break}if(n){if(\"independent\"===l&&n.value!==s.value){n=void 0;break}n=u.mergeValuesWithExplicit(n,s,t,\"\",u.defaultTieBreaker)}else n=s}if(n){for(var c=0,f=e.children;c<f.length;c++){var d=f[c];e.renameLayoutSize(d.getName(t),e.getName(t)),d.component.layoutSize.set(t,\"merged\",!1)}return n}return{explicit:!1,value:void 0}}function o(e,t){var n=\"width\"===t?\"x\":\"y\",i=e.config,r=e.getScaleComponent(n);if(r){var a=r.get(\"type\"),o=r.get(\"range\");return s.hasDiscreteDomain(a)&&l.isVgRangeStep(o)?\"range-step\":i.view[t]}return\"width\"===t&&\"text\"===e.mark()?i.scale.textXRangeStep:i.scale.rangeStep||s.defaultScaleConfig.rangeStep}Object.defineProperty(n,\"__esModule\",{value:!0});var s=e(\"../../scale\"),l=e(\"../../vega.schema\"),u=e(\"../split\");n.parseLayerLayoutSize=i,n.parseRepeatLayoutSize=i,n.parseConcatLayoutSize=function(e){r(e);var t=e.component.layoutSize,n=e.isVConcat?\"width\":\"height\";t.setWithExplicit(n,a(e,n))},n.parseChildrenLayoutSize=r,n.parseUnitLayoutSize=function(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=o(e,\"width\");t.set(\"width\",n,!1)}if(!t.explicit.height){var i=o(e,\"height\");t.set(\"height\",i,!1)}}},{\"../../scale\":109,\"../../vega.schema\":121,\"../split\":90}],50:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"json-stable-stringify\"),r=e(\"../../util\"),a=e(\"./parse\");n.assembleLegends=function(e){var t=e.component.legends,n={};return r.keys(t).forEach(function(r){var o=e.getScaleComponent(r),s=i(o.domains);if(n[s])for(var l=0,u=n[s];l<u.length;l++){var c=u[l];a.mergeLegendComponent(c,t[r])||n[s].push(t[r])}else n[s]=[t[r].clone()]}),r.flatten(r.vals(n)).map(function(e){return e.combine()})}},{\"../../util\":119,\"./parse\":53,\"json-stable-stringify\":1}],51:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t}(e(\"../split\").Split);n.LegendComponent=r},{\"../split\":90,tslib:6}],52:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../../channel\"),a=e(\"../../fielddef\"),o=e(\"../../mark\"),s=e(\"../../scale\"),l=e(\"../../util\"),u=e(\"../common\"),c=e(\"../mark/mixins\");n.symbols=function(e,t,n,s,f){if(\"gradient\"!==f.get(\"type\")){var d={},p=n.mark();switch(p){case o.BAR:case o.TICK:case o.TEXT:d.shape={value:\"square\"};break;case o.CIRCLE:case o.SQUARE:d.shape={value:p};break;case o.POINT:case o.LINE:case o.AREA:}var m=n.markDef.filled,g=s===r.COLOR?l.without(o.FILL_STROKE_CONFIG,[m?\"fill\":\"stroke\",\"strokeDash\",\"strokeDashOffset\"]):o.FILL_STROKE_CONFIG;if(g=l.without(g,[\"strokeDash\",\"strokeDashOffset\"]),u.applyMarkConfig(d,n,g),s!==r.COLOR){var h=c.color(n);h.fill&&(h.fill.field||\"transparent\"===h.fill.value)&&delete h.fill,h.stroke&&(h.stroke.field||\"transparent\"===h.stroke.value)&&delete h.stroke,d=i.__assign({},d,h)}if(s!==r.SHAPE){var v=n.encoding.shape;a.isValueDef(v)&&(d.shape={value:v.value})}if(s!==r.OPACITY){var y=n.encoding.opacity;a.isValueDef(y)&&(d.opacity={value:y.value})}return d=i.__assign({},d,t),l.keys(d).length>0?d:void 0}},n.gradient=function(e,t,n,r,o){var s={};if(\"gradient\"===o.get(\"type\")){var u=n.encoding.opacity;a.isValueDef(u)&&(s.opacity={value:u.value})}return s=i.__assign({},s,t),l.keys(s).length>0?s:void 0},n.labels=function(e,t,n,r,o){var c=n.legend(r),f=n.config,d={};if(a.isTimeFieldDef(e)){var p=n.getScaleComponent(r).get(\"type\")===s.ScaleType.UTC;t=i.__assign({text:{signal:u.timeFormatExpression(\"datum.value\",e.timeUnit,c.format,f.legend.shortTimeLabels,f.timeFormat,p)}},t)}return d=i.__assign({},d,t),l.keys(d).length>0?d:void 0}},{\"../../channel\":16,\"../../fielddef\":101,\"../../mark\":108,\"../../scale\":109,\"../../util\":119,\"../common\":24,\"../mark/mixins\":60,tslib:6}],53:[function(e,t,n){\"use strict\";function i(e){g.isUnitModel(e)?e.component.legends=r(e):e.component.legends=l(e)}function r(e){return[c.COLOR,c.SIZE,c.SHAPE,c.OPACITY].reduce(function(t,n){return e.legend(n)&&(t[n]=o(e,n)),t},{})}function a(e,t){switch(t){case c.COLOR:var n=e.scaleName(c.COLOR);return e.markDef.filled?{fill:n}:{stroke:n};case c.SIZE:return{size:e.scaleName(c.SIZE)};case c.SHAPE:return{shape:e.scaleName(c.SHAPE)};case c.OPACITY:return{opacity:e.scaleName(c.OPACITY)}}return null}function o(e,t){var n=e.fieldDef(t),i=e.legend(t),r=new b.LegendComponent({},a(e,t));d.LEGEND_PROPERTIES.forEach(function(n){var a=s(n,i,t,e);if(void 0!==a){var o=\"values\"===n?!!i.values:a===i[n];r.set(n,a,o)}});var o=i.encoding||{},l=[\"labels\",\"legend\",\"title\",\"symbols\",\"gradient\"].reduce(function(i,a){var s=_[a]?_[a](n,o[a],e,t,r):o[a];return void 0!==s&&p.keys(s).length>0&&(i[a]={update:s}),i},{});return p.keys(l).length>0&&r.set(\"encode\",l,!!i.encoding),r}function s(e,t,n,i){var r=i.fieldDef(n);switch(e){case\"format\":return m.numberFormat(r,t.format,i.config);case\"title\":return m.getSpecifiedOrDefaultValue(t.title,f.title(r,i.config));case\"values\":return S.values(t);case\"type\":return m.getSpecifiedOrDefaultValue(t.type,S.type(r.type,n,i.getScaleComponent(n).get(\"type\")))}return t[e]}function l(e){for(var t=e.component,n=t.legends,r=t.resolve,a=0,o=e.children;a<o.length;a++)!function(t){i(t),p.keys(t.component.legends).forEach(function(i){r.legend[i]=h.parseGuideResolve(e.component.resolve,i),\"shared\"===r.legend[i]&&(n[i]=u(n[i],t.component.legends[i]),n[i]||(r.legend[i]=\"independent\",delete n[i]))})}(o[a]);return p.keys(n).forEach(function(t){for(var n=0,i=e.children;n<i.length;n++){var a=i[n];a.component.legends[t]&&(\"shared\"===r.legend[t]&&delete a.component.legends[t])}}),n}function u(e,t){if(!e)return t.clone();var n=e.getWithExplicit(\"orient\"),i=t.getWithExplicit(\"orient\");if(!n.explicit||!i.explicit||n.value===i.value){for(var r=!1,a=0,o=d.VG_LEGEND_PROPERTIES;a<o.length;a++)!function(n){var i=y.mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,\"legend\",function(e,t){switch(n){case\"title\":return m.titleMerger(e,t);case\"type\":return r=!0,v.makeImplicit(\"symbol\")}return y.defaultTieBreaker(e,t,n,\"legend\")});e.setWithExplicit(n,i)}(o[a]);return r&&(((e.implicit||{}).encode||{}).gradient&&p.deleteNestedProperty(e.implicit,[\"encode\",\"gradient\"]),((e.explicit||{}).encode||{}).gradient&&p.deleteNestedProperty(e.explicit,[\"encode\",\"gradient\"])),e}}Object.defineProperty(n,\"__esModule\",{value:!0});var c=e(\"../../channel\"),f=e(\"../../fielddef\"),d=e(\"../../legend\"),p=e(\"../../util\"),m=e(\"../common\"),g=e(\"../model\"),h=e(\"../resolve\"),v=e(\"../split\"),y=e(\"../split\"),b=e(\"./component\"),_=e(\"./encode\"),S=e(\"./properties\");n.parseLegend=i,n.parseLegendForChannel=o,n.mergeLegendComponent=u},{\"../../channel\":16,\"../../fielddef\":101,\"../../legend\":105,\"../../util\":119,\"../common\":24,\"../model\":67,\"../resolve\":70,\"../split\":90,\"./component\":51,\"./encode\":52,\"./properties\":54}],54:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../../channel\"),r=e(\"../../datetime\"),a=e(\"../../scale\"),o=e(\"../../util\");n.values=function(e){var t=e.values;return t&&r.isDateTime(t[0])?t.map(function(e){return{signal:r.dateTimeExpr(e,!0)}}):t},n.type=function(e,t,n){if(t===i.COLOR&&(\"quantitative\"===e&&!a.isBinScale(n)||\"temporal\"===e&&o.contains([\"time\",\"utc\"],n)))return\"gradient\"}},{\"../../channel\":16,\"../../datetime\":98,\"../../scale\":109,\"../../util\":119}],55:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"./mixins\");n.area={vgMark:\"area\",encodeEntry:function(e){return i.__assign({},r.pointPosition(\"x\",e,\"zeroOrMin\"),r.pointPosition(\"y\",e,\"zeroOrMin\"),r.pointPosition2(e,\"zeroOrMin\"),r.color(e),r.text(e,\"tooltip\"),r.nonPosition(\"opacity\",e),r.markDefProperties(e.markDef,[\"orient\",\"interpolate\",\"tension\"]))}}},{\"./mixins\":60,tslib:6}],56:[function(e,t,n){\"use strict\";function i(e,t){var n=e.config,i=e.width,r=e.markDef.orient,s=e.encoding.size,c=e.encoding.x,d=e.scaleName(l.X),g=e.getScaleComponent(l.X);if(\"horizontal\"===r)return o.__assign({},p.pointPosition(\"x\",e,\"zeroOrMin\"),p.pointPosition2(e,\"zeroOrMin\"));if(u.isFieldDef(c)){var h=g.get(\"type\");if(c.bin&&!s&&!f.hasDiscreteDomain(h))return p.binnedPosition(c,\"x\",e.scaleName(\"x\"),n.bar.binSpacing,g.get(\"reverse\"));if(h===f.ScaleType.BAND)return p.bandPosition(c,\"x\",e)}return p.centeredBandPosition(\"x\",e,o.__assign({},m.mid(i)),a(d,g,n))}function r(e,t){var n=e.config,i=e.encoding,r=e.height,s=e.markDef.orient,c=i.size,d=i.y,g=e.scaleName(l.Y),h=e.getScaleComponent(l.Y);if(\"vertical\"===s)return o.__assign({},p.pointPosition(\"y\",e,\"zeroOrMin\"),p.pointPosition2(e,\"zeroOrMin\"));if(u.isFieldDef(d)){var v=h.get(\"type\");if(d.bin&&!c&&!f.hasDiscreteDomain(v))return p.binnedPosition(d,\"y\",e.scaleName(\"y\"),n.bar.binSpacing,h.get(\"reverse\"));if(v===f.ScaleType.BAND)return p.bandPosition(d,\"y\",e)}return p.centeredBandPosition(\"y\",e,m.mid(r),a(g,h,n))}function a(e,t,n){if(n.bar.discreteBandSize)return{value:n.bar.discreteBandSize};if(t){var i=t.get(\"type\");if(i!==f.ScaleType.POINT)return i===f.ScaleType.BAND?m.band(e):{value:n.bar.continuousBandSize};var r=t.get(\"range\");if(d.isVgRangeStep(r)&&s.isNumber(r.step))return{value:r.step-1};c.warn(c.message.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}return n.scale.rangeStep&&null!==n.scale.rangeStep?{value:n.scale.rangeStep-1}:{value:20}}Object.defineProperty(n,\"__esModule\",{value:!0});var o=e(\"tslib\"),s=e(\"vega-util\"),l=e(\"../../channel\"),u=e(\"../../fielddef\"),c=e(\"../../log\"),f=e(\"../../scale\"),d=e(\"../../vega.schema\"),p=e(\"./mixins\"),m=e(\"./valueref\");n.bar={vgMark:\"rect\",encodeEntry:function(e){e.stack;return o.__assign({},i(e),r(e),p.color(e),p.text(e,\"tooltip\"),p.nonPosition(\"opacity\",e))}}},{\"../../channel\":16,\"../../fielddef\":101,\"../../log\":106,\"../../scale\":109,\"../../vega.schema\":121,\"./mixins\":60,\"./valueref\":66,tslib:6,\"vega-util\":11}],57:[function(e,t,n){\"use strict\";function i(e,t,n){if(d.contains([u.POINT,u.TICK,u.CIRCLE,u.SQUARE],e)&&!o.isAggregate(t))return.7}function r(e,t){var n=p.getMarkConfig(\"filled\",e,t),i=e.type;return void 0!==n?n:i!==u.POINT&&i!==u.LINE&&i!==u.RULE}function a(e,t,n,i){switch(e){case u.POINT:case u.CIRCLE:case u.SQUARE:case u.TEXT:case u.RECT:return}var r=t.y&&t.y2,a=t.x&&t.x2;switch(e){case u.TICK:var o=n.x?n.x.get(\"type\"):null,d=n.y?n.y.get(\"type\"):null;return!c.hasDiscreteDomain(o)&&(!t.y||c.hasDiscreteDomain(d)||s.isFieldDef(t.y)&&t.y.bin)?\"vertical\":\"horizontal\";case u.RULE:case u.BAR:case u.AREA:if(r)return\"vertical\";if(a)return\"horizontal\";if(e===u.RULE){if(t.x&&!t.y)return\"vertical\";if(t.y&&!t.x)return\"horizontal\"}case u.LINE:var p=s.isFieldDef(t.x)&&s.isContinuous(t.x),m=s.isFieldDef(t.y)&&s.isContinuous(t.y);if(p&&!m)return\"horizontal\";if(!p&&m)return\"vertical\";if(p&&m){var g=t.x,h=t.y,v=g.type===f.TEMPORAL,y=h.type===f.TEMPORAL;return v&&!y?\"vertical\":!v&&y?\"horizontal\":!g.aggregate&&h.aggregate?\"vertical\":g.aggregate&&!h.aggregate?\"horizontal\":i||(e===u.LINE&&t.order||l.warn(l.message.unclearOrientContinuous(e)),\"vertical\")}return void l.warn(l.message.unclearOrientDiscreteOrEmpty(e))}return\"vertical\"}Object.defineProperty(n,\"__esModule\",{value:!0});var o=e(\"../../encoding\"),s=e(\"../../fielddef\"),l=e(\"../../log\"),u=e(\"../../mark\"),c=e(\"../../scale\"),f=e(\"../../type\"),d=e(\"../../util\"),p=e(\"../common\");n.normalizeMarkDef=function(e,t,n,i){var o=e.orient||p.getMarkConfig(\"orient\",e,i);e.orient=a(e.type,t,n,o),void 0!==o&&o!==e.orient&&l.warn(l.message.orientOverridden(e.orient,o)),void 0===e.filled&&(e.filled=r(e,i))},n.initEncoding=function(e,t,n,r){var a=p.getMarkConfig(\"opacity\",e,r);if(!t.opacity&&void 0===a){var o=i(e.type,t);void 0!==o&&(t.opacity={value:o})}return t}},{\"../../encoding\":99,\"../../fielddef\":101,\"../../log\":106,\"../../mark\":108,\"../../scale\":109,\"../../type\":118,\"../../util\":119,\"../common\":24}],58:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"./mixins\"),a=e(\"./valueref\");n.line={vgMark:\"line\",encodeEntry:function(e){var t=e.width,n=e.height;return i.__assign({},r.pointPosition(\"x\",e,a.mid(t)),r.pointPosition(\"y\",e,a.mid(n)),r.color(e),r.text(e,\"tooltip\"),r.nonPosition(\"opacity\",e),r.nonPosition(\"size\",e,{vgChannel:\"strokeWidth\"}),r.markDefProperties(e.markDef,[\"interpolate\",\"tension\"]))}}},{\"./mixins\":60,\"./valueref\":66,tslib:6}],59:[function(e,t,n){\"use strict\";function i(e){if(b.isUnitModel(e))x.normalizeMarkDef(e.markDef,e.encoding,e.component.scales,e.config);else for(var t=0,n=e.children;t<n.length;t++)i(n[t])}function r(e){var t=e.mark(),n=s(e),i=void 0!==e.markDef.clip?!!e.markDef.clip:l(e),r=y.getStyles(e.markDef),o=a(e),c=[u.__assign({name:e.getName(\"marks\"),type:D[t].vgMark},i?{clip:!0}:{},r?{style:r}:{},o?{sort:o}:{},{from:{data:(n.length>0?C:\"\")+e.requestDataName(d.MAIN)},encode:{update:D[t].encodeEntry(e)}})];return n.length>0?[{name:e.getName(\"pathgroup\"),type:\"group\",from:{facet:{name:C+e.requestDataName(d.MAIN),data:e.requestDataName(d.MAIN),groupby:n}},encode:{update:{width:{field:{group:\"width\"}},height:{field:{group:\"height\"}}}},marks:c}]:c}function a(e){if(\"line\"===e.mark()&&e.channelHasField(\"order\"))return y.sortParams(e.encoding.order,{expr:\"datum\"});var t=\"horizontal\"===e.markDef.orient?\"y\":\"x\",n=e.sort(t),i=h.isSortField(n)?m.field({aggregate:p.isAggregate(e.encoding)?n.op:void 0,field:n.field},{expr:\"datum\"}):e.field(t,{binSuffix:e.stack&&e.stack.impute?\"mid\":void 0,expr:\"datum\"});return i?{field:i,order:\"descending\"}:void 0}function o(e){var t=e.mark(),n=y.getStyles(e.markDef),i=void 0!==e.markDef.clip?!!e.markDef.clip:l(e),r=[];return r.push(u.__assign({name:e.getName(\"marks\"),type:D[t].vgMark},i?{clip:!0}:{},n?{style:n}:{},{from:{data:e.requestDataName(d.MAIN)},encode:{update:D[t].encodeEntry(e)}})),r}function s(e){return f.NONPOSITION_CHANNELS.reduce(function(t,n){var i=e.encoding;if(\"order\"===n)return t;if(\"detail\"===n){var r=i[n];r&&(c.isArray(r)?r:[r]).forEach(function(e){e.aggregate||t.push(m.field(e,{}))})}else{var a=m.getFieldDef(i[n]);a&&!a.aggregate&&t.push(m.field(a,{}))}return t},[])}function l(e){var t=e.getScaleComponent(\"x\"),n=e.getScaleComponent(\"y\");return!!(t&&t.get(\"domainRaw\")||n&&n.get(\"domainRaw\"))}Object.defineProperty(n,\"__esModule\",{value:!0});var u=e(\"tslib\"),c=e(\"vega-util\"),f=e(\"../../channel\"),d=e(\"../../data\"),p=e(\"../../encoding\"),m=e(\"../../fielddef\"),g=e(\"../../mark\"),h=e(\"../../sort\"),v=e(\"../../util\"),y=e(\"../common\"),b=e(\"../model\"),_=e(\"./area\"),S=e(\"./bar\"),x=e(\"./init\"),E=e(\"./line\"),O=e(\"./point\"),N=e(\"./rect\"),w=e(\"./rule\"),T=e(\"./text\"),k=e(\"./tick\"),D={area:_.area,bar:S.bar,line:E.line,point:O.point,text:T.text,tick:k.tick,rect:N.rect,rule:w.rule,circle:O.circle,square:O.square};n.parseMarkDef=i,n.parseMarkGroup=function(e){return v.contains([g.LINE,g.AREA],e.mark())?r(e):o(e)};var C=\"faceted_path_\";n.getPathSort=a},{\"../../channel\":16,\"../../data\":97,\"../../encoding\":99,\"../../fielddef\":101,\"../../mark\":108,\"../../sort\":111,\"../../util\":119,\"../common\":24,\"../model\":67,\"./area\":55,\"./bar\":56,\"./init\":57,\"./line\":58,\"./point\":61,\"./rect\":62,\"./rule\":63,\"./text\":64,\"./tick\":65,tslib:6,\"vega-util\":11}],60:[function(e,t,n){\"use strict\";function i(e,t,n){void 0===n&&(n={});var i=n.defaultValue,a=n.vgChannel,o=n.defaultRef||(void 0!==i?{value:i}:void 0),s=t.encoding[e];return r(t,s,a||e,function(n){return d.midPoint(e,n,t.scaleName(e),t.getScaleComponent(e),null,o)})}function r(e,t,n,i){var r=t&&t.condition,a=i(t);if(r){var s=i(r);return l={},l[n]=[o.__assign({test:f.predicate(e,r.selection)},s)].concat(void 0!==a?[a]:[]),l}return void 0!==a?(u={},u[n]=a,u):{};var l,u}function a(e,t,n,i){var r=t.encoding,a=t.stack,o=d.stackable(e,r[e],t.scaleName(e),t.getScaleComponent(e),a,n);return s={},s[i||e]=o,s;var s}Object.defineProperty(n,\"__esModule\",{value:!0});var o=e(\"tslib\"),s=e(\"../../fielddef\"),l=e(\"../../log\"),u=e(\"../../util\"),c=e(\"../common\"),f=e(\"../selection/selection\"),d=e(\"./valueref\");n.color=function(e){var t=e.config,n=e.markDef.filled?\"fill\":\"stroke\",r=i(\"color\",e,{vgChannel:n,defaultValue:c.getMarkConfig(n,e.markDef,t)||c.getMarkConfig(\"color\",e.markDef,t)});return!r.fill&&u.contains([\"bar\",\"point\",\"circle\",\"square\"],e.mark())&&(r.fill={value:\"transparent\"}),r},n.markDefProperties=function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]={value:e[n]}),t},{})},n.valueIfDefined=function(e,t){if(void 0!==t)return n={},n[e]={value:t},n;return;var n},n.nonPosition=i,n.text=function(e,t){void 0===t&&(t=\"text\");var n=e.encoding[t];return r(e,n,t,function(t){return d.text(t,e.config)})},n.bandPosition=function(e,t,n){var r=n.scaleName(t),a=\"x\"===t?\"width\":\"height\";if(n.encoding.size)if(n.markDef.orient){var u=(c={},c[t+\"c\"]=d.fieldRef(e,r,{},{band:.5}),c);if(s.getFieldDef(n.encoding.size))l.warn(l.message.cannotUseSizeFieldWithBandSize(t));else if(s.isValueDef(n.encoding.size))return o.__assign({},u,i(\"size\",n,{vgChannel:a}))}else l.warn(l.message.cannotApplySizeToNonOrientedMark(n.markDef.type));return f={},f[t]=d.fieldRef(e,r,{binSuffix:\"range\"}),f[a]=d.band(r),f;var c,f},n.centeredBandPosition=function(e,t,n,r){var s=\"x\"===e?\"xc\":\"yc\",l=\"x\"===e?\"width\":\"height\";return o.__assign({},a(e,t,n,s),i(\"size\",t,{defaultRef:r,vgChannel:l}))},n.binnedPosition=function(e,t,n,i,r){return\"x\"===t?{x2:d.bin(e,n,\"start\",r?0:i),x:d.bin(e,n,\"end\",r?i:0)}:{y2:d.bin(e,n,\"start\",r?i:0),y:d.bin(e,n,\"end\",r?0:i)}},n.pointPosition=a,n.pointPosition2=function(e,t,n){var i=e.encoding,r=e.markDef,a=e.stack,o=\"x2\"===(n=n||(\"horizontal\"===r.orient?\"x2\":\"y2\"))?\"x\":\"y\",s=d.stackable2(n,i[o],i[n],e.scaleName(o),e.getScaleComponent(o),a,t);return l={},l[n]=s,l;var l}},{\"../../fielddef\":101,\"../../log\":106,\"../../util\":119,\"../common\":24,\"../selection/selection\":80,\"./valueref\":66,tslib:6}],61:[function(e,t,n){\"use strict\";function i(e,t){var n=e.config,i=e.width,o=e.height;return a.__assign({},s.pointPosition(\"x\",e,l.mid(i)),s.pointPosition(\"y\",e,l.mid(o)),s.color(e),s.text(e,\"tooltip\"),s.nonPosition(\"size\",e),r(e,n,t),s.nonPosition(\"opacity\",e))}function r(e,t,n){return n?{shape:{value:n}}:s.nonPosition(\"shape\",e,{defaultValue:o.getMarkConfig(\"shape\",e.markDef,t)})}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"../common\"),s=e(\"./mixins\"),l=e(\"./valueref\");n.shapeMixins=r,n.point={vgMark:\"symbol\",encodeEntry:function(e){return i(e)}},n.circle={vgMark:\"symbol\",encodeEntry:function(e){return i(e,\"circle\")}},n.square={vgMark:\"symbol\",encodeEntry:function(e){return i(e,\"square\")}}},{\"../common\":24,\"./mixins\":60,\"./valueref\":66,tslib:6}],62:[function(e,t,n){\"use strict\";function i(e){var t=e.encoding.x,n=e.encoding.x2,i=e.getScaleComponent(o.X),r=i?i.get(\"type\"):void 0;if(s.isFieldDef(t)&&t.bin&&!n)return f.binnedPosition(t,\"x\",e.scaleName(\"x\"),0,i.get(\"reverse\"));if(s.isFieldDef(t)&&i&&c.hasDiscreteDomain(r)){if(r===c.ScaleType.BAND)return f.bandPosition(t,\"x\",e);throw new Error(l.message.scaleTypeNotWorkWithMark(u.RECT,r))}return a.__assign({},f.pointPosition(\"x\",e,\"zeroOrMax\"),f.pointPosition2(e,\"zeroOrMin\",\"x2\"))}function r(e){var t=e.encoding.y,n=e.encoding.y2,i=e.getScaleComponent(o.Y),r=i?i.get(\"type\"):void 0;if(s.isFieldDef(t)&&t.bin&&!n)return f.binnedPosition(t,\"y\",e.scaleName(\"y\"),0,i.get(\"reverse\"));if(s.isFieldDef(t)&&i&&c.hasDiscreteDomain(r)){if(r===c.ScaleType.BAND)return f.bandPosition(t,\"y\",e);throw new Error(l.message.scaleTypeNotWorkWithMark(u.RECT,r))}return a.__assign({},f.pointPosition(\"y\",e,\"zeroOrMax\"),f.pointPosition2(e,\"zeroOrMin\",\"y2\"))}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"../../channel\"),s=e(\"../../fielddef\"),l=e(\"../../log\"),u=e(\"../../mark\"),c=e(\"../../scale\"),f=e(\"./mixins\");n.rect={vgMark:\"rect\",encodeEntry:function(e){return a.__assign({},i(e),r(e),f.color(e),f.text(e,\"tooltip\"),f.nonPosition(\"opacity\",e))}}},{\"../../channel\":16,\"../../fielddef\":101,\"../../log\":106,\"../../mark\":108,\"../../scale\":109,\"./mixins\":60,tslib:6}],63:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"./mixins\"),a=e(\"./valueref\");n.rule={vgMark:\"rule\",encodeEntry:function(e){e.config;var t=e.markDef,n=e.width,o=e.height,s=t.orient;return i.__assign({},r.pointPosition(\"x\",e,\"horizontal\"===s?\"zeroOrMin\":a.mid(n)),r.pointPosition(\"y\",e,\"vertical\"===s?\"zeroOrMin\":a.mid(o)),r.pointPosition2(e,\"zeroOrMax\"),r.color(e),r.text(e,\"tooltip\"),r.nonPosition(\"opacity\",e),r.nonPosition(\"size\",e,{vgChannel:\"strokeWidth\"}))}}},{\"./mixins\":60,\"./valueref\":66,tslib:6}],64:[function(e,t,n){\"use strict\";function i(e,t){return l.isFieldDef(t)&&t.type===u.QUANTITATIVE?{field:{group:\"width\"},offset:-5}:{value:e.scale.textXRangeStep/2}}function r(e,t,n){if(void 0===c.getMarkConfig(\"align\",e,n))return s.channelHasField(t,o.X)?\"center\":\"right\"}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"../../channel\"),s=e(\"../../encoding\"),l=e(\"../../fielddef\"),u=e(\"../../type\"),c=e(\"../common\"),f=e(\"./mixins\"),d=e(\"./valueref\");n.text={vgMark:\"text\",encodeEntry:function(e){var t=e.config,n=e.encoding,o=e.height,s=n.text;return a.__assign({},f.pointPosition(\"x\",e,i(t,s)),f.pointPosition(\"y\",e,d.mid(o)),f.text(e),f.color(e),f.text(e,\"tooltip\"),f.nonPosition(\"opacity\",e),f.nonPosition(\"size\",e,{vgChannel:\"fontSize\"}),f.valueIfDefined(\"align\",r(e.markDef,n,t)))}}},{\"../../channel\":16,\"../../encoding\":99,\"../../fielddef\":101,\"../../type\":118,\"../common\":24,\"./mixins\":60,\"./valueref\":66,tslib:6}],65:[function(e,t,n){\"use strict\";function i(e){var t=e.config,n=e.markDef.orient,i=e.getScaleComponent(\"horizontal\"===n?\"x\":\"y\");if(void 0!==t.tick.bandSize)return t.tick.bandSize;var r=i?i.get(\"range\"):void 0,o=r&&a.isVgRangeStep(r)?r.step:t.scale.rangeStep;if(\"number\"!=typeof o)throw new Error(\"Function does not handle non-numeric rangeStep\");return o/1.5}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"../../vega.schema\"),o=e(\"./mixins\"),s=e(\"./valueref\");n.tick={vgMark:\"rect\",encodeEntry:function(e){var t=e.config,n=e.markDef,a=e.width,l=e.height,u=n.orient,c=\"horizontal\"===u?\"width\":\"height\",f=\"horizontal\"===u?\"height\":\"width\";return r.__assign({},o.pointPosition(\"x\",e,s.mid(a),\"xc\"),o.pointPosition(\"y\",e,s.mid(l),\"yc\"),o.nonPosition(\"size\",e,{defaultValue:i(e),vgChannel:c}),(d={},d[f]={value:t.tick.thickness},d),o.color(e),o.nonPosition(\"opacity\",e));var d}}},{\"../../vega.schema\":121,\"./mixins\":60,\"./valueref\":66,tslib:6}],66:[function(e,t,n){\"use strict\";function i(e,t,n,i){var r={scale:t,field:d.field(e,n)};return i?c.__assign({},r,i):r}function r(e,t){return{signal:'(scale(\"'+t+'\", '+d.field(e,{expr:\"datum\"})+') + scale(\"'+t+'\", '+d.field(e,{binSuffix:\"end\",expr:\"datum\"})+\"))/2\"}}function a(e,t,n,a,c,h){if(t){if(d.isFieldDef(t)){if(t.bin)return m.contains([\"x\",\"y\"],e)&&\"quantitative\"===t.type?c&&c.impute?i(t,n,{binSuffix:\"mid\"}):r(t,n):i(t,n,g.binRequiresRange(t,e)?{binSuffix:\"range\"}:{});var v=a.get(\"type\");return p.hasDiscreteDomain(v)?\"band\"===v?i(t,n,{binSuffix:\"range\"},{band:.5}):i(t,n,{binSuffix:\"range\"}):i(t,n,{})}if(d.isValueDef(t))return{value:t.value};throw new Error(\"FieldDef without field or value.\")}if(\"zeroOrMin\"===h){if(e===f.X||e===f.X2)return o(n,a);if(e===f.Y||e===f.Y2)return l(n,a);throw new Error(\"Unsupported channel \"+e+\" for base function\")}if(\"zeroOrMax\"===h){if(e===f.X||e===f.X2)return s(n,a);if(e===f.Y||e===f.Y2)return u(n,a);throw new Error(\"Unsupported channel \"+e+\" for base function\")}return h}function o(e,t){return e&&!m.contains([p.ScaleType.LOG,p.ScaleType.TIME,p.ScaleType.UTC],t.get(\"type\"))&&!1!==t.get(\"zero\")?{scale:e,value:0}:{value:0}}function s(e,t){return e&&!m.contains([p.ScaleType.LOG,p.ScaleType.TIME,p.ScaleType.UTC],t.get(\"type\"))&&!1!==t.get(\"zero\")?{scale:e,value:0}:{field:{group:\"width\"}}}function l(e,t){return e&&!m.contains([p.ScaleType.LOG,p.ScaleType.TIME,p.ScaleType.UTC],t.get(\"type\"))&&!1!==t.get(\"zero\")?{scale:e,value:0}:{field:{group:\"height\"}}}function u(e,t){return e&&!m.contains([p.ScaleType.LOG,p.ScaleType.TIME,p.ScaleType.UTC],t.get(\"type\"))&&!1!==t.get(\"zero\")?{scale:e,value:0}:{value:0}}Object.defineProperty(n,\"__esModule\",{value:!0});var c=e(\"tslib\"),f=e(\"../../channel\"),d=e(\"../../fielddef\"),p=e(\"../../scale\"),m=e(\"../../util\"),g=e(\"../common\");n.stackable=function(e,t,n,r,o,s){return d.isFieldDef(t)&&o&&e===o.fieldChannel?i(t,n,{suffix:\"end\"}):a(e,t,n,r,o,s)},n.stackable2=function(e,t,n,r,o,s,l){return d.isFieldDef(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?i(t,r,{suffix:\"start\"}):a(e,n,r,o,s,l)},n.bin=function(e,t,n,r){return i(e,t,{binSuffix:\"start\"===n?void 0:\"end\"},r?{offset:r}:{})},n.fieldRef=i,n.band=function(e,t){return void 0===t&&(t=!0),{scale:e,band:t}},n.midPoint=a,n.text=function(e,t){if(e){if(d.isFieldDef(e))return g.formatSignalRef(e,e.format,\"datum\",t);if(d.isValueDef(e))return{value:e.value}}},n.mid=function(e){return c.__assign({},e,{mult:.5})}},{\"../../channel\":16,\"../../fielddef\":101,\"../../scale\":109,\"../../util\":119,\"../common\":24,tslib:6}],67:[function(e,t,n){\"use strict\";function i(e){return e&&\"unit\"===e.type}function r(e){return e&&\"facet\"===e.type}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"vega-util\"),s=e(\"../channel\"),l=e(\"../encoding\"),u=e(\"../fielddef\"),c=e(\"../log\"),f=e(\"../scale\"),d=e(\"../title\"),p=e(\"../transform\"),m=e(\"../util\"),g=e(\"../vega.schema\"),h=e(\"./axis/assemble\"),v=e(\"./layout/header\"),y=e(\"./layoutsize/assemble\"),b=e(\"./legend/assemble\"),_=e(\"./legend/parse\"),S=e(\"./mark/mark\"),x=e(\"./scale/assemble\"),E=e(\"./scale/domain\"),O=e(\"./scale/parse\"),N=e(\"./split\"),w=function(){function e(){this.nameMap={}}return e.prototype.rename=function(e,t){this.nameMap[e]=t},e.prototype.has=function(e){return void 0!==this.nameMap[e]},e.prototype.get=function(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e},e}();n.NameMap=w,n.isUnitModel=i,n.isFacetModel=r,n.isRepeatModel=function(e){return e&&\"repeat\"===e.type},n.isConcatModel=function(e){return e&&\"concat\"===e.type},n.isLayerModel=function(e){return e&&\"layer\"===e.type};var T=function(){function e(e,t,n,i,r){var s=this;this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=s.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=s.lookupDataSource(e.from.facet.data)),e},this.parent=t,this.config=i,this.name=e.name||n,this.title=o.isString(e.title)?{text:e.title}:e.title,this.scaleNameMap=t?t.scaleNameMap:new w,this.layoutSizeNameMap=t?t.layoutSizeNameMap:new w,this.data=e.data,this.description=e.description,this.transforms=p.normalizeTransform(e.transform||[]),this.component={data:{sources:t?t.component.data.sources:{},outputNodes:t?t.component.data.outputNodes:{},outputNodeRefCounts:t?t.component.data.outputNodeRefCounts:{},ancestorParse:t?a.__assign({},t.component.data.ancestorParse):{}},layoutSize:new N.Split,layoutHeaders:{row:{},column:{}},mark:null,resolve:a.__assign({scale:{},axis:{},legend:{}},r||{}),selection:null,scales:null,axes:{},legends:{}}}return Object.defineProperty(e.prototype,\"width\",{get:function(){return this.getSizeSignalRef(\"width\")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.getSizeSignalRef(\"height\")},enumerable:!0,configurable:!0}),e.prototype.initSize=function(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set(\"width\",t,!0),n&&this.component.layoutSize.set(\"height\",n,!0)},e.prototype.parse=function(){this.parseScale(),this.parseMarkDef(),this.parseLayoutSize(),this.renameTopLevelLayoutSize(),this.parseSelection(),this.parseData(),this.parseAxisAndHeader(),this.parseLegend(),this.parseMarkGroup()},e.prototype.parseScale=function(){O.parseScale(this)},e.prototype.renameTopLevelLayoutSize=function(){\"width\"!==this.getName(\"width\")&&this.renameLayoutSize(this.getName(\"width\"),\"width\"),\"height\"!==this.getName(\"height\")&&this.renameLayoutSize(this.getName(\"height\"),\"height\")},e.prototype.parseMarkDef=function(){S.parseMarkDef(this)},e.prototype.parseLegend=function(){_.parseLegend(this)},e.prototype.assembleGroupStyle=function(){if(\"unit\"===this.type||\"layer\"===this.type)return\"cell\"},e.prototype.assembleLayoutSize=function(){if(\"unit\"===this.type||\"layer\"===this.type)return{width:this.getSizeSignalRef(\"width\"),height:this.getSizeSignalRef(\"height\")}},e.prototype.assembleHeaderMarks=function(){for(var e=this.component.layoutHeaders,t=[],n=0,i=v.HEADER_CHANNELS;n<i.length;n++)e[o=i[n]].title&&t.push(v.getTitleGroup(this,o));for(var r=0,a=v.HEADER_CHANNELS;r<a.length;r++)for(var o=a[r],s=e[o],l=0,u=v.HEADER_TYPES;l<u.length;l++){var c=u[l];if(s[c])for(var f=0,d=s[c];f<d.length;f++){var p=d[f],m=v.getHeaderGroup(this,o,c,s,p);m&&t.push(m)}}return t},e.prototype.assembleAxes=function(){return h.assembleAxes(this.component.axes)},e.prototype.assembleLegends=function(){return b.assembleLegends(this)},e.prototype.assembleTitle=function(){var e=a.__assign({},d.extractTitleConfig(this.config.title).nonMark,this.title);if(e.text)return m.contains([\"unit\",\"layer\"],this.type)||(e.anchor&&\"start\"!==e.anchor&&c.warn(c.message.cannotSetTitleAnchor(this.type)),e.anchor=\"start\"),m.keys(e).length>0?e:void 0},e.prototype.assembleGroup=function(e){void 0===e&&(e=[]);var t={};(e=e.concat(this.assembleSelectionSignals())).length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var i=!this.parent||r(this.parent)?x.assembleScales(this):[];i.length>0&&(t.scales=i);var a=this.assembleAxes();a.length>0&&(t.axes=a);var o=this.assembleLegends();return o.length>0&&(t.legends=o),t},e.prototype.hasDescendantWithFieldOnChannel=function(e){for(var t=0,n=this.children;t<n.length;t++){var r=n[t];if(i(r)){if(r.channelHasField(e))return!0}else if(r.hasDescendantWithFieldOnChannel(e))return!0}return!1},e.prototype.getName=function(e){return m.varName((this.name?this.name+\"_\":\"\")+e)},e.prototype.requestDataName=function(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t},e.prototype.getSizeSignalRef=function(e){if(r(this.parent)){var t=\"width\"===e?\"x\":\"y\",n=this.component.scales[t];if(n&&!n.merged){var i=n.get(\"type\"),a=n.get(\"range\");if(f.hasDiscreteDomain(i)&&g.isVgRangeStep(a)){var o=n.get(\"name\"),s=E.assembleDomain(this,t),l=E.getFieldFromDomain(s);if(l){var d=u.field({aggregate:\"distinct\",field:l},{expr:\"datum\"});return{signal:y.sizeExpr(o,n,d)}}return c.warn(\"Unknown field for ${channel}.  Cannot calculate view size.\"),null}}}return{signal:this.layoutSizeNameMap.get(this.getName(e))}},e.prototype.lookupDataSource=function(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e},e.prototype.getSizeName=function(e){return this.layoutSizeNameMap.get(e)},e.prototype.renameLayoutSize=function(e,t){this.layoutSizeNameMap.rename(e,t)},e.prototype.renameScale=function(e,t){this.scaleNameMap.rename(e,t)},e.prototype.scaleName=function(e,t){return t?this.getName(e):s.isChannel(e)&&s.isScaleChannel(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0},e.prototype.getScaleComponent=function(e){if(!this.component.scales)throw new Error(\"getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().\");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0},e.prototype.getSelectionComponent=function(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(c.message.selectionNotFound(t));return n},e}();n.Model=T;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.field=function(e,t){void 0===t&&(t={});var n=this.fieldDef(e);if(n)return u.field(n,t)},t.prototype.reduceFieldDef=function(e,t,n){return l.reduce(this.getMapping(),function(t,n,i){var r=u.getFieldDef(n);return r?e(t,r,i):t},t,n)},t.prototype.forEachFieldDef=function(e,t){l.forEach(this.getMapping(),function(t,n){var i=u.getFieldDef(t);i&&e(i,n)},t)},t}(T);n.ModelWithField=k},{\"../channel\":16,\"../encoding\":99,\"../fielddef\":101,\"../log\":106,\"../scale\":109,\"../title\":115,\"../transform\":117,\"../util\":119,\"../vega.schema\":121,\"./axis/assemble\":17,\"./layout/header\":47,\"./layoutsize/assemble\":48,\"./legend/assemble\":50,\"./legend/parse\":53,\"./mark/mark\":59,\"./scale/assemble\":71,\"./scale/domain\":73,\"./scale/parse\":74,\"./split\":90,tslib:6,\"vega-util\":11}],68:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"./baseconcat\"),a=e(\"./buildmodel\"),o=e(\"./layoutsize/parse\"),s=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n,i,a,t.resolve)||this;return o.type=\"repeat\",o.repeat=t.repeat,o.children=o._initChildren(t,o.repeat,r,a),o}return i.__extends(t,e),t.prototype._initChildren=function(e,t,n,i){for(var r=[],o=t.row||[n?n.row:null],s=t.column||[n?n.column:null],l=0,u=o;l<u.length;l++)for(var c=u[l],f=0,d=s;f<d.length;f++){var p=d[f],m=(c?\"_\"+c:\"\")+(p?\"_\"+p:\"\"),g={row:c,column:p};r.push(a.buildModel(e.spec,this,this.getName(\"child\"+m),void 0,g,i,!1))}return r},t.prototype.parseLayoutSize=function(){o.parseRepeatLayoutSize(this)},t.prototype.assembleLayout=function(){return{padding:{row:10,column:10},offset:10,columns:this.repeat&&this.repeat.column?this.repeat.column.length:1,bounds:\"full\",align:\"all\"}},t}(r.BaseConcatModel);n.RepeatModel=s},{\"./baseconcat\":22,\"./buildmodel\":23,\"./layoutsize/parse\":49,tslib:6}],69:[function(e,t,n){\"use strict\";function i(e,t){var n=e.field;return s.isRepeatRef(n)?n.repeat in t?a.__assign({},e,{field:t[n.repeat]}):(l.warn(l.message.noSuchRepeatedValue(n.repeat)),null):e}function r(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];if(o.isArray(a))n[r]=a.map(function(e){return i(e,t)}).filter(function(e){return null!==e});else{var s=i(a,t);null!==s&&(n[r]=s)}}return n}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"vega-util\"),s=e(\"../fielddef\"),l=e(\"../log\");n.replaceRepeaterInFacet=function(e,t){return r(e,t)},n.replaceRepeaterInEncoding=function(e,t){return r(e,t)}},{\"../fielddef\":101,\"../log\":106,tslib:6,\"vega-util\":11}],70:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../channel\"),r=e(\"../log\"),a=e(\"../util\"),o=e(\"./model\");n.defaultScaleResolve=function(e,t){if(o.isLayerModel(t)||o.isFacetModel(t))return\"shared\";if(o.isConcatModel(t)||o.isRepeatModel(t))return a.contains(i.POSITION_SCALE_CHANNELS,e)?\"independent\":\"shared\";throw new Error(\"invalid model type for resolve\")},n.parseGuideResolve=function(e,t){var n=e.scale[t],o=a.contains(i.POSITION_SCALE_CHANNELS,t)?\"axis\":\"legend\";return\"independent\"===n?(\"shared\"===e[o][t]&&r.warn(r.message.independentScaleMeansIndependentGuide(t)),\"independent\"):e[o][t]||\"shared\"}},{\"../channel\":16,\"../log\":106,\"../util\":119,\"./model\":67}],71:[function(e,t,n){\"use strict\";function i(e){return c.isLayerModel(e)||c.isConcatModel(e)||c.isRepeatModel(e)?e.children.reduce(function(e,t){return e.concat(i(t))},r(e)):r(e)}function r(e){return l.keys(e.component.scales).reduce(function(t,n){var i=e.component.scales[n];if(i.merged)return t;var r=i.combine(),s=r.domainRaw,l=r.range,u=r.name,c=r.type,p=(r.domainRaw,r.range,o.__rest(r,[\"name\",\"type\",\"domainRaw\",\"range\"]));return l=a(l,u,e,n),s&&f.isRawSelectionDomain(s)&&(s=f.selectionScaleDomain(e,s)),t.push(o.__assign({name:u,type:c,domain:d.assembleDomain(e,n)},s?{domainRaw:s}:{},{range:l},p)),t},[])}function a(e,t,n,i){if(\"x\"===i||\"y\"===i){if(u.isVgRangeStep(e))return{step:{signal:t+\"_step\"}};if(s.isArray(e)&&2===e.length){var r=e[0],a=e[1];if(0===r&&u.isVgSignalRef(a))return[0,{signal:n.getSizeName(a.signal)}];if(u.isVgSignalRef(r)&&0===a)return[{signal:n.getSizeName(r.signal)},0]}}return e}Object.defineProperty(n,\"__esModule\",{value:!0});var o=e(\"tslib\"),s=e(\"vega-util\"),l=e(\"../../util\"),u=e(\"../../vega.schema\"),c=e(\"../model\"),f=e(\"../selection/selection\"),d=e(\"./domain\");n.assembleScales=i,n.assembleScalesForModel=r,n.assembleScaleRange=a},{\"../../util\":119,\"../../vega.schema\":121,\"../model\":67,\"../selection/selection\":80,\"./domain\":73,tslib:6,\"vega-util\":11}],72:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=function(e){function t(t,n){var i=e.call(this,{},{name:t})||this;return i.merged=!1,i.domains=[],i.setWithExplicit(\"type\",n),i}return i.__extends(t,e),t}(e(\"../split\").Split);n.ScaleComponent=r},{\"../split\":90,tslib:6}],73:[function(e,t,n){\"use strict\";function i(e){T.isUnitModel(e)?r(e):a(e)}function r(e){var t=e.specifiedScales,n=e.component.scales;x.keys(n).forEach(function(i){var r=t[i],a=r?r.domain:void 0,o=s(e,i),l=n[i];l.domains=o,_.isSelectionDomain(a)&&l.set(\"domainRaw\",{signal:k.SELECTION_DOMAIN+JSON.stringify(a)},!0)})}function a(e){for(var t=0,n=e.children;t<n.length;t++)i(n[t]);var r=e.component.scales;x.keys(r).forEach(function(t){for(var n,i=0,a=e.children;i<a.length;i++){var o=a[i].component.scales[t];o&&(n=void 0===n?o.domains:n.concat(o.domains))}T.isFacetModel(e)&&n.forEach(function(e){E.isDataRefDomain(e)&&(e.data=w.FACET_SCALE_PREFIX+e.data.replace(w.FACET_SCALE_PREFIX,\"\"))}),r[t].domains=n})}function o(e,t,n,i){if(\"unaggregated\"===e){var r=c(t,n),a=r.valid,o=r.reason;if(!a)return void b.warn(o)}else if(void 0===e&&i.useUnaggregatedDomain&&(a=c(t,n).valid))return\"unaggregated\";return e}function s(e,t){var n=e.getScaleComponent(t).get(\"type\"),i=o(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=d.__assign({},e.specifiedScales[t],{domain:i})),\"x\"===t&&e.channelHasField(\"x2\")?e.channelHasField(\"x\")?l(n,i,e,\"x\").concat(l(n,i,e,\"x2\")):l(n,i,e,\"x2\"):\"y\"===t&&e.channelHasField(\"y2\")?e.channelHasField(\"y\")?l(n,i,e,\"y\").concat(l(n,i,e,\"y2\")):l(n,i,e,\"y2\"):l(n,i,e,t)}function l(e,t,n,i){var r=n.fieldDef(i);if(t&&\"unaggregated\"!==t&&!_.isSelectionDomain(t)){if(!r.bin)return y.isDateTime(t[0])?t.map(function(e){return{signal:\"{data: \"+y.dateTimeExpr(e,!0)+\"}\"}}):[t];b.warn(b.message.conflictedDomain(i))}var a=n.stack;if(a&&i===a.fieldChannel)return\"normalize\"===a.offset?[[0,1]]:[{data:l=n.requestDataName(v.MAIN),field:n.field(i,{suffix:\"start\"})},{data:l,field:n.field(i,{suffix:\"end\"})}];var o=h.isScaleChannel(i)?u(n,i,e):void 0;if(\"unaggregated\"===t)return[{data:l=n.requestDataName(v.MAIN),field:n.field(i,{aggregate:\"min\"})},{data:l,field:n.field(i,{aggregate:\"max\"})}];if(r.bin){if(_.isBinScale(e)){var s=n.getName(g.binToString(r.bin)+\"_\"+r.field+\"_bins\");return[{signal:\"sequence(\"+s+\".start, \"+s+\".stop + \"+s+\".step, \"+s+\".step)\"}]}if(_.hasDiscreteDomain(e))return[{data:x.isBoolean(o)?n.requestDataName(v.MAIN):n.requestDataName(v.RAW),field:n.field(i,N.binRequiresRange(r,i)?{binSuffix:\"range\"}:{}),sort:!0!==o&&S.isSortField(o)?o:{field:n.field(i,{}),op:\"min\"}}];if(\"x\"===i||\"y\"===i){var l=n.requestDataName(v.MAIN);return[{data:l,field:n.field(i,{})},{data:l,field:n.field(i,{binSuffix:\"end\"})}]}return[{data:n.requestDataName(v.MAIN),field:n.field(i,{})}]}return o?[{data:x.isBoolean(o)?n.requestDataName(v.MAIN):n.requestDataName(v.RAW),field:n.field(i),sort:o}]:[{data:n.requestDataName(v.MAIN),field:n.field(i)}]}function u(e,t,n){if(_.hasDiscreteDomain(n)){var i=e.sort(t);return S.isSortField(i)?i:\"descending\"===i?{op:\"min\",field:e.field(t),order:\"descending\"}:!!x.contains([\"ascending\",void 0],i)||void 0}}function c(e,t){return e.aggregate?m.SHARED_DOMAIN_OP_INDEX[e.aggregate]?\"quantitative\"===e.type&&\"log\"===t?{valid:!1,reason:b.message.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:b.message.unaggregateDomainWithNonSharedDomainOp(e.aggregate)}:{valid:!1,reason:b.message.unaggregateDomainHasNoEffectForRawField(e)}}function f(e){var t=x.unique(e.map(function(e){if(E.isDataRefDomain(e)){e.sort;return d.__rest(e,[\"sort\"])}return e}),x.hash),n=x.unique(e.map(function(e){if(E.isDataRefDomain(e)){var t=e.sort;return void 0===t||x.isBoolean(t)||(\"count\"===t.op&&delete t.field,\"ascending\"===t.order&&delete t.order),t}}).filter(function(e){return void 0!==e}),x.hash);if(1===t.length){var i=e[0];if(E.isDataRefDomain(i)&&n.length>0){var r=n[0];return n.length>1&&(b.warn(b.message.MORE_THAN_ONE_SORT),r=!0),d.__assign({},i,{sort:r})}return i}var a=n.filter(function(e){return!!x.isBoolean(e)||(\"count\"===e.op||(b.warn(b.message.domainSortDropped(e)),!1))}),o=!0;if(1===a.length)o=a[0];else if(a.length>1){var s=a.filter(function(e){return!1!==e});s.length>1?(b.warn(b.message.MORE_THAN_ONE_SORT),o=!0):o=s[0]}var l=x.unique(e.map(function(e){return E.isDataRefDomain(e)?e.data:null}),function(e){return e});return 1===l.length&&null!==l[0]?i={data:l[0],fields:t.map(function(e){return e.field}),sort:o}:{fields:t,sort:o}}Object.defineProperty(n,\"__esModule\",{value:!0});var d=e(\"tslib\"),p=e(\"vega-util\"),m=e(\"../../aggregate\"),g=e(\"../../bin\"),h=e(\"../../channel\"),v=e(\"../../data\"),y=e(\"../../datetime\"),b=e(\"../../log\"),_=e(\"../../scale\"),S=e(\"../../sort\"),x=e(\"../../util\"),E=e(\"../../vega.schema\"),O=e(\"../../vega.schema\"),N=e(\"../common\"),w=e(\"../data/optimize\"),T=e(\"../model\"),k=e(\"../selection/selection\");n.parseScaleDomain=i,n.parseDomainForChannel=s,n.domainSort=u,n.canUseUnaggregatedDomain=c,n.mergeDomains=f,n.getFieldFromDomain=function(e){if(E.isDataRefDomain(e)&&p.isString(e.field))return e.field;if(O.isDataRefUnionedDomain(e)){for(var t=void 0,n=0,i=e.fields;n<i.length;n++){var r=i[n];if(E.isDataRefDomain(r)&&p.isString(r.field))if(t){if(t!==r.field)return b.warn(\"Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect.\"),t}else t=r.field}return b.warn(\"Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect.\"),t}if(O.isFieldRefUnionDomain(e)&&p.isString)return b.warn(\"Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.\"),t=e.fields[0],p.isString(t)?t:void 0},n.assembleDomain=function(e,t){return f(e.component.scales[t].domains.map(function(t){return E.isDataRefDomain(t)&&(t.data=e.lookupDataSource(t.data)),t}))}},{\"../../aggregate\":13,\"../../bin\":15,\"../../channel\":16,\"../../data\":97,\"../../datetime\":98,\"../../log\":106,\"../../scale\":109,\"../../sort\":111,\"../../util\":119,\"../../vega.schema\":121,\"../common\":24,\"../data/optimize\":39,\"../model\":67,\"../selection/selection\":80,tslib:6,\"vega-util\":11}],74:[function(e,t,n){\"use strict\";function i(e){c.isUnitModel(e)?e.component.scales=r(e):e.component.scales=a(e)}function r(e){var t=e.encoding,n=e.config,i=e.mark();return o.SCALE_CHANNELS.reduce(function(r,a){var o,l={},u=t[a];if(s.isFieldDef(u)?(o=u,l=u.scale||{}):s.isConditionalDef(u)&&s.isFieldDef(u.condition)?(o=u.condition,l=u.condition.scale||{}):\"x\"===a?o=s.getFieldDef(t.x2):\"y\"===a&&(o=s.getFieldDef(t.y2)),o){var c=l.type,f=v.scaleType(l.type,a,o,i,n.scale);r[a]=new p.ScaleComponent(e.scaleName(a+\"\",!0),{value:f,explicit:c===f})}return r},{})}function a(e){for(var t=e.component.scales={},n={},r=e.component.resolve,a=0,o=e.children;a<o.length;a++)!function(t){i(t),u.keys(t.component.scales).forEach(function(i){if(r.scale[i]=r.scale[i]||f.defaultScaleResolve(i,e),\"shared\"===r.scale[i]){var a=n[i],o=t.component.scales[i].getWithExplicit(\"type\");a?l.scaleCompatible(a.value,o.value)?n[i]=d.mergeValuesWithExplicit(a,o,\"type\",\"scale\",y):(r.scale[i]=\"independent\",delete n[i]):n[i]=o}})}(o[a]);return u.keys(n).forEach(function(i){var r=e.scaleName(i,!0),a=n[i];t[i]=new p.ScaleComponent(r,a);for(var o=0,s=e.children;o<s.length;o++){var l=s[o],u=l.component.scales[i];u&&(l.renameScale(u.get(\"name\"),r),u.merged=!0)}}),t}Object.defineProperty(n,\"__esModule\",{value:!0});var o=e(\"../../channel\"),s=e(\"../../fielddef\"),l=e(\"../../scale\"),u=e(\"../../util\"),c=e(\"../model\"),f=e(\"../resolve\"),d=e(\"../split\"),p=e(\"./component\"),m=e(\"./domain\"),g=e(\"./properties\"),h=e(\"./range\"),v=e(\"./type\");n.parseScale=function(e){i(e),m.parseScaleDomain(e);for(var t=0,n=l.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES;t<n.length;t++){var r=n[t];g.parseScaleProperty(e,r)}h.parseScaleRange(e)},n.parseScaleCore=i;var y=d.tieBreakByComparing(function(e,t){return l.scaleTypePrecedence(e)-l.scaleTypePrecedence(t)})},{\"../../channel\":16,\"../../fielddef\":101,\"../../scale\":109,\"../../util\":119,\"../model\":67,\"../resolve\":70,\"../split\":90,\"./component\":72,\"./domain\":73,\"./properties\":75,\"./range\":76,\"./type\":77}],75:[function(e,t,n){\"use strict\";function i(e,t){b.isUnitModel(e)?r(e,t):o(e,t)}function r(e,t){var n=e.component.scales;y.keys(n).forEach(function(i){var r=e.specifiedScales[i],o=n[i],s=e.getScaleComponent(i),l=e.fieldDef(i),u=e.sort(i),c=e.config,f=r[t],d=s.get(\"type\"),p=g.scaleTypeSupportProperty(d,t),h=g.channelScalePropertyIncompatability(i,t);if(void 0!==f&&(p?h&&m.warn(h):m.warn(m.message.scalePropertyNotWorkWithScaleType(d,t,i))),p&&void 0===h)if(void 0!==f)o.copyKeyFromObject(t,r);else{var v=a(t,i,l,u,s.get(\"type\"),s.get(\"padding\"),s.get(\"paddingInner\"),r.domain,c.scale);void 0!==v&&o.set(t,v,!1)}})}function a(e,t,n,i,r,a,o,p,m){switch(e){case\"nice\":return s(r,t,n);case\"padding\":return l(t,r,m);case\"paddingInner\":return u(a,t,m);case\"paddingOuter\":return c(a,t,r,o,m);case\"reverse\":return f(r,i);case\"zero\":return d(t,n,p)}return m[e]}function o(e,t){for(var n=e.component.scales,r=0,a=e.children;r<a.length;r++){var o=a[r];\"range\"===t?S.parseScaleRange(o):i(o,t)}y.keys(n).forEach(function(i){for(var r,a=0,o=e.children;a<o.length;a++){var s=o[a].component.scales[i];if(s){var l=s.getWithExplicit(t);r=_.mergeValuesWithExplicit(r,l,t,\"scale\",_.tieBreakByComparing(function(e,n){switch(t){case\"range\":return e.step&&n.step?e.step-n.step:0}return 0}))}}n[i].setWithExplicit(t,r)})}function s(e,t,n){if(v.contains([g.ScaleType.TIME,g.ScaleType.UTC],e))return h.smallestUnit(n.timeUnit);if(!n.bin)return v.contains([p.X,p.Y],t)}function l(e,t,n){if(v.contains([p.X,p.Y],e)&&t===g.ScaleType.POINT)return n.pointPadding}function u(e,t,n){if(void 0===e)return v.contains([p.X,p.Y],t)?n.bandPaddingInner:void 0}function c(e,t,n,i,r){if(void 0===e)return v.contains([p.X,p.Y],t)&&n===g.ScaleType.BAND?void 0!==r.bandPaddingOuter?r.bandPaddingOuter:i/2:void 0}function f(e,t){if(g.hasContinuousDomain(e)&&\"descending\"===t)return!0}function d(e,t,n){return\"size\"===e&&\"quantitative\"===t.type||!(!!n&&\"unaggregated\"!==n||t.bin||!v.contains([p.X,p.Y],e))}Object.defineProperty(n,\"__esModule\",{value:!0});var p=e(\"../../channel\"),m=e(\"../../log\"),g=e(\"../../scale\"),h=e(\"../../timeunit\"),v=e(\"../../util\"),y=e(\"../../util\"),b=e(\"../model\"),_=e(\"../split\"),S=e(\"./range\");n.parseScaleProperty=i,n.getDefaultValue=a,n.parseNonUnitScaleProperty=o,n.nice=s,n.padding=l,n.paddingInner=u,n.paddingOuter=c,n.reverse=f,n.zero=d},{\"../../channel\":16,\"../../log\":106,\"../../scale\":109,\"../../timeunit\":114,\"../../util\":119,\"../model\":67,\"../split\":90,\"./range\":76}],76:[function(e,t,n){\"use strict\";function i(e){var t=e.component.scales;d.SCALE_CHANNELS.forEach(function(n){var i=t[n];if(i){var o=e.getScaleComponent(n),s=e.specifiedScales[n],l=e.fieldDef(n),u=\"x\"===n?\"width\":\"y\"===n?\"height\":void 0,c=u?!!e.component.layoutSize.get(u):void 0,f=o.get(\"type\"),d=g.contains([\"point\",\"band\"],f)||!!s.rangeStep;u&&e.fit&&!c&&d&&(p.warn(p.message.CANNOT_FIX_RANGE_STEP_WITH_FIT),c=!0);var m=r(e),h=a(n,f,l.type,s,e.config,i.get(\"zero\"),e.mark(),c,e.getName(u),m);i.setWithExplicit(\"range\",h)}})}function r(e){var t=[],n=e.getScaleComponent(\"x\"),i=n&&n.get(\"range\");i&&h.isVgRangeStep(i)&&f.isNumber(i.step)&&t.push(i.step);var r=e.getScaleComponent(\"y\"),a=r&&r.get(\"range\");return a&&h.isVgRangeStep(a)&&f.isNumber(a.step)&&t.push(a.step),t}function a(e,t,i,r,a,l,u,c,f,d){for(var g=c||null===r.rangeStep,h=0,v=n.RANGE_PROPERTIES;h<v.length;h++){var b=v[h];if(void 0!==r[b]){var _=m.scaleTypeSupportProperty(t,b),S=m.channelScalePropertyIncompatability(e,b);if(_)if(S)p.warn(S);else switch(b){case\"range\":return y.makeImplicit(r[b]);case\"scheme\":return y.makeImplicit(o(r[b]));case\"rangeStep\":var x=r[b];if(null!==x){if(!c)return y.makeImplicit({step:x});p.warn(p.message.rangeStepDropped(e))}}else p.warn(p.message.scalePropertyNotWorkWithScaleType(t,b,e))}}return{explicit:!1,value:s(e,t,i,a,l,u,f,d,g)}}function o(e){if(m.isExtendedScheme(e)){var t={scheme:e.name};return e.count&&(t.count=e.count),e.extent&&(t.extent=e.extent),t}return{scheme:e}}function s(e,t,n,i,r,a,o,s,c){switch(e){case d.X:case d.Y:if(g.contains([\"point\",\"band\"],t)&&!c)if(e===d.X&&\"text\"===a){if(i.scale.textXRangeStep)return{step:i.scale.textXRangeStep}}else if(i.scale.rangeStep)return{step:i.scale.rangeStep};return e===d.X?[0,{signal:o}]:[{signal:o},0];case d.SIZE:return[l(a,r,i),u(a,s,i)];case d.SHAPE:return\"symbol\";case d.COLOR:return\"ordinal\"===t?\"nominal\"===n?\"category\":\"ordinal\":\"rect\"===a?\"heatmap\":\"ramp\";case d.OPACITY:return[i.scale.minOpacity,i.scale.maxOpacity]}throw new Error(\"Scale range undefined for channel \"+e)}function l(e,t,n){if(t)return 0;switch(e){case\"bar\":case\"tick\":return n.scale.minBandSize;case\"line\":case\"rule\":return n.scale.minStrokeWidth;case\"text\":return n.scale.minFontSize;case\"point\":case\"square\":case\"circle\":return n.scale.minSize}throw new Error(p.message.incompatibleChannel(\"size\",e))}function u(e,t,n){var i=n.scale;switch(e){case\"bar\":case\"tick\":return void 0!==n.scale.maxBandSize?n.scale.maxBandSize:c(t,n.scale)-1;case\"line\":case\"rule\":return n.scale.maxStrokeWidth;case\"text\":return n.scale.maxFontSize;case\"point\":case\"square\":case\"circle\":if(n.scale.maxSize)return n.scale.maxSize;var r=c(t,i);return(r-2)*(r-2)}throw new Error(p.message.incompatibleChannel(\"size\",e))}function c(e,t){return e.length>0?Math.min.apply(null,e):t.rangeStep?t.rangeStep:21}Object.defineProperty(n,\"__esModule\",{value:!0});var f=e(\"vega-util\"),d=e(\"../../channel\"),p=e(\"../../log\"),m=e(\"../../scale\"),g=e(\"../../util\"),h=e(\"../../vega.schema\"),v=e(\"../model\"),y=e(\"../split\"),b=e(\"./properties\");n.RANGE_PROPERTIES=[\"range\",\"rangeStep\",\"scheme\"],n.parseScaleRange=function(e){v.isUnitModel(e)?i(e):b.parseNonUnitScaleProperty(e,\"range\")},n.parseRangeForChannel=a,n.defaultRange=s},{\"../../channel\":16,\"../../log\":106,\"../../scale\":109,\"../../util\":119,\"../../vega.schema\":121,\"../model\":67,\"../split\":90,\"./properties\":75,\"vega-util\":11}],77:[function(e,t,n){\"use strict\";function i(e,t,n,i){switch(t.type){case\"nominal\":case\"ordinal\":if(\"color\"===e||\"discrete\"===a.rangeType(e))return\"shape\"===e&&\"ordinal\"===t.type&&o.warn(o.message.discreteChannelCannotEncode(e,\"ordinal\")),\"ordinal\";if(c.contains([\"x\",\"y\"],e)){if(\"rect\"===n)return\"band\";if(\"bar\"===n)return\"band\"}return\"point\";case\"temporal\":return\"color\"===e?\"sequential\":\"discrete\"===a.rangeType(e)?(o.warn(o.message.discreteChannelCannotEncode(e,\"temporal\")),\"ordinal\"):\"time\";case\"quantitative\":return\"color\"===e?t.bin?\"bin-ordinal\":\"sequential\":\"discrete\"===a.rangeType(e)?(o.warn(o.message.discreteChannelCannotEncode(e,\"quantitative\")),\"ordinal\"):t.bin&&\"x\"!==e&&\"y\"!==e?\"bin-linear\":\"linear\"}throw new Error(o.message.invalidFieldType(t.type))}function r(e,t){var n=t.type;return f.contains([u.Type.ORDINAL,u.Type.NOMINAL],n)?void 0===e||l.hasDiscreteDomain(e):n===u.Type.TEMPORAL?f.contains([s.ScaleType.TIME,s.ScaleType.UTC,s.ScaleType.SEQUENTIAL,void 0],e):n!==u.Type.QUANTITATIVE||(t.bin?f.contains([s.ScaleType.BIN_LINEAR,s.ScaleType.BIN_ORDINAL,s.ScaleType.LINEAR],e):f.contains([s.ScaleType.LOG,s.ScaleType.POW,s.ScaleType.SQRT,s.ScaleType.QUANTILE,s.ScaleType.QUANTIZE,s.ScaleType.LINEAR,s.ScaleType.SEQUENTIAL,void 0],e))}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"../../channel\"),o=e(\"../../log\"),s=e(\"../../scale\"),l=e(\"../../scale\"),u=e(\"../../type\"),c=e(\"../../util\"),f=e(\"../../util\");n.scaleType=function(e,t,n,l,u){var c=i(t,n,l);return a.isScaleChannel(t)?void 0!==e?s.channelSupportScaleType(t,e)?r(e,n)?e:(o.warn(o.message.scaleTypeNotWorkWithFieldDef(e,c)),c):(o.warn(o.message.scaleTypeNotWorkWithChannel(t,e,c)),c):c:null},n.fieldDefMatchScaleType=r},{\"../../channel\":16,\"../../log\":106,\"../../scale\":109,\"../../type\":118,\"../../util\":119}],78:[function(e,t,n){\"use strict\";function i(e,t,i){var a=c.channelSignalName(t,i,\"visual\"),s=c.channelSignalName(t,i,\"data\"),d=f.default.has(t),p=e.scaleName(i),m=u.stringValue(p),g=e.getScaleComponent(i),h=g?g.get(\"type\"):void 0,v=e.getSizeSignalRef(i===o.X?\"width\":\"height\").signal,y=i+\"(unit)\",b=r(t,function(e,t){return e.concat({events:t.between[0],update:\"[\"+y+\", \"+y+\"]\"},{events:t,update:\"[\"+a+\"[0], clamp(\"+y+\", 0, \"+v+\")]\"})});return b.push({events:{signal:t.name+n.SCALE_TRIGGER},update:l.hasContinuousDomain(h)&&!l.isBinScale(h)?\"[scale(\"+m+\", \"+s+\"[0]), scale(\"+m+\", \"+s+\"[1])]\":\"[0, 0]\"}),d?[{name:s,on:[]}]:[{name:a,value:[],on:b},{name:s,on:[{events:{signal:a},update:a+\"[0] === \"+a+\"[1] ? null : invert(\"+m+\", \"+a+\")\"}]}]}function r(e,t){return e.events.reduce(function(e,n){return n.between?t(e,n):(s.warn(n+\" is not an ordered event stream for interval selections\"),e)},[])}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"../../channel\"),s=e(\"../../log\"),l=e(\"../../scale\"),u=e(\"../../util\"),c=e(\"./selection\"),f=e(\"./transforms/scales\");n.BRUSH=\"_brush\",n.SCALE_TRIGGER=\"_scale_trigger\";var d={predicate:\"vlInterval\",scaleDomain:\"vlIntervalDomain\",signals:function(e,t){var a=t.name,d=f.default.has(t),p=[],m=[],g=[],h=[];if(t.translate&&!d){var v=\"!event.item || event.item.mark.name !== \"+u.stringValue(a+n.BRUSH);r(t,function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);n.indexOf(v)<0&&n.push(v)})}return t.project.forEach(function(n){var r=n.channel;if(r===o.X||r===o.Y){var a=i(e,t,r),f=c.channelSignalName(t,r,\"data\"),d=c.channelSignalName(t,r,\"visual\"),v=u.stringValue(e.scaleName(r)),y=e.getScaleComponent(r).get(\"type\"),b=l.hasContinuousDomain(y)?\"+\":\"\";p.push.apply(p,a),g.push(f),m.push(\"{encoding: \"+u.stringValue(r)+\", field: \"+u.stringValue(n.field)+\", extent: \"+f+\"}\"),h.push({scaleName:e.scaleName(r),expr:\"(!isArray(\"+f+\") || (\"+b+\"invert(\"+v+\", \"+d+\")[0] === \"+b+f+\"[0] && \"+b+\"invert(\"+v+\", \"+d+\")[1] === \"+b+f+\"[1]))\"})}else s.warn(\"Interval selections only support x and y encoding channels.\")}),d||p.push({name:a+n.SCALE_TRIGGER,update:h.map(function(e){return e.expr}).join(\" && \")+\" ? \"+(a+n.SCALE_TRIGGER)+\" : {}\"}),p.concat({name:a+c.TUPLE,on:[{events:g.map(function(e){return{signal:e}}),update:g.join(\" && \")+\" ? {unit: \"+c.unitName(e)+\", intervals: [\"+m.join(\", \")+\"]} : null\"}]})},modifyExpr:function(e,t){return t.name+c.TUPLE+\", \"+(\"global\"===t.resolve?\"true\":\"{unit: \"+c.unitName(e)+\"}\")},marks:function(e,t,i){var r=t.name,o=c.positionalProjections(t),s=o.xi,l=o.yi,d=\"data(\"+u.stringValue(t.name+c.STORE)+\")\";if(f.default.has(t))return i;var p={x:null!==s?{signal:r+\"_x[0]\"}:{value:0},y:null!==l?{signal:r+\"_y[0]\"}:{value:0},x2:null!==s?{signal:r+\"_x[1]\"}:{field:{group:\"width\"}},y2:null!==l?{signal:r+\"_y[1]\"}:{field:{group:\"height\"}}};\"global\"===t.resolve&&u.keys(p).forEach(function(t){p[t]=[a.__assign({test:d+\".length && \"+d+\"[0].unit === \"+c.unitName(e)},p[t]),{value:0}]});var m=t.mark,g=m.fill,h=m.fillOpacity,v=a.__rest(m,[\"fill\",\"fillOpacity\"]),y=u.keys(v).reduce(function(e,t){return e[t]={value:v[t]},e},{});return[{name:r+n.BRUSH+\"_bg\",type:\"rect\",clip:!0,encode:{enter:{fill:{value:g},fillOpacity:{value:h}},update:p}}].concat(i,{name:r+n.BRUSH,type:\"rect\",clip:!0,encode:{enter:a.__assign({fill:{value:\"transparent\"}},y),update:p}})}};n.default=d},{\"../../channel\":16,\"../../log\":106,\"../../scale\":109,\"../../util\":119,\"./selection\":80,\"./transforms/scales\":85,tslib:6}],79:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../../util\"),r=e(\"./selection\"),a=e(\"./transforms/nearest\"),o={predicate:\"vlMulti\",scaleDomain:\"vlMultiDomain\",signals:function(e,t){var n=t.project,o=a.default.has(t)?\"(item().isVoronoi ? datum.datum : datum)\":\"datum\",s=[],l=n.map(function(e){return i.stringValue(e.channel)}).filter(function(e){return e}).join(\", \"),u=n.map(function(e){return i.stringValue(e.field)}).join(\", \"),c=n.map(function(t){var n=t.channel,r=e.fieldDef(n);return r&&r.bin?(s.push(t.field),\"[\"+o+\"[\"+i.stringValue(e.field(n,{}))+\"], \"+o+\"[\"+i.stringValue(e.field(n,{binSuffix:\"end\"}))+\"]]\"):o+\"[\"+i.stringValue(t.field)+\"]\"}).join(\", \");return[{name:t.name+r.TUPLE,value:{},on:[{events:t.events,update:\"datum && item().mark.marktype !== 'group' ? {unit: \"+r.unitName(e)+\", encodings: [\"+l+\"], fields: [\"+u+\"], values: [\"+c+\"]\"+(s.length?\", \"+s.map(function(e){return i.stringValue(\"bin_\"+e)+\": 1\"}).join(\", \"):\"\")+\"} : null\",force:!0}]}]},modifyExpr:function(e,t){return t.name+r.TUPLE+\", \"+(\"global\"===t.resolve?\"null\":\"{unit: \"+r.unitName(e)+\"}\")}};n.default=o},{\"../../util\":119,\"./selection\":80,\"./transforms/nearest\":83}],80:[function(e,t,n){\"use strict\";function i(e,t){return r(e,function(n,i){t=i.marks?i.marks(e,n,t):t,v.forEachTransform(n,function(i){i.marks&&(t=i.marks(e,n,t))})}),t}function r(e,t){var n=e.component.selection;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];t(r,a(r.type))}}function a(e){switch(e){case\"single\":return h.default;case\"multi\":return g.default;case\"interval\":return m.default}return null}function o(e){for(var t=e.parent;t&&!p.isFacetModel(t);)t=t.parent;return t}Object.defineProperty(n,\"__esModule\",{value:!0});var s=e(\"tslib\"),l=e(\"vega-event-selector\"),u=e(\"../../channel\"),c=e(\"../../log\"),f=e(\"../../selection\"),d=e(\"../../util\"),p=e(\"../model\"),m=e(\"./interval\"),g=e(\"./multi\"),h=e(\"./single\"),v=e(\"./transforms/transforms\");n.STORE=\"_store\",n.TUPLE=\"_tuple\",n.MODIFY=\"_modify\",n.SELECTION_DOMAIN=\"_selection_domain_\",n.parseUnitSelection=function(e,t){var n={},i=e.config.selection;for(var r in t)!function(r){if(!t.hasOwnProperty(r))return\"continue\";var a=t[r],o=i[a.type];for(var u in o)\"encodings\"===u&&a.fields||\"fields\"===u&&a.encodings||(\"mark\"===u&&(a[u]=s.__assign({},o[u],a[u])),void 0!==a[u]&&!0!==a[u]||(a[u]=o[u]||a[u]));r=d.varName(r);var c=n[r]=s.__assign({},a,{name:r,events:d.isString(a.on)?l.selector(a.on,\"scope\"):a.on});v.forEachTransform(c,function(t){t.parse&&t.parse(e,a,c)})}(r);return n},n.assembleUnitSelectionSignals=function(e,t){r(e,function(i,r){var a=i.name,o=r.modifyExpr(e,i);t.push.apply(t,r.signals(e,i)),v.forEachTransform(i,function(n){n.signals&&(t=n.signals(e,i,t)),n.modifyExpr&&(o=n.modifyExpr(e,i,o))}),t.push({name:a+n.MODIFY,on:[{events:{signal:a+n.TUPLE},update:\"modify(\"+d.stringValue(i.name+n.STORE)+\", \"+o+\")\"}]})});var i=o(e);if(t.length&&i){var a=d.stringValue(i.getName(\"cell\"));t.unshift({name:\"facet\",value:{},on:[{events:l.selector(\"mousemove\",\"scope\"),update:\"isTuple(facet) ? facet : group(\"+a+\").datum\"}]})}return t},n.assembleTopLevelSignals=function(e,t){var n=!1;return r(e,function(i,r){r.topLevelSignals&&(t=r.topLevelSignals(e,i,t)),v.forEachTransform(i,function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,i,t))}),n=!0}),n&&(t.filter(function(e){return\"unit\"===e.name}).length||t.unshift({name:\"unit\",value:{},on:[{events:\"mousemove\",update:\"isTuple(group()) ? group() : unit\"}]})),t},n.assembleUnitSelectionData=function(e,t){return r(e,function(e){t.filter(function(t){return t.name===e.name+n.STORE}).length||t.push({name:e.name+n.STORE})}),t},n.assembleUnitSelectionMarks=i,n.assembleLayerSelectionMarks=function(e,t){return e.children.forEach(function(e){p.isUnitModel(e)&&(t=i(e,t))}),t},n.predicate=function(e,t,i){var r=[],o=d.logicalExpr(t,function(t){var o=d.varName(t),s=e.getSelectionComponent(o,t),l=d.stringValue(o+n.STORE);if(s.timeUnit){var u=i||e.component.data.raw,c=s.timeUnit.clone();u.parent?c.insertAsParentOf(u):u.parent=c}return r.push(l),a(s.type).predicate+\"(\"+l+\", datum\"+(\"global\"===s.resolve?\")\":\", \"+d.stringValue(s.resolve)+\")\")});return\"!(\"+r.map(function(e){return\"length(data(\"+e+\"))\"}).join(\" || \")+\") || (\"+o+\")\"},n.isRawSelectionDomain=function(e){return e.signal.indexOf(n.SELECTION_DOMAIN)>=0},n.selectionScaleDomain=function(e,t){var i=JSON.parse(t.signal.replace(n.SELECTION_DOMAIN,\"\")),r=d.varName(i.selection),o=e.component.selection&&e.component.selection[r];return o?(c.warn('Use \"bind\": \"scales\" to setup a binding for scales and selections within the same view.'),{signal:\"null\"}):(o=e.getSelectionComponent(r,i.selection),i.encoding||i.field||(i.field=o.project[0].field,o.project.length>1&&c.warn('A \"field\" or \"encoding\" must be specified when using a selection as a scale domain. Using \"field\": '+d.stringValue(i.field)+\".\")),{signal:a(o.type).scaleDomain+\"(\"+d.stringValue(r+n.STORE)+\", \"+d.stringValue(i.encoding||null)+\", \"+d.stringValue(i.field||null)+(\"global\"===o.resolve?\")\":\", \"+d.stringValue(o.resolve)+\")\")})},n.unitName=function(e){var t=d.stringValue(e.name),n=o(e);return n&&(t+=(n.facet.row?\" + '_' + facet[\"+d.stringValue(n.field(\"row\"))+\"]\":\"\")+(n.facet.column?\" + '_' + facet[\"+d.stringValue(n.field(\"column\"))+\"]\":\"\")),t},n.requiresSelectionId=function(e){var t=!1;return r(e,function(e){t=t||e.project.some(function(e){return e.field===f.SELECTION_ID})}),t},n.channelSignalName=function(e,t,n){return d.varName(e.name+\"_\"+(\"visual\"===n?t:e.fields[t]))},n.positionalProjections=function(e){var t=null,n=null,i=null,r=null;return e.project.forEach(function(e,a){e.channel===u.X?(t=e,n=a):e.channel===u.Y&&(i=e,r=a)}),{x:t,xi:n,y:i,yi:r}}},{\"../../channel\":16,\"../../log\":106,\"../../selection\":110,\"../../util\":119,\"../model\":67,\"./interval\":78,\"./multi\":79,\"./single\":81,\"./transforms/transforms\":87,tslib:6,\"vega-event-selector\":10}],81:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../../util\"),r=e(\"./multi\"),a=e(\"./selection\"),o={predicate:\"vlSingle\",scaleDomain:\"vlSingleDomain\",signals:r.default.signals,topLevelSignals:function(e,t,n){var r=n.filter(function(e){return e.name===t.name}),o=\"data(\"+i.stringValue(t.name+a.STORE)+\")\",s=o+\"[0].values\";return r.length?n:n.concat({name:t.name,update:o+\".length && {\"+t.project.map(function(e,t){return e.field+\": \"+s+\"[\"+t+\"]\"}).join(\", \")+\"}\"})},modifyExpr:function(e,t){return t.name+a.TUPLE+\", \"+(\"global\"===t.resolve?\"true\":\"{unit: \"+a.unitName(e)+\"}\")}};n.default=o},{\"../../util\":119,\"./multi\":79,\"./selection\":80}],82:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../../../util\"),r=e(\"../selection\"),a=e(\"./nearest\"),o={has:function(e){return\"single\"===e.type&&\"global\"===e.resolve&&e.bind&&\"scales\"!==e.bind},topLevelSignals:function(e,t,n){var r=t.name,o=t.project,s=t.bind,l=a.default.has(t)?\"(item().isVoronoi ? datum.datum : datum)\":\"datum\";return o.forEach(function(e){var a=i.varName(r+\"_\"+e.field);n.filter(function(e){return e.name===a}).length||n.unshift({name:a,value:\"\",on:[{events:t.events,update:\"datum && item().mark.marktype !== 'group' ? \"+l+\"[\"+i.stringValue(e.field)+\"] : null\"}],bind:s[e.field]||s[e.channel]||s})}),n},signals:function(e,t,n){var a=t.name,o=t.project,s=n.filter(function(e){return e.name===a+r.TUPLE})[0],l=o.map(function(e){return i.stringValue(e.field)}).join(\", \"),u=o.map(function(e){return i.varName(a+\"_\"+e.field)});return s.update=u.join(\" && \")+\" ? {fields: [\"+l+\"], values: [\"+u.join(\", \")+\"]} : null\",delete s.value,delete s.on,n}};n.default=o},{\"../../../util\":119,\"../selection\":80,\"./nearest\":83}],83:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../../../log\"),r=e(\"../selection\"),a={has:function(e){return\"interval\"!==e.type&&e.nearest},marks:function(e,t,n){var a=r.positionalProjections(t),o=a.x,s=a.y,l=e.mark();if(\"line\"===l||\"area\"===l)return i.warn(i.message.nearestNotSupportForContinuous(l)),n;var u={name:e.getName(\"voronoi\"),type:\"path\",from:{data:e.getName(\"marks\")},encode:{enter:{fill:{value:\"transparent\"},strokeWidth:{value:.35},stroke:{value:\"transparent\"},isVoronoi:{value:!0}}},transform:[{type:\"voronoi\",x:o||!o&&!s?\"datum.x\":{expr:\"0\"},y:s||!o&&!s?\"datum.y\":{expr:\"0\"},size:[e.getSizeSignalRef(\"width\"),e.getSizeSignalRef(\"height\")]}]},c=0,f=!1;return n.forEach(function(t,n){var i=t.name||\"\";i===e.component.mark[0].name?c=n:i.indexOf(\"voronoi\")>=0&&(f=!0)}),f||n.splice(c+1,0,u),n}};n.default=a},{\"../../../log\":106,\"../selection\":80}],84:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../../../log\"),r=e(\"../../../util\"),a=e(\"../../data/timeunit\"),o={has:function(e){return void 0!==e.fields||void 0!==e.encodings},parse:function(e,t,n){var o={},s={};(t.fields||[]).forEach(function(e){return o[e]=null}),(t.encodings||[]).forEach(function(t){var n=e.fieldDef(t);if(n)if(n.timeUnit){var r=e.field(t);o[r]=t,s[r]={as:r,field:n.field,timeUnit:n.timeUnit}}else o[n.field]=t;else i.warn(i.message.cannotProjectOnChannelWithoutField(t))});var l=n.project||(n.project=[]);for(var u in o)o.hasOwnProperty(u)&&l.push({field:u,channel:o[u]});var c=n.fields||(n.fields={});l.filter(function(e){return e.channel}).forEach(function(e){return c[e.channel]=e.field}),r.keys(s).length&&(n.timeUnit=new a.TimeUnitNode(s))}};n.default=o},{\"../../../log\":106,\"../../../util\":119,\"../../data/timeunit\":44}],85:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../../../log\"),r=e(\"../../../scale\"),a=e(\"../../../util\"),o=e(\"../selection\"),s={has:function(e){return\"interval\"===e.type&&\"global\"===e.resolve&&e.bind&&\"scales\"===e.bind},parse:function(e,t,n){var a=n.scales=[];n.project.forEach(function(t){var s=t.channel,l=e.getScaleComponent(s),u=l?l.get(\"type\"):void 0;l&&r.hasContinuousDomain(u)&&!r.isBinScale(u)?(l.set(\"domainRaw\",{signal:o.channelSignalName(n,s,\"data\")},!0),a.push(s)):i.warn(\"Scale bindings are currently only supported for scales with unbinned, continuous domains.\")})},topLevelSignals:function(e,t,n){if(!e.parent)return n;var i=t.scales.filter(function(e){return!n.filter(function(n){return n.name===o.channelSignalName(t,e,\"data\")}).length});return n.concat(i.map(function(e){return{name:o.channelSignalName(t,e,\"data\")}}))},signals:function(e,t,n){return e.parent&&t.scales.forEach(function(e){var i=n.filter(function(n){return n.name===o.channelSignalName(t,e,\"data\")})[0];i.push=\"outer\",delete i.value,delete i.update}),n}};n.default=s,n.domain=function(e,t){return\"domain(\"+a.stringValue(e.scaleName(t))+\")\"}},{\"../../../log\":106,\"../../../scale\":109,\"../../../util\":119,\"../selection\":80}],86:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"../selection\"),r={has:function(e){return\"multi\"===e.type&&e.toggle},signals:function(e,t,n){return n.concat({name:t.name+\"_toggle\",value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function(e,t,n){var r=t.name+i.TUPLE,a=t.name+\"_toggle\";return a+\" ? null : \"+r+\", \"+(\"global\"===t.resolve?a+\" ? null : true, \":a+\" ? null : {unit: \"+i.unitName(e)+\"}, \")+a+\" ? \"+r+\" : null\"}};n.default=r},{\"../selection\":80}],87:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"./inputs\"),r=e(\"./nearest\"),a=e(\"./project\"),o=e(\"./scales\"),s=e(\"./toggle\"),l=e(\"./translate\"),u=e(\"./zoom\"),c={project:a.default,toggle:s.default,scales:o.default,translate:l.default,zoom:u.default,inputs:i.default,nearest:r.default};n.forEachTransform=function(e,t){for(var n in c)c[n].has(e)&&t(c[n])}},{\"./inputs\":82,\"./nearest\":83,\"./project\":84,\"./scales\":85,\"./toggle\":86,\"./translate\":88,\"./zoom\":89}],88:[function(e,t,n){\"use strict\";function i(e,t,n,i,r){var o=t.name,f=l.default.has(t),d=r.filter(function(e){return e.name===s.channelSignalName(t,n,f?\"data\":\"visual\")})[0],p=o+u,m=o+c,g=e.getSizeSignalRef(i).signal,h=e.getScaleComponent(n),v=h.get(\"type\"),y=f&&n===a.X?\"-\":\"\",b=p+\".extent_\"+n,_=\"\"+y+m+\".\"+n+\" / \"+(f?\"\"+g:\"span(\"+b+\")\"),S=(f?\"log\"===v?\"panLog\":\"pow\"===v?\"panPow\":\"panLinear\":\"panLinear\")+\"(\"+b+\", \"+_+(f&&\"pow\"===v?\", \"+(h.get(\"exponent\")||1):\"\")+\")\";d.on.push({events:{signal:m},update:f?S:\"clampRange(\"+S+\", 0, \"+g+\")\"})}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"vega-event-selector\"),a=e(\"../../../channel\"),o=e(\"../interval\"),s=e(\"../selection\"),l=e(\"./scales\"),u=\"_translate_anchor\",c=\"_translate_delta\",f={has:function(e){return\"interval\"===e.type&&e.translate},signals:function(e,t,n){var f=t.name,d=l.default.has(t),p=f+u,m=s.positionalProjections(t),g=m.x,h=m.y,v=r.selector(t.translate,\"scope\");return d||(v=v.map(function(e){return e.between[0].markname=f+o.BRUSH,e})),n.push({name:p,value:{},on:[{events:v.map(function(e){return e.between[0]}),update:\"{x: x(unit), y: y(unit)\"+(null!==g?\", extent_x: \"+(d?l.domain(e,a.X):\"slice(\"+s.channelSignalName(t,\"x\",\"visual\")+\")\"):\"\")+(null!==h?\", extent_y: \"+(d?l.domain(e,a.Y):\"slice(\"+s.channelSignalName(t,\"y\",\"visual\")+\")\"):\"\")+\"}\"}]},{name:f+c,value:{},on:[{events:v,update:\"{x: \"+p+\".x - x(unit), y: \"+p+\".y - y(unit)}\"}]}),null!==g&&i(e,t,a.X,\"width\",n),null!==h&&i(e,t,a.Y,\"height\",n),n}};n.default=f},{\"../../../channel\":16,\"../interval\":78,\"../selection\":80,\"./scales\":85,\"vega-event-selector\":10}],89:[function(e,t,n){\"use strict\";function i(e,t,n,i,r){var a=t.name,o=u.default.has(t),s=r.filter(function(e){return e.name===l.channelSignalName(t,n,o?\"data\":\"visual\")})[0],d=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(n),m=p.get(\"type\"),g=o?u.domain(e,n):s.name,h=a+f,v=\"\"+a+c+\".\"+n,y=(o?\"log\"===m?\"zoomLog\":\"pow\"===m?\"zoomPow\":\"zoomLinear\":\"zoomLinear\")+\"(\"+g+\", \"+v+\", \"+h+(o&&\"pow\"===m?\", \"+(p.get(\"exponent\")||1):\"\")+\")\";s.on.push({events:{signal:h},update:o?y:\"clampRange(\"+y+\", 0, \"+d+\")\"})}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"vega-event-selector\"),a=e(\"../../../channel\"),o=e(\"../../../util\"),s=e(\"../interval\"),l=e(\"../selection\"),u=e(\"./scales\"),c=\"_zoom_anchor\",f=\"_zoom_delta\",d={has:function(e){return\"interval\"===e.type&&e.zoom},signals:function(e,t,n){var d=t.name,p=u.default.has(t),m=d+f,g=l.positionalProjections(t),h=g.x,v=g.y,y=o.stringValue(e.scaleName(a.X)),b=o.stringValue(e.scaleName(a.Y)),_=r.selector(t.zoom,\"scope\");return p||(_=_.map(function(e){return e.markname=d+s.BRUSH,e})),n.push({name:d+c,on:[{events:_,update:p?\"{\"+[y?\"x: invert(\"+y+\", x(unit))\":\"\",b?\"y: invert(\"+b+\", y(unit))\":\"\"].filter(function(e){return!!e}).join(\", \")+\"}\":\"{x: x(unit), y: y(unit)}\"}]},{name:m,on:[{events:_,force:!0,update:\"pow(1.001, event.deltaY * pow(16, event.deltaMode))\"}]}),null!==h&&i(e,t,\"x\",\"width\",n),null!==v&&i(e,t,\"y\",\"height\",n),n}};n.default=d},{\"../../../channel\":16,\"../../../util\":119,\"../interval\":78,\"../selection\":80,\"./scales\":85,\"vega-event-selector\":10}],90:[function(e,t,n){\"use strict\";function i(e,t,n,i){return e.explicit&&t.explicit&&a.warn(a.message.mergeConflictingProperty(n,i,e.value,t.value)),e}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"../log\"),o=e(\"../util\"),s=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.explicit=e,this.implicit=t}return e.prototype.clone=function(){return new e(o.duplicate(this.explicit),o.duplicate(this.implicit))},e.prototype.combine=function(){return r.__assign({},this.explicit,this.implicit)},e.prototype.get=function(e){return void 0!==this.explicit[e]?this.explicit[e]:this.implicit[e]},e.prototype.getWithExplicit=function(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}},e.prototype.setWithExplicit=function(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)},e.prototype.set=function(e,t,n){return delete this[n?\"implicit\":\"explicit\"][e],this[n?\"explicit\":\"implicit\"][e]=t,this},e.prototype.copyKeyFromSplit=function(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)},e.prototype.copyKeyFromObject=function(e,t){void 0!==t[e]&&this.set(e,t[e],!0)},e}();n.Split=s,n.makeExplicit=function(e){return{explicit:!0,value:e}},n.makeImplicit=function(e){return{explicit:!1,value:e}},n.tieBreakByComparing=function(e){return function(t,n,r,a){var o=e(t.value,n.value);return o>0?t:o<0?n:i(t,n,r,a)}},n.defaultTieBreaker=i,n.mergeValuesWithExplicit=function(e,t,n,r,a){return void 0===a&&(a=i),void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:e.value===t.value?e:a(e,t,n,r)}},{\"../log\":106,\"../util\":119,tslib:6}],91:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"../channel\"),a=e(\"../encoding\"),o=e(\"../encoding\"),s=e(\"../fielddef\"),l=e(\"../mark\"),u=e(\"../stack\"),c=e(\"../util\"),f=e(\"./axis/parse\"),d=e(\"./data/parse\"),p=e(\"./layoutsize/assemble\"),m=e(\"./layoutsize/parse\"),g=e(\"./mark/init\"),h=e(\"./mark/mark\"),v=e(\"./model\"),y=e(\"./repeater\"),b=e(\"./selection/selection\"),_=function(e){function t(t,n,r,a,s,c,f){void 0===a&&(a={});var d=e.call(this,t,n,r,c,void 0)||this;d.fit=f,d.type=\"unit\",d.specifiedScales={},d.specifiedAxes={},d.specifiedLegends={},d.selection={},d.children=[],d.initSize(i.__assign({},a,t.width?{width:t.width}:{},t.height?{height:t.height}:{})),d.markDef=l.isMarkDef(t.mark)?i.__assign({},t.mark):{type:t.mark};var p=d.markDef.type,m=d.encoding=o.normalizeEncoding(y.replaceRepeaterInEncoding(t.encoding||{},s),p);return d.stack=u.stack(p,m,d.config.stack),d.specifiedScales=d.initScales(p,m),d.encoding=g.initEncoding(d.markDef,m,d.stack,d.config),d.specifiedAxes=d.initAxes(m),d.specifiedLegends=d.initLegend(m),d.selection=t.selection,d}return i.__extends(t,e),t.prototype.scaleDomain=function(e){var t=this.specifiedScales[e];return t?t.domain:void 0},t.prototype.sort=function(e){return(this.getMapping()[e]||{}).sort},t.prototype.axis=function(e){return this.specifiedAxes[e]},t.prototype.legend=function(e){return this.specifiedLegends[e]},t.prototype.initScales=function(e,t){return r.SCALE_CHANNELS.reduce(function(e,n){var i,r,a=t[n];return s.isFieldDef(a)?(i=a,r=a.scale):s.isConditionalDef(a)&&s.isFieldDef(a.condition)?(i=a.condition,r=a.condition.scale):\"x\"===n?i=s.getFieldDef(t.x2):\"y\"===n&&(i=s.getFieldDef(t.y2)),i&&(e[n]=r||{}),e},{})},t.prototype.initAxes=function(e){return[r.X,r.Y].reduce(function(t,n){var a=e[n];if(s.isFieldDef(a)||n===r.X&&s.isFieldDef(e.x2)||n===r.Y&&s.isFieldDef(e.y2)){var o=s.isFieldDef(a)?a.axis:null;null!==o&&!1!==o&&(t[n]=i.__assign({},o))}return t},{})},t.prototype.initLegend=function(e){return r.NONPOSITION_SCALE_CHANNELS.reduce(function(t,n){var r=e[n];if(r){var a=s.isFieldDef(r)?r.legend:r.condition&&s.isFieldDef(r.condition)?r.condition.legend:null;null!==a&&!1!==a&&(t[n]=i.__assign({},a))}return t},{})},t.prototype.parseData=function(){this.component.data=d.parseData(this)},t.prototype.parseLayoutSize=function(){m.parseUnitLayoutSize(this)},t.prototype.parseSelection=function(){this.component.selection=b.parseUnitSelection(this,this.selection)},t.prototype.parseMarkGroup=function(){this.component.mark=h.parseMarkGroup(this)},t.prototype.parseAxisAndHeader=function(){this.component.axes=f.parseUnitAxis(this)},t.prototype.assembleSelectionTopLevelSignals=function(e){return b.assembleTopLevelSignals(this,e)},t.prototype.assembleSelectionSignals=function(){return b.assembleUnitSelectionSignals(this,[])},t.prototype.assembleSelectionData=function(e){return b.assembleUnitSelectionData(this,e)},t.prototype.assembleLayout=function(){return null},t.prototype.assembleLayoutSignals=function(){return p.assembleLayoutSignals(this)},t.prototype.assembleMarks=function(){var e=this.component.mark||[];return this.parent&&v.isLayerModel(this.parent)||(e=b.assembleUnitSelectionMarks(this,e)),e.map(this.correctDataNames)},t.prototype.assembleLayoutSize=function(){return{width:this.getSizeSignalRef(\"width\"),height:this.getSizeSignalRef(\"height\")}},t.prototype.getMapping=function(){return this.encoding},t.prototype.toSpec=function(e,t){var n,i=c.duplicate(this.encoding);return n={mark:this.markDef,encoding:i},e||(n.config=c.duplicate(this.config)),t||(n.data=c.duplicate(this.data)),n},t.prototype.mark=function(){return this.markDef.type},t.prototype.channelHasField=function(e){return a.channelHasField(this.encoding,e)},t.prototype.fieldDef=function(e){var t=this.encoding[e];return s.getFieldDef(t)},t}(v.ModelWithField);n.UnitModel=_},{\"../channel\":16,\"../encoding\":99,\"../fielddef\":101,\"../mark\":108,\"../stack\":113,\"../util\":119,\"./axis/parse\":20,\"./data/parse\":41,\"./layoutsize/assemble\":48,\"./layoutsize/parse\":49,\"./mark/init\":57,\"./mark/mark\":59,\"./model\":67,\"./repeater\":69,\"./selection/selection\":80,tslib:6}],92:[function(e,t,n){\"use strict\";function i(e){return!!e.type}function r(e){return l.__assign({},e,{encoding:c.reduce(e.encoding,function(e,t,i){return g.indexOf(i)>-1?e[i]=t:p.warn(p.message.incompatibleChannel(i,n.BOXPLOT)),e},{})})}function a(e){var t=e.mark,r=e.encoding;l.__rest(e,[\"mark\",\"encoding\"]);if(d.isFieldDef(r.x)&&d.isContinuous(r.x)){if(d.isFieldDef(r.y)&&d.isContinuous(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===n.BOXPLOT)return\"vertical\";if(void 0===r.y.aggregate&&r.x.aggregate===n.BOXPLOT)return\"horizontal\";if(r.x.aggregate===n.BOXPLOT&&r.y.aggregate===n.BOXPLOT)throw new Error(\"Both x and y cannot have aggregate\");return i(t)&&t.orient?t.orient:\"vertical\"}return\"horizontal\"}if(d.isFieldDef(r.y)&&d.isContinuous(r.y))return\"vertical\";throw new Error(\"Need a valid continuous axis for boxplots\")}function o(e,t){e.mark;var i,r,a=e.encoding;l.__rest(e,[\"mark\",\"encoding\"]);if(\"vertical\"===t?(r=\"y\",i=a.y):(r=\"x\",i=a.x),i&&i.aggregate){var o=i.aggregate,s=l.__rest(i,[\"aggregate\"]);o!==n.BOXPLOT&&p.warn(\"Continuous axis should not have customized aggregation function \"+o),i=s}return{continuousAxisChannelDef:i,continuousAxis:r}}function s(e,t,i){var r=o(e,t),a=r.continuousAxisChannelDef,s=r.continuousAxis,l=e.encoding,u=void 0===i,c=[{aggregate:\"q1\",field:a.field,as:\"lowerBox\"},{aggregate:\"q3\",field:a.field,as:\"upperBox\"},{aggregate:\"median\",field:a.field,as:\"midBox\"}],p=[];u?(c.push({aggregate:\"min\",field:a.field,as:\"lowerWhisker\"}),c.push({aggregate:\"max\",field:a.field,as:\"upperWhisker\"})):p=[{calculate:\"datum.upperBox - datum.lowerBox\",as:\"IQR\"},{calculate:\"datum.lowerBox - datum.IQR * \"+i,as:\"lowerWhisker\"},{calculate:\"datum.upperBox + datum.IQR * \"+i,as:\"lowerWhisker\"}];var m=[],g=[],h=[],v={};return f.forEach(l,function(e,t){if(t!==s)if(d.isFieldDef(e)){if(e.aggregate&&e.aggregate!==n.BOXPLOT)c.push({aggregate:e.aggregate,field:e.field,as:d.field(e)});else if(void 0===e.aggregate){var i=d.field(e),r=e.bin;if(r){var a=e.field;g.push({bin:r,field:a,as:i})}else if(e.timeUnit){var o=e.timeUnit,u=e.field;h.push({timeUnit:o,field:u,as:i})}m.push(i)}v[t]={field:d.field(e),type:e.type}}else v[t]=l[t]}),{transform:[].concat(g,h,[{summarize:c,groupby:m}],p),continuousAxisChannelDef:a,continuousAxis:s,encodingWithoutContinuousAxis:v}}Object.defineProperty(n,\"__esModule\",{value:!0});var l=e(\"tslib\"),u=e(\"vega-util\"),c=e(\"../encoding\"),f=e(\"./../encoding\"),d=e(\"./../fielddef\"),p=e(\"./../log\"),m=e(\"./common\");n.BOXPLOT=\"box-plot\",n.isBoxPlotDef=i,n.BOXPLOT_STYLES=[\"boxWhisker\",\"box\",\"boxMid\"],n.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX={box:[\"size\",\"color\"],boxWhisker:[\"color\"],boxMid:[\"color\"]};var g=[\"x\",\"y\",\"color\",\"detail\",\"opacity\",\"size\"];n.filterUnsupportedChannels=r,n.normalizeBoxPlot=function(e,t){var n=(e=r(e)).mark,o=(e.encoding,e.selection),c=l.__rest(e,[\"mark\",\"encoding\",\"selection\"]),f=void 0;i(n)&&n.extent&&u.isNumber(n.extent)&&(f=n.extent);var d=s(e,a(e),f),p=d.transform,g=d.continuousAxisChannelDef,h=d.continuousAxis,v=d.encodingWithoutContinuousAxis,y=(v.color,v.size),b=l.__rest(v,[\"color\",\"size\"]),_=y?{size:y}:m.getMarkSpecificConfigMixins(t.box,\"size\"),S={};return g.scale&&(S.scale=g.scale),g.axis&&(S.axis=g.axis),l.__assign({},c,{transform:p,layer:[{mark:{type:\"rule\",style:\"boxWhisker\"},encoding:l.__assign((x={},x[h]=l.__assign({field:\"lowerWhisker\",type:g.type},S),x[h+\"2\"]={field:\"lowerBox\",type:g.type},x),b,m.getMarkSpecificConfigMixins(t.boxWhisker,\"color\"))},{mark:{type:\"rule\",style:\"boxWhisker\"},encoding:l.__assign((E={},E[h]={field:\"upperBox\",type:g.type},E[h+\"2\"]={field:\"upperWhisker\",type:g.type},E),b,m.getMarkSpecificConfigMixins(t.boxWhisker,\"color\"))},l.__assign({},o?{selection:o}:{},{mark:{type:\"bar\",style:\"box\"},encoding:l.__assign((O={},O[h]={field:\"lowerBox\",type:g.type},O[h+\"2\"]={field:\"upperBox\",type:g.type},O),v,v.color?{}:m.getMarkSpecificConfigMixins(t.box,\"color\"),_)}),{mark:{type:\"tick\",style:\"boxMid\"},encoding:l.__assign((N={},N[h]={field:\"midBox\",type:g.type},N),b,m.getMarkSpecificConfigMixins(t.boxMid,\"color\"),_)}]});var x,E,O,N}},{\"../encoding\":99,\"./../encoding\":99,\"./../fielddef\":101,\"./../log\":106,\"./common\":93,tslib:6,\"vega-util\":11}],93:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.getMarkSpecificConfigMixins=function(e,t){var n=e[t];return void 0!==n?(i={},i[t]={value:n},i):{};var i}},{}],94:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\");n.ERRORBAR=\"error-bar\",n.normalizeErrorBar=function(e){e.mark,e.selection;var t=e.encoding,n=i.__rest(e,[\"mark\",\"selection\",\"encoding\"]),r=(t.size,i.__rest(t,[\"size\"])),a=(t.x2,t.y2,i.__rest(t,[\"x2\",\"y2\"])),o=(a.x,a.y,i.__rest(a,[\"x\",\"y\"]));if(!t.x2&&!t.y2)throw new Error(\"Neither x2 or y2 provided\");return i.__assign({},n,{layer:[{mark:\"rule\",encoding:r},{mark:\"tick\",encoding:a},{mark:\"tick\",encoding:t.x2?i.__assign({x:t.x2,y:t.y},o):i.__assign({x:t.x,y:t.y2},o)}]})}},{tslib:6}],95:[function(e,t,n){\"use strict\";function i(e,t){l[e]=t}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"./../mark\"),o=e(\"./boxplot\"),s=e(\"./errorbar\"),l={};n.add=i,n.remove=function(e){delete l[e]},n.COMPOSITE_MARK_STYLES=o.BOXPLOT_STYLES,n.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX=r.__assign({},o.VL_ONLY_BOXPLOT_CONFIG_PROPERTY_INDEX),i(o.BOXPLOT,o.normalizeBoxPlot),i(s.ERRORBAR,s.normalizeErrorBar),n.normalize=function(e,t){var n=a.isMarkDef(e.mark)?e.mark.type:e.mark,i=l[n];if(i)return i(e,t);throw new Error(\"Unregistered composite mark \"+n)}},{\"./../mark\":108,\"./boxplot\":92,\"./errorbar\":94,tslib:6}],96:[function(e,t,n){\"use strict\";function i(e,t,n){var i=\"title\"===t?p.extractTitleConfig(e.title).mark:e[t];\"view\"===t&&(n=\"cell\");var a=r.__assign({},i,e.style[t]);m.keys(a).length>0&&(e.style[n||t]=a),delete e[t]}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"tslib\"),a=e(\"./compositemark\"),o=e(\"./compositemark/index\"),s=e(\"./guide\"),l=e(\"./legend\"),u=e(\"./mark\"),c=e(\"./mark\"),f=e(\"./scale\"),d=e(\"./selection\"),p=e(\"./title\"),m=e(\"./util\");n.defaultViewConfig={width:200,height:200},n.defaultConfig={padding:5,timeFormat:\"%b %d, %Y\",countTitle:\"Number of Records\",invalidValues:\"filter\",view:n.defaultViewConfig,mark:c.defaultMarkConfig,area:{},bar:c.defaultBarConfig,circle:{},line:{},point:{},rect:{},rule:{color:\"black\"},square:{},text:{color:\"black\"},tick:c.defaultTickConfig,box:{size:14},boxWhisker:{},boxMid:{color:\"white\"},scale:f.defaultScaleConfig,axis:{},axisX:{},axisY:{minExtent:30},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:l.defaultLegendConfig,selection:d.defaultConfig,style:{},title:{}},n.initConfig=function(e){return m.mergeDeep(m.duplicate(n.defaultConfig),e)};var g=[\"view\"].concat(u.PRIMITIVE_MARKS,a.COMPOSITE_MARK_STYLES),h=[\"padding\",\"numberFormat\",\"timeFormat\",\"countTitle\",\"stack\",\"scale\",\"selection\",\"invalidValues\",\"overlay\"],v=r.__assign({view:[\"width\",\"height\"]},u.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX,o.VL_ONLY_COMPOSITE_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX);n.stripAndRedirectConfig=function(e){e=m.duplicate(e);for(var t=0,n=h;t<n.length;t++)delete e[O=n[t]];if(e.axis)for(var r=0,a=s.VL_ONLY_GUIDE_CONFIG;r<a.length;r++)O=a[r],delete e.axis[O];if(e.legend)for(var o=0,l=s.VL_ONLY_GUIDE_CONFIG;o<l.length;o++)O=l[o],delete e.legend[O];if(e.mark)for(var c=0,f=u.VL_ONLY_MARK_CONFIG_PROPERTIES;c<f.length;c++)O=f[c],delete e.mark[O];for(var d=0,p=g;d<p.length;d++){for(var y=p[d],b=0,_=u.VL_ONLY_MARK_CONFIG_PROPERTIES;b<_.length;b++)O=_[b],delete e[y][O];var S=v[y];if(S)for(var x=0,E=S;x<E.length;x++)O=E[x],delete e[y][O];i(e,y)}i(e,\"title\",\"group-title\");for(var O in e)m.isObject(e[O])&&0===m.keys(e[O]).length&&delete e[O];return m.keys(e).length>0?e:void 0}},{\"./compositemark\":95,\"./compositemark/index\":95,\"./guide\":103,\"./legend\":105,\"./mark\":108,\"./scale\":109,\"./selection\":110,\"./title\":115,\"./util\":119,tslib:6}],97:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.isUrlData=function(e){return!!e.url},n.isInlineData=function(e){return!!e.values},n.isNamedData=function(e){return!!e.name},n.MAIN=\"main\",n.RAW=\"raw\"},{}],98:[function(e,t,n){\"use strict\";function i(e){if(s.isNumber(e))return e>4&&o.warn(o.message.invalidTimeUnit(\"quarter\",e)),e-1+\"\";throw new Error(o.message.invalidTimeUnit(\"quarter\",e))}function r(e){if(s.isNumber(e))return e-1+\"\";var t=e.toLowerCase(),i=n.MONTHS.indexOf(t);if(-1!==i)return i+\"\";var r=t.substr(0,3),a=n.SHORT_MONTHS.indexOf(r);if(-1!==a)return a+\"\";throw new Error(o.message.invalidTimeUnit(\"month\",e))}function a(e){if(s.isNumber(e))return e%7+\"\";var t=e.toLowerCase(),i=n.DAYS.indexOf(t);if(-1!==i)return i+\"\";var r=t.substr(0,3),a=n.SHORT_DAYS.indexOf(r);if(-1!==a)return a+\"\";throw new Error(o.message.invalidTimeUnit(\"day\",e))}Object.defineProperty(n,\"__esModule\",{value:!0});var o=e(\"./log\"),s=e(\"./util\"),l=2006;n.isDateTime=function(e){return!(!e||!(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))},n.MONTHS=[\"january\",\"february\",\"march\",\"april\",\"may\",\"june\",\"july\",\"august\",\"september\",\"october\",\"november\",\"december\"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=[\"sunday\",\"monday\",\"tuesday\",\"wednesday\",\"thursday\",\"friday\",\"saturday\"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=function(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day&&s.keys(e).length>1&&(o.warn(o.message.droppedDay(e)),delete(e=s.duplicate(e)).day),void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(l):n.push(0),void 0!==e.month){var u=t?r(e.month):e.month;n.push(u)}else if(void 0!==e.quarter){var c=t?i(e.quarter):e.quarter;n.push(c+\"*3\")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var f=t?a(e.day):e.day;n.push(f+\"+1\")}else n.push(1);for(var d=0,p=[\"hours\",\"minutes\",\"seconds\",\"milliseconds\"];d<p.length;d++){var m=p[d];void 0!==e[m]?n.push(e[m]):n.push(0)}return e.utc?\"utc(\"+n.join(\", \")+\")\":\"datetime(\"+n.join(\", \")+\")\"}},{\"./log\":106,\"./util\":119}],99:[function(e,t,n){\"use strict\";function i(e,t){var n=e&&e[t];return!!n&&(s.isArray(n)?s.some(n,function(e){return!!e.field}):a.isFieldDef(n)||a.hasConditionFieldDef(n))}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"./channel\"),a=e(\"./fielddef\"),o=e(\"./log\"),s=e(\"./util\");n.channelHasField=i,n.isAggregate=function(e){return s.some(r.CHANNELS,function(t){if(i(e,t)){var n=e[t];if(s.isArray(n))return s.some(n,function(e){return!!e.aggregate});var r=a.getFieldDef(n);return r&&!!r.aggregate}return!1})},n.normalizeEncoding=function(e,t){return s.keys(e).reduce(function(n,i){if(!r.supportMark(i,t))return o.warn(o.message.incompatibleChannel(i,t)),n;if(\"size\"===i&&\"line\"===t){var l=a.getFieldDef(e[i]);if(l&&l.aggregate)return o.warn(o.message.incompatibleChannel(i,t,\"when the field is aggregated.\")),n}if(\"detail\"===i||\"order\"===i)(u=e[i])&&(n[i]=(s.isArray(u)?u:[u]).reduce(function(e,t){return a.isFieldDef(t)?e.push(a.normalizeFieldDef(t,i)):o.warn(o.message.emptyFieldDef(t,i)),e},[]));else{var u=e[i];if(!a.isFieldDef(u)&&!a.isValueDef(u)&&!a.isConditionalDef(u))return o.warn(o.message.emptyFieldDef(u,i)),n;n[i]=a.normalize(u,i)}return n},{})},n.isRanged=function(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)},n.fieldDefs=function(e){var t=[];return r.CHANNELS.forEach(function(n){if(i(e,n)){var r=e[n];(s.isArray(r)?r:[r]).forEach(function(e){a.isFieldDef(e)?t.push(e):a.hasConditionFieldDef(e)&&t.push(e.condition)})}}),t},n.forEach=function(e,t,n){e&&s.keys(e).forEach(function(i){s.isArray(e[i])?e[i].forEach(function(e){t.call(n,e,i)}):t.call(n,e[i],i)})},n.reduce=function(e,t,n,i){return e?s.keys(e).reduce(function(n,r){return s.isArray(e[r])?e[r].reduce(function(e,n){return t.call(i,e,n,r)},n):t.call(i,n,e[r],r)},n):n}},{\"./channel\":16,\"./fielddef\":101,\"./log\":106,\"./util\":119}],100:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0})},{}],101:[function(e,t,n){\"use strict\";function i(e){return!!e&&!!e.condition&&r(e.condition)}function r(e){return!(!e||!e.field&&\"count\"!==e.aggregate)}function a(e){switch(e.type){case\"nominal\":case\"ordinal\":return!0;case\"quantitative\":return!!e.bin;case\"temporal\":return!1}throw new Error(h.message.invalidFieldType(e.type))}function o(e){return!a(e)}function s(e){return\"count\"===e.aggregate}function l(e,t){if(e.timeUnit)return\"temporal\";if(e.bin)return\"quantitative\";switch(g.rangeType(t)){case\"continuous\":return\"quantitative\";case\"discrete\":case\"flexible\":return\"nominal\";default:return\"quantitative\"}}function u(e,t){if(e.aggregate&&!p.isAggregateOp(e.aggregate)){e.aggregate;var n=d.__rest(e,[\"aggregate\"]);h.warn(h.message.invalidAggregate(e.aggregate)),e=n}if(e.timeUnit&&(e=d.__assign({},e,{timeUnit:v.normalizeTimeUnit(e.timeUnit)})),e.bin&&(e=d.__assign({},e,{bin:c(e.bin,t)})),e.type){var i=y.getFullName(e.type);e.type!==i&&(e=d.__assign({},e,{type:i})),\"quantitative\"!==e.type&&p.isCountingAggregateOp(e.aggregate)&&(h.warn(h.message.invalidFieldTypeForCountAggregate(e.type,e.aggregate)),e=d.__assign({},e,{type:\"quantitative\"}))}else{var r=l(e,t);h.warn(h.message.emptyOrInvalidFieldType(e.type,t,r)),e=d.__assign({},e,{type:r})}var a=f(e,t),o=a.compatible,s=a.warning;return o||h.warn(s),e}function c(e,t){return b.isBoolean(e)?{maxbins:m.autoMaxBins(t)}:e.maxbins||e.step?e:d.__assign({},e,{maxbins:m.autoMaxBins(t)})}function f(e,t){switch(t){case\"row\":case\"column\":return o(e)&&!e.timeUnit?{compatible:!1,warning:h.message.facetChannelShouldBeDiscrete(t)}:_;case\"x\":case\"y\":case\"color\":case\"text\":case\"detail\":case\"tooltip\":return _;case\"opacity\":case\"size\":case\"x2\":case\"y2\":return a(e)&&!e.bin?{compatible:!1,warning:\"Channel \"+t+\" should not be used with discrete field.\"}:_;case\"shape\":return\"nominal\"!==e.type?{compatible:!1,warning:\"Shape channel should be used with nominal data only\"}:_;case\"order\":return\"nominal\"===e.type?{compatible:!1,warning:\"Channel order is inappropriate for nominal field, which has no inherent order.\"}:_}throw new Error(\"channelCompatability not implemented for channel \"+t)}Object.defineProperty(n,\"__esModule\",{value:!0});var d=e(\"tslib\"),p=e(\"./aggregate\"),m=e(\"./bin\"),g=e(\"./channel\"),h=e(\"./log\"),v=e(\"./timeunit\"),y=e(\"./type\"),b=e(\"./util\");n.isRepeatRef=function(e){return e&&!b.isString(e)&&\"repeat\"in e},n.isConditionalDef=function(e){return!!e&&!!e.condition},n.hasConditionFieldDef=i,n.isFieldDef=r,n.isValueDef=function(e){return e&&\"value\"in e&&void 0!==e.value},n.isScaleFieldDef=function(e){return!(!e||!e.scale&&!e.sort)},n.field=function(e,t){void 0===t&&(t={});var n=e.field,i=t.prefix,r=t.suffix;if(s(e))n=\"count_*\";else{var a=void 0;t.nofn||(e.bin?(a=m.binToString(e.bin),r=t.binSuffix||\"\"):e.aggregate?a=String(t.aggregate||e.aggregate):e.timeUnit&&(a=String(e.timeUnit))),a&&(n=a+\"_\"+n)}return r&&(n=n+\"_\"+r),i&&(n=i+\"_\"+n),t.expr&&(n=t.expr+\"[\"+b.stringValue(n)+\"]\"),n},n.isDiscrete=a,n.isContinuous=o,n.isCount=s,n.title=function(e,t){if(s(e))return t.countTitle;var n=e.aggregate||e.timeUnit||e.bin&&\"bin\";return n?n.toUpperCase()+\"(\"+e.field+\")\":e.field},n.defaultType=l,n.getFieldDef=function(e){return r(e)?e:i(e)?e.condition:void 0},n.normalize=function(e,t){return r(e)?u(e,t):i(e)?d.__assign({},e,{condition:u(e.condition,t)}):e},n.normalizeFieldDef=u,n.normalizeBin=c;var _={compatible:!0};n.channelCompatibility=f,n.isNumberFieldDef=function(e){return\"quantitative\"===e.type||!!e.bin},n.isTimeFieldDef=function(e){return\"temporal\"===e.type||!!e.timeUnit}},{\"./aggregate\":13,\"./bin\":15,\"./channel\":16,\"./log\":106,\"./timeunit\":114,\"./type\":118,\"./util\":119,tslib:6}],102:[function(e,t,n){\"use strict\";function i(e){return e&&e.selection}function r(e){return e&&!!e.field&&void 0!==e.equal}function a(e){return!!(e&&e.field&&g.isArray(e.range)&&2===e.range.length)}function o(e){return e&&!!e.field&&(g.isArray(e.oneOf)||g.isArray(e.in))}function s(e){return o(e)||r(e)||a(e)}function l(e,t){void 0===t&&(t=!0);var n=e.timeUnit?\"time(\"+m.fieldExpr(e.timeUnit,e.field)+\")\":p.field(e,{expr:\"datum\"});if(r(e))return n+\"===\"+u(e.equal,e.timeUnit);if(o(e))return\"indexof([\"+(e.oneOf||e.in).map(function(t){return u(t,e.timeUnit)}).join(\",\")+\"], \"+n+\") !== -1\";if(a(e)){var i=e.range[0],s=e.range[1];if(null!==i&&null!==s&&t)return\"inrange(\"+n+\", [\"+u(i,e.timeUnit)+\", \"+u(s,e.timeUnit)+\"])\";var l=[];return null!==i&&l.push(n+\" >= \"+u(i,e.timeUnit)),null!==s&&l.push(n+\" <= \"+u(s,e.timeUnit)),l.length>0?l.join(\" && \"):\"true\"}throw new Error(\"Invalid field filter: \"+JSON.stringify(e))}function u(e,t){if(d.isDateTime(e))return\"time(\"+(i=d.dateTimeExpr(e,!0))+\")\";if(m.isLocalSingleTimeUnit(t)){var n={};n[t]=e;var i=d.dateTimeExpr(n,!0);return\"time(\"+i+\")\"}return m.isUtcSingleTimeUnit(t)?u(e,m.getLocalTimeUnit(t)):JSON.stringify(e)}Object.defineProperty(n,\"__esModule\",{value:!0});var c=e(\"tslib\"),f=e(\"./compile/selection/selection\"),d=e(\"./datetime\"),p=e(\"./fielddef\"),m=e(\"./timeunit\"),g=e(\"./util\");n.isSelectionFilter=i,n.isEqualFilter=r,n.isRangeFilter=a,n.isOneOfFilter=o,n.isFieldFilter=s,n.expression=function(e,t,n){return g.logicalExpr(t,function(t){return g.isString(t)?t:i(t)?f.predicate(e,t.selection,n):l(t)})},n.fieldFilterExpression=l,n.normalizeFilter=function(e){return s(e)&&e.timeUnit?c.__assign({},e,{timeUnit:m.normalizeTimeUnit(e.timeUnit)}):e}},{\"./compile/selection/selection\":80,\"./datetime\":98,\"./fielddef\":101,\"./timeunit\":114,\"./util\":119,tslib:6}],103:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.VL_ONLY_GUIDE_CONFIG=[\"shortTimeLabels\"]},{}],104:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.axis=e(\"./axis\"),n.aggregate=e(\"./aggregate\"),n.bin=e(\"./bin\"),n.channel=e(\"./channel\"),n.compositeMark=e(\"./compositemark\");var i=e(\"./compile/compile\");n.compile=i.compile,n.config=e(\"./config\"),n.data=e(\"./data\"),n.datetime=e(\"./datetime\"),n.encoding=e(\"./encoding\"),n.facet=e(\"./facet\"),n.fieldDef=e(\"./fielddef\"),n.legend=e(\"./legend\"),n.mark=e(\"./mark\"),n.scale=e(\"./scale\"),n.sort=e(\"./sort\"),n.spec=e(\"./spec\"),n.stack=e(\"./stack\"),n.timeUnit=e(\"./timeunit\"),n.transform=e(\"./transform\"),n.type=e(\"./type\"),n.util=e(\"./util\"),n.validate=e(\"./validate\"),n.version=e(\"../package.json\").version},{\"../package.json\":12,\"./aggregate\":13,\"./axis\":14,\"./bin\":15,\"./channel\":16,\"./compile/compile\":25,\"./compositemark\":95,\"./config\":96,\"./data\":97,\"./datetime\":98,\"./encoding\":99,\"./facet\":100,\"./fielddef\":101,\"./legend\":105,\"./mark\":108,\"./scale\":109,\"./sort\":111,\"./spec\":112,\"./stack\":113,\"./timeunit\":114,\"./transform\":117,\"./type\":118,\"./util\":119,\"./validate\":120}],105:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.defaultLegendConfig={},n.LEGEND_PROPERTIES=[\"entryPadding\",\"format\",\"offset\",\"orient\",\"tickCount\",\"title\",\"type\",\"values\",\"zindex\"],n.VG_LEGEND_PROPERTIES=[].concat([\"fill\",\"stroke\",\"shape\",\"size\",\"opacity\",\"encode\"],n.LEGEND_PROPERTIES)},{}],106:[function(e,t,n){\"use strict\";function i(){return o=a}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"vega-util\"),a=r.logger(r.Warn),o=a,s=function(){function e(){this.warns=[],this.infos=[],this.debugs=[]}return e.prototype.level=function(){return this},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.warns).push.apply(n,e),this;var n},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.infos).push.apply(n,e),this;var n},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(n=this.debugs).push.apply(n,e),this;var n},e}();n.LocalLogger=s,n.runLocalLogger=function(e){e(o=new s),i()},n.wrap=function(e){return function(){var t=o=new s;e(t),i()}},n.set=function(e){return o=e},n.reset=i,n.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.warn.apply(o,arguments)},n.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.info.apply(o,arguments)},n.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.debug.apply(o,arguments)};!function(e){e.INVALID_SPEC=\"Invalid spec\",e.FIT_NON_SINGLE='Autosize \"fit\" only works for single views and layered views.',e.CANNOT_FIX_RANGE_STEP_WITH_FIT='Cannot use a fixed value of \"rangeStep\" when \"autosize\" is \"fit\".',e.cannotProjectOnChannelWithoutField=function(e){return'Cannot project a selection on encoding channel \"'+e+'\", which has no field.'},e.nearestNotSupportForContinuous=function(e){return'The \"nearest\" transform is not supported for '+e+\" marks.\"},e.selectionNotFound=function(e){return'Cannot find a selection named \"'+e+'\"'},e.noSuchRepeatedValue=function(e){return'Unknown repeated value \"'+e+'\".'},e.cannotSetTitleAnchor=function(e){return'Cannot set title \"anchor\" for a '+e+\" spec\"},e.unrecognizedParse=function(e){return'Unrecognized parse \"'+e+'\".'},e.differentParse=function(e,t,n){return'An ancestor parsed field \"'+e+'\" as '+n+\" but a child wants to parse the field as \"+t+\".\"},e.invalidTransformIgnored=function(e){return\"Ignoring an invalid transform: \"+JSON.stringify(e)+\".\"},e.NO_FIELDS_NEEDS_AS='If \"from.fields\" is not specified, \"as\" has to be a string that specifies the key to be used for the the data from the secondary source.',e.invalidFieldType=function(e){return'Invalid field type \"'+e+'\"'},e.invalidFieldTypeForCountAggregate=function(e,t){return'Invalid field type \"'+e+'\" for aggregate: \"'+t+'\", using \"quantitative\" instead.'},e.invalidAggregate=function(e){return'Invalid aggregation operator \"'+e+'\"'},e.emptyOrInvalidFieldType=function(e,t,n){return'Invalid field type \"'+e+'\" for channel \"'+t+'\", using \"'+n+'\" instead.'},e.emptyFieldDef=function(e,t){return\"Dropping \"+JSON.stringify(e)+' from channel \"'+t+'\" since it does not contain data field or value.'},e.incompatibleChannel=function(e,t,n){return e+' dropped as it is incompatible with \"'+t+'\"'+(n?\" when \"+n:\"\")+\".\"},e.facetChannelShouldBeDiscrete=function(e){return e+\" encoding should be discrete (ordinal / nominal / binned).\"},e.discreteChannelCannotEncode=function(e,t){return'Using discrete channel \"'+e+'\" to encode \"'+t+'\" field can be misleading as it does not encode '+(\"ordinal\"===t?\"order\":\"magnitude\")+\".\"},e.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL=\"Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.\",e.unclearOrientContinuous=function(e){return'Cannot clearly determine orientation for \"'+e+'\" since both x and y channel encode continous fields. In this case, we use vertical by default'},e.unclearOrientDiscreteOrEmpty=function(e){return'Cannot clearly determine orientation for \"'+e+'\" since both x and y channel encode discrete or empty fields.'},e.orientOverridden=function(e,t){return'Specified orient \"'+e+'\" overridden with \"'+t+'\"'},e.CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN=\"custom domain scale cannot be unioned with default field-based domain\",e.cannotUseScalePropertyWithNonColor=function(e){return'Cannot use the scale property \"'+e+'\" with non-color channel.'},e.unaggregateDomainHasNoEffectForRawField=function(e){return\"Using unaggregated domain with raw field has no effect (\"+JSON.stringify(e)+\").\"},e.unaggregateDomainWithNonSharedDomainOp=function(e){return'Unaggregated domain not applicable for \"'+e+'\" since it produces values outside the origin domain of the source data.'},e.unaggregatedDomainWithLogScale=function(e){return\"Unaggregated domain is currently unsupported for log scale (\"+JSON.stringify(e)+\").\"},e.CANNOT_USE_RANGE_WITH_POSITION='Cannot use a custom \"range\" with x or y channel.  Please customize width, height, padding, or rangeStep instead.',e.cannotUseSizeFieldWithBandSize=function(e){return\"Using size field when \"+e+\"-channel has a band scale is not supported.\"},e.cannotApplySizeToNonOrientedMark=function(e){return'Cannot apply size to non-oriented mark \"'+e+'\".'},e.rangeStepDropped=function(e){return'rangeStep for \"'+e+'\" is dropped as top-level '+(\"x\"===e?\"width\":\"height\")+\" is provided.\"},e.scaleTypeNotWorkWithChannel=function(e,t,n){return'Channel \"'+e+'\" does not work with \"'+t+'\" scale. We are using \"'+n+'\" scale instead.'},e.scaleTypeNotWorkWithFieldDef=function(e,t){return'FieldDef does not work with \"'+e+'\" scale. We are using \"'+t+'\" scale instead.'},e.scalePropertyNotWorkWithScaleType=function(e,t,n){return n+\"-scale's \\\"\"+t+'\" is dropped as it does not work with '+e+\" scale.\"},e.scaleTypeNotWorkWithMark=function(e,t){return'Scale type \"'+t+'\" does not work with mark \"'+e+'\".'},e.mergeConflictingProperty=function(e,t,n,i){return\"Conflicting \"+t+' property \"'+e+'\" (\"'+n+'\" and \"'+i+'\").  Using \"'+n+'\".'},e.independentScaleMeansIndependentGuide=function(e){return'Setting the scale to be independent for \"'+e+'\" means we also have to set the guide (axis or legend) to be independent.'},e.conflictedDomain=function(e){return\"Cannot set \"+e+'-scale\\'s \"domain\" as it is binned. Please use \"bin\"\\'s \"extent\" instead.'},e.domainSortDropped=function(e){return'Dropping sort property \"'+JSON.stringify(e)+\"\\\" as unioned domains only support boolean or op 'count'.\"},e.UNABLE_TO_MERGE_DOMAINS=\"Unable to merge domains\",e.MORE_THAN_ONE_SORT=\"Domains that should be unioned has conflicting sort properties. Sort will be set to true.\",e.INVALID_CHANNEL_FOR_AXIS=\"Invalid channel for axis.\",e.cannotStackRangedMark=function(e){return'Cannot stack \"'+e+'\" if there is already \"'+e+'2\"'},e.cannotStackNonLinearScale=function(e){return\"Cannot stack non-linear scale (\"+e+\")\"},e.cannotStackNonSummativeAggregate=function(e){return'Cannot stack when the aggregate function is non-summative (\"'+e+'\")'},e.invalidTimeUnit=function(e,t){return\"Invalid \"+e+': \"'+t+'\"'},e.dayReplacedWithDate=function(e){return'Time unit \"'+e+'\" is not supported. We are replacing it with '+e.replace(\"day\",\"date\")+\".\"},e.droppedDay=function(e){return\"Dropping day from datetime \"+JSON.stringify(e)+\" as day cannot be combined with other units.\"}}(n.message||(n.message={}))},{\"vega-util\":11}],107:[function(e,t,n){\"use strict\";function i(e){return!!e.or}function r(e){return!!e.and}function a(e){return!!e.not}function o(e,t){if(a(e))o(e.not,t);else if(r(e))for(var n=0,s=e.and;n<s.length;n++)o(c=s[n],t);else if(i(e))for(var l=0,u=e.or;l<u.length;l++){var c=u[l];o(c,t)}else t(e)}function s(e,t){return a(e)?{not:s(e.not,t)}:r(e)?{and:e.and.map(function(e){return s(e,t)})}:i(e)?{or:e.or.map(function(e){return s(e,t)})}:t(e)}Object.defineProperty(n,\"__esModule\",{value:!0}),n.isLogicalOr=i,n.isLogicalAnd=r,n.isLogicalNot=a,n.forEachLeave=o,n.normalizeLogicalOperand=s},{}],108:[function(e,t,n){\"use strict\";function i(e){return e.type}Object.defineProperty(n,\"__esModule\",{value:!0});var r,a=e(\"./util\");!function(e){e.AREA=\"area\",e.BAR=\"bar\",e.LINE=\"line\",e.POINT=\"point\",e.RECT=\"rect\",e.RULE=\"rule\",e.TEXT=\"text\",e.TICK=\"tick\",e.CIRCLE=\"circle\",e.SQUARE=\"square\"}(r=n.Mark||(n.Mark={})),n.AREA=r.AREA,n.BAR=r.BAR,n.LINE=r.LINE,n.POINT=r.POINT,n.TEXT=r.TEXT,n.TICK=r.TICK,n.RECT=r.RECT,n.RULE=r.RULE,n.CIRCLE=r.CIRCLE,n.SQUARE=r.SQUARE;var o={area:1,bar:1,line:1,point:1,text:1,tick:1,rect:1,rule:1,circle:1,square:1};n.isMark=function(e){return!!o[e]},n.PRIMITIVE_MARKS=a.flagKeys(o),n.isMarkDef=i;var s=a.toSet(n.PRIMITIVE_MARKS);n.isPrimitiveMark=function(e){return(i(e)?e.type:e)in s},n.STROKE_CONFIG=[\"stroke\",\"strokeWidth\",\"strokeDash\",\"strokeDashOffset\",\"strokeOpacity\"],n.FILL_CONFIG=[\"fill\",\"fillOpacity\"],n.FILL_STROKE_CONFIG=[].concat(n.STROKE_CONFIG,n.FILL_CONFIG),n.VL_ONLY_MARK_CONFIG_PROPERTIES=[\"filled\",\"color\"],n.VL_ONLY_MARK_SPECIFIC_CONFIG_PROPERTY_INDEX={bar:[\"binSpacing\",\"continuousBandSize\",\"discreteBandSize\"],text:[\"shortTimeLabels\"],tick:[\"bandSize\",\"thickness\"]},n.defaultMarkConfig={color:\"#4c78a8\"},n.defaultBarConfig={binSpacing:1,continuousBandSize:5},n.defaultTickConfig={thickness:1}},{\"./util\":119}],109:[function(e,t,n){\"use strict\";function i(e){return e in d}function r(e){return e in f}Object.defineProperty(n,\"__esModule\",{value:!0});var a=e(\"tslib\"),o=e(\"./channel\"),s=e(\"./log\"),l=e(\"./util\");!function(e){e.LINEAR=\"linear\",e.BIN_LINEAR=\"bin-linear\",e.LOG=\"log\",e.POW=\"pow\",e.SQRT=\"sqrt\",e.TIME=\"time\",e.UTC=\"utc\",e.SEQUENTIAL=\"sequential\",e.QUANTILE=\"quantile\",e.QUANTIZE=\"quantize\",e.THRESHOLD=\"threshold\",e.ORDINAL=\"ordinal\",e.BIN_ORDINAL=\"bin-ordinal\",e.POINT=\"point\",e.BAND=\"band\"}(n.ScaleType||(n.ScaleType={}));var u={linear:\"numeric\",log:\"numeric\",pow:\"numeric\",sqrt:\"numeric\",\"bin-linear\":\"bin-linear\",time:\"time\",utc:\"time\",sequential:\"sequential\",ordinal:\"ordinal\",\"bin-ordinal\":\"bin-ordinal\",point:\"ordinal-position\",band:\"ordinal-position\"};n.SCALE_TYPES=l.keys(u),n.scaleCompatible=function(e,t){var n=u[e],i=u[t];return n===i||\"ordinal-position\"===n&&\"time\"===i||\"ordinal-position\"===i&&\"time\"===n};var c={linear:0,log:1,pow:1,sqrt:1,time:0,utc:0,point:10,band:11,\"bin-linear\":0,sequential:0,ordinal:0,\"bin-ordinal\":0};n.scaleTypePrecedence=function(e){return c[e]},n.CONTINUOUS_TO_CONTINUOUS_SCALES=[\"linear\",\"bin-linear\",\"log\",\"pow\",\"sqrt\",\"time\",\"utc\"];var f=l.toSet(n.CONTINUOUS_TO_CONTINUOUS_SCALES);n.CONTINUOUS_DOMAIN_SCALES=n.CONTINUOUS_TO_CONTINUOUS_SCALES.concat([\"sequential\"]);var d=l.toSet(n.CONTINUOUS_DOMAIN_SCALES);n.DISCRETE_DOMAIN_SCALES=[\"ordinal\",\"bin-ordinal\",\"point\",\"band\"];var p=l.toSet(n.DISCRETE_DOMAIN_SCALES),m=l.toSet([\"bin-linear\",\"bin-ordinal\"]);n.TIME_SCALE_TYPES=[\"time\",\"utc\"],n.hasDiscreteDomain=function(e){return e in p},n.isBinScale=function(e){return e in m},n.hasContinuousDomain=i,n.isContinuousToContinuous=r,n.defaultScaleConfig={textXRangeStep:90,rangeStep:21,pointPadding:.5,bandPaddingInner:.1,facetSpacing:16,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4},n.isExtendedScheme=function(e){return e&&!!e.name},n.isSelectionDomain=function(e){return e&&e.selection};var g={type:1,domain:1,range:1,rangeStep:1,scheme:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1};n.SCALE_PROPERTIES=l.flagKeys(g);var h=a.__rest(g,[\"type\",\"domain\",\"range\",\"rangeStep\",\"scheme\"]);n.NON_TYPE_DOMAIN_RANGE_VEGA_SCALE_PROPERTIES=l.flagKeys(h),n.scaleTypeSupportProperty=function(e,t){switch(t){case\"type\":case\"domain\":case\"reverse\":case\"range\":return!0;case\"scheme\":return l.contains([\"sequential\",\"ordinal\",\"bin-ordinal\",\"quantile\",\"quantize\"],e);case\"interpolate\":return l.contains([\"linear\",\"bin-linear\",\"pow\",\"log\",\"sqrt\",\"utc\",\"time\"],e);case\"round\":return r(e)||\"band\"===e||\"point\"===e;case\"rangeStep\":case\"padding\":case\"paddingOuter\":return l.contains([\"point\",\"band\"],e);case\"paddingInner\":return\"band\"===e;case\"clamp\":return r(e)||\"sequential\"===e;case\"nice\":return r(e)||\"sequential\"===e||\"quantize\"===e;case\"exponent\":return\"pow\"===e;case\"base\":return\"log\"===e;case\"zero\":return i(e)&&!l.contains([\"log\",\"time\",\"utc\",\"bin-linear\",\"threshold\",\"quantile\"],e)}throw new Error(\"Invalid scale property \"+t+\".\")},n.channelScalePropertyIncompatability=function(e,t){switch(t){case\"range\":if(\"x\"===e||\"y\"===e)return s.message.CANNOT_USE_RANGE_WITH_POSITION;return;case\"interpolate\":case\"scheme\":if(\"color\"!==e)return s.message.cannotUseScalePropertyWithNonColor(e);return;case\"type\":case\"domain\":case\"base\":case\"exponent\":case\"nice\":case\"padding\":case\"paddingInner\":case\"paddingOuter\":case\"rangeStep\":case\"reverse\":case\"round\":case\"clamp\":case\"zero\":return}throw new Error('Invalid scale property \"'+t+'\".')},n.channelSupportScaleType=function(e,t){switch(e){case o.Channel.X:case o.Channel.Y:case o.Channel.SIZE:case o.Channel.OPACITY:return r(t)||l.contains([\"band\",\"point\"],t);case o.Channel.COLOR:return\"band\"!==t;case o.Channel.SHAPE:return\"ordinal\"===t}return!1}},{\"./channel\":16,\"./log\":106,\"./util\":119,tslib:6}],110:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.SELECTION_ID=\"_vgsid_\",n.defaultConfig={single:{on:\"click\",fields:[n.SELECTION_ID],resolve:\"global\"},multi:{on:\"click\",fields:[n.SELECTION_ID],toggle:\"event.shiftKey\",resolve:\"global\"},interval:{on:\"[mousedown, window:mouseup] > window:mousemove!\",encodings:[\"x\",\"y\"],translate:\"[mousedown, window:mouseup] > window:mousemove!\",zoom:\"wheel!\",mark:{fill:\"#333\",fillOpacity:.125,stroke:\"white\"},resolve:\"global\"}}},{}],111:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0}),n.isSortField=function(e){return!(!e||\"count\"!==e.op&&!e.field||!e.op)}},{}],112:[function(e,t,n){\"use strict\";function i(e){return void 0!==e.facet}function r(e){return!!e.mark}function a(e){return void 0!==e.layer}function o(e){return void 0!==e.repeat}function s(e){return l(e)||u(e)}function l(e){return void 0!==e.vconcat}function u(e){return void 0!==e.hconcat}function c(e,t){if(i(e))return f(e,t);if(a(e))return d(e,t);if(o(e))return p(e,t);if(l(e))return m(e,t);if(u(e))return g(e,t);if(r(e)){var n=w.channelHasField(e.encoding,O.ROW),s=w.channelHasField(e.encoding,O.COLUMN);return n||s?h(e,t):y(e,t)}throw new Error(k.message.INVALID_SPEC)}function f(e,t){var n=e.spec,i=E.__rest(e,[\"spec\"]);return E.__assign({},i,{spec:c(n,t)})}function d(e,t){var n=e.layer,i=E.__rest(e,[\"layer\"]);return E.__assign({},i,{layer:n.map(function(e){return a(e)?d(e,t):y(e,t)})})}function p(e,t){var n=e.spec,i=E.__rest(e,[\"spec\"]);return E.__assign({},i,{spec:c(n,t)})}function m(e,t){var n=e.vconcat,i=E.__rest(e,[\"vconcat\"]);return E.__assign({},i,{vconcat:n.map(function(e){return c(e,t)})})}function g(e,t){var n=e.hconcat,i=E.__rest(e,[\"hconcat\"]);return E.__assign({},i,{hconcat:n.map(function(e){return c(e,t)})})}function h(e,t){var n=e.encoding,i=n.row,r=n.column,a=E.__rest(n,[\"row\",\"column\"]),o=e.mark,s=e.width,l=e.height,u=e.selection,c=(e.encoding,E.__rest(e,[\"mark\",\"width\",\"height\",\"selection\",\"encoding\"]));return E.__assign({},c,{facet:E.__assign({},i?{row:i}:{},r?{column:r}:{}),spec:y(E.__assign({mark:o},s?{width:s}:{},l?{height:l}:{},{encoding:a},u?{selection:u}:{}),t)})}function v(e){return D.isPrimitiveMark(e.mark)}function y(e,t){if(v(e)){if(w.isRanged(e.encoding))return b(e);var n=t&&t.overlay,i=n&&e.mark===D.AREA&&A.contains([\"linepoint\",\"line\"],n.area),r=n&&(n.line&&e.mark===D.LINE||\"linepoint\"===n.area&&e.mark===D.AREA);return r||i?_(e,r,i,t):e}return N.normalize(e,t)}function b(e){var t=w.channelHasField(e.encoding,O.X),n=w.channelHasField(e.encoding,O.Y),i=w.channelHasField(e.encoding,O.X2),r=w.channelHasField(e.encoding,O.Y2);if(i&&!t||r&&!n){var a=A.duplicate(e);return i&&!t&&(a.encoding.x=a.encoding.x2,delete a.encoding.x2),r&&!n&&(a.encoding.y=a.encoding.y2,delete a.encoding.y2),a}return e}function _(e,t,n,i){var r=e.mark,a=e.selection,o=e.encoding,s=E.__rest(e,[\"mark\",\"selection\",\"encoding\"]),l=[{mark:r,encoding:o}],u=C.stack(r,o,i?i.stack:void 0),c=o;if(u){var f=u.fieldChannel,d=u.offset;c=E.__assign({},o,(p={},p[f]=E.__assign({},o[f],d?{stack:d}:{}),p))}return n&&l.push(E.__assign({mark:{type:\"line\",style:\"lineOverlay\"}},a?{selection:a}:{},{encoding:c})),t&&l.push(E.__assign({mark:{type:\"point\",filled:!0,style:\"pointOverlay\"}},a?{selection:a}:{},{encoding:c})),E.__assign({},s,{layer:l});var p}function S(e,t){return t.forEach(function(t){var n=[\"field\",\"type\",\"value\",\"timeUnit\",\"bin\",\"aggregate\"].reduce(function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e},{}),i=A.hash(n);e[i]=e[i]||t}),e}function x(e,t){return void 0===t&&(t={}),a(e)?e.layer.forEach(function(e){r(e)?S(t,T.fieldDefs(e.encoding)):x(e,t)}):i(e)?(S(t,T.fieldDefs(e.facet)),x(e.spec,t)):o(e)?x(e.spec,t):s(e)?(l(e)?e.vconcat:e.hconcat).forEach(function(e){return x(e,t)}):S(t,T.fieldDefs(e.encoding)),t}Object.defineProperty(n,\"__esModule\",{value:!0});var E=e(\"tslib\"),O=e(\"./channel\"),N=e(\"./compositemark\"),w=e(\"./encoding\"),T=e(\"./encoding\"),k=e(\"./log\"),D=e(\"./mark\"),C=e(\"./stack\"),A=e(\"./util\");n.isFacetSpec=i,n.isUnitSpec=r,n.isLayerSpec=a,n.isRepeatSpec=o,n.isConcatSpec=s,n.isVConcatSpec=l,n.isHConcatSpec=u,n.normalize=c,n.fieldDefs=function(e){return A.vals(x(e))},n.isStacked=function(e,t){return t=t||e.config,!!D.isPrimitiveMark(e.mark)&&null!==C.stack(e.mark,e.encoding,t?t.stack:void 0)}},{\"./channel\":16,\"./compositemark\":95,\"./encoding\":99,\"./log\":106,\"./mark\":108,\"./stack\":113,\"./util\":119,tslib:6}],113:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"./aggregate\"),r=e(\"./channel\"),a=e(\"./encoding\"),o=e(\"./fielddef\"),s=e(\"./log\"),l=e(\"./mark\"),u=e(\"./scale\"),c=e(\"./util\");n.STACKABLE_MARKS=[l.BAR,l.AREA,l.RULE,l.POINT,l.CIRCLE,l.SQUARE,l.LINE,l.TEXT,l.TICK],n.STACK_BY_DEFAULT_MARKS=[l.BAR,l.AREA],n.stack=function(e,t,f){var d=l.isMarkDef(e)?e.type:e;if(!c.contains(n.STACKABLE_MARKS,d))return null;if(!a.isAggregate(t))return null;var p=r.NONPOSITION_CHANNELS.reduce(function(e,n){if(a.channelHasField(t,n)){var i=t[n];(c.isArray(i)?i:[i]).forEach(function(t){var i=o.getFieldDef(t);i.aggregate||e.push({channel:n,fieldDef:i})})}return e},[]);if(0===p.length)return null;var m=o.isFieldDef(t.x),g=o.isFieldDef(t.y),h=o.isFieldDef(t.x)&&!!t.x.aggregate;if(h!==(o.isFieldDef(t.y)&&!!t.y.aggregate)){var v=h?r.X:r.Y,y=t[v],b=y.aggregate,_=y.scale,S=null;return(S=void 0!==y.stack?y.stack:c.contains(n.STACK_BY_DEFAULT_MARKS,d)&&void 0===f?\"zero\":f)&&\"none\"!==S?_&&_.type&&_.type!==u.ScaleType.LINEAR?(s.warn(s.message.cannotStackNonLinearScale(_.type)),null):a.channelHasField(t,v===r.X?r.X2:r.Y2)?(s.warn(s.message.cannotStackRangedMark(v)),null):c.contains(i.SUM_OPS,b)?{groupbyChannel:h?g?r.Y:null:m?r.X:null,fieldChannel:v,impute:c.contains([\"area\",\"line\"],d),stackBy:p,offset:S}:(s.warn(s.message.cannotStackNonSummativeAggregate(b)),null):null}return null}},{\"./aggregate\":13,\"./channel\":16,\"./encoding\":99,\"./fielddef\":101,\"./log\":106,\"./mark\":108,\"./scale\":109,\"./util\":119}],114:[function(e,t,n){\"use strict\";function i(e){return!!g[e]}function r(e,t){var n=v[e];return{setDateMethod:t?\"setUTC\"+n.substr(3):n,getDateMethod:\"get\"+(t?\"UTC\":\"\")+n.substr(3)}}function a(e,t){var n=e.indexOf(t);return n>-1&&(t!==o.SECONDS||0===n||\"i\"!==e.charAt(n-1))}Object.defineProperty(n,\"__esModule\",{value:!0});var o,s=e(\"tslib\"),l=e(\"./datetime\"),u=e(\"./log\"),c=e(\"./util\");!function(e){e.YEAR=\"year\",e.MONTH=\"month\",e.DAY=\"day\",e.DATE=\"date\",e.HOURS=\"hours\",e.MINUTES=\"minutes\",e.SECONDS=\"seconds\",e.MILLISECONDS=\"milliseconds\",e.YEARMONTH=\"yearmonth\",e.YEARMONTHDATE=\"yearmonthdate\",e.YEARMONTHDATEHOURS=\"yearmonthdatehours\",e.YEARMONTHDATEHOURSMINUTES=\"yearmonthdatehoursminutes\",e.YEARMONTHDATEHOURSMINUTESSECONDS=\"yearmonthdatehoursminutesseconds\",e.MONTHDATE=\"monthdate\",e.HOURSMINUTES=\"hoursminutes\",e.HOURSMINUTESSECONDS=\"hoursminutesseconds\",e.MINUTESSECONDS=\"minutesseconds\",e.SECONDSMILLISECONDS=\"secondsmilliseconds\",e.QUARTER=\"quarter\",e.YEARQUARTER=\"yearquarter\",e.QUARTERMONTH=\"quartermonth\",e.YEARQUARTERMONTH=\"yearquartermonth\",e.UTCYEAR=\"utcyear\",e.UTCMONTH=\"utcmonth\",e.UTCDAY=\"utcday\",e.UTCDATE=\"utcdate\",e.UTCHOURS=\"utchours\",e.UTCMINUTES=\"utcminutes\",e.UTCSECONDS=\"utcseconds\",e.UTCMILLISECONDS=\"utcmilliseconds\",e.UTCYEARMONTH=\"utcyearmonth\",e.UTCYEARMONTHDATE=\"utcyearmonthdate\",e.UTCYEARMONTHDATEHOURS=\"utcyearmonthdatehours\",e.UTCYEARMONTHDATEHOURSMINUTES=\"utcyearmonthdatehoursminutes\",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS=\"utcyearmonthdatehoursminutesseconds\",e.UTCMONTHDATE=\"utcmonthdate\",e.UTCHOURSMINUTES=\"utchoursminutes\",e.UTCHOURSMINUTESSECONDS=\"utchoursminutesseconds\",e.UTCMINUTESSECONDS=\"utcminutesseconds\",e.UTCSECONDSMILLISECONDS=\"utcsecondsmilliseconds\",e.UTCQUARTER=\"utcquarter\",e.UTCYEARQUARTER=\"utcyearquarter\",e.UTCQUARTERMONTH=\"utcquartermonth\",e.UTCYEARQUARTERMONTH=\"utcyearquartermonth\"}(o=n.TimeUnit||(n.TimeUnit={}));var f={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};n.TIMEUNIT_PARTS=c.flagKeys(f),n.isLocalSingleTimeUnit=function(e){return!!f[e]};var d={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};n.isUtcSingleTimeUnit=function(e){return!!d[e]};var p={yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},m={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},g=s.__assign({},d,m);n.isUTCTimeUnit=i,n.getLocalTimeUnit=function(e){return e.substr(3)};var h=s.__assign({},f,d,p,m);n.TIMEUNITS=c.flagKeys(h),n.isTimeUnit=function(e){return!!h[e]};var v={year:\"setFullYear\",month:\"setMonth\",date:\"setDate\",hours:\"setHours\",minutes:\"setMinutes\",seconds:\"setSeconds\",milliseconds:\"setMilliseconds\",quarter:null,day:null};n.convert=function(e,t){var s=i(e),l=s?new Date(Date.UTC(0,0,1,0,0,0,0)):new Date(0,0,1,0,0,0,0);return n.TIMEUNIT_PARTS.forEach(function(n){if(a(e,n))switch(n){case o.DAY:throw new Error(\"Cannot convert to TimeUnits containing 'day'\");case o.QUARTER:var i=r(\"month\",s),u=i.getDateMethod,c=i.setDateMethod;l[c](3*Math.floor(t[u]()/3));break;default:var f=r(n,s),d=f.getDateMethod,p=f.setDateMethod;l[p](t[d]())}}),l},n.containsTimeUnit=a,n.fieldExpr=function(e,t){function r(e){return e===o.QUARTER?\"(\"+u+\"quarter(\"+s+\")-1)\":\"\"+u+e+\"(\"+s+\")\"}var s=\"datum[\"+c.stringValue(t)+\"]\",u=i(e)?\"utc\":\"\",f=n.TIMEUNIT_PARTS.reduce(function(t,n){return a(e,n)&&(t[n]=r(n)),t},{});return l.dateTimeExpr(f)},n.smallestUnit=function(e){if(e)return a(e,o.SECONDS)?\"second\":a(e,o.MINUTES)?\"minute\":a(e,o.HOURS)?\"hour\":a(e,o.DAY)||a(e,o.DATE)?\"day\":a(e,o.MONTH)?\"month\":a(e,o.YEAR)?\"year\":void 0},n.formatExpression=function(e,t,n,i){if(e){var r=[],s=\"\",l=a(e,o.YEAR);a(e,o.QUARTER)&&(s=\"'Q' + quarter(\"+t+\")\"),a(e,o.MONTH)&&r.push(!1!==n?\"%b\":\"%B\"),a(e,o.DAY)?r.push(n?\"%a\":\"%A\"):a(e,o.DATE)&&r.push(\"%d\"+(l?\",\":\"\")),l&&r.push(n?\"%y\":\"%Y\");var u=[];a(e,o.HOURS)&&u.push(\"%H\"),a(e,o.MINUTES)&&u.push(\"%M\"),a(e,o.SECONDS)&&u.push(\"%S\"),a(e,o.MILLISECONDS)&&u.push(\"%L\");var c=[];return r.length>0&&c.push(r.join(\" \")),u.length>0&&c.push(u.join(\":\")),c.length>0&&(s&&(s+=\" + ' ' + \"),s+=i?\"utcFormat(\"+t+\", '\"+c.join(\" \")+\"')\":\"timeFormat(\"+t+\", '\"+c.join(\" \")+\"')\"),s||void 0}},n.normalizeTimeUnit=function(e){return\"day\"!==e&&e.indexOf(\"day\")>=0?(u.warn(u.message.dayReplacedWithDate(e)),e.replace(\"day\",\"date\")):e}},{\"./datetime\":98,\"./log\":106,\"./util\":119,tslib:6}],115:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\");n.extractTitleConfig=function(e){var t=e.anchor,n=e.offset,r=e.orient,a=e.color,o=i.__rest(e,[\"anchor\",\"offset\",\"orient\",\"color\"]);return{mark:i.__assign({},o,a?{fill:a}:{}),nonMark:i.__assign({},t?{anchor:t}:{},n?{offset:n}:{},r?{orient:r}:{})}}},{tslib:6}],116:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"tslib\"),r=e(\"util\"),a=e(\"./log\");n.normalizeAutoSize=function(e,t){if(!e)return{type:\"pad\"};var n=i.__assign({type:\"pad\"},r.isString(e)?{type:e}:e);return\"fit\"===n.type&&(t||(a.warn(a.message.FIT_NON_SINGLE),n.type=\"pad\")),n};var o=[\"background\",\"padding\"];n.extractTopLevelProperties=function(e){return o.reduce(function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t},{})}},{\"./log\":106,tslib:6,util:9}],117:[function(e,t,n){\"use strict\";function i(e){return void 0!==e.filter}Object.defineProperty(n,\"__esModule\",{value:!0});var r=e(\"./filter\"),a=e(\"./logical\");n.isFilter=i,n.isLookup=function(e){return void 0!==e.lookup},n.isCalculate=function(e){return void 0!==e.calculate},n.isBin=function(e){return!!e.bin},n.isTimeUnit=function(e){return void 0!==e.timeUnit},n.isSummarize=function(e){return void 0!==e.summarize},n.normalizeTransform=function(e){return e.map(function(e){return i(e)?{filter:a.normalizeLogicalOperand(e.filter,r.normalizeFilter)}:e})}},{\"./filter\":102,\"./logical\":107}],118:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i;!function(e){e.QUANTITATIVE=\"quantitative\",e.ORDINAL=\"ordinal\",e.TEMPORAL=\"temporal\",e.NOMINAL=\"nominal\"}(i=n.Type||(n.Type={}));var r={quantitative:1,ordinal:1,temporal:1,nominal:1};n.isType=function(e){return!!r[e]},n.QUANTITATIVE=i.QUANTITATIVE,n.ORDINAL=i.ORDINAL,n.TEMPORAL=i.TEMPORAL,n.NOMINAL=i.NOMINAL,n.getFullName=function(e){if(e)switch(e=e.toLowerCase()){case\"q\":case n.QUANTITATIVE:return\"quantitative\";case\"t\":case n.TEMPORAL:return\"temporal\";case\"o\":case n.ORDINAL:return\"ordinal\";case\"n\":case n.NOMINAL:return\"nominal\"}}},{}],119:[function(e,t,n){\"use strict\";function i(e,t){return e.indexOf(t)>-1}function r(e,t){return e.filter(function(e){return!i(t,e)})}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,r=t;i<r.length;i++)e=o(e,r[i]);return e}function o(e,t){if(\"object\"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(\"object\"!=typeof t[n]||f.isArray(t[n])||null===t[n]?e[n]=t[n]:\"object\"!=typeof e[n]||null===e[n]?e[n]=a(f.isArray(t[n].constructor)?[]:{},t[n]):a(e[n],t[n]));return e}function s(e){return JSON.parse(JSON.stringify(e))}function l(e){return!0===e||!1===e}function u(e,t){return d.isLogicalNot(e)?\"!(\"+u(e.not,t)+\")\":d.isLogicalAnd(e)?\"(\"+e.and.map(function(e){return u(e,t)}).join(\") && (\")+\")\":d.isLogicalOr(e)?\"(\"+e.or.map(function(e){return u(e,t)}).join(\") || (\")+\")\":t(e)}Object.defineProperty(n,\"__esModule\",{value:!0});var c=e(\"json-stable-stringify\"),f=e(\"vega-util\"),d=e(\"./logical\"),p=e(\"vega-util\");n.isArray=p.isArray,n.isObject=p.isObject,n.isNumber=p.isNumber,n.isString=p.isString,n.truncate=p.truncate,n.toSet=p.toSet,n.stringValue=p.stringValue,n.pick=function(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n},n.omit=function(e,t){var n=s(e);return t.forEach(function(e){delete n[e]}),n},n.hash=function(e){if(f.isString(e)||f.isNumber(e)||l(e))return String(e);var t=c(e);if(t.length<100)return t;for(var n=0,i=0;i<t.length;i++)n=(n<<5)-n+t.charCodeAt(i),n&=n;return n},n.contains=i,n.without=r,n.union=function(e,t){return e.concat(r(t,e))},n.some=function(e,t){for(var n=0,i=0;i<e.length;i++)if(t(e[i],i,n++))return!0;return!1},n.every=function(e,t){for(var n=0,i=0;i<e.length;i++)if(!t(e[i],i,n++))return!1;return!0},n.flatten=function(e){return[].concat.apply([],e)},n.mergeDeep=a,n.unique=function(e,t){for(var n,i=[],r={},a=0,o=e;a<o.length;a++){var s=o[a];(n=t(s))in r||(r[n]=1,i.push(s))}return i},n.differ=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1},n.hasIntersection=function(e,t){for(var n in e)if(n in t)return!0;return!1},n.isNumeric=function(e){return!isNaN(e)},n.differArray=function(e,t){if(e.length!==t.length)return!0;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(t[n]!==e[n])return!0;return!1},n.keys=Object.keys,n.vals=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},n.flagKeys=function(e){return n.keys(e)},n.duplicate=s,n.isBoolean=l,n.varName=function(e){var t=e.replace(/\\W/g,\"_\");return(e.match(/^\\d+/)?\"_\":\"\")+t},n.logicalExpr=u,n.deleteNestedProperty=function(e,t){for(var i=!0;t.length>0&&i;){for(var r=e,a=0;a<t.length-1;a++)r=r[t[a]];delete r[t.pop()],0!==n.keys(r).length&&(i=!1)}}},{\"./logical\":107,\"json-stable-stringify\":1,\"vega-util\":11}],120:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"./mark\"),r=e(\"./mark\"),a=e(\"./util\");n.DEFAULT_REQUIRED_CHANNEL_MAP={text:[\"text\"],line:[\"x\",\"y\"],area:[\"x\",\"y\"]},n.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:a.toSet([\"row\",\"column\",\"x\",\"y\",\"size\",\"color\",\"detail\"]),line:a.toSet([\"row\",\"column\",\"x\",\"y\",\"color\",\"detail\"]),area:a.toSet([\"row\",\"column\",\"x\",\"y\",\"color\",\"detail\"]),tick:a.toSet([\"row\",\"column\",\"x\",\"y\",\"color\",\"detail\"]),circle:a.toSet([\"row\",\"column\",\"x\",\"y\",\"color\",\"size\",\"detail\"]),square:a.toSet([\"row\",\"column\",\"x\",\"y\",\"color\",\"size\",\"detail\"]),point:a.toSet([\"row\",\"column\",\"x\",\"y\",\"color\",\"size\",\"detail\",\"shape\"]),text:a.toSet([\"row\",\"column\",\"size\",\"color\",\"text\"])},n.getEncodingMappingError=function(e,t,a){void 0===t&&(t=n.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===a&&(a=n.DEFAULT_SUPPORTED_CHANNEL_TYPE);var o=i.isMarkDef(e.mark)?e.mark.type:e.mark,s=e.encoding,l=t[o],u=a[o];for(var c in l)if(!(l[c]in s))return'Missing encoding channel \"'+l[c]+'\" for mark \"'+o+'\"';for(var f in s)if(!u[f])return'Encoding channel \"'+f+'\" is not supported by mark type \"'+o+'\"';return o!==r.BAR||s.x||s.y?null:\"Missing both x and y for bar\"}},{\"./mark\":108,\"./util\":119}],121:[function(e,t,n){\"use strict\";Object.defineProperty(n,\"__esModule\",{value:!0});var i=e(\"./util\");n.isVgSignalRef=function(e){return!!e.signal},n.isVgRangeStep=function(e){return!!e.step},n.isDataRefUnionedDomain=function(e){return!i.isArray(e)&&\"fields\"in e&&!(\"data\"in e)},n.isFieldRefUnionDomain=function(e){return!i.isArray(e)&&\"fields\"in e&&\"data\"in e},n.isDataRefDomain=function(e){return!i.isArray(e)&&\"field\"in e&&\"data\"in e},n.isSignalRefDomain=function(e){return!i.isArray(e)&&\"signal\"in e}},{\"./util\":119}]},{},[104])(104)});"

/***/ }),
/* 47 */
/***/ (function(module, exports) {

module.exports = "!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.vega=t.vega||{})}(this,function(t){\"use strict\";function e(t){return null==t?null:t.fname}function n(t){return null==t?null:t.fields}function r(t){return jv(t)?\"[\"+t.map(r)+\"]\":Fv(t)||Iv(t)?JSON.stringify(t).replace(\"\\u2028\",\"\\\\u2028\").replace(\"\\u2029\",\"\\\\u2029\"):t}function i(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}function a(t){return hm(t)?t:lm(t)?t:Date.parse(t)}function o(t){var e=t||Yv,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,a=e(t);return r[a]&&(r[a]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}function u(t){return!(!t||!s(t))}function s(t){return t[Sm]}function f(t,e){return t[Sm]=e,t}function c(t){var e=t===Object(t)?t:{data:t};return s(e)?e:f(e,Am++)}function l(t){return h(t,c({}))}function h(t,e){for(var n in t)e[n]=t[n];return e}function d(t,e){return f(e,s(t))}function p(t){return t&&t.constructor===g}function g(){var t=[],e=[],n=[],r=[],i=[],a=!1;return{constructor:g,insert:function(e){for(var n=tm(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=em(t)?r:e,i=tm(t),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(t,e,r){var a={field:e,value:rm(r)};return em(t)?(a.filter=t,i.push(a)):(a.tuple=t,n.push(a)),this},encode:function(t,e){return em(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function f(t,e,n){n?t[e]=n(t):o.encode=e,a||(l[s(t)]=t)}var l,h,d,p,g,v,m;for(h=0,d=t.length;h<d;++h)o.add.push(c(t[h]));for(l={},h=0,d=e.length;h<d;++h)l[s(v=e[h])]=v;for(h=0,d=r.length;h<d;++h)g=r[h],u.forEach(function(t){g(t)&&(l[s(t)]=t)});for(m in l)o.rem.push(l[m]);for(l={},h=0,d=n.length;h<d;++h)f((p=n[h]).tuple,p.field,p.value),o.modifies(p.field);for(h=0,d=i.length;h<d;++h)p=i[h],g=p.filter,u.forEach(function(t){g(t)&&f(t,p.field,p.value)}),o.modifies(p.field);if(a)o.mod=e.length||r.length?u.filter(function(t){return l.hasOwnProperty(s(t))}):u.slice();else for(m in l)o.mod.push(l[m]);return o}}}function v(){Object.defineProperty(this,Cm,{writable:!0,value:{}})}function m(t,e,n,r){this.id=++Dm,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function y(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}function b(t,e,n){this.id=++Tm,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function _(t,e,n){return new b(t,e,n)}function x(){}function w(t,e){var n=new x;if(t instanceof x)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function M(){return{}}function k(t,e,n){t[e]=n}function E(){return w()}function S(t,e,n){t.set(e,n)}function A(){}function C(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+\"\")||t in r)throw new Error(\"illegal type: \"+t);r[t]=[]}return new z(r)}function z(t){this._=t}function D(t,e){return t.trim().split(/^|\\s+/).map(function(t){var n=\"\",r=t.indexOf(\".\");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);return{type:t,name:n}})}function O(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function N(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=qm,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function T(t){return function(e,n){t(null==e?n:null)}}function R(t){var e=t.responseType;return e&&\"text\"!==e?t.response:t.responseText}function P(t){return new Function(\"d\",\"return {\"+t.map(function(t,e){return JSON.stringify(t)+\": d[\"+e+\"]\"}).join(\",\")+\"}\")}function L(t,e){var n=P(t);return function(r,i){return e(n(r),i,t)}}function q(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function U(t,e){return am({},t.options,e)}function j(t,e){var n=this;return n.sanitize(t,e).then(function(t){var r=t.href;return t.localFile?n.file(r):n.http(r,e)})}function F(t,e){return e=U(this,e),new Promise(function(n,i){var a,o,u,s,f={href:null};null!=t&&\"string\"==typeof t?(o=Fm.test(t),(s=e.baseURL)&&!o&&(W(t,\"/\")||\"/\"===s[s.length-1]||(t=\"/\"+t),t=s+t),u=(a=W(t,Im))||\"file\"===e.mode||\"http\"!==e.mode&&!o&&B(),a?t=t.slice(Im.length):W(t,\"//\")&&(\"file\"===e.defaultProtocol?(t=t.slice(2),u=!0):t=(e.defaultProtocol||\"http\")+\":\"+t),Object.defineProperty(f,\"localFile\",{value:!!u}),f.href=t,n(f)):i(\"Sanitize failure, invalid URI: \"+r(t))})}function I(t,e){return e=U(this,e),new Promise(function(n,r){var i,a=Um(t);for(i in e.headers)a.header(i,e.headers[i]);$m.forEach(function(t){e[t]&&a[t](e[t])}),a.on(\"error\",function(e){r(e||\"Error loading URL: \"+t)}).on(\"load\",function(t){var e=t&&t.responseText;t&&0!==t.status?n(e):r(e||\"Error\")}).get()})}function $(t){return new Promise(function(e,n){var r=B();r?r.readFile(t,function(t,r){t?n(t):e(r)}):n(\"No file system access for \"+t)})}function B(){var t=\"function\"==typeof require&&require(\"fs\");return t&&em(t.readFile)?t:null}function W(t,e){return null!=t&&0===t.lastIndexOf(e,0)}function Y(t,e){var n,r,i,a,o=Ym.slice();for(r=0,i=t.length;r<i;++r){for(n=e?t[r][e]:t[r],a=0;a<o.length;++a)G(n)&&!o[a](n)&&(o.splice(a,1),--a);if(0===o.length)return\"string\"}return Hm[Ym.indexOf(o[0])]}function H(t,e){return e.reduce(function(e,n){return e[n]=Y(t,n),e},{})}function G(t){return null!=t&&t===t}function X(t){return!(isNaN(+t)||t instanceof Date)}function V(t){return function(e,n){var r={delimiter:t};return J(e,n?am(n,r):r)}}function J(t,e){return e.header&&(t=e.header.map(r).join(e.delimiter)+\"\\n\"+t),jm(e.delimiter).parse(t+\"\")}function Z(t){return!(\"function\"!=typeof Buffer||!em(Buffer.isBuffer))&&Buffer.isBuffer(t)}function Q(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}function K(t){if(!t)return Xm;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,u){u||(e=n=0),t[0]=(e+=t[0])*r+a,t[1]=(n+=t[1])*i+o}}function tt(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function et(t,e){var n={type:\"Feature\",id:e.id,properties:e.properties||{},geometry:nt(t,e)};return null==e.id&&delete n.id,n}function nt(t,e){function n(t,e){e.length&&e.pop();for(var n,r=f[t<0?~t:t],i=0,a=r.length;i<a;++i)e.push(n=r[i].slice()),s(n,i);t<0&&tt(e,a)}function r(t){return t=t.slice(),s(t,0),t}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function a(t){for(var e=i(t);e.length<4;)e.push(e[0].slice());return e}function o(t){return t.map(a)}function u(t){var e=t.type;return\"GeometryCollection\"===e?{type:e,geometries:t.geometries.map(u)}:e in c?{type:e,coordinates:c[e](t)}:null}var s=K(t.transform),f=t.arcs,c={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return i(t.arcs)},MultiLineString:function(t){return t.arcs.map(i)},Polygon:function(t){return o(t.arcs)},MultiPolygon:function(t){return t.arcs.map(o)}};return u(e)}function rt(t,e,n){function r(t){var e=t<0?~t:t;(f[e]||(f[e]=[])).push({i:t,g:s})}function i(t){t.forEach(r)}function a(t){t.forEach(i)}function o(t){\"GeometryCollection\"===t.type?t.geometries.forEach(o):t.type in c&&(s=t,c[t.type](t.arcs))}var u=[];if(arguments.length>1){var s,f=[],c={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};o(e),f.forEach(arguments.length<3?function(t){u.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&u.push(t[0].i)})}else for(var l=0,h=t.arcs.length;l<h;++l)u.push(l);return{type:\"MultiLineString\",arcs:Jm(t,u)}}function it(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;do{o.push(new Date(+n))}while(e(n,a),t(n),n<r);return o},i.filter=function(n){return it(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return ty.setTime(+e),ey.setTime(+r),t(ty),t(ey),Math.floor(n(ty,ey))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}function at(t){return it(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ry)/iy})}function ot(t){return it(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/iy})}function ut(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function st(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ft(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function ct(t){function e(t,e){return function(n){var r,i,a,o=[],u=-1,s=0,f=t.length;for(n instanceof Date||(n=new Date(+n));++u<f;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(i=Ey[r=t.charAt(++u)])?r=t.charAt(++u):i=\"e\"===r?\" \":\"0\",(a=e[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(t.slice(s,u)),o.join(\"\")}}function n(t,e){return function(n){var i=ft(1900);if(r(i,t,n+=\"\",0)!=n.length)return null;if(\"p\"in i&&(i.H=i.H%12+12*i.p),\"W\"in i||\"U\"in i){\"w\"in i||(i.w=\"W\"in i?1:0);var a=\"Z\"in i?st(ft(i.y)).getUTCDay():e(ft(i.y)).getDay();i.m=0,i.d=\"W\"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return\"Z\"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,st(i)):e(i)}}function r(t,e,n,r){for(var i,a,o=0,u=e.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=k[i in Ey?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var i=t.dateTime,a=t.date,o=t.time,u=t.periods,s=t.days,f=t.shortDays,c=t.months,l=t.shortMonths,h=dt(u),d=pt(u),p=dt(s),g=pt(s),v=dt(f),m=pt(f),y=dt(c),b=pt(c),_=dt(l),x=pt(l),w={a:function(t){return f[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:null,d:zt,e:zt,H:Dt,I:Ot,j:Nt,L:Tt,m:Rt,M:Pt,p:function(t){return u[+(t.getHours()>=12)]},S:Lt,U:qt,w:Ut,W:jt,x:null,X:null,y:Ft,Y:It,Z:$t,\"%\":re},M={a:function(t){return f[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return c[t.getUTCMonth()]},c:null,d:Bt,e:Bt,H:Wt,I:Yt,j:Ht,L:Gt,m:Xt,M:Vt,p:function(t){return u[+(t.getUTCHours()>=12)]},S:Jt,U:Zt,w:Qt,W:Kt,x:null,X:null,y:te,Y:ee,Z:ne,\"%\":re},k={a:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.w=m[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=x[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=b[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return r(t,i,e,n)},d:wt,e:wt,H:kt,I:kt,j:Mt,L:At,m:xt,M:Et,p:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.p=d[r[0].toLowerCase()],n+r[0].length):-1},S:St,U:vt,w:gt,W:mt,x:function(t,e,n){return r(t,a,e,n)},X:function(t,e,n){return r(t,o,e,n)},y:bt,Y:yt,Z:_t,\"%\":Ct};return w.x=e(a,w),w.X=e(o,w),w.c=e(i,w),M.x=e(a,M),M.X=e(o,M),M.c=e(i,M),{format:function(t){var n=e(t+=\"\",w);return n.toString=function(){return t},n},parse:function(t){var e=n(t+=\"\",ut);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+=\"\",M);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,st);return e.toString=function(){return t},e}}}function lt(t,e,n){var r=t<0?\"-\":\"\",i=(r?-t:t)+\"\",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function ht(t){return t.replace(Cy,\"\\\\$&\")}function dt(t){return new RegExp(\"^(?:\"+t.map(ht).join(\"|\")+\")\",\"i\")}function pt(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function gt(t,e,n){var r=Sy.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vt(t,e,n){var r=Sy.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function mt(t,e,n){var r=Sy.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function yt(t,e,n){var r=Sy.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function bt(t,e,n){var r=Sy.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _t(t,e,n){var r=/^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||\"00\")),n+r[0].length):-1}function xt(t,e,n){var r=Sy.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function wt(t,e,n){var r=Sy.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Mt(t,e,n){var r=Sy.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kt(t,e,n){var r=Sy.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Et(t,e,n){var r=Sy.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function St(t,e,n){var r=Sy.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function At(t,e,n){var r=Sy.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ct(t,e,n){var r=Ay.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function zt(t,e){return lt(t.getDate(),e,2)}function Dt(t,e){return lt(t.getHours(),e,2)}function Ot(t,e){return lt(t.getHours()%12||12,e,2)}function Nt(t,e){return lt(1+sy.count(hy(t),t),e,3)}function Tt(t,e){return lt(t.getMilliseconds(),e,3)}function Rt(t,e){return lt(t.getMonth()+1,e,2)}function Pt(t,e){return lt(t.getMinutes(),e,2)}function Lt(t,e){return lt(t.getSeconds(),e,2)}function qt(t,e){return lt(fy.count(hy(t),t),e,2)}function Ut(t){return t.getDay()}function jt(t,e){return lt(cy.count(hy(t),t),e,2)}function Ft(t,e){return lt(t.getFullYear()%100,e,2)}function It(t,e){return lt(t.getFullYear()%1e4,e,4)}function $t(t){var e=t.getTimezoneOffset();return(e>0?\"-\":(e*=-1,\"+\"))+lt(e/60|0,\"0\",2)+lt(e%60,\"0\",2)}function Bt(t,e){return lt(t.getUTCDate(),e,2)}function Wt(t,e){return lt(t.getUTCHours(),e,2)}function Yt(t,e){return lt(t.getUTCHours()%12||12,e,2)}function Ht(t,e){return lt(1+gy.count(by(t),t),e,3)}function Gt(t,e){return lt(t.getUTCMilliseconds(),e,3)}function Xt(t,e){return lt(t.getUTCMonth()+1,e,2)}function Vt(t,e){return lt(t.getUTCMinutes(),e,2)}function Jt(t,e){return lt(t.getUTCSeconds(),e,2)}function Zt(t,e){return lt(vy.count(by(t),t),e,2)}function Qt(t){return t.getUTCDay()}function Kt(t,e){return lt(my.count(by(t),t),e,2)}function te(t,e){return lt(t.getUTCFullYear()%100,e,2)}function ee(t,e){return lt(t.getUTCFullYear()%1e4,e,4)}function ne(){return\"+0000\"}function re(){return\"%\"}function ie(t){return _y=ct(t),xy=_y.format,wy=_y.parse,My=_y.utcFormat,ky=_y.utcParse,_y}function ae(t,e,n){n=n||wy;var r,i,a,o,u,s,f,c=t.columns||Object.keys(t[0]);for(\"auto\"===e&&(e=H(t,c)),r=(c=Object.keys(e)).map(function(t){var r,i,a=e[t];if(a&&(0===a.indexOf(\"date:\")||0===a.indexOf(\"utc:\")))return r=a.split(/:(.+)?/,2),(\"'\"===(i=r[1])[0]&&\"'\"===i[i.length-1]||'\"'===i[0]&&'\"'===i[i.length-1])&&(i=i.slice(1,-1)),\"utc\"===r[0]?ky(i):n(i);if(!Wm[a])throw Error(\"Illegal format pattern: \"+t+\":\"+a);return Wm[a]}),o=0,s=t.length,f=c.length;o<s;++o)for(i=t[o],u=0;u<f;++u)i[a=c[u]]=r[u](i[a])}function oe(t){var e,n,r=new Promise(function(t,r){e=t,n=r});return r.requests=0,r.done=function(){0==--r.requests&&t.runAfter(function(){t._pending=null;try{t.run(),e(t)}catch(t){n(t)}})},t._pending=r}function ue(t,e,n,r,i,a){var o,u,s=am({},a,Dy);em(n)||(n=rm(n)),void 0===r?o=function(e){t.touch(n(e))}:em(r)?(u=new m(null,r,i,!1),o=function(e){var r,i=n(e);u.evaluate(e),p(r=u.value)?t.pulse(i,r,a):t.update(i,r,s)}):o=function(e){t.update(n(e),r,s)},e.apply(o)}function se(t,e,n,r,i,a){var o,u;void 0===r?u=n:(o=em(r)?r:rm(r),(u=new m(null,r=n?function(t,e){var r=o(t,e);return n.skip()?r:n.skip(!0).value=r}:o,i,!1)).modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),e.targets().add(u)}function fe(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ce(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function le(t,e){var n=[];return Em(t,e,function(t){n.push(t)}),n}function he(t,e){var n={};return t.visit(e,function(t){n[s(t)]=1}),function(t){return n[s(t)]?null:t}}function de(t,e,n,r){var i,a,o,u,s,f=this,c=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if((i=n[o]).stamp===e){if(i.fields){a=f.fields||(f.fields={});for(s in i.fields)a[s]=1}i.changed(f.ADD)&&(c|=f.ADD),i.changed(f.REM)&&(c|=f.REM),i.changed(f.MOD)&&(c|=f.MOD)}this.changes=c}function pe(t){this.cmp=t,this.nodes=[]}function ge(t,e,n,r){var i,a,o;for(i=t[n];n>e&&r(i,a=t[o=n-1>>1])<0;)t[n]=a,n=o;return t[n]=i}function ve(t,e,n){for(var r,i=e,a=t.length,o=t[e],u=2*e+1;u<a;)(r=u+1)<a&&n(t[u],t[r])>=0&&(u=r),t[e]=t[u],u=2*(e=u)+1;return t[e]=o,ge(t,i,e,n)}function me(){this._log=Kv(),this.logLevel(Jv),this._clock=0,this._rank=0,this._loader=Bm(),this._touched=o(Wv),this._pulses={},this._pulse=null,this._heap=new pe(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}function ye(t){return function(){return this._log[t].apply(this,arguments)}}function be(t,e){m.call(this,t,null,e)}function _e(t){var e=xe(t);return e&&e.Definition||null}function xe(t){return t=t&&t.toLowerCase(),Uy.hasOwnProperty(t)?Uy[t]:null}function we(t){return function(e){for(var n=t.length,r=1,i=String(t[0](e));r<n;++r)i+=\"|\"+t[r](e);return i}}function Me(t){return t&&t.length?1===t.length?t[0]:we(t):function(){return\"\"}}function ke(t,e,n){return n||t+(e?\"_\"+e:\"\")}function Ee(t,e){return jy[t](e)}function Se(t){return function(e){var n=am({init:\"\",add:\"\",rem:\"\",idx:0},t);return n.out=e||t.name,n}}function Ae(t,e){return t.idx-e.idx}function Ce(t,e){function n(t,r){function i(e){t[e]||n(t,t[e]=jy[e]())}return r.req&&r.req.forEach(i),e&&r.str&&r.str.forEach(i),t}var r,i=t.reduce(n,t.reduce(function(t,e){return t[e.name]=e,t},{})),a=[];for(r in i)a.push(i[r]);return a.sort(Ae)}function ze(t,e){var n=e||Yv,r=\"var cell = this.cell; this.valid = 0; this.missing = 0;\",i=\"this.cell = cell; this.init();\",a=\"if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;\",o=\"if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;\",u=\"var cell = this.cell;\";return Ce(t,!0).forEach(function(t){r+=t.init,a+=t.add,o+=t.rem}),t.slice().sort(Ae).forEach(function(t){u+=\"t['\"+t.out+\"']=\"+t.set+\";\"}),u+=\"return t;\",i=Function(\"cell\",i),i.prototype.init=Function(r),i.prototype.add=Function(\"v\",\"t\",a),i.prototype.rem=Function(\"v\",\"t\",o),i.prototype.set=Function(\"t\",u),i.prototype.get=n,i.fields=t.map(function(t){return t.out}),i}function De(t){return null===t?NaN:+t}function Oe(t){return function(e,n){return By(t(e),n)}}function Ne(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Qy?10:a>=Ky?5:a>=tb?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Qy?10:a>=Ky?5:a>=tb?2:1)}function Te(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Qy?i*=10:a>=Ky?i*=5:a>=tb&&(i*=2),e<t?-i:i}function Re(t){var e=t.length,n=cb(t),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(Vy(t)),r)*Math.pow(e,-.2)}function Pe(t){this._key=t?$v(t):s,this.reset()}function Le(t){be.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function qe(t){be.call(this,null,t)}function Ue(t){be.call(this,[],t)}function je(t){m.call(this,null,Fe,t)}function Fe(t){return this.value&&!t.modified()?this.value:nm(t.fields,t.orders)}function Ie(t){be.call(this,null,t)}function $e(t,e,n){switch(e){case\"upper\":t=t.toUpperCase();break;case\"lower\":t=t.toLowerCase()}return t.match(n)}function Be(t){be.call(this,null,t)}function We(t,e,n,r){for(var i,a,o=[],u={},s=t.length,f=0;f<s;++f)for(u[e]=a=t[f],i=0;i<s;++i)u[n]=t[i],r(u)&&(o.push(c(u)),(u={})[e]=a);return o}function Ye(t,e){var n=t[xb];bb.hasOwnProperty(n)||qv(\"Unknown distribution function: \"+n);var r=bb[n]();for(var i in t)i===wb?r.data((t.from||e()).map(t[i])):i===_b?r[i](t[i].map(function(t){return Ye(t,e)})):typeof r[i]===xb&&r[i](t[i]);return r}function He(t){be.call(this,null,t)}function Ge(t){return function(){return t.materialize(t.SOURCE).source}}function Xe(t){be.call(this,[1/0,-1/0],t)}function Ve(t,e){m.call(this,t),this.parent=e}function Je(t){be.call(this,{},t),this._keys=sm();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}function Ze(t){m.call(this,null,Qe,t)}function Qe(t){return this.value&&!t.modified()?this.value:jv(t.name)?tm(t.name).map(function(t){return $v(t)}):$v(t.name,t.as)}function Ke(t){be.call(this,sm(),t)}function tn(t){be.call(this,{},t)}function en(t){return t.fields.join(\"|\")}function nn(t){be.call(this,null,t)}function rn(t){be.call(this,[],t)}function an(t){be.call(this,[],t)}function on(t){var e,n=t.method||Ab.value;if(null!=Ab[n])return n===Ab.value?(e=void 0!==t.value?t.value:0,function(){return e}):Ab[n];qv(\"Unrecognized imputation method: \"+n)}function un(t){var e=t.field;return function(t){return t?e(t):NaN}}function sn(t,e,n,r){var i,a,o,u,s,f,c,l,h=[],d=r?r.slice():[],p={},g={};for(d.forEach(function(t,e){p[t]=e+1}),u=0,c=t.length;u<c;++u)f=n(l=t[u]),s=p[f]||(p[f]=d.push(f)),(o=g[a=(i=e?e.map(function(t){return t(l)}):Cb)+\"\"])||(o=g[a]=[],h.push(o),o.values=i),o[s-1]=l;return h.domain=d,h}function fn(t){Le.call(this,t)}function cn(t){m.call(this,null,ln,t)}function ln(t){return this.value&&!t.modified()?this.value:pm(t.fields)}function hn(t){be.call(this,{},t)}function dn(t){m.call(this,null,pn,t)}function pn(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,a=-1/0,o=t.extents;for(e=0,n=o.length;e<n;++e)(r=o[e])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function gn(t){m.call(this,null,vn,t)}function vn(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(t,e){return t.concat(e)},[])}function mn(t){be.call(this,null,t)}function yn(t){Je.call(this,t)}function bn(t){be.call(this,null,t)}function _n(t){be.call(this,null,t)}function xn(t){be.call(this,[],t),this.count=0}function wn(t){be.call(this,null,t)}function Mn(t){be.call(this,null,t),this.modified(!0)}function kn(t){be.call(this,sm(),t)}function En(t){be.call(this,null,t)}function Sn(t,e,n,r){var i=Db[t](e,n);return{init:i.init||Hv,update:function(t,e){e[r]=i.next(t)}}}function An(t){function r(t){tm(n(t)).forEach(function(t){l[t]=1})}var i=this,a=tm(t.ops),o=tm(t.fields),u=tm(t.params),s=tm(t.as),f=i.outputs=[],c=i.windows=[],l={},h={},d=!0,p=[],g=[];r(t.sort),a.forEach(function(t,n){var i=o[n],a=e(i),l=ke(t,a,s[n]);if(r(i),f.push(l),Db.hasOwnProperty(t))c.push(Sn(t,o[n],u[n],l));else{if(null==i&&\"count\"!==t&&qv(\"Null aggregate field specified.\"),\"count\"===t)return void p.push(l);d=!1;var v=h[a];v||((v=h[a]=[]).field=i,g.push(v)),v.push(Ee(t,l))}}),(p.length||g.length)&&(i.cell=Cn(g,p,d)),i.inputs=Object.keys(l)}function Cn(t,e,n){t=t.map(function(t){return ze(t,t.field)});var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new t[o](r);if(r.store)var u=r.data=new Pe;return r.add=function(t){if(r.num+=1,!n){u&&u.add(t);for(var e=0;e<i;++e)a[e].add(a[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){u&&u.rem(t);for(var e=0;e<i;++e)a[e].rem(a[e].get(t),t)}},r.set=function(t){var i,o;for(u&&u.values(),i=0,o=e.length;i<o;++i)t[e[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(t)},r.init=function(){r.num=0,u&&u.reset();for(var t=0;t<i;++t)a[t].init()},r}function zn(t){be.call(this,{},t),this._mlen=0,this._mods=[]}function Dn(t,e,n){var r=n.sort,i=r&&!n.ignorePeers,a=n.frame||[null,0],o=t.data(r),u=o.length,s=0,f=i?Wy(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||rm(-1)};for(e.init();s<u;++s)On(c,a,s,u),i&&Nn(c,f),e.update(c,o[s])}function On(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function Nn(t,e){var n=t.i0,r=t.i1-1,i=t.compare,a=t.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(t.i0=e.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(t.i1=e.right(a,a[r]))}function Tn(t){this.clear(),t&&this.union(t)}function Rn(t){this.mark=t,this.bounds=this.bounds||new Tn}function Pn(t){Rn.call(this,t),this.items=this.items||[]}function Ln(t,e,n){return!t&&\"undefined\"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function qn(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function Un(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=Ln(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function jn(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function Fn(t){return\"mark-\"+t.marktype+(t.role?\" role-\"+t.role:\"\")+(t.name?\" \"+t.name:\"\")}function In(t){this._pending=0,this._loader=t||Bm()}function $n(t){t._pending+=1}function Bn(t){t._pending-=1}function Wn(){this._x0=this._y0=this._x1=this._y1=null,this._=\"\"}function Yn(){return new Wn}function Hn(t){return t>1?0:t<-1?t_:Math.acos(t)}function Gn(t){return t>=1?e_:t<=-1?-e_:Math.asin(t)}function Xn(t){return t.innerRadius}function Vn(t){return t.outerRadius}function Jn(t){return t.startAngle}function Zn(t){return t.endAngle}function Qn(t){return t&&t.padAngle}function Kn(t,e,n,r,i,a,o,u){var s=n-t,f=r-e,c=o-i,l=u-a,h=(c*(e-a)-l*(t-i))/(l*s-c*f);return[t+h*s,e+h*f]}function tr(t,e,n,r,i,a,o){var u=t-n,s=e-r,f=(o?a:-a)/Qb(u*u+s*s),c=f*s,l=-f*u,h=t+c,d=e+l,p=n+c,g=r+l,v=(h+p)/2,m=(d+g)/2,y=p-h,b=g-d,_=y*y+b*b,x=i-a,w=h*g-p*d,M=(b<0?-1:1)*Qb(Vb(0,x*x*_-w*w)),k=(w*b-y*M)/_,E=(-w*y-b*M)/_,S=(w*b+y*M)/_,A=(-w*y+b*M)/_,C=k-v,z=E-m,D=S-v,O=A-m;return C*C+z*z>D*D+O*O&&(k=S,E=A),{cx:k,cy:E,x01:-c,y01:-l,x11:k*(i/x-1),y11:E*(i/x-1)}}function er(t){this._context=t}function nr(t){return t[0]}function rr(t){return t[1]}function ir(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ar(t){this._context=t}function or(t){this._context=t}function ur(t){this._context=t}function sr(t,e){this._basis=new ar(t),this._beta=e}function fr(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function cr(t,e){this._context=t,this._k=(1-e)/6}function lr(t,e){this._context=t,this._k=(1-e)/6}function hr(t,e){this._context=t,this._k=(1-e)/6}function dr(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Kb){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Kb){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*f+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*f+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function pr(t,e){this._context=t,this._alpha=e}function gr(t,e){this._context=t,this._alpha=e}function vr(t,e){this._context=t,this._alpha=e}function mr(t){this._context=t}function yr(t){return t<0?-1:1}function br(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(yr(a)+yr(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function _r(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function xr(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,o-u*n,a,o)}function wr(t){this._context=t}function Mr(t){this._context=new kr(t)}function kr(t){this._context=t}function Er(t){this._context=t}function Sr(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Ar(t,e){this._context=t,this._t=e}function Cr(t,e,n){var r=v_.hasOwnProperty(t)&&v_[t],i=null;return r&&(i=r.curve||r[e||\"vertical\"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function zr(t,e,n,r,i,a,o,u,s){var f=w_.call(arguments);if(__[f])return __[f];var c=o*(Math.PI/180),l=Math.sin(c),h=Math.cos(c),d=h*(u-t)*.5+l*(s-e)*.5,p=h*(s-e)*.5-l*(u-t)*.5,g=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(n*=g=Math.sqrt(g),r*=g);var v=h/n,m=l/n,y=-l/r,b=h/r,_=v*u+m*s,x=y*u+b*s,w=v*t+m*e,M=y*t+b*e,k=1/((w-_)*(w-_)+(M-x)*(M-x))-.25;k<0&&(k=0);var E=Math.sqrt(k);a==i&&(E=-E);var S=.5*(_+w)-E*(M-x),A=.5*(x+M)+E*(w-_),C=Math.atan2(x-A,_-S),z=Math.atan2(M-A,w-S)-C;z<0&&1===a?z+=2*Math.PI:z>0&&0===a&&(z-=2*Math.PI);for(var D=Math.ceil(Math.abs(z/(.5*Math.PI+.001))),O=[],N=0;N<D;++N){var T=C+N*z/D,R=C+(N+1)*z/D;O[N]=[S,A,T,R,n,r,l,h]}return __[f]=O}function Dr(t){var e=w_.call(t);if(x_[e])return x_[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],f=t[7],c=f*o,l=-s*u,h=s*o,d=f*u,p=Math.cos(i),g=Math.sin(i),v=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,M=n+v,k=r+m,E=M+_*m,S=k-_*v;return x_[e]=[c*x+l*w,h*x+d*w,c*E+l*S,h*E+d*S,c*M+l*k,h*M+d*k]}function Or(t,e){var n=M_[0]=t[0];if(\"a\"===n||\"A\"===n)M_[1]=e*t[1],M_[2]=e*t[2],M_[6]=e*t[6],M_[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)M_[r]=e*t[r];return M_}function Nr(t,e,n,r){for(var i=zr(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=Dr(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function Tr(t){return A_.hasOwnProperty(t)?A_[t]:Rr(t)}function Rr(t){if(!C_.hasOwnProperty(t)){var e=b_(t);C_[t]={draw:function(t,n){k_(t,e,0,0,Math.sqrt(n)/2)}}}return C_[t]}function Pr(t){return t.x}function Lr(t){return t.y}function qr(t){return t.width}function Ur(t){return t.height}function jr(t){return function(){return t}}function Fr(t){return t.x||0}function Ir(t){return t.y||0}function $r(t){return t.cornerRadius||0}function Br(t){return!(!1===t.defined)}function Wr(t,e,n,r){return L_.context(t)(e,n,r)}function Yr(t){return g_=t,Yr}function Hr(){}function Gr(t,e){g_.add(t,e)}function Xr(t,e){return t.zindex-e.zindex||t.index-e.index}function Vr(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(Xr)}function Jr(t,e){var n,r,i=t.items;if(i&&i.length){var a=Vr(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function Zr(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=Vr(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function Qr(t){return function(e,n,r){Jr(n,function(n){r&&!r.intersects(n.bounds)||ti(t,e,n,n)})}}function Kr(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||ti(t,e,n.items[0],n.items)}}function ti(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&G_(e,n,i)&&e.fill(),n.stroke&&V_(e,n,i)&&e.stroke()))}function ei(t){return t||(t=J_),function(e,n,r,i,a,o){return e.pixelRatio>1&&(r*=e.pixelRatio,i*=e.pixelRatio),Zr(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return t(e,n,r,i,a,o)?n:void 0})}}function ni(t,e){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==e?s.fill:e,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:\"butt\"),!t(n,r)&&(f&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function ri(t){return ei(ni(t))}function ii(t,e,n){return(!1!==t.interactive||\"group\"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}function ai(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then(function(e){t.image=e,t.image.url=t.url})),n}function oi(t,e){return\"center\"===t?e/2:\"right\"===t?e:0}function ui(t,e){return\"middle\"===t?e/2:\"bottom\"===t?e:0}function si(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=b_(n)).path=n),k_(t,r,e.x,e.y)}function fi(t,e){t.beginPath(),Wr(t,e)}function ci(t,e,n){var r,i,a,o;return!(!e.stroke||!V_(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}function li(t){return W_=gi(t),hi(mi(t))}function hi(t){return~~(.8*t.length*W_)}function di(t){return B_.font=bi(t),pi(mi(t))}function pi(t){return B_.measureText(t).width}function gi(t){return null!=t.fontSize?t.fontSize:11}function vi(t){B_=t&&(B_=jb(1,1))?B_.getContext(\"2d\"):null,px.width=B_?di:li}function mi(t){var e=t.text;return null==e?\"\":t.limit>0?yi(t):e+\"\"}function yi(t){var e,n=+t.limit,r=t.text+\"\";if(B_?(B_.font=bi(t),e=pi):(W_=gi(t),e=hi),e(r)<n)return r;var i,a=t.ellipsis||\"\",o=\"rtl\"===t.dir,u=0,s=r.length;if(n-=e(a),o){for(;u<s;)i=u+s>>>1,e(r.slice(i))>n?u=i+1:s=i;return a+r.slice(u)}for(;u<s;)i=1+(u+s>>>1),e(r.slice(0,i))<n?u=i:s=i-1;return r.slice(0,u)+a}function bi(t,e){var n=t.font;return e&&n&&(n=String(n).replace(/\"/g,\"'\")),(t.fontStyle?t.fontStyle+\" \":\"\")+(t.fontVariant?t.fontVariant+\" \":\"\")+(t.fontWeight?t.fontWeight+\" \":\"\")+gi(t)+\"px \"+(n||\"sans-serif\")}function _i(t){var e=t.baseline,n=gi(t);return Math.round(\"top\"===e?.93*n:\"middle\"===e?.3*n:\"bottom\"===e?-.21*n:0)}function xi(t,e,n){var r,i,a=px.height(e),o=e.align,u=e.radius||0,s=e.x||0,f=e.y||0,c=e.dx||0,l=(e.dy||0)+_i(e)-Math.round(.8*a);return u&&(i=(e.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=px.width(e),\"center\"===o?c-=r/2:\"right\"===o&&(c-=r),t.set(c+=s,l+=f,c+r,l+a),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,s,f),t.expand(n||!r?0:1)}function wi(t,e){return JSON.stringify(t,xx,e)}function Mi(t){return ki(\"string\"==typeof t?JSON.parse(t):t)}function ki(t){var e,n,r,i=t.marktype,a=t.items;if(a)for(n=0,r=a.length;n<r;++n)e=i?\"mark\":\"group\",a[n][e]=t,a[n].zindex&&(a[n][e].zdirty=!0),\"group\"===(i||e)&&ki(a[n]);return i&&_x(t),t}function Ei(t){arguments.length?this.root=Mi(t):(this.root=Si({marktype:\"group\",name:\"root\",role:\"frame\"}),this.root.items=[new Pn(this.root)])}function Si(t,e){return{bounds:new Tn,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function Ai(t){this._active=null,this._handlers={},this._loader=t||Bm()}function Ci(t){this._el=null,this._bgcolor=null,this._loader=new In(t)}function zi(t){Ai.call(this,t),this._down=null,this._touch=null,this._first=!0}function Di(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function Oi(t){return function(e){this.fire(t,e),this._active=null}}function Ni(t){Ci.call(this,t),this._redraw=!1,this._dirty=new Tn}function Ti(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}function Ri(t,e){if(null==e)return t;for(var n=Nx.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}function Pi(t){Ai.call(this,t);var e=this;e._hrefHandler=Li(e,function(t,n){n&&n.href&&e.handleHref(t,n,n.href)}),e._tooltipHandler=Li(e,function(t,n){n&&n.tooltip&&e.handleTooltip(t,n,\"mouseover\"===t.type?n.tooltip:null)})}function Li(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function qi(t,e,n){var r,i,a=\"<\"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=\" \"+r+'=\"'+i+'\"');return n&&(a+=\" \"+n),a+\">\"}function Ui(t){return\"</\"+t+\">\"}function ji(t){Ci.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Fi(t,e,n){var r,i,a;for((t=Un(t,n,\"linearGradient\",qx)).setAttribute(\"id\",e.id),t.setAttribute(\"x1\",e.x1),t.setAttribute(\"x2\",e.x2),t.setAttribute(\"y1\",e.y1),t.setAttribute(\"y2\",e.y2),r=0,i=e.stops.length;r<i;++r)(a=Un(t,r,\"stop\",qx)).setAttribute(\"offset\",e.stops[r].offset),a.setAttribute(\"stop-color\",e.stops[r].color);jn(t,r)}function Ii(t,e,n){var r;(t=Un(t,n,\"clipPath\",qx)).setAttribute(\"id\",e.id),(r=Un(t,0,\"rect\",qx)).setAttribute(\"x\",0),r.setAttribute(\"y\",0),r.setAttribute(\"width\",e.width),r.setAttribute(\"height\",e.height)}function $i(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Bi(t,e,n){e=e.lastChild;var r,i=0;Jr(n,function(n){r=t.draw(e,n,r),++i}),jn(e,1+i)}function Wi(t,e,n,r){var i,a=t._svg;if(!a&&(i=e.ownerDocument,a=Ln(i,r,qx),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:\"default\"},\"g\"===r))){var o=Ln(i,\"path\",qx);o.setAttribute(\"class\",\"background\"),a.appendChild(o),o.__data__=t;var u=Ln(i,\"g\",qx);a.appendChild(u),u.__data__=t}return!i&&a.previousSibling===n&&n||e.insertBefore(a,n?n.nextSibling:e.firstChild),a}function Yi(t,e,n){e!==Ix[t]&&(null!=e?n?Fx.setAttributeNS(n,t,e):Fx.setAttribute(t,e):n?Fx.removeAttributeNS(n,t):Fx.removeAttribute(t),Ix[t]=e)}function Hi(){var t;return\"undefined\"==typeof window?\"\":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Gi(t){Ci.call(this,t),this._text={head:\"\",root:\"\",foot:\"\",defs:\"\",body:\"\"},this._defs={gradient:{},clipping:{}}}function Xi(t,e,n,r){Yx[r||t]=e}function Vi(t,e,n,r){if(null==t)return\"\";var i,a,o,u,s,f=\"\";for(\"bgrect\"===n&&!1===e.interactive&&(f+=\"pointer-events: none;\"),\"text\"===n&&(f+=\"font: \"+bi(t)+\";\"),i=0,a=Lx.length;i<a;++i)o=Lx[i],u=Px[o],null==(s=t[o])?\"fill\"===u&&(f+=(f.length?\" \":\"\")+\"fill: none;\"):(s.id&&(r.gradient[s.id]=s,s=\"url(#\"+s.id+\")\"),f+=(f.length?\" \":\"\")+u+\": \"+s+\";\");return f?'style=\"'+f+'\"':null}function Ji(t){return t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}function Zi(t,e){return t=String(t||\"\").toLowerCase(),arguments.length>1?(Gx[t]=e,this):Gx[t]}function Qi(t,e,n){return t===e||(\"path\"===n?Ki(t,e):t instanceof Date&&e instanceof Date?+t==+e:hm(t)&&hm(e)?Math.abs(t-e)<=Xx:t&&e&&(Fv(t)||Fv(e))?null!=t&&null!=e&&ta(t,e):t==e)}function Ki(t,e){return Qi(b_(t),b_(e))}function ta(t,e){var n,r,i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!Qi(t[n],e[n],n))return!1;return typeof t==typeof e}function ea(t){be.call(this,null,t)}function na(t,e,n){return e(t.bounds.clear(),t,n)}function ra(t){be.call(this,0,t)}function ia(t){var e=t._signals[Zx];return e||(t._signals[Zx]=e=t.add(0)),e}function aa(t){be.call(this,null,t)}function oa(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function ua(t){be.call(this,null,t)}function sa(t,e){return!(t.x2-1<e.x1||t.x1+1>e.x2||t.y2-1<e.y1||t.y1+1>e.y2)}function fa(t){for(var e,n=1,r=t.length,i=t[0].bounds;n<r;i=e,++n)if(sa(i,e=t[n].bounds))return!0}function ca(t){var e=t.bounds;return e.width()>1&&e.height()>1}function la(t){be.call(this,null,t)}function ha(t){for(var e,n,r=t.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(e=r[a],n=e.items,\"group\"===e.marktype)switch(e.role){case Kx:case tw:break;case ew:da(n,o.rowheaders);break;case nw:da(n,o.rowfooters);break;case iw:da(n,o.colheaders);break;case aw:da(n,o.colfooters);break;case rw:o.rowtitle=n[0];break;case ow:o.coltitle=n[0];break;default:da(n,o.marks)}return o}function da(t,e){for(var n=0,r=t.length;n<r;++n)e.push(t[n])}function pa(t){return{x1:0,y1:0,x2:t.width||0,y2:t.height||0}}function ga(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function va(t,e){return\"x1\"===e?t.x||0:\"y1\"===e?t.y||0:\"x2\"===e?(t.x||0)+(t.width||0):\"y2\"===e?(t.y||0)+(t.height||0):void 0}function ma(t,e){return t.bounds[e]}function ya(t,e,n){var r=Fv(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function ba(t){return t<0?Math.ceil(-t):0}function _a(t,e,n){function r(t,e){return Math.floor(Math.min(t,e))}function i(t,e){return Math.ceil(Math.max(t,e))}var a,o,u,s,f,c,l,h,d,p,g,v,m,y=ha(e,n),b=y.marks,_=\"flush\"===n.bounds,x=_?pa:ga,w=new Tn(0,0,0,0),M=ya(n.align,\"column\"),k=ya(n.align,\"row\"),E=ya(n.padding,\"column\"),S=ya(n.padding,\"row\"),A=n.offset,C=e.columns||n.columns||b.length,z=C<0?1:Math.ceil(b.length/C),D=z*C,O=[],N=[],T=[],R=[],P=b.length;for(o=0;o<C;++o)N[o]=0;for(o=0;o<z;++o)R[o]=0;for(o=0;o<P;++o)f=x(b[o]),s=~~(o/C),l=(u=o%C)?Math.ceil(x(b[o-1]).x2):0,h=s?Math.ceil(x(b[o-C]).y2):0,N[u]=Math.max(N[u],l),R[s]=Math.max(R[s],h),O.push(E+ba(f.x1)),T.push(S+ba(f.y1)),t.dirty(b[o]);for(o=0;o<P;++o)o%C==0&&(O[o]=0),o<C&&(T[o]=0);if(\"each\"===M)for(u=1;u<C;++u){for(m=0,o=u;o<P;o+=C)m<O[o]&&(m=O[o]);for(o=u;o<P;o+=C)O[o]=m+N[u]}else if(\"all\"===M){for(v=0,u=1;u<C;++u)v<N[u]&&(v=N[u]);for(m=0,o=0;o<P;++o)o%C&&m<O[o]&&(m=O[o]);for(o=0;o<P;++o)o%C&&(O[o]=m+v)}else for(u=1;u<C;++u)for(o=u;o<P;o+=C)O[o]+=N[u];if(\"each\"===k)for(s=1;s<z;++s){for(m=0,a=(o=s*C)+C;o<a;++o)m<T[o]&&(m=T[o]);for(o=s*C;o<a;++o)T[o]=m+R[s]}else if(\"all\"===k){for(v=0,s=1;s<z;++s)v<R[s]&&(v=R[s]);for(m=0,o=C;o<P;++o)m<T[o]&&(m=T[o]);for(o=C;o<P;++o)T[o]=m+v}else for(s=1;s<z;++s)for(a=(o=s*C)+C;o<a;++o)T[o]+=R[s];for(d=0,o=0;o<P;++o)l=(c=b[o]).x||0,c.x=d=O[o]+(o%C?d:0),c.bounds.translate(d-l,0);for(u=0;u<C;++u)for(p=0,o=u;o<P;o+=C)h=(c=b[o]).y||0,c.y=p+=T[o],c.bounds.translate(0,p-h);for(o=0;o<P;++o)b[o].mark.bounds.clear();for(o=0;o<P;++o)c=b[o],t.dirty(c),w.union(c.mark.bounds.union(c.bounds));x=_?va:ma,g=ya(n.headerBand,\"row\",null),d=xa(t,y.rowheaders,b,C,z,-ya(A,\"rowHeader\"),r,0,x,\"x1\",0,C,1,g),g=ya(n.headerBand,\"column\",null),p=xa(t,y.colheaders,b,C,C,-ya(A,\"columnHeader\"),r,1,x,\"y1\",0,1,C,g),g=ya(n.footerBand,\"row\",null),xa(t,y.rowfooters,b,C,z,ya(A,\"rowFooter\"),i,0,x,\"x2\",C-1,C,1,g),g=ya(n.footerBand,\"column\",null),xa(t,y.colfooters,b,C,C,ya(A,\"columnFooter\"),i,1,x,\"y2\",D-C,1,C,g),y.rowtitle&&(m=d-ya(A,\"rowTitle\"),g=ya(n.titleBand,\"row\",.5),wa(t,y.rowtitle,m,0,w,g)),y.coltitle&&(m=p-ya(A,\"columnTitle\"),g=ya(n.titleBand,\"column\",.5),wa(t,y.coltitle,m,1,w,g))}function xa(t,e,n,r,i,a,o,u,s,f,c,l,h,d){var p,g,v,m,y,b,_,x,w,M=n.length,k=0,E=0;for(p=c;p<M;p+=l)n[p]&&(k=o(k,s(n[p],f)));if(!e.length)return k;for(e.length>i&&(t.warn(\"Grid headers exceed limit: \"+i),e=e.slice(0,i)),k+=a,g=0,m=e.length;g<m;++g)t.dirty(e[g]),e[g].mark.bounds.clear();for(p=c,g=0,m=e.length;g<m;++g,p+=l){for(y=(b=e[g]).mark.bounds,v=p;null==(_=n[v]);v-=h);u?(x=null==d?_.x:Math.round(_.bounds.x1+d*_.bounds.width()),w=k):(x=k,w=null==d?_.y:Math.round(_.bounds.y1+d*_.bounds.height())),y.union(b.bounds.translate(x-(b.x||0),w-(b.y||0))),b.x=x,b.y=w,t.dirty(b),E=o(E,y[f])}return E}function wa(t,e,n,r,i,a){if(e){t.dirty(e);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),e.bounds.translate(o-(e.x||0),u-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=u,t.dirty(e)}}function Ma(t){be.call(this,null,t)}function ka(t,e,n){var r,i,a,o,u,s,f=e.items,c=Math.max(0,e.width||0),l=Math.max(0,e.height||0),h=(new Tn).set(0,0,c,l),d=h.clone(),p=h.clone(),g=h.clone(),v=[];for(u=0,s=f.length;u<s;++u)switch((i=f[u]).role){case gw:d.union(o=Ca(t,i,c,l)),(Sa(i)?p:g).union(o);break;case vw:r=i;break;case yw:v.push(i);break;case mw:case bw:case _w:case xw:case ww:case Mw:p.union(i.bounds),g.union(i.bounds);break;default:h.union(i.bounds)}if(r&&(d.union(o=za(t,r,d)),(Sa(r)?p:g).union(o)),v.length)for(a={left:0,right:0,top:0,bottom:0,margin:n.legendMargin||8},u=0,s=v.length;u<s;++u)if(o=Da(t,v[u],a,p,g,c,l),n.autosize&&n.autosize.type===uw){var m=v[u].items[0].datum.orient;m===hw||m===dw?h.add(o.x1,0).add(o.x2,0):m!==lw&&m!==pw||h.add(0,o.y1).add(0,o.y2)}else h.union(o);h.union(p).union(g).union(d),Oa(t,e,h,n)}function Ea(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Sa(t){var e=t.items[0].datum.orient;return e===hw||e===dw}function Aa(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Ca(t,e,n,r){var i,a,o=e.items[0],u=o.datum,s=u.orient,f=Aa(u),c=o.range,l=o.offset,h=o.position,d=o.minExtent,p=o.maxExtent,g=u.title&&o.items[f[2]].items[0],v=o.titlePadding,m=o.bounds,y=0,b=0;switch(Ew.clear().union(m),m.clear(),(i=f[0])>-1&&m.union(o.items[i].bounds),(i=f[1])>-1&&m.union(o.items[i].bounds),s){case lw:y=h||0,b=-l,a=Math.max(d,Math.min(p,-m.y1)),g&&(g.auto?(a+=v,g.y=-a,a+=g.bounds.height()):m.union(g.bounds)),m.add(0,-a).add(c,0);break;case hw:y=-l,b=h||0,a=Math.max(d,Math.min(p,-m.x1)),g&&(g.auto?(a+=v,g.x=-a,a+=g.bounds.width()):m.union(g.bounds)),m.add(-a,0).add(0,c);break;case dw:y=n+l,b=h||0,a=Math.max(d,Math.min(p,m.x2)),g&&(g.auto?(a+=v,g.x=a,a+=g.bounds.width()):m.union(g.bounds)),m.add(0,0).add(a,c);break;case pw:y=h||0,b=r+l,a=Math.max(d,Math.min(p,m.y2)),g&&(g.auto?(a+=v,g.y=a,a+=g.bounds.height()):m.union(g.bounds)),m.add(0,0).add(c,a);break;default:y=o.x,b=o.y}return j_(m.translate(y,b),o),Ea(o,\"x\",y+kw)|Ea(o,\"y\",b+kw)&&(o.bounds=Ew,t.dirty(o),o.bounds=m,t.dirty(o)),o.mark.bounds.clear().union(m)}function za(t,e,n){var r=e.items[0],i=r.datum.orient,a=r.offset,o=r.bounds,u=0,s=0;switch(Ew.clear().union(o),i){case lw:u=r.x,s=n.y1-a;break;case hw:u=n.x1-a,s=r.y;break;case dw:u=n.x2+a,s=r.y;break;case pw:u=r.x,s=n.y2+a;break;default:u=r.x,s=r.y}return o.translate(u-r.x,s-r.y),Ea(r,\"x\",u)|Ea(r,\"y\",s)&&(r.bounds=Ew,t.dirty(r),r.bounds=o,t.dirty(r)),e.bounds.clear().union(o)}function Da(t,e,n,r,i,a,o){var u,s,f,c=e.items[0],l=c.datum.orient,h=c.offset,d=c.bounds,p=0,g=0;switch(l===lw||l===pw?(f=i,p=n[l]):l!==hw&&l!==dw||(f=r,g=n[l]),Ew.clear().union(d),d.clear(),c.items.forEach(function(t){d.union(t.bounds)}),u=Math.round(d.width())+2*c.padding-1,s=Math.round(d.height())+2*c.padding-1,l){case hw:p-=u+h-Math.floor(f.x1),n.left+=s+n.margin;break;case dw:p+=h+Math.ceil(f.x2),n.right+=s+n.margin;break;case lw:g-=s+h-Math.floor(f.y1),n.top+=u+n.margin;break;case pw:g+=h+Math.ceil(f.y2),n.bottom+=u+n.margin;break;case\"top-left\":p+=h,g+=h;break;case\"top-right\":p+=a-u-h,g+=h;break;case\"bottom-left\":p+=h,g+=o-s-h;break;case\"bottom-right\":p+=a-u-h,g+=o-s-h;break;default:p=c.x,g=c.y}return j_(d.set(p,g,p+u,g+s),c),Ea(c,\"x\",p)|Ea(c,\"width\",u)|Ea(c,\"y\",g)|Ea(c,\"height\",s)&&(c.bounds=Ew,t.dirty(c),c.bounds=d,t.dirty(c)),c.mark.bounds.clear().union(d)}function Oa(t,e,n,r){var i=r.autosize||{},a=i.type,o=t._width,u=t._height,s=t.padding();if(!(t._autosize<1)&&a){var f=Math.max(0,e.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,Math.ceil(n.x2-f)),h=Math.max(0,e.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-h));i.contains===cw&&(o-=s.left+s.right,u-=s.top+s.bottom),a===fw?(c=0,d=0,f=o,h=u):a===uw?(f=Math.max(0,o-c-l),h=Math.max(0,u-d-p)):a===sw&&(o=f+c+l,u=h+d+p),t._resizeView(o,u,f,h,[c,d],i.resize)}}function Na(t){function e(e){var a=e+\"\",o=n.get(a);if(!o){if(i!==$w)return i;n.set(a,o=r.push(e))}return t[(o-1)%t.length]}var n=w(),r=[],i=$w;return t=null==t?[]:Iw.call(t),e.domain=function(t){if(!arguments.length)return r.slice();r=[],n=w();for(var i,a,o=-1,u=t.length;++o<u;)n.has(a=(i=t[o])+\"\")||n.set(a,r.push(i));return e},e.range=function(n){return arguments.length?(t=Iw.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(i=t,e):i},e.copy=function(){return Na().domain(r).range(t).unknown(i)},e}function Ta(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ra(){}function Pa(t){var e;return t=(t+\"\").trim().toLowerCase(),(e=Gw.exec(t))?(e=parseInt(e[1],16),new Fa(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=Xw.exec(t))?La(parseInt(e[1],16)):(e=Vw.exec(t))?new Fa(e[1],e[2],e[3],1):(e=Jw.exec(t))?new Fa(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Zw.exec(t))?qa(e[1],e[2],e[3],e[4]):(e=Qw.exec(t))?qa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Kw.exec(t))?Ia(e[1],e[2]/100,e[3]/100,1):(e=tM.exec(t))?Ia(e[1],e[2]/100,e[3]/100,e[4]):eM.hasOwnProperty(t)?La(eM[t]):\"transparent\"===t?new Fa(NaN,NaN,NaN,0):null}function La(t){return new Fa(t>>16&255,t>>8&255,255&t,1)}function qa(t,e,n,r){return r<=0&&(t=e=n=NaN),new Fa(t,e,n,r)}function Ua(t){return t instanceof Ra||(t=Pa(t)),t?(t=t.rgb(),new Fa(t.r,t.g,t.b,t.opacity)):new Fa}function ja(t,e,n,r){return 1===arguments.length?Ua(t):new Fa(t,e,n,null==r?1:r)}function Fa(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ia(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Wa(t,e,n,r)}function $a(t){if(t instanceof Wa)return new Wa(t.h,t.s,t.l,t.opacity);if(t instanceof Ra||(t=Pa(t)),!t)return new Wa;if(t instanceof Wa)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=e===a?(n-r)/u+6*(n<r):n===a?(r-e)/u+2:(e-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Wa(o,u,s,t.opacity)}function Ba(t,e,n,r){return 1===arguments.length?$a(t):new Wa(t,e,n,null==r?1:r)}function Wa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ya(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ha(t){if(t instanceof Xa)return new Xa(t.l,t.a,t.b,t.opacity);if(t instanceof eo){var e=t.h*nM;return new Xa(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Fa||(t=Ua(t));var n=Qa(t.r),r=Qa(t.g),i=Qa(t.b),a=Va((.4124564*n+.3575761*r+.1804375*i)/iM),o=Va((.2126729*n+.7151522*r+.072175*i)/aM);return new Xa(116*o-16,500*(a-o),200*(o-Va((.0193339*n+.119192*r+.9503041*i)/oM)),t.opacity)}function Ga(t,e,n,r){return 1===arguments.length?Ha(t):new Xa(t,e,n,null==r?1:r)}function Xa(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Va(t){return t>cM?Math.pow(t,1/3):t/fM+uM}function Ja(t){return t>sM?t*t*t:fM*(t-uM)}function Za(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Qa(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ka(t){if(t instanceof eo)return new eo(t.h,t.c,t.l,t.opacity);t instanceof Xa||(t=Ha(t));var e=Math.atan2(t.b,t.a)*rM;return new eo(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function to(t,e,n,r){return 1===arguments.length?Ka(t):new eo(t,e,n,null==r?1:r)}function eo(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function no(t){if(t instanceof io)return new io(t.h,t.s,t.l,t.opacity);t instanceof Fa||(t=Ua(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(yM*r+vM*e-mM*n)/(yM+vM-mM),a=r-i,o=(gM*(n-i)-dM*a)/pM,u=Math.sqrt(o*o+a*a)/(gM*i*(1-i)),s=u?Math.atan2(o,a)*rM-120:NaN;return new io(s<0?s+360:s,u,i,t.opacity)}function ro(t,e,n,r){return 1===arguments.length?no(t):new io(t,e,n,null==r?1:r)}function io(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ao(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function oo(t,e){return function(n){return t+n*e}}function uo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function so(t,e){var n=e-t;return n?oo(t,n>180||n<-180?n-360*Math.round(n/360):n):SM(isNaN(t)?e:t)}function fo(t){return 1==(t=+t)?co:function(e,n){return n-e?uo(e,n,t):SM(isNaN(e)?n:e)}}function co(t,e){var n=e-t;return n?oo(t,n):SM(isNaN(t)?e:t)}function lo(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=ja(e[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=t(a),o=t(o),u=t(u),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=u(t),r+\"\"}}}function ho(t){return function(){return t}}function po(t){return function(e){return t(e)+\"\"}}function go(t,e,n,r){function i(t){return t.length?t.pop()+\" \":\"\"}function a(t,r,i,a,o,u){if(t!==i||r!==a){var s=o.push(\"translate(\",null,e,null,n);u.push({i:s-4,x:NM(t,i)},{i:s-2,x:NM(r,a)})}else(i||a)&&o.push(\"translate(\"+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+\"rotate(\",null,r)-2,x:NM(t,e)})):e&&n.push(i(n)+\"rotate(\"+e+r)}function u(t,e,n,a){t!==e?a.push({i:n.push(i(n)+\"skewX(\",null,r)-2,x:NM(t,e)}):e&&n.push(i(n)+\"skewX(\"+e+r)}function s(t,e,n,r,a,o){if(t!==n||e!==r){var u=a.push(i(a)+\"scale(\",null,\",\",null,\")\");o.push({i:u-4,x:NM(t,n)},{i:u-2,x:NM(e,r)})}else 1===n&&1===r||a.push(i(a)+\"scale(\"+n+\",\"+r+\")\")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),u(e.skewX,n.skewX,r,i),s(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join(\"\")}}}function vo(t){return((t=Math.exp(t))+1/t)/2}function mo(t){return((t=Math.exp(t))-1/t)/2}function yo(t){return((t=Math.exp(2*t))-1)/(t+1)}function bo(t){return function(e,n){var r=t((e=Ba(e)).h,(n=Ba(n)).h),i=co(e.s,n.s),a=co(e.l,n.l),o=co(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+\"\"}}}function _o(t){return function(e,n){var r=t((e=to(e)).h,(n=to(n)).h),i=co(e.c,n.c),a=co(e.l,n.l),o=co(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+\"\"}}}function xo(t){return function e(n){function r(e,r){var i=t((e=ro(e)).h,(r=ro(r)).h),a=co(e.s,r.s),o=co(e.l,r.l),u=co(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=u(t),e+\"\"}}return n=+n,r.gamma=e,r}(1)}function wo(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:QM(e)}function Mo(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function ko(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function Eo(t,e,n,r){var i=t[0],a=t[1],o=e[0],u=e[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(t){return o(i(t))}}function So(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<i;)a[u]=n(t[u],t[u+1]),o[u]=r(e[u],e[u+1]);return function(e){var n=Hy(t,e,1,i)-1;return o[n](a[n](e))}}function Ao(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Co(t,e){function n(){return i=Math.min(u.length,s.length)>2?So:Eo,a=o=null,r}function r(e){return(a||(a=i(u,s,c?Mo(t):t,f)))(+e)}var i,a,o,u=tk,s=tk,f=qM,c=!1;return r.invert=function(t){return(o||(o=i(s,u,wo,c?ko(e):e)))(+t)},r.domain=function(t){return arguments.length?(u=Fw.call(t,KM),n()):u.slice()},r.range=function(t){return arguments.length?(s=Iw.call(t),n()):s.slice()},r.rangeRound=function(t){return s=Iw.call(t),f=UM,n()},r.clamp=function(t){return arguments.length?(c=!!t,n()):c},r.interpolate=function(t){return arguments.length?(f=t,n()):f},n()}function zo(t){return new Do(t)}function Do(t){if(!(e=uk.exec(t)))throw new Error(\"invalid format: \"+t);var e,n=e[1]||\" \",r=e[2]||\">\",i=e[3]||\"-\",a=e[4]||\"\",o=!!e[5],u=e[6]&&+e[6],s=!!e[7],f=e[8]&&+e[8].slice(1),c=e[9]||\"\";\"n\"===c?(s=!0,c=\"g\"):ok[c]||(c=\"\"),(o||\"0\"===n&&\"=\"===r)&&(o=!0,n=\"0\",r=\"=\"),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=u,this.comma=s,this.precision=f,this.type=c}function Oo(t){return sk=dk(t),fk=sk.format,ck=sk.formatPrefix,sk}function No(t){var e=t.domain;return t.ticks=function(t){var n=e();return eb(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return mk(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),(r=Ne(u,s,n))>0?r=Ne(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=Ne(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,e(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,e(i)),t},t}function To(){var t=Co(wo,NM);return t.copy=function(){return Ao(t,To())},No(t)}function Ro(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Fw.call(n,KM),t):e.slice()},t.copy=function(){return Ro().domain(e)},No(t)}function Po(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:QM(e)}function Lo(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function qo(t){return isFinite(t)?+(\"1e\"+t):t<0?0:t}function Uo(t){return 10===t?qo:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function jo(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Fo(t){return function(e){return-t(-e)}}function Io(){function t(){return i=jo(r),a=Uo(r),n()[0]<0&&(i=Fo(i),a=Fo(a)),e}var e=Co(Po,Lo).domain([1,10]),n=e.domain,r=10,i=jo(10),a=Uo(10);return e.base=function(e){return arguments.length?(r=+e,t()):r},e.domain=function(e){return arguments.length?(n(e),t()):n()},e.ticks=function(t){var e,o=n(),u=o[0],s=o[o.length-1];(e=s<u)&&(h=u,u=s,s=h);var f,c,l,h=i(u),d=i(s),p=null==t?10:+t,g=[];if(!(r%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,u>0){for(;h<d;++h)for(c=1,f=a(h);c<r;++c)if(!((l=f*c)<u)){if(l>s)break;g.push(l)}}else for(;h<d;++h)for(c=r-1,f=a(h);c>=1;--c)if(!((l=f*c)<u)){if(l>s)break;g.push(l)}}else g=eb(h,d,Math.min(d-h,p)).map(a);return e?g.reverse():g},e.tickFormat=function(t,n){if(null==n&&(n=10===r?\".0e\":\",\"),\"function\"!=typeof n&&(n=fk(n)),t===1/0)return n;null==t&&(t=10);var o=Math.max(1,r*t/e.ticks().length);return function(t){var e=t/a(Math.round(i(t)));return e*r<r-.5&&(e*=r),e<=o?n(t):\"\"}},e.nice=function(){return n(yk(n(),{floor:function(t){return a(Math.floor(i(t)))},ceil:function(t){return a(Math.ceil(i(t)))}}))},e.copy=function(){return Ao(e,Io().base(r))},e}function $o(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Bo(){var t=1,e=Co(function(e,n){return(n=$o(n,t)-(e=$o(e,t)))?function(r){return($o(r,t)-e)/n}:QM(n)},function(e,n){return n=$o(n,t)-(e=$o(e,t)),function(r){return $o(e+n*r,1/t)}}),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return Ao(e,Bo().exponent(t))},No(e)}function Wo(){function t(){var t=0,a=Math.max(1,r.length);for(i=new Array(a-1);++t<a;)i[t-1]=rb(n,t/a);return e}function e(t){if(!isNaN(t=+t))return r[Hy(i,t)]}var n=[],r=[],i=[];return e.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r,i=0,a=e.length;i<a;++i)null==(r=e[i])||isNaN(r=+r)||n.push(r);return n.sort(By),t()},e.range=function(e){return arguments.length?(r=Iw.call(e),t()):r.slice()},e.quantiles=function(){return i.slice()},e.copy=function(){return Wo().domain(n).range(r)},e}function Yo(){function t(t){if(t<=t)return o[Hy(a,t,0,i)]}function e(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*r-(e-i)*n)/(i+1);return t}var n=0,r=1,i=1,a=[.5],o=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e()):[n,r]},t.range=function(t){return arguments.length?(i=(o=Iw.call(t)).length-1,e()):o.slice()},t.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=i?[a[i-1],r]:[a[e-1],a[e]]},t.copy=function(){return Yo().domain([n,r]).range(o)},No(t)}function Ho(){function t(t){if(t<=t)return n[Hy(e,t,0,r)]}var e=[.5],n=[0,1],r=1;return t.domain=function(i){return arguments.length?(e=Iw.call(i),r=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=Iw.call(i),r=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},t.copy=function(){return Ho().domain(e).range(n)},t}function Go(t){return new Date(t)}function Xo(t){return t instanceof Date?+t:+new Date(+t)}function Vo(t,e,n,r,i,a,o,u,s){function f(u){return(o(u)<u?p:a(u)<u?g:i(u)<u?v:r(u)<u?m:e(u)<u?n(u)<u?y:b:t(u)<u?_:x)(u)}function c(e,n,r,i){if(null==e&&(e=10),\"number\"==typeof e){var a=Math.abs(r-n)/e,o=Wy(function(t){return t[2]}).right(w,a);o===w.length?(i=Te(n/Ek,r/Ek,e),e=t):o?(i=(o=w[a/w[o-1][2]<w[o][2]/a?o-1:o])[1],e=o[0]):(i=Te(n,r,e),e=u)}return null==i?e:e.every(i)}var l=Co(wo,NM),h=l.invert,d=l.domain,p=s(\".%L\"),g=s(\":%S\"),v=s(\"%I:%M\"),m=s(\"%I %p\"),y=s(\"%a %d\"),b=s(\"%b %d\"),_=s(\"%B\"),x=s(\"%Y\"),w=[[o,1,bk],[o,5,5*bk],[o,15,15*bk],[o,30,30*bk],[a,1,_k],[a,5,5*_k],[a,15,15*_k],[a,30,30*_k],[i,1,xk],[i,3,3*xk],[i,6,6*xk],[i,12,12*xk],[r,1,wk],[r,2,2*wk],[n,1,Mk],[e,1,kk],[e,3,3*kk],[t,1,Ek]];return l.invert=function(t){return new Date(h(t))},l.domain=function(t){return arguments.length?d(Fw.call(t,Xo)):d().map(Go)},l.ticks=function(t,e){var n,r=d(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=c(t,i,a,e),n=n?n.range(i,a+1):[],o?n.reverse():n},l.tickFormat=function(t,e){return null==e?f:s(e)},l.nice=function(t,e){var n=d();return(t=c(t,n[0],n[n.length-1],e))?d(yk(n,t)):l},l.copy=function(){return Ao(l,Vo(t,e,n,r,i,a,o,u,s))},l}function Jo(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Zo(){function t(){var t=i().length,r=o[1]<o[0],l=o[r-0],h=o[1-r],d=Uw(t,s,f);e=(h-l)/(d||1),u&&(e=Math.floor(e)),l+=(h-l-e*(t-s))*c,n=e*(1-s),u&&(l=Math.round(l),n=Math.round(n));var p=Zy(t).map(function(t){return l+e*t});return a(r?p.reverse():p)}var e,n,r=Na().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,c=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),t()):i()},r.range=function(e){return arguments.length?(o=[+e[0],+e[1]],t()):o.slice()},r.rangeRound=function(e){return o=[+e[0],+e[1]],u=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(u=!!e,t()):u},r.padding=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),s=f,t()):s},r.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),t()):s},r.paddingOuter=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},r.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},r.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var e,r,u,s=+t[0],f=+t[1],c=o[1]<o[0],l=c?a().reverse():a(),h=l.length-1;if(s===s&&f===f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return e=Math.max(0,Hy(l,s)-1),r=s===f?e:Hy(l,f)-1,s-l[e]>n+1e-10&&++e,c&&(u=e,e=h-r,r=h-u),e>r?void 0:i().slice(e,r+1)}},r.invert=function(t){var e=r.invertRange([t,t]);return e?e[0]:e},r.copy=function(){return Zo().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(c)},t()}function Qo(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Qo(e())},t}function Ko(t){return Pk.call(t,function(t){return+t})}function tu(){function t(t){return n(t)}function e(t){r=Ko(t),n.domain([r[0],ym(r)])}var n=To(),r=[];return t.domain=function(n){return arguments.length?(e(n),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(t){return n.invert(t)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(t,e){return!(e%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return tu().domain(t.domain()).range(t.range())},t}function eu(){function t(t){return null==t||t!==t?void 0:n[(Hy(e,t)-1)%n.length]}var e=[],n=[];return t.domain=function(n){return arguments.length?(e=Ko(n),t):e.slice()},t.range=function(e){return arguments.length?(n=Lk.call(e),t):n.slice()},t.copy=function(){return eu().domain(t.domain()).range(t.range())},t}function nu(t){function e(){var t=r.domain();i=t[0],a=ym(t)-i}function n(e){var n=(e-i)/a;return t(o?Math.max(0,Math.min(1,n)):n)}var r=To(),i=0,a=1,o=!1;return n.clamp=function(t){return arguments.length?(o=!!t,n):o},n.domain=function(t){return arguments.length?(r.domain(t),e(),n):r.domain()},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return nu().domain(r.domain()).clamp(o).interpolator(t)},n.ticks=function(t){return r.ticks(t)},n.tickFormat=function(t,e){return r.tickFormat(t,e)},n.nice=function(t){return r.nice(t),e(),n},n}function ru(t,e){return function(){var n=e();return n.invertRange||(n.invertRange=n.invert?Lw(n):n.invertExtent?qw(n):void 0),n.type=t,n}}function iu(t,e){return arguments.length>1?(qk[t]=ru(t,e),this):qk.hasOwnProperty(t)?qk[t]:void 0}function au(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]=\"#\"+t.slice(6*r,6*++r);return n}function ou(t,e){tS[t]=QE[\"interpolate\"+e],KE[t]=QE[\"scheme\"+e]}function uu(t,e){var n=e[0],r=ym(e)-n;return function(e){return t(n+e*r)}}function su(t,e,n){var r=n-e;return r?\"linear\"===t.type||\"sequential\"===t.type?function(t){return(t-e)/r}:t.copy().domain([e,n]).range([0,1]).interpolate(fu):rm(0)}function fu(t,e){var n=e-t;return function(e){return t+e*n}}function cu(t,e){var n=ZM[lu(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function lu(t){return\"interpolate\"+t.toLowerCase().split(\"-\").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join(\"\")}function hu(t){return nS.hasOwnProperty(t)&&nS[t]}function du(t){return rS.hasOwnProperty(t)&&rS[t]}function pu(t,e){var n;return Fv(e)&&(n=e.step,e=e.interval),Iv(e)&&(e=\"time\"===t.type?hu(e):\"utc\"===t.type?du(e):qv(\"Only time and utc scales accept interval strings.\"),n&&(e=e.every(n))),e}function gu(t,e){var n=t.range(),r=n[0],i=ym(n);return r>i&&(n=i,i=r,r=n),e.filter(function(e){return!((e=t(e))<r||e>i)})}function vu(t,e){return t.ticks?t.ticks(e):t.domain()}function mu(t,e,n){var r=t.tickFormat?t.tickFormat(e,n):String;return t.type===Aw?yu(r,bu(n)):r}function yu(t,e){return function(n){return t(n)?e(n):\"\"}}function bu(t){var e=zo(t||\",\");if(null==e.precision){switch(e.precision=12,e.type){case\"%\":e.precision-=2;break;case\"e\":e.precision-=1}return _u(fk(e),fk(\".1f\")(1)[1])}return fk(e)}function _u(t,e){return function(n){var r,i,a=t(n),o=a.indexOf(e);if(o<0)return a;for(i=(r=xu(a,o))<a.length?a.slice(r):\"\";--r>o;)if(\"0\"!==a[r]){++r;break}return a.slice(0,r)+i}}function xu(t,e){var n,r=t.lastIndexOf(\"e\");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}function wu(t){be.call(this,null,t)}function Mu(t){be.call(this,null,t)}function ku(){return c({})}function Eu(t){return t.exit}function Su(t){be.call(this,null,t)}function Au(t,e,n){if(n)return t.domain();var r=iS[t.type];return r?r(t):vu(t,e)}function Cu(t){var e=t.domain();return e.max=e.pop(),e}function zu(t,e){return iS[t.type]?Du(e):Nu(e)}function Du(t){return function(e,n,r){var i=r[n+1]||r.max||1/0,a=Ou(e,t),o=Ou(i,t);return a&&o?a+\"\"+o:o?\"< \"+o:\" \"+a}}function Ou(t,e){return isFinite(t)?e(t):null}function Nu(t){return function(e){return t(e)}}function Tu(t){be.call(this,[],t)}function Ru(t){return t.source.x}function Pu(t){return t.source.y}function Lu(t){return t.target.x}function qu(t){return t.target.y}function Uu(t){be.call(this,{},t)}function ju(t,e,n,r){return\"M\"+t+\",\"+e+\"L\"+n+\",\"+r}function Fu(t,e,n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a)/2;return\"M\"+t+\",\"+e+\"A\"+o+\",\"+o+\" \"+180*Math.atan2(a,i)/Math.PI+\" 0 1 \"+n+\",\"+r}function Iu(t,e,n,r){var i=n-t,a=r-e,o=.2*(i+a),u=.2*(a-i);return\"M\"+t+\",\"+e+\"C\"+(t+o)+\",\"+(e+u)+\" \"+(n+u)+\",\"+(r-o)+\" \"+n+\",\"+r}function $u(t){be.call(this,null,t)}function Bu(t){be.call(this,null,t),this.modified(!0)}function Wu(t,e,n){var r=Yu(t,e.domainRaw);if(r>-1)return r;var i,a,o=e.domain,u=e.zero||void 0===e.zero&&uS[t.type];return o?((u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(o=o.slice()).length-1||1,u&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[i]=e.domainMax),null!=e.domainMid&&(((a=e.domainMid)<o[0]||a>o[i])&&n.warn(\"Scale domainMid exceeds domain min or max.\",a),o.splice(i,0,a))),t.domain(o),e.nice&&t.nice&&t.nice(!0!==e.nice&&pu(t,e.nice)||null),o.length):0}function Yu(t,e){return e?(t.domain(e),e.length):-1}function Hu(t,e,n){var r=e.round||!1,i=e.range;if(null!=e.rangeStep)i=Gu(t.type,e,n);else if(e.scheme){if(i=Xu(t.type,e,n),em(i))return t.interpolator(i)}else if(i&&t.type===Pw)return t.interpolator(CM(Ju(i,e.reverse)));i&&e.interpolate&&t.interpolate?t.interpolate(cu(e.interpolate,e.interpolateGamma)):em(t.round)?t.round(r):em(t.rangeRound)&&t.interpolate(r?UM:qM),i&&t.range(Ju(i,e.reverse))}function Gu(t,e,n){t!==Cw&&t!==zw&&qv(\"Only band and point scales support rangeStep.\");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===zw?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Uw(n,i,r)]}function Xu(t,e,n){var r,i=e.scheme.toLowerCase(),a=eS(i),o=e.schemeExtent;return a||qv(\"Unrecognized scheme name: \"+e.scheme),n=t===Tw?n+1:t===Rw?n-1:t===Ow||t===Nw?+e.schemeCount||oS:n,t===Pw?Vu(a,o,e.reverse):!o&&(r=eS(i+\"-\"+n))?r:em(a)?Zu(Vu(a,o),n):t===Dw?a:a.slice(0,n)}function Vu(t,e,n){return em(t)&&(e||n)?uu(t,Ju(e||[0,1],n)):t}function Ju(t,e){return e?t.slice().reverse():t}function Zu(t,e){for(var n=new Array(e),r=e-1||1,i=0;i<e;++i)n[i]=t(i/r);return n}function Qu(t){be.call(this,null,t)}function Ku(t){be.call(this,null,t)}function ts(t,e,n,r,i){for(var a,o=(e-t.sum)/2,u=t.length,s=0;s<u;++s)(a=t[s])[r]=o,a[i]=o+=Math.abs(n(a))}function es(t,e,n,r,i){for(var a,o=1/t.sum,u=0,s=t.length,f=0,c=0;f<s;++f)(a=t[f])[r]=u,a[i]=u=o*(c+=Math.abs(n(a)))}function ns(t,e,n,r,i){for(var a,o,u=0,s=0,f=t.length,c=0;c<f;++c)(a=n(o=t[c]))<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function rs(t,e,n,r){var i,a,o,u,s,f,c,l,h,d=[];if(null==e)d.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)s=t[a],(c=i[f=e.map(function(t){return t(s)})])||(i[f]=c=[],d.push(c)),c.push(s);for(f=0,h=0,u=d.length;f<u;++f){for(a=0,l=0,o=(c=d[f]).length;a<o;++a)l+=Math.abs(r(c[a]));c.sum=l,l>h&&(h=l),n&&c.sort(n)}return d.max=h,d}function is(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,u=o-1;a<o;u=a++){var s=t[a],f=s[0],c=s[1],l=t[u],h=l[0],d=l[1];if(as(s,l,e))return 0;c>r!=d>r&&n<(h-f)*(r-c)/(d-c)+f&&(i=-i)}return i}function as(t,e,n){var r;return os(t,e,n)&&us(t[r=+(t[0]===e[0])],n[r],e[r])}function os(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}function us(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function ss(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=t.data[u+o*r]),u>=n&&(u>=a&&(s-=t.data[u-a+o*r]),e.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function fs(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=t.data[o+u*r]),u>=n&&(u>=a&&(s-=t.data[o+(u-a)*r]),e.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function cs(t){return t[0]}function ls(t){return t[1]}function hs(t){be.call(this,null,t)}function ds(t){return function(e){for(var n=Jy(e),r=n[0],i=n[1]-r,a=[],o=1;o<=t;++o)a.push(r+i*o/(t+1));return a}}function ps(t){be.call(this,null,t)}function gs(){this.reset()}function vs(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}function ms(t){return t>1?0:t<-1?ES:Math.acos(t)}function ys(t){return t>1?SS:t<-1?-SS:Math.asin(t)}function bs(){}function _s(t,e){t&&WS.hasOwnProperty(t.type)&&WS[t.type](t,e)}function xs(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ws(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)xs(t[n],e,1);e.polygonEnd()}function Ms(t){return[TS(t[1],t[0]),ys(t[2])]}function ks(t){var e=t[0],n=t[1],r=RS(n);return[r*RS(e),r*jS(e),jS(n)]}function Es(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ss(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function As(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Cs(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zs(t){var e=IS(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ds(t,e){return[t>ES?t-CS:t<-ES?t+CS:t,e]}function Os(t,e,n){return(t%=CS)?e||n?HS(Ts(t),Rs(e,n)):Ts(t):e||n?Rs(e,n):Ds}function Ns(t){return function(e,n){return e+=t,[e>ES?e-CS:e<-ES?e+CS:e,n]}}function Ts(t){var e=Ns(t);return e.invert=Ns(-t),e}function Rs(t,e){function n(t,e){var n=RS(e),u=RS(t)*n,s=jS(t)*n,f=jS(e),c=f*r+u*i;return[TS(s*a-c*o,u*r-f*i),ys(c*a+s*o)]}var r=RS(t),i=jS(t),a=RS(e),o=jS(e);return n.invert=function(t,e){var n=RS(e),u=RS(t)*n,s=jS(t)*n,f=jS(e),c=f*a-s*o;return[TS(s*a+f*o,u*r+c*i),ys(c*r-u*i)]},n}function Ps(t,e,n,r,i,a){if(n){var o=RS(e),u=jS(e),s=r*n;null==i?(i=e+r*CS,a=e-s/2):(i=Ls(o,i),a=Ls(o,a),(r>0?i<a:i>a)&&(i+=r*CS));for(var f,c=i;r>0?c>a:c<a;c-=s)f=Ms([o,-u*RS(c),-u*jS(c)]),t.point(f[0],f[1])}}function Ls(t,e){(e=ks(e))[0]-=t,zs(e);var n=ms(-e[1]);return((-e[2]<0?-n:n)+CS-kS)%CS}function qs(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Us(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function js(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,u,f){var c=0,l=0;if(null==i||(c=o(i,u))!==(l=o(a,u))||s(i,a)<0^u>0)do{f.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+u+4)%4)!==l);else f.point(a[0],a[1])}function o(r,i){return OS(r[0]-t)<kS?i>0?0:3:OS(r[0]-n)<kS?i>0?2:1:OS(r[1]-e)<kS?i>0?1:0:i>0?3:2}function u(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){function s(t,e){i(t,e)&&w.point(t,e)}function f(){for(var e=0,n=0,i=h.length;n<i;++n)for(var a,o,u=h[n],s=1,f=u.length,c=u[0],l=c[0],d=c[1];s<f;++s)a=l,o=d,l=(c=u[s])[0],d=c[1],o<=r?d>r&&(l-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(l-a)*(r-o)<(d-o)*(t-a)&&--e;return e}function c(a,o){var u=i(a,o);if(h&&d.push([a,o]),_)p=a,g=o,v=u,_=!1,u&&(w.lineStart(),w.point(a,o));else if(u&&b)w.point(a,o);else{var s=[m=Math.max(cA,Math.min(fA,m)),y=Math.max(cA,Math.min(fA,y))],f=[a=Math.max(cA,Math.min(fA,a)),o=Math.max(cA,Math.min(fA,o))];oA(s,f,t,e,n,r)?(b||(w.lineStart(),w.point(s[0],s[1])),w.point(f[0],f[1]),u||w.lineEnd(),x=!1):u&&(w.lineStart(),w.point(a,o),x=!1)}m=a,y=o,b=u}var l,h,d,p,g,v,m,y,b,_,x,w=o,M=aA(),k={point:s,lineStart:function(){k.point=c,h&&h.push(d=[]),_=!0,b=!1,m=y=NaN},lineEnd:function(){l&&(c(p,g),v&&b&&M.rejoin(),l.push(M.result())),k.point=s,b&&w.lineEnd()},polygonStart:function(){w=M,l=[],h=[],x=!0},polygonEnd:function(){var t=f(),e=x&&t,n=(l=ab(l)).length;(e||n)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&sA(l,u,t,a,o),o.polygonEnd()),w=o,l=h=d=null}};return k}}function Fs(){pA.point=pA.lineEnd=bs}function Is(t,e){GS=t*=DS,XS=jS(e*=DS),VS=RS(e),pA.point=$s}function $s(t,e){t*=DS;var n=jS(e*=DS),r=RS(e),i=OS(t-GS),a=RS(i),o=r*jS(i),u=VS*n-XS*r*a,s=XS*n+VS*r*a;dA.add(TS(IS(o*o+u*u),s)),GS=t,XS=n,VS=r}function Bs(t,e,n){var r=Zy(t,e-kS,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Ws(t,e,n){var r=Zy(t,e-kS,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Ys(){function t(){return{type:\"MultiLineString\",coordinates:e()}}function e(){return Zy(PS(a/v)*v,i,v).map(h).concat(Zy(PS(f/m)*m,s,m).map(d)).concat(Zy(PS(r/p)*p,n,p).filter(function(t){return OS(t%v)>kS}).map(c)).concat(Zy(PS(u/g)*g,o,g).filter(function(t){return OS(t%m)>kS}).map(l))}var n,r,i,a,o,u,s,f,c,l,h,d,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:\"LineString\",coordinates:t}})},t.outline=function(){return{type:\"Polygon\",coordinates:[h(a).concat(d(s).slice(1),h(i).reverse().slice(1),d(f).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],f=+e[0][1],s=+e[1][1],a>i&&(e=a,a=i,i=e),f>s&&(e=f,f=s,s=e),t.precision(y)):[[a,f],[i,s]]},t.extentMinor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),t.precision(y)):[[r,u],[n,o]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.stepMinor=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=Bs(u,o,90),l=Ws(r,n,y),h=Bs(f,s,90),d=Ws(a,i,y),t):y},t.extentMajor([[-180,-90+kS],[180,90-kS]]).extentMinor([[-180,-80-kS],[180,80+kS]])}function Hs(){xA.point=Gs}function Gs(t,e){xA.point=Xs,JS=QS=t,ZS=KS=e}function Xs(t,e){_A.add(KS*t-QS*e),QS=t,KS=e}function Vs(){Xs(JS,ZS)}function Js(t,e){AA+=t,CA+=e,++zA}function Zs(){LA.point=Qs}function Qs(t,e){LA.point=Ks,Js(nA=t,rA=e)}function Ks(t,e){var n=t-nA,r=e-rA,i=IS(n*n+r*r);DA+=i*(nA+t)/2,OA+=i*(rA+e)/2,NA+=i,Js(nA=t,rA=e)}function tf(){LA.point=Js}function ef(){LA.point=rf}function nf(){af(tA,eA)}function rf(t,e){LA.point=af,Js(tA=nA=t,eA=rA=e)}function af(t,e){var n=t-nA,r=e-rA,i=IS(n*n+r*r);DA+=i*(nA+t)/2,OA+=i*(rA+e)/2,NA+=i,TA+=(i=rA*t-nA*e)*(nA+t),RA+=i*(rA+e),PA+=3*i,Js(nA=t,rA=e)}function of(t){this._context=t}function uf(t,e){BA.point=sf,UA=FA=t,jA=IA=e}function sf(t,e){FA-=t,IA-=e,$A.add(IS(FA*FA+IA*IA)),FA=t,IA=e}function ff(){this._string=[]}function cf(t){return\"m0,\"+t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+-2*t+\"a\"+t+\",\"+t+\" 0 1,1 0,\"+2*t+\"z\"}function lf(t){return t.length>1}function hf(t,e){return((t=t.x)[0]<0?t[1]-SS-kS:SS-t[1])-((e=e.x)[0]<0?e[1]-SS-kS:SS-e[1])}function df(t,e,n,r){var i,a,o=jS(t-n);return OS(o)>kS?NS((jS(e)*(a=RS(r))*jS(n)-jS(r)*(i=RS(e))*jS(t))/(i*a*o)):(e+r)/2}function pf(t){return function(e){var n=new gf;for(var r in t)n[r]=t[r];return n.stream=e,n}}function gf(){}function vf(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),YS(n,t.stream(SA));var o=SA.result(),u=Math.min(r/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),s=+e[0][0]+(r-u*(o[1][0]+o[0][0]))/2,f=+e[0][1]+(i-u*(o[1][1]+o[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*u).translate([s,f])}function mf(t,e,n){return vf(t,[[0,0],e],n)}function yf(t){return pf({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function bf(t,e){function n(r,i,a,o,u,s,f,c,l,h,d,p,g,v){var m=f-r,y=c-i,b=m*m+y*y;if(b>4*e&&g--){var _=o+h,x=u+d,w=s+p,M=IS(_*_+x*x+w*w),k=ys(w/=M),E=OS(OS(w)-1)<kS||OS(a-l)<kS?(a+l)/2:TS(x,_),S=t(E,k),A=S[0],C=S[1],z=A-r,D=C-i,O=y*z-m*D;(O*O/b>e||OS((m*z+y*D)/b-.5)>.3||o*h+u*d+s*p<VA)&&(n(r,i,a,o,u,s,A,C,E,_/=M,x/=M,w,g,v),v.point(A,C),n(A,C,E,_,x,w,f,c,l,h,d,p,g,v))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){m=NaN,w.point=a,e.lineStart()}function a(r,i){var a=ks([r,i]),o=t(r,i);n(m,y,v,b,_,x,m=o[0],y=o[1],v=r,b=a[0],_=a[1],x=a[2],XA,e),e.point(m,y)}function o(){w.point=r,e.lineEnd()}function u(){i(),w.point=s,w.lineEnd=f}function s(t,e){a(c=t,e),l=m,h=y,d=b,p=_,g=x,w.point=a}function f(){n(m,y,v,b,_,x,l,h,c,d,p,g,XA,e),w.lineEnd=o,o()}var c,l,h,d,p,g,v,m,y,b,_,x,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){e.polygonStart(),w.lineStart=u},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}function _f(t){return xf(function(){return t})()}function xf(t){function e(t){return t=c(t[0]*DS,t[1]*DS),[t[0]*v+u,s-t[1]*v]}function n(t){return(t=c.invert((t[0]-u)/v,(s-t[1])/v))&&[t[0]*zS,t[1]*zS]}function r(t,e){return t=o(t,e),[t[0]*v+u,s-t[1]*v]}function i(){c=HS(f=Os(x,w,M),o);var t=o(b,_);return u=m-t[0]*v,s=y+t[1]*v,a()}function a(){return p=g=null,e}var o,u,s,f,c,l,h,d,p,g,v=150,m=480,y=250,b=0,_=0,x=0,w=0,M=0,k=null,E=HA,S=null,A=yA,C=.5,z=JA(r,C);return e.stream=function(t){return p&&g===t?p:p=ZA(E(f,z(A(g=t))))},e.clipAngle=function(t){return arguments.length?(E=+t?GA(k=t*DS,6*DS):(k=null,HA),a()):k*zS},e.clipExtent=function(t){return arguments.length?(A=null==t?(S=l=h=d=null,yA):js(S=+t[0][0],l=+t[0][1],h=+t[1][0],d=+t[1][1]),a()):null==S?null:[[S,l],[h,d]]},e.scale=function(t){return arguments.length?(v=+t,i()):v},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],i()):[m,y]},e.center=function(t){return arguments.length?(b=t[0]%360*DS,_=t[1]%360*DS,i()):[b*zS,_*zS]},e.rotate=function(t){return arguments.length?(x=t[0]%360*DS,w=t[1]%360*DS,M=t.length>2?t[2]%360*DS:0,i()):[x*zS,w*zS,M*zS]},e.precision=function(t){return arguments.length?(z=JA(r,C=t*t),a()):IS(C)},e.fitExtent=function(t,n){return vf(e,t,n)},e.fitSize=function(t,n){return mf(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function wf(t){var e=0,n=ES/3,r=xf(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*DS,n=t[1]*DS):[e*zS,n*zS]},i}function Mf(t){function e(t,e){return[t*n,jS(e)/n]}var n=RS(t);return e.invert=function(t,e){return[t/n,ys(e*n)]},e}function kf(t,e){function n(t,e){var n=IS(a-2*i*jS(e))/i;return[n*jS(t*=i),o-n*RS(t)]}var r=jS(t),i=(r+jS(e))/2;if(OS(i)<kS)return Mf(t);var a=1+r*(2*i-r),o=IS(a)/i;return n.invert=function(t,e){var n=o-e;return[TS(t,OS(n))/i*FS(n),ys((a-(t*t+n*n)*i*i)/(2*i))]},n}function Ef(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Sf(t){return function(e,n){var r=RS(e),i=RS(n),a=t(r*i);return[a*i*jS(e),a*jS(n)]}}function Af(t){return function(e,n){var r=IS(e*e+n*n),i=t(r),a=jS(i),o=RS(i);return[TS(e*a,r*o),ys(r&&n*a/r)]}}function Cf(t,e){return[t,qS($S((SS+e)/2))]}function zf(t){function e(){var e=ES*u(),o=a(iA(a.rotate()).invert([0,0]));return f(null==c?[[o[0]-e,o[1]-e],[o[0]+e,o[1]+e]]:t===Cf?[[Math.max(o[0]-e,c),n],[Math.min(o[0]+e,r),i]]:[[c,Math.max(o[1]-e,n)],[r,Math.min(o[1]+e,i)]])}var n,r,i,a=_f(t),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,c=null;return a.scale=function(t){return arguments.length?(u(t),e()):u()},a.translate=function(t){return arguments.length?(s(t),e()):s()},a.center=function(t){return arguments.length?(o(t),e()):o()},a.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}function Df(t){return $S((SS+t)/2)}function Of(t,e){function n(t,e){a>0?e<-SS+kS&&(e=-SS+kS):e>SS-kS&&(e=SS-kS);var n=a/US(Df(e),i);return[n*jS(i*t),a-n*RS(i*t)]}var r=RS(t),i=t===e?jS(t):qS(r/RS(e))/qS(Df(e)/Df(t)),a=r*US(Df(t),i)/i;return i?(n.invert=function(t,e){var n=a-e,r=FS(i)*IS(t*t+n*n);return[TS(t,OS(n))/i*FS(n),2*NS(US(a/r,1/i))-SS]},n):Cf}function Nf(t,e){return[t,e]}function Tf(t,e){function n(t,e){var n=a-e,r=i*t;return[n*jS(r),a-n*RS(r)]}var r=RS(t),i=t===e?jS(t):(r-RS(e))/(e-t),a=r/i+t;return OS(i)<kS?Nf:(n.invert=function(t,e){var n=a-e;return[TS(t,OS(n))/i*FS(n),a-FS(i)*IS(t*t+n*n)]},n)}function Rf(t,e){var n=RS(e),r=RS(t)*n;return[n*jS(t)/r,jS(e)/r]}function Pf(t,e){return[RS(e)*jS(t),jS(e)]}function Lf(t,e){var n=RS(e),r=1+RS(t)*n;return[n*jS(t)/r,jS(e)/r]}function qf(t,e){return[qS($S((SS+e)/2)),-t]}function Uf(t,e){return function n(){var r=e();return r.type=t,r.path=WA().projection(r),r.copy=r.copy||function(){var t=n();return rC.forEach(function(e){r.hasOwnProperty(e)&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}function jf(t,e){return arguments.length>1?(iC[t]=Uf(t,e),this):iC.hasOwnProperty(t)?iC[t]:null}function Ff(t){return t&&t.path||nC}function If(t){be.call(this,null,t)}function $f(t){be.call(this,null,t)}function Bf(t){be.call(this,null,t)}function Wf(t,e){var n=function(n){return t(e(n))};return n.context=function(e){return t.context(e),n},n}function Yf(t){be.call(this,[],t),this.generator=Ys()}function Hf(t){be.call(this,null,t),this.modified(!0)}function Gf(t,e){var n=Jf(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function Xf(t){var e=jf((t||\"mercator\").toLowerCase());return e||qv(\"Unrecognized projection type: \"+t),e()}function Vf(t,e,n){em(t[e])&&t[e](n)}function Jf(t){return 1===(t=tm(t)).length?t[0]:{type:xS,features:t.reduce(function(t,e){return e&&e.type===xS?t.push.apply(t,e.features):jv(e)?t.push.apply(t,e):t.push(e),t},[])}}function Zf(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,u,s,f,c,l,h,d=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o,i=d,!(d=d[l=c<<1|f]))return i[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(f=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o}while((l=c<<1|f)==(h=(s>=o)<<1|u>=a));return i[h]=d,i[l]=p,t}function Qf(t){return t[0]}function Kf(t){return t[1]}function tc(t,e,n){var r=new ec(null==e?Qf:e,null==n?Kf:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function ec(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function nc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function rc(t){return t.x+t.vx}function ic(t){return t.y+t.vy}function ac(t){return t.index}function oc(t,e){var n=t.get(e);if(!n)throw new Error(\"missing: \"+e);return n}function uc(){return yC||(xC(sc),yC=_C.now()+bC)}function sc(){yC=0}function fc(){this._call=this._time=this._next=null}function cc(t,e,n){var r=new fc;return r.restart(t,e,n),r}function lc(){uc(),++dC;for(var t,e=lC;e;)(t=yC-e._time)>=0&&e._call.call(null,t),e=e._next;--dC}function hc(){yC=(mC=_C.now())+bC,dC=pC=0;try{lc()}finally{dC=0,pc(),yC=0}}function dc(){var t=_C.now(),e=t-mC;e>vC&&(bC-=e,mC=t)}function pc(){for(var t,e,n=lC,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:lC=e);hC=t,gc(r)}function gc(t){if(!dC){pC&&(pC=clearTimeout(pC));var e=t-yC;e>24?(t<1/0&&(pC=setTimeout(hc,e)),gC&&(gC=clearInterval(gC))):(gC||(mC=yC,gC=setInterval(dc,vC)),dC=1,xC(hc))}}function vc(t){return t.x}function mc(t){return t.y}function yc(t){be.call(this,null,t)}function bc(t,e){return function(){t.touch(e).run()}}function _c(t,e){var n=kC(t),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},xc(n,e,!0).on(\"end\",function(){r=!0})}function xc(t,e,n,r){var i,a,o,u,s=tm(e.forces);for(i=0,a=AC.length;i<a;++i)(o=AC[i])!==SC&&e.modified(o)&&t[o](e[o]);for(i=0,a=s.length;i<a;++i)u=SC+i,(o=n||e.modified(SC,i)?Mc(s[i]):r&&wc(s[i],r)?t.force(u):null)&&t.force(u,o);for(a=t.numForces||0;i<a;++i)t.force(SC+i,null);return t.numForces=s.length,t}function wc(t,e){var r,i;for(r in t)if(em(i=t[r])&&e.modified(n(i)))return 1;return 0}function Mc(t){var e,n;EC.hasOwnProperty(t.force)||qv(\"Unrecognized force: \"+t.force),e=EC[t.force]();for(n in t)em(e[n])&&kc(e[n],t[n],t);return e}function kc(t,e,n){t(em(e)?function(t){return e(t,n)}:e)}function Ec(t,e){return t.parent===e.parent?1:2}function Sc(t){return t.reduce(Ac,0)/t.length}function Ac(t,e){return t+e.x}function Cc(t){return 1+t.reduce(zc,0)}function zc(t,e){return Math.max(t,e.y)}function Dc(t){for(var e;e=t.children;)t=e[0];return t}function Oc(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Nc(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Tc(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Rc(t,e){var n,r,i,a,o,u=new Uc(t),s=+t.value&&(u.value=t.value),f=[u];for(null==e&&(e=Pc);n=f.pop();)if(s&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)f.push(r=n.children[a]=new Uc(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(qc)}function Pc(t){return t.children}function Lc(t){t.data=t.data.data}function qc(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Uc(t){this.data=t,this.depth=this.height=0,this.parent=null}function jc(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}function Fc(t,e){var n,r;if(Bc(e,t))return[e];for(n=0;n<t.length;++n)if(Ic(e,t[n])&&Bc(Hc(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Ic(Hc(t[n],t[r]),e)&&Ic(Hc(t[n],e),t[r])&&Ic(Hc(t[r],e),t[n])&&Bc(Gc(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Ic(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function $c(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Bc(t,e){for(var n=0;n<e.length;++n)if(!$c(t,e[n]))return!1;return!0}function Wc(t){switch(t.length){case 1:return Yc(t[0]);case 2:return Hc(t[0],t[1]);case 3:return Gc(t[0],t[1],t[2])}}function Yc(t){return{x:t.x,y:t.y,r:t.r}}function Hc(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,u=e.r,s=a-n,f=o-r,c=u-i,l=Math.sqrt(s*s+f*f);return{x:(n+a+s/l*c)/2,y:(r+o+f/l*c)/2,r:(l+i+u)/2}}function Gc(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,u=e.y,s=e.r,f=n.x,c=n.y,l=n.r,h=r-o,d=r-f,p=i-u,g=i-c,v=s-a,m=l-a,y=r*r+i*i-a*a,b=y-o*o-u*u+s*s,_=y-f*f-c*c+l*l,x=d*p-h*g,w=(p*_-g*b)/(2*x)-r,M=(g*v-p*m)/x,k=(d*b-h*_)/(2*x)-i,E=(h*m-d*v)/x,S=M*M+E*E-1,A=2*(a+w*M+k*E),C=w*w+k*k-a*a,z=-(S?(A+Math.sqrt(A*A-4*S*C))/(2*S):C/A);return{x:r+w+M*z,y:i+k+E*z,r:z}}function Xc(t,e,n){var r=t.x,i=t.y,a=e.r+n.r,o=t.r+n.r,u=e.x-r,s=e.y-i,f=u*u+s*s;if(f){var c=.5+((o*=o)-(a*=a))/(2*f),l=Math.sqrt(Math.max(0,2*a*(o+f)-(o-=f)*o-a*a))/(2*f);n.x=r+c*u+l*s,n.y=i+c*s-l*u}else n.x=r+o,n.y=i}function Vc(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function Jc(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function Zc(t){this._=t,this.next=null,this.previous=null}function Qc(t){if(!(i=t.length))return 0;var e,n,r,i,a,o,u,s,f,c,l;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Xc(n,e,r=t[2]),e=new Zc(e),n=new Zc(n),r=new Zc(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){Xc(e._,n._,r=t[u]),r=new Zc(r),s=n.next,f=e.previous,c=n._.r,l=e._.r;do{if(c<=l){if(Vc(s._,r._)){n=s,e.next=n,n.previous=e,--u;continue t}c+=s._.r,s=s.next}else{if(Vc(f._,r._)){(e=f).next=n,n.previous=e,--u;continue t}l+=f._.r,f=f.previous}}while(s!==f.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=Jc(e);(r=r.next)!==n;)(o=Jc(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=TC(e),u=0;u<i;++u)e=t[u],e.x-=r.x,e.y-=r.y;return r.r}function Kc(t){return null==t?null:tl(t)}function tl(t){if(\"function\"!=typeof t)throw new Error;return t}function el(){return 0}function nl(t){return Math.sqrt(t.value)}function rl(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function il(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,u=t(n)*e||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=Qc(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function al(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function ol(t){return t.id}function ul(t){return t.parentId}function sl(t,e){return t.parent===e.parent?1:2}function fl(t){var e=t.children;return e?e[0]:t.t}function cl(t){var e=t.children;return e?e[e.length-1]:t.t}function ll(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function hl(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}function dl(t,e,n){return t.a.parent===e.parent?t.a:n}function pl(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function gl(t){for(var e,n,r,i,a,o=new pl(t,0),u=[o];e=u.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=e.children[i]=new pl(r[i],i)),n.parent=e;return(o.parent=new pl(null,0)).children=[o],o}function vl(t,e,n,r,i,a){for(var o,u,s,f,c,l,h,d,p,g,v,m=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){s=i-n,f=a-r;do{c=y[_++].value}while(!c&&_<x);for(l=h=c,v=c*c*(g=Math.max(f/s,s/f)/(w*t)),p=Math.max(h/v,v/l);_<x;++_){if(c+=u=y[_].value,u<l&&(l=u),u>h&&(h=u),v=c*c*g,(d=Math.max(h/v,v/l))>p){c-=u;break}p=d}m.push(o={value:c,dice:s<f,children:y.slice(b,_)}),o.dice?LC(o,n,r,i,w?r+=f*c/w:a):IC(o,n,r,w?n+=s*c/w:i,a),w-=c,b=_}return m}function ml(t){be.call(this,null,t)}function yl(t){return t.values}function bl(t){be.call(this,null,t)}function _l(t,e,n){for(var r,i=0,a=e.length;i<a;++i)(r=e[i])in n&&t[r](n[r])}function xl(t,e,n){for(var r=t.data,i=0,a=e.length-1;i<a;++i)r[n[i]]=t[e[i]];r[n[a]]=t.children?t.children.length:0}function wl(t){bl.call(this,t)}function Ml(t){bl.call(this,t)}function kl(t){be.call(this,null,t)}function El(t){bl.call(this,t)}function Sl(t){be.call(this,{},t)}function Al(t){var e;return t.parent&&(e=t.parent.data)&&null!=s(e)&&e}function Cl(t){bl.call(this,t)}function zl(t){return t[0]}function Dl(t){return t[1]}function Ol(){this._=null}function Nl(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Tl(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Rl(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Pl(t){for(;t.L;)t=t.L;return t}function Ll(t,e,n,r){var i=[null,null],a=sz.push(i)-1;return i.left=t,i.right=e,n&&Ul(i,t,e,n),r&&Ul(i,e,t,r),oz[t.index].halfedges.push(a),oz[e.index].halfedges.push(a),i}function ql(t,e,n){var r=[e,n];return r.left=t,r}function Ul(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function jl(t,e,n,r,i){var a,o=t[0],u=t[1],s=o[0],f=o[1],c=0,l=1,h=u[0]-s,d=u[1]-f;if(a=e-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}if(a=n-f,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<l&&(l=a)}else if(d>0){if(a>l)return;a>c&&(c=a)}if(a=i-f,d||!(a<0)){if(a/=d,d<0){if(a>l)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<l&&(l=a)}return!(c>0||l<1)||(c>0&&(t[0]=[s+c*h,f+c*d]),l<1&&(t[1]=[s+l*h,f+l*d]),!0)}}}}}function Fl(t,e,n,r,i){var a=t[1];if(a)return!0;var o,u,s=t[0],f=t.left,c=t.right,l=f[0],h=f[1],d=c[0],p=c[1],g=(l+d)/2,v=(h+p)/2;if(p===h){if(g<e||g>=r)return;if(l>d){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(o=(l-d)/(p-h),u=v-o*g,o<-1||o>1)if(l>d){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(h<p){if(s){if(s[0]>=r)return}else s=[e,o*e+u];a=[r,o*r+u]}else{if(s){if(s[0]<e)return}else s=[r,o*r+u];a=[e,o*e+u]}return t[0]=s,t[1]=a,!0}function Il(t,e,n,r){for(var i,a=sz.length;a--;)Fl(i=sz[a],t,e,n,r)&&jl(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>lz||Math.abs(i[0][1]-i[1][1])>lz)||delete sz[a]}function $l(t){return oz[t.index]={site:t,halfedges:[]}}function Bl(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Wl(t,e){return e[+(e.left!==t.site)]}function Yl(t,e){return e[+(e.left===t.site)]}function Hl(){for(var t,e,n,r,i=0,a=oz.length;i<a;++i)if((t=oz[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=Bl(t,sz[e[n]]);for(o.sort(function(t,e){return u[e]-u[t]}),n=0;n<r;++n)u[n]=e[o[n]];for(n=0;n<r;++n)e[n]=u[n]}}function Gl(t,e,n,r){var i,a,o,u,s,f,c,l,h,d,p,g,v=oz.length,m=!0;for(i=0;i<v;++i)if(a=oz[i]){for(o=a.site,u=(s=a.halfedges).length;u--;)sz[s[u]]||s.splice(u,1);for(u=0,f=s.length;u<f;)p=(d=Yl(a,sz[s[u]]))[0],g=d[1],l=(c=Wl(a,sz[s[++u%f]]))[0],h=c[1],(Math.abs(p-l)>lz||Math.abs(g-h)>lz)&&(s.splice(u,0,sz.push(ql(o,d,Math.abs(p-t)<lz&&r-g>lz?[t,Math.abs(l-t)<lz?h:r]:Math.abs(g-r)<lz&&n-p>lz?[Math.abs(h-r)<lz?l:n,r]:Math.abs(p-n)<lz&&g-e>lz?[n,Math.abs(l-n)<lz?h:e]:Math.abs(g-e)<lz&&p-t>lz?[Math.abs(h-e)<lz?l:t,e]:null))-1),++f);f&&(m=!1)}if(m){var y,b,_,x=1/0;for(i=0,m=null;i<v;++i)(a=oz[i])&&(_=(y=(o=a.site)[0]-t)*y+(b=o[1]-e)*b)<x&&(x=_,m=a);if(m){var w=[t,e],M=[t,r],k=[n,r],E=[n,e];m.halfedges.push(sz.push(ql(o=m.site,w,M))-1,sz.push(ql(o,M,k))-1,sz.push(ql(o,k,E))-1,sz.push(ql(o,E,w))-1)}}for(i=0;i<v;++i)(a=oz[i])&&(a.halfedges.length||delete oz[i])}function Xl(){Nl(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vl(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,c=a[0]-o,l=a[1]-u,h=2*(s*l-f*c);if(!(h>=-hz)){var d=s*s+f*f,p=c*c+l*l,g=(l*d-f*p)/h,v=(s*p-c*d)/h,m=fz.pop()||new Xl;m.arc=t,m.site=i,m.x=g+o,m.y=(m.cy=v+u)+Math.sqrt(g*g+v*v),t.circle=m;for(var y=null,b=uz._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}uz.insert(y,m),y||(iz=m)}}}}function Jl(t){var e=t.circle;e&&(e.P||(iz=e.N),uz.remove(e),fz.push(e),Nl(e),t.circle=null)}function Zl(){Nl(this),this.edge=this.site=this.circle=null}function Ql(t){var e=cz.pop()||new Zl;return e.site=t,e}function Kl(t){Jl(t),az.remove(t),cz.push(t),Nl(t)}function th(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,u=[t];Kl(t);for(var s=a;s.circle&&Math.abs(n-s.circle.x)<lz&&Math.abs(r-s.circle.cy)<lz;)a=s.P,u.unshift(s),Kl(s),s=a;u.unshift(s),Jl(s);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<lz&&Math.abs(r-f.circle.cy)<lz;)o=f.N,u.push(f),Kl(f),f=o;u.push(f),Jl(f);var c,l=u.length;for(c=1;c<l;++c)f=u[c],s=u[c-1],Ul(f.edge,s.site,f.site,i);s=u[0],(f=u[l-1]).edge=Ll(s.site,f.site,null,i),Vl(s),Vl(f)}function eh(t){for(var e,n,r,i,a=t[0],o=t[1],u=az._;u;)if((r=nh(u,o)-a)>lz)u=u.L;else{if(!((i=a-rh(u,o))>lz)){r>-lz?(e=u.P,n=u):i>-lz?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}$l(t);var s=Ql(t);if(az.insert(e,s),e||n){if(e===n)return Jl(e),n=Ql(e.site),az.insert(s,n),s.edge=n.edge=Ll(e.site,s.site),Vl(e),void Vl(n);if(n){Jl(e),Jl(n);var f=e.site,c=f[0],l=f[1],h=t[0]-c,d=t[1]-l,p=n.site,g=p[0]-c,v=p[1]-l,m=2*(h*v-d*g),y=h*h+d*d,b=g*g+v*v,_=[(v*y-d*b)/m+c,(h*b-g*y)/m+l];Ul(n.edge,f,p,_),s.edge=Ll(f,t,null,_),n.edge=Ll(t,p,null,_),Vl(e),Vl(n)}else s.edge=Ll(e.site,s.site)}}function nh(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var u=(n=o.site)[0],s=n[1],f=s-e;if(!f)return u;var c=u-r,l=1/a-1/f,h=c/f;return l?(-h+Math.sqrt(h*h-2*l*(c*c/(-2*f)-s+f/2+i-a/2)))/l+r:(r+u)/2}function rh(t,e){var n=t.N;if(n)return nh(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function ih(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ah(t,e){return e[1]-t[1]||e[0]-t[0]}function oh(t,e){var n,r,i,a=t.sort(ah).pop();for(sz=[],oz=new Array(t.length),az=new Ol,uz=new Ol;;)if(i=iz,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(eh(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;th(i.arc)}if(Hl(),e){var o=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1];Il(o,u,s,f),Gl(o,u,s,f)}this.edges=sz,this.cells=oz,az=uz=sz=oz=null}function uh(t){be.call(this,null,t)}function sh(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(mz<<5)/a,yz/a);var o,u,s,f,c,l=0,h=0,d=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+\" \"+e.weight+\" \"+~~((e.size+1)/a)+\"px \"+e.font,o=i.measureText(e.text+\"m\").width*a,s=e.size<<1,e.rotate){var g=Math.sin(e.rotate*vz),v=Math.cos(e.rotate*vz),m=o*v,y=o*g,b=s*v,_=s*g;o=Math.max(Math.abs(m+_),Math.abs(m-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>d&&(d=s),l+o>=mz<<5&&(l=0,h+=d,d=0),h+s>=yz)break;i.translate((l+(o>>1))/a,(h+(s>>1))/a),e.rotate&&i.rotate(e.rotate*vz),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=o,e.height=s,e.xoff=l,e.yoff=h,e.x1=o>>1,e.y1=s>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,l+=o}for(var x=i.getImageData(0,0,(mz<<5)/a,yz/a).data,w=[];--r>=0;)if((e=n[r]).hasText){for(u=(o=e.width)>>5,s=e.y1-e.y0,f=0;f<s*u;f++)w[f]=0;if(null==(l=e.xoff))return;h=e.yoff;var M=0,k=-1;for(c=0;c<s;c++){for(f=0;f<o;f++){var E=u*c+(f>>5),S=x[(h+c)*(mz<<5)+(l+f)<<2]?1<<31-f%32:0;w[E]|=S,M|=S}M?k=c:(e.y0++,s--,c--,h++)}e.y1=e.y0+k,e.sprite=w.slice(0,(e.y1-e.y0)*u)}}}function fh(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),u=127&o,s=32-u,f=t.y1-t.y0,c=(t.y+t.y0)*n+(o>>5),l=0;l<f;l++){r=0;for(var h=0;h<=a;h++)if((r<<s|(h<a?(r=i[l*a+h])>>>u:0))&e[c+h])return!0;c+=n}return!1}function ch(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function lh(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function hh(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function dh(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function ph(){try{var t=\"undefined\"!=typeof document&&document.createElement?document.createElement(\"canvas\"):0;return t&&t.getContext?t:new(require(\"canvas\"))}catch(t){qv(\"Canvas unavailable. Run in browser or install node-canvas.\")}}function gh(t){return\"function\"==typeof t?t:function(){return t}}function vh(t){be.call(this,bz(),t)}function mh(t,e){for(var n,r=1/0,i=-1/0,a=0,o=e.length;a<o;++a)(n=t(e[a]))<r&&(r=n),n>i&&(i=n);return[r,i]}function yh(t){return new Uint8Array(t)}function bh(t){return new Uint16Array(t)}function _h(t){return new Uint32Array(t)}function xh(){var t=8,e=[],n=_h(0),r=Mh(0,t),i=Mh(0,t);return{data:function(){return e},seen:function(){return n=wh(n,e.length)},add:function(t){for(var n,r=0,i=e.length,a=t.length;r<a;++r)(n=t[r])._index=i++,e.push(n)},remove:function(t,n){var a,o,u,s=e.length,f=Array(s-t),c=e;for(o=0;!n[o]&&o<s;++o)f[o]=e[o],c[o]=o;for(u=o;o<s;++o)a=e[o],n[o]?c[o]=-1:(c[o]=u,r[u]=r[o],i[u]=i[o],f[u]=a,a._index=u++),r[o]=0;return e=f,c},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=Mh(e,t,r),i=Mh(e,t))}}}function wh(t,e,n){return t.length>=e?t:((n=n||new t.constructor(e)).set(t),n)}function Mh(t,e,n){var r=(e<257?yh:e<65537?bh:_h)(t);return n&&r.set(n),r}function kh(){var t=_h(0),e=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,u,s,f=n,c=i.length,l=Array(c),h=_h(c);for(s=0;s<c;++s)l[s]=r(i[s]),h[s]=s;if(l=Eh(l,h),f)o=e,u=t,e=Array(f+c),t=_h(f+c),Sh(a,o,u,f,l,h,c,e,t);else{if(a>0)for(s=0;s<c;++s)h[s]+=a;e=l,t=h}return n=f+c,{index:h,value:l}},remove:function(r,i){var a,o,u,s=n;for(o=0;!i[t[o]]&&o<s;++o);for(u=o;o<s;++o)i[a=t[o]]||(t[u]=a,e[u]=e[o],++u);n=s-r},bisect:function(t,r){var i;return r?i=r.length:(r=e,i=n),[Gy(r,t[0],0,i),Hy(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function Eh(t,e){return t.sort.call(e,function(e,n){var r=t[e],i=t[n];return r<i?-1:r>i?1:0}),ob(t,e)}function Sh(t,e,n,r,i,a,o,u,s){var f,c=0,l=0;for(f=0;c<r&&l<o;++f)e[c]<i[l]?(u[f]=e[c],s[f]=n[c++]):(u[f]=i[l],s[f]=a[l++]+t);for(;c<r;++c,++f)u[f]=e[c],s[f]=n[c];for(;l<o;++l,++f)u[f]=i[l],s[f]=a[l]+t}function Ah(t){be.call(this,xh(),t),this._indices=null,this._dims=null}function Ch(t){be.call(this,null,t)}function zh(t){\"undefined\"!=typeof document&&document.body&&(document.body.style.cursor=t)}function Dh(t,e){var n=t._runtime.data;return n.hasOwnProperty(e)||qv(\"Unrecognized data set: \"+e),n[e]}function Oh(t,e){p(e)||qv(\"Second argument to changes must be a changeset.\");var n=Dh(this,t);return n.modified=!0,this.pulse(n.input,e)}function Nh(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function Th(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function Rh(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function Ph(t){var e=Rh(t);t._renderer.background(t._background),t._renderer.resize(Nh(t),Th(t),e),t._handler.origin(e)}function Lh(t,e,n){function r(t){var n,r=a;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(t){if(!t)return n;Iv(t)&&(t=r(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}var a=e?\"group\"===e.mark.marktype?e:e.mark.group:null;return{view:rm(t),item:rm(e||{}),group:r,xy:i,x:function(t){return i(t)[0]},y:function(t){return i(t)[1]}}}function qh(t){var e=(t=am({},t)).defaults;return e&&(jv(e.prevent)&&(e.prevent=Mm(e.prevent)),jv(e.allow)&&(e.allow=Mm(e.allow))),t}function Uh(t,e){var n=t._eventConfig.defaults,r=n&&n.prevent,i=n&&n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}function jh(t){return t.item}function Fh(t){var e=t.item.mark.source;return e.source||e}function Ih(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function $h(t,e,n,r){var i=Oz(\"div\",{class:Nz});i.appendChild(Oz(\"span\",{class:Tz},n.name||n.signal)),e.appendChild(i);var a=Bh;switch(n.input){case\"checkbox\":a=Wh;break;case\"select\":a=Yh;break;case\"radio\":a=Hh;break;case\"range\":a=Gh}a(t,i,n,r)}function Bh(t,e,n,r){var i=Oz(\"input\");for(var a in n)\"signal\"!==a&&\"element\"!==a&&i.setAttribute(\"input\"===a?\"type\":a,n[a]);i.setAttribute(\"name\",n.signal),i.value=r,e.appendChild(i),i.addEventListener(\"input\",function(){t.update(i.value)}),t.elements=[i],t.set=function(t){i.value=t}}function Wh(t,e,n,r){var i={type:\"checkbox\",name:n.signal};r&&(i.checked=!0);var a=Oz(\"input\",i);e.appendChild(a),a.addEventListener(\"change\",function(){t.update(a.checked)}),t.elements=[a],t.set=function(t){a.checked=!!t||null}}function Yh(t,e,n,r){var i=Oz(\"select\",{name:n.signal});n.options.forEach(function(t){var e={value:t};Xh(t,r)&&(e.selected=!0),i.appendChild(Oz(\"option\",e,t+\"\"))}),e.appendChild(i),i.addEventListener(\"change\",function(){t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if(Xh(n.options[e],t))return void(i.selectedIndex=e)}}function Hh(t,e,n,r){var i=Oz(\"span\",{class:Rz});e.appendChild(i),t.elements=n.options.map(function(e){var a=Pz+n.signal+\"-\"+e,o={id:a,type:\"radio\",name:n.signal,value:e};Xh(e,r)&&(o.checked=!0);var u=Oz(\"input\",o);return u.addEventListener(\"change\",function(){t.update(e)}),i.appendChild(u),i.appendChild(Oz(\"label\",{for:a},e+\"\")),u}),t.set=function(e){for(var n=t.elements,r=0,i=n.length;r<i;++r)Xh(n[r].value,e)&&(n[r].checked=!0)}}function Gh(t,e,n,r){function i(){f.textContent=s.value,t.update(+s.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var a=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,u=n.step||Te(a,o,100),s=Oz(\"input\",{type:\"range\",name:n.signal,min:a,max:o,step:u});s.value=r;var f=Oz(\"label\",{},+r);e.appendChild(s),e.appendChild(f),s.addEventListener(\"input\",i),s.addEventListener(\"change\",i),t.elements=[s],t.set=function(t){s.value=t,f.textContent=t}}function Xh(t,e){return t===e||t+\"\"==e+\"\"}function Vh(t,e){if(\"string\"==typeof e){if(\"undefined\"==typeof document)return t.error(\"DOM document instance not found.\"),null;e=document.querySelector(e)}return e.innerHTML=\"\",e}function Jh(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}function Zh(t,e){qv(t+' for \"outer\" push: '+r(e))}function Qh(t){this.type=t}function Kh(t){switch(t.type){case\"ArrayExpression\":return t.elements;case\"BinaryExpression\":case\"LogicalExpression\":return[t.left,t.right];case\"CallExpression\":var e=t.arguments.slice();return e.unshift(t.callee),e;case\"ConditionalExpression\":return[t.test,t.consequent,t.alternate];case\"MemberExpression\":return[t.object,t.property];case\"ObjectExpression\":return t.properties;case\"Property\":return[t.key,t.value];case\"UnaryExpression\":return[t.argument];case\"Identifier\":case\"Literal\":case\"RawCode\":default:return[]}}function td(t,e){if(!t)throw new Error(\"ASSERT: \"+e)}function ed(t){return t>=48&&t<=57}function nd(t){return\"0123456789abcdefABCDEF\".indexOf(t)>=0}function rd(t){return\"01234567\".indexOf(t)>=0}function id(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function ad(t){return 10===t||13===t||8232===t||8233===t}function od(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&ED.test(String.fromCharCode(t))}function ud(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&SD.test(String.fromCharCode(t))}function sd(){for(var t;Yz<Hz&&(t=Wz.charCodeAt(Yz),id(t)||ad(t));)++Yz}function fd(t){var e,n,r,i=0;for(n=\"u\"===t?4:2,e=0;e<n;++e)Yz<Hz&&nd(Wz[Yz])?(r=Wz[Yz++],i=16*i+\"0123456789abcdef\".indexOf(r.toLowerCase())):qd({},dD,MD);return String.fromCharCode(i)}function cd(){var t,e,n,r;for(e=0,\"}\"===(t=Wz[Yz])&&qd({},dD,MD);Yz<Hz&&(t=Wz[Yz++],nd(t));)e=16*e+\"0123456789abcdef\".indexOf(t.toLowerCase());return(e>1114111||\"}\"!==t)&&qd({},dD,MD),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function ld(){var t,e;for(t=Wz.charCodeAt(Yz++),e=String.fromCharCode(t),92===t&&(117!==Wz.charCodeAt(Yz)&&qd({},dD,MD),++Yz,(t=fd(\"u\"))&&\"\\\\\"!==t&&od(t.charCodeAt(0))||qd({},dD,MD),e=t);Yz<Hz&&(t=Wz.charCodeAt(Yz),ud(t));)++Yz,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==Wz.charCodeAt(Yz)&&qd({},dD,MD),++Yz,(t=fd(\"u\"))&&\"\\\\\"!==t&&ud(t.charCodeAt(0))||qd({},dD,MD),e+=t);return e}function hd(){var t,e;for(t=Yz++;Yz<Hz;){if(92===(e=Wz.charCodeAt(Yz)))return Yz=t,ld();if(!ud(e))break;++Yz}return Wz.slice(t,Yz)}function dd(){var t,e,n;return t=Yz,e=92===Wz.charCodeAt(Yz)?ld():hd(),n=1===e.length?Jz:AD.hasOwnProperty(e)?Zz:\"null\"===e?Qz:\"true\"===e||\"false\"===e?Xz:Jz,{type:n,value:e,start:t,end:Yz}}function pd(){var t,e,n,r,i=Yz,a=Wz.charCodeAt(Yz),o=Wz[Yz];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Yz,{type:tD,value:String.fromCharCode(a),start:i,end:Yz};default:if(61===(t=Wz.charCodeAt(Yz+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Yz+=2,{type:tD,value:String.fromCharCode(a)+String.fromCharCode(t),start:i,end:Yz};case 33:case 61:return Yz+=2,61===Wz.charCodeAt(Yz)&&++Yz,{type:tD,value:Wz.slice(i,Yz),start:i,end:Yz}}}return\">>>=\"===(r=Wz.substr(Yz,4))?(Yz+=4,{type:tD,value:r,start:i,end:Yz}):\">>>\"===(n=r.substr(0,3))||\"<<=\"===n||\">>=\"===n?(Yz+=3,{type:tD,value:n,start:i,end:Yz}):(e=n.substr(0,2),o===e[1]&&\"+-<>&|\".indexOf(o)>=0||\"=>\"===e?(Yz+=2,{type:tD,value:e,start:i,end:Yz}):\"<>=!+-*%&|^/\".indexOf(o)>=0?(++Yz,{type:tD,value:o,start:i,end:Yz}):void qd({},dD,MD))}function gd(t){for(var e=\"\";Yz<Hz&&nd(Wz[Yz]);)e+=Wz[Yz++];return 0===e.length&&qd({},dD,MD),od(Wz.charCodeAt(Yz))&&qd({},dD,MD),{type:Kz,value:parseInt(\"0x\"+e,16),start:t,end:Yz}}function vd(t){for(var e=\"0\"+Wz[Yz++];Yz<Hz&&rd(Wz[Yz]);)e+=Wz[Yz++];return(od(Wz.charCodeAt(Yz))||ed(Wz.charCodeAt(Yz)))&&qd({},dD,MD),{type:Kz,value:parseInt(e,8),octal:!0,start:t,end:Yz}}function md(){var t,e,n;if(n=Wz[Yz],td(ed(n.charCodeAt(0))||\".\"===n,\"Numeric literal must start with a decimal digit or a decimal point\"),e=Yz,t=\"\",\".\"!==n){if(t=Wz[Yz++],n=Wz[Yz],\"0\"===t){if(\"x\"===n||\"X\"===n)return++Yz,gd(e);if(rd(n))return vd(e);n&&ed(n.charCodeAt(0))&&qd({},dD,MD)}for(;ed(Wz.charCodeAt(Yz));)t+=Wz[Yz++];n=Wz[Yz]}if(\".\"===n){for(t+=Wz[Yz++];ed(Wz.charCodeAt(Yz));)t+=Wz[Yz++];n=Wz[Yz]}if(\"e\"===n||\"E\"===n)if(t+=Wz[Yz++],\"+\"!==(n=Wz[Yz])&&\"-\"!==n||(t+=Wz[Yz++]),ed(Wz.charCodeAt(Yz)))for(;ed(Wz.charCodeAt(Yz));)t+=Wz[Yz++];else qd({},dD,MD);return od(Wz.charCodeAt(Yz))&&qd({},dD,MD),{type:Kz,value:parseFloat(t),start:e,end:Yz}}function yd(){var t,e,n,r,i=\"\",a=!1;for(td(\"'\"===(t=Wz[Yz])||'\"'===t,\"String literal must starts with a quote\"),e=Yz,++Yz;Yz<Hz;){if((n=Wz[Yz++])===t){t=\"\";break}if(\"\\\\\"===n)if((n=Wz[Yz++])&&ad(n.charCodeAt(0)))\"\\r\"===n&&\"\\n\"===Wz[Yz]&&++Yz;else switch(n){case\"u\":case\"x\":\"{\"===Wz[Yz]?(++Yz,i+=cd()):i+=fd(n);break;case\"n\":i+=\"\\n\";break;case\"r\":i+=\"\\r\";break;case\"t\":i+=\"\\t\";break;case\"b\":i+=\"\\b\";break;case\"f\":i+=\"\\f\";break;case\"v\":i+=\"\\v\";break;default:rd(n)?(0!==(r=\"01234567\".indexOf(n))&&(a=!0),Yz<Hz&&rd(Wz[Yz])&&(a=!0,r=8*r+\"01234567\".indexOf(Wz[Yz++]),\"0123\".indexOf(n)>=0&&Yz<Hz&&rd(Wz[Yz])&&(r=8*r+\"01234567\".indexOf(Wz[Yz++]))),i+=String.fromCharCode(r)):i+=n}else{if(ad(n.charCodeAt(0)))break;i+=n}}return\"\"!==t&&qd({},dD,MD),{type:eD,value:i,octal:a,start:e,end:Yz}}function bd(t,e){var n=t;e.indexOf(\"u\")>=0&&(n=n.replace(/\\\\u\\{([0-9a-fA-F]+)\\}/g,function(t,e){if(parseInt(e,16)<=1114111)return\"x\";qd({},bD)}).replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,\"x\"));try{new RegExp(n)}catch(t){qd({},bD)}try{return new RegExp(t,e)}catch(t){return null}}function _d(){var t,e,n,r,i;for(td(\"/\"===(t=Wz[Yz]),\"Regular expression literal must start with a slash\"),e=Wz[Yz++],n=!1,r=!1;Yz<Hz;)if(t=Wz[Yz++],e+=t,\"\\\\\"===t)ad((t=Wz[Yz++]).charCodeAt(0))&&qd({},_D),e+=t;else if(ad(t.charCodeAt(0)))qd({},_D);else if(n)\"]\"===t&&(n=!1);else{if(\"/\"===t){r=!0;break}\"[\"===t&&(n=!0)}return r||qd({},_D),i=e.substr(1,e.length-2),{value:i,literal:e}}function xd(){var t,e,n;for(e=\"\",n=\"\";Yz<Hz&&(t=Wz[Yz],ud(t.charCodeAt(0)));)++Yz,\"\\\\\"===t&&Yz<Hz?qd({},dD,MD):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&qd({},bD,n),{value:n,literal:e}}function wd(){var t,e,n,r;return Gz=null,sd(),t=Yz,e=_d(),n=xd(),r=bd(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:Yz}}function Md(t){return t.type===Jz||t.type===Zz||t.type===Xz||t.type===Qz}function kd(){var t;return sd(),Yz>=Hz?{type:Vz,start:Yz,end:Yz}:(t=Wz.charCodeAt(Yz),od(t)?dd():40===t||41===t||59===t?pd():39===t||34===t?yd():46===t?ed(Wz.charCodeAt(Yz+1))?md():pd():ed(t)?md():pd())}function Ed(){var t;return t=Gz,Yz=t.end,Gz=kd(),Yz=t.end,t}function Sd(){var t;t=Yz,Gz=kd(),Yz=t}function Ad(t){var e=new Qh(nD);return e.elements=t,e}function Cd(t,e,n){var r=new Qh(\"||\"===t||\"&&\"===t?sD:rD);return r.operator=t,r.left=e,r.right=n,r}function zd(t,e){var n=new Qh(iD);return n.callee=t,n.arguments=e,n}function Dd(t,e,n){var r=new Qh(aD);return r.test=t,r.consequent=e,r.alternate=n,r}function Od(t){var e=new Qh(oD);return e.name=t,e}function Nd(t){var e=new Qh(uD);return e.value=t.value,e.raw=Wz.slice(t.start,t.end),t.regex&&(\"//\"===e.raw&&(e.raw=\"/(?:)/\"),e.regex=t.regex),e}function Td(t,e,n){var r=new Qh(fD);return r.computed=\"[\"===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function Rd(t){var e=new Qh(cD);return e.properties=t,e}function Pd(t,e,n){var r=new Qh(lD);return r.key=e,r.value=n,r.kind=t,r}function Ld(t,e){var n=new Qh(hD);return n.operator=t,n.argument=e,n.prefix=!0,n}function qd(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\\d)/g,function(t,e){return td(e<r.length,\"Message reference must be in range\"),r[e]});throw n=new Error(i),n.index=Yz,n.description=i,n}function Ud(t){t.type===Vz&&qd(t,yD),t.type===Kz&&qd(t,pD),t.type===eD&&qd(t,gD),t.type===Jz&&qd(t,vD),t.type===Zz&&qd(t,mD),qd(t,dD,t.value)}function jd(t){var e=Ed();e.type===tD&&e.value===t||Ud(e)}function Fd(t){return Gz.type===tD&&Gz.value===t}function Id(t){return Gz.type===Zz&&Gz.value===t}function $d(){var t=[];for(Yz=Gz.start,jd(\"[\");!Fd(\"]\");)Fd(\",\")?(Ed(),t.push(null)):(t.push(rp()),Fd(\"]\")||jd(\",\"));return Ed(),Ad(t)}function Bd(){var t;return Yz=Gz.start,(t=Ed()).type===eD||t.type===Kz?(t.octal&&qd(t,xD),Nd(t)):Od(t.value)}function Wd(){var t,e,n,r;return Yz=Gz.start,(t=Gz).type===Jz?(n=Bd(),jd(\":\"),r=rp(),Pd(\"init\",n,r)):t.type!==Vz&&t.type!==tD?(e=Bd(),jd(\":\"),r=rp(),Pd(\"init\",e,r)):void Ud(t)}function Yd(){var t,e,n=[],r={},i=String;for(Yz=Gz.start,jd(\"{\");!Fd(\"}\");)e=\"$\"+((t=Wd()).key.type===oD?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,e)?qd({},wD):r[e]=!0,n.push(t),Fd(\"}\")||jd(\",\");return jd(\"}\"),Rd(n)}function Hd(){var t;return jd(\"(\"),t=ip(),jd(\")\"),t}function Gd(){var t,e,n;if(Fd(\"(\"))return Hd();if(Fd(\"[\"))return $d();if(Fd(\"{\"))return Yd();if(t=Gz.type,Yz=Gz.start,t===Jz||CD[Gz.value])n=Od(Ed().value);else if(t===eD||t===Kz)Gz.octal&&qd(Gz,xD),n=Nd(Ed());else{if(t===Zz)throw new Error(kD);t===Xz?((e=Ed()).value=\"true\"===e.value,n=Nd(e)):t===Qz?((e=Ed()).value=null,n=Nd(e)):Fd(\"/\")||Fd(\"/=\")?(n=Nd(wd()),Sd()):Ud(Ed())}return n}function Xd(){var t=[];if(jd(\"(\"),!Fd(\")\"))for(;Yz<Hz&&(t.push(rp()),!Fd(\")\"));)jd(\",\");return jd(\")\"),t}function Vd(){var t;return Yz=Gz.start,t=Ed(),Md(t)||Ud(t),Od(t.value)}function Jd(){return jd(\".\"),Vd()}function Zd(){var t;return jd(\"[\"),t=ip(),jd(\"]\"),t}function Qd(){var t;for(t=Gd();;)if(Fd(\".\"))t=Td(\".\",t,Jd());else if(Fd(\"(\"))t=zd(t,Xd());else{if(!Fd(\"[\"))break;t=Td(\"[\",t,Zd())}return t}function Kd(){var t=Qd();if(Gz.type===tD&&(Fd(\"++\")||Fd(\"--\")))throw new Error(kD);return t}function tp(){var t,e;if(Gz.type!==tD&&Gz.type!==Zz)e=Kd();else{if(Fd(\"++\")||Fd(\"--\"))throw new Error(kD);if(Fd(\"+\")||Fd(\"-\")||Fd(\"~\")||Fd(\"!\"))t=Ed(),e=tp(),e=Ld(t.value,e);else{if(Id(\"delete\")||Id(\"void\")||Id(\"typeof\"))throw new Error(kD);e=Kd()}}return e}function ep(t){var e=0;if(t.type!==tD&&t.type!==Zz)return 0;switch(t.value){case\"||\":e=1;break;case\"&&\":e=2;break;case\"|\":e=3;break;case\"^\":e=4;break;case\"&\":e=5;break;case\"==\":case\"!=\":case\"===\":case\"!==\":e=6;break;case\"<\":case\">\":case\"<=\":case\">=\":case\"instanceof\":case\"in\":e=7;break;case\"<<\":case\">>\":case\">>>\":e=8;break;case\"+\":case\"-\":e=9;break;case\"*\":case\"/\":case\"%\":e=11}return e}function np(){var t,e,n,r,i,a,o,u,s,f;if(t=Gz,s=tp(),r=Gz,0===(i=ep(r)))return s;for(r.prec=i,Ed(),e=[t,Gz],a=[s,r,o=tp()];(i=ep(Gz))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),e.pop(),n=Cd(u,s,o),a.push(n);(r=Ed()).prec=i,a.push(r),e.push(Gz),n=tp(),a.push(n)}for(n=a[f=a.length-1],e.pop();f>1;)e.pop(),n=Cd(a[f-1].value,a[f-2],n),f-=2;return n}function rp(){var t,e;return t=np(),Fd(\"?\")&&(Ed(),e=rp(),jd(\":\"),t=Dd(t,e,rp())),t}function ip(){var t=rp();if(Fd(\",\"))throw new Error(kD);return t}function ap(t,e,n){var r=t+\":\"+n,i=ND[r];return i&&i[0]===e||(ND[r]=i=[e,e(n)]),i[1]}function op(t,e){return ap(\"timeFormat\",xy,e)(t)}function up(t,e,n){return TD.setMonth(t),TD.setDate(e),op(TD,n)}function sp(t,e,n){try{t[e].apply(t,[\"EXPRESSION\"].concat([].slice.call(n)))}catch(e){t.warn(e)}return n[n.length-1]}function fp(t,e){var n;return em(t)?t:Iv(t)?(n=e.scales[t])&&n.value:void 0}function cp(t,e,n){var r=UD+n;if(!e.hasOwnProperty(r))try{e[r]=t.scaleRef(n)}catch(t){}}function lp(t,e,n,r){if(e[0].type===PD)cp(n,r,e[0].value);else if(e[0].type===LD)for(t in n.scales)cp(n,r,t)}function hp(t){return function(e){return t*Math.exp(e)}}function dp(t){return function(e){return Math.log(t*e)}}function pp(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function gp(t,e,n,r){var i=n(t[0]),a=n(ym(t)),o=(a-i)*e;return[r(i-o),r(a-o)]}function vp(t,e,n,r,i){var a=r(e),o=r(t[0]),u=r(ym(t));return[i(a+(o-a)*n),i(a+(u-a)*n)]}function mp(t){return function(e,n,r){var i=fp(e,(r||this).context);return i&&i.path[t](n)}}function yp(t){var e=this.context.data[t];return e?e.values.value:[]}function bp(t,e,n,r){e[0].type!==PD&&qv(\"First argument to data functions must be a string literal.\");var i=e[0].value,a=jD+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function _p(t){return t.data}function xp(t,e){var n=yp.call(e,t);return n.root&&n.root.lookup||BD}function wp(t,e){return t===e||t!==t&&e!==e||!(!jv(t)||!jv(e)||t.length!==e.length)&&Mp(t,e)}function Mp(t,e){for(var n=0,r=t.length;n<r;++n)if(!wp(t[n],e[n]))return!1;return!0}function kp(t){return function(e){for(var n in t)if(!wp(e[n],t[n]))return!1;return!0}}function Ep(t,e){for(var n,r=e.fields,i=e.values,a=e.getter||(e.getter=[]),o=r.length,u=0;u<o;++u)if(a[u]=a[u]||$v(r[u]),n=a[u](t),lm(n)&&(n=xm(n)),lm(i[u])&&(i[u]=xm(i[u])),e[YD+r[u]]){if(lm(i[u][0])&&(i[u]=i[u].map(xm)),!WD(n,i[u],!0,!1))return!1}else if(n!==i[u])return!1;return!0}function Sp(t,e){for(var n,r,i,a=e.intervals,o=a.length,u=0;u<o;++u){if(r=a[u].extent,n=a[u].getter||(a[u].getter=$v(a[u].field)),i=n(t),!r||r[0]===r[1])return!1;if(lm(i)&&(i=xm(i)),lm(r[0])&&(r=a[u].extent=r.map(xm)),hm(r[0])&&!WD(i,r))return!1;if(Iv(r[0])&&r.indexOf(i)<0)return!1}return!0}function Ap(t,e,n,r){for(var i,a,o,u,s,f=this.context.data[t],c=f?f.values.value:[],l=f?f[XD]&&f[XD].value:void 0,h=n===HD,d=c.length,p=0;p<d;++p)if(i=c[p],l&&h){if(a=a||{},-1===(o=a[u=i.unit]||0))continue;if(s=r(e,i),a[u]=s?-1:++o,s&&1===l.size)return!0;if(!s&&o===l.get(u).count)return!1}else if(s=r(e,i),h^s)return s;return d&&h}function Cp(t,e,n){return Ap.call(this,t,e,n,Ep)}function zp(t,e,n,r){e[0].type!==PD&&qv(\"First argument to indata must be a string literal.\");var i=e[0].value,a=e.length>=2&&e[e.length-1].value,o=qD+\"unit\";a!==HD||r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,\"unit\")),bp(t,e,n,r)}function Dp(t,e,n,r){var i,a,o,u,s,f=this.context.data[t],c=f?f.values.value:[],l=f?f[XD]&&f[XD].value:void 0,h=c[0],d=0;if(h){for(i=e?h.encodings.length:h.fields.length;d<i;++d)if(e&&h.encodings[d]===e||n&&h.fields[d]===n){a=d,u=h[YD+h.fields[d]];break}return l&&1===l.size&&(r=GD),l&&r===HD?(s=c.reduce(function(t,e){return(t[e.unit]||(t[e.unit]=[])).push({unit:e.unit,value:e.values[a]}),t},{}),o=Object.keys(s).map(function(t){return{unit:t,value:u?Np(s[t],GD):Op(s[t],GD)}})):o=c.map(function(t){return{unit:t.unit,value:t.values[a]}}),u?Np(o,r):Op(o,r)}}function Op(t,e){for(var n,r,i,a,o={},u=0,s={},f=[],c=0,l=t.length;c<l;++c)r=(n=t[c]).unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],e===HD&&i.count!==u||f.push(i.value);return f.length?f:void 0}function Np(t,e){for(var n,r,i,a,o=e===HD?Rp:Tp,u=0,s=t.length;u<s;++u)n=t[u].value,lm(n[0])&&(n=n.map(xm)),(i=n[0])>(a=n[1])&&(a=n[0],i=n[1]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function Tp(t,e,n){return t[0]>e&&(t[0]=e),t[1]<n&&(t[1]=n),t}function Rp(t,e,n){return n<t[0]||t[1]<e?[]:(t[0]<e&&(t[0]=e),t[1]>n&&(t[1]=n),t)}function Pp(t,e,n){return 1===arguments.length?VD[t]:(VD[t]=e,n&&(KD[t]=n),rO&&(rO.functions[t]=QD+t),this)}function Lp(t){return t===oO?aO:t||aO}function qp(t,e){return(t.merge?Up:t.stream?jp:t.type?Fp:qv(\"Invalid stream specification: \"+r(t)))(t,e)}function Up(t,e){var n=Ip({merge:t.merge.map(function(t){return qp(t,e)})},t,e);return e.addStream(n).id}function jp(t,e){var n=Ip({stream:qp(t.stream,e)},t,e);return e.addStream(n).id}function Fp(t,e){var n=e.event(Lp(t.source),t.type),r=Ip({stream:n},t,e);return 1===Object.keys(r).length?n:e.addStream(r).id}function Ip(t,e,n){var i=e.between;return i&&(2!==i.length&&qv('Stream \"between\" parameter must have 2 entries: '+r(e)),t.between=[qp(i[0],n),qp(i[1],n)]),i=e.filter?tm(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push($p(e.marktype,e.markname,e.markrole)),e.source===oO&&i.push(\"inScope(event.item)\"),i.length&&(t.filter=iO(\"(\"+i.join(\")&&(\")+\")\").$expr),null!=(i=e.throttle)&&(t.throttle=+i),null!=(i=e.debounce)&&(t.debounce=+i),e.consume&&(t.consume=!0),t}function $p(t,e,n){var r=\"event.item\";return r+(t&&\"*\"!==t?\"&&\"+r+\".mark.marktype==='\"+t+\"'\":\"\")+(n?\"&&\"+r+\".mark.role==='\"+n+\"'\":\"\")+(e?\"&&\"+r+\".mark.name==='\"+e+\"'\":\"\")}function Bp(t){return eO.hasOwnProperty(t)}function Wp(t,e,n,r,i){for(var a,o=0,u=t.length;e<u;++e){if(a=t[e],!o&&a===n)return e;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return e}function Yp(t){for(var e=[],n=0,r=t.length,i=0;i<r;)i=Wp(t,i,gO,cO+hO,lO+dO),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw\"Empty event selector: \"+t;return e}function Hp(t){return\"[\"===t[0]?Gp(t):Xp(t)}function Gp(t){var e,n,r=t.length,i=1;if((i=Wp(t,i,lO,cO,lO))===r)throw\"Empty between selector: \"+t;if(2!==(e=Yp(t.substring(1,i))).length)throw\"Between selector must have two elements: \"+t;if((t=t.slice(i+1).trim())[0]!==mO)throw\"Expected '>' after between selector: \"+t;return e=e.map(Hp),(n=Hp(t.slice(1).trim())).between?{between:e,stream:n}:(n.between=e,n)}function Xp(t){var e,n,r={source:tO},i=[],a=[0,0],o=0,u=0,s=t.length,f=0;if(t[s-1]===dO){if(!((f=t.lastIndexOf(hO))>=0))throw\"Unmatched right brace: \"+t;try{a=Vp(t.substring(f+1,s-1))}catch(e){throw\"Invalid throttle specification: \"+t}s=(t=t.slice(0,f).trim()).length,f=0}if(!s)throw t;if(t[0]===vO&&(o=++f),(e=Wp(t,f,pO))<s&&(i.push(t.substring(u,e).trim()),u=f=++e),(f=Wp(t,f,cO))===s)i.push(t.substring(u,s).trim());else if(i.push(t.substring(u,f).trim()),n=[],(u=++f)===s)throw\"Unmatched left bracket: \"+t;for(;f<s;){if((f=Wp(t,f,lO))===s)throw\"Unmatched left bracket: \"+t;if(n.push(t.substring(u,f).trim()),f<s-1&&t[++f]!==cO)throw\"Expected left bracket: \"+t;u=++f}if(!(s=i.length)||yO.test(i[s-1]))throw\"Invalid event selector: \"+t;return s>1?(r.type=i[1],o?r.markname=i[0].slice(1):Bp(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],\"!\"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}function Vp(t){var e=t.split(gO);if(!t.length||e.length>2)throw t;return e.map(function(e){var n=+e;if(n!==n)throw t;return n})}function Jp(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function Zp(t,e,n,r){return new Jp(t,e,n,r)}function Qp(t,e){return Zp(\"operator\",t,e)}function Kp(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function tg(t,e){return e?{$field:t,$name:e}:{$field:t}}function eg(t,e){return{$compare:t,$order:e}}function ng(t){return{$key:t}}function rg(t){return Fv(t)?(t.order===EO?\"-\":\"+\")+ig(t.op,t.field):\"\"}function ig(t,e){return(t&&t.signal?\"$\"+t.signal:t||\"\")+(t&&e?\"_\":\"\")+(e&&e.signal?\"$\"+e.signal:e||\"\")}function ag(t){return t&&t.signal}function og(t,e){return null!=t?t:e}function ug(t){return function(e,n,r){return Zp(t,n,e||void 0,r)}}function sg(t){return eN.hasOwnProperty(t)}function fg(t){return\"quantile\"===t}function cg(t,e){var n=t.type||\"linear\";tN.hasOwnProperty(n)||qv(\"Unrecognized scale type: \"+r(n)),e.addScale(t.name,{type:n,domain:void 0})}function lg(t,e){var n,r=e.getScale(t.name).params;r.domain=gg(t.domain,t,e),null!=t.range&&(r.range=Sg(t,e,r)),null!=t.interpolate&&Eg(t.interpolate,r),null!=t.nice&&kg(t.nice,r);for(n in t)r.hasOwnProperty(n)||\"name\"===n||(r[n]=hg(t[n],e))}function hg(t,e){return Fv(t)?t.signal?e.signalRef(t.signal):qv(\"Unsupported object: \"+r(t)):t}function dg(t,e){return t.signal?e.signalRef(t.signal):t.map(function(t){return hg(t,e)})}function pg(t){qv(\"Can not find data set: \"+r(t))}function gg(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(jv(t)?vg:t.fields?yg:mg)(t,e,n);null==e.domainMin&&null==e.domainMax||qv(\"No scale domain defined for domainMin/domainMax to override.\")}function vg(t,e,n){return t.map(function(t){return hg(t,n)})}function mg(t,e,n){var r=n.getData(t.data);return r||pg(t.data),sg(e.type)?r.valuesRef(n,t.field,xg(t.sort,!1)):fg(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function yg(t,e,n){var r=t.data,i=t.fields.reduce(function(t,e){return e=Iv(e)?{data:r,field:e}:jv(e)||e.signal?bg(e,n):e,t.push(e),t},[]);return(sg(e.type)?_g:fg(e.type)?wg:Mg)(t,n,i)}function bg(t,e){var n=\"_:vega:_\"+QO++,i=zO({});return jv(t)?i.value={$ingest:t}:t.signal&&e.signalRef(\"setdata(\"+r(n)+\",\"+t.signal+\")\"),e.addDataPipeline(n,[i,XO({})]),{data:n,field:\"data\"}}function _g(t,e,n){var r,i,a,o;return r=n.map(function(t){var n=e.getData(t.data);return n||pg(t.data),n.countsRef(e,t.field)}),i=e.add(SO({groupby:kO,ops:[\"sum\"],fields:[e.fieldRef(\"count\")],as:[\"count\"],pulse:r})),a=e.add(zO({pulse:Kp(i)})),o=e.add(ZO({field:kO,sort:e.sortRef(xg(t.sort,!0)),pulse:Kp(a)})),Kp(o)}function xg(t,e){return t&&(t.field||t.op?t.field||\"count\"===t.op?e&&t.field?qv(\"Multiple domain scales can not sort by field.\"):e&&t.op&&\"count\"!==t.op&&qv(\"Multiple domain scales support op count only.\"):qv(\"No field provided for sort aggregate op: \"+t.op):Fv(t)?t.field=\"key\":t={field:\"key\"}),t}function wg(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||pg(t.data),n.domainRef(e,t.field)});return Kp(e.add(jO({values:r})))}function Mg(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||pg(t.data),n.extentRef(e,t.field)});return Kp(e.add(UO({extents:r})))}function kg(t,e){e.nice=Fv(t)?{interval:hg(t.interval),step:hg(t.step)}:hg(t)}function Eg(t,e){e.interpolate=hg(t.type||t),null!=t.gamma&&(e.interpolateGamma=hg(t.gamma))}function Sg(t,e,n){var i=t.range,a=e.config.range;if(i.signal)return e.signalRef(i.signal);if(Iv(i)){if(a&&a.hasOwnProperty(i))return t=am({},t,{range:a[i]}),Sg(t,e,n);\"width\"===i?i=[0,{signal:\"width\"}]:\"height\"===i?i=sg(t.type)?[0,{signal:\"height\"}]:[{signal:\"height\"},0]:qv(\"Unrecognized scale range value: \"+r(i))}else{if(i.scheme)return n.scheme=hg(i.scheme,e),i.extent&&(n.schemeExtent=dg(i.extent,e)),void(i.count&&(n.schemeCount=hg(i.count,e)));if(i.step)return void(n.rangeStep=hg(i.step,e));if(sg(t.type)&&!jv(i))return gg(i,t,e);jv(i)||qv(\"Unsupported range type: \"+r(i))}return i.map(function(t){return hg(t,e)})}function Ag(t,e){return jv(t)?t.map(function(t){return Ag(t,e)}):Fv(t)?t.signal?e.signalRef(t.signal):qv(\"Unsupported parameter object: \"+r(t)):t}function Cg(t,e,n,i){var a,o,u;if(t.signal)a=\"datum\",u=gN(t.signal,e,n,i);else if(t.group||t.parent){for(o=Math.max(1,t.level||1),a=\"item\";o-- >0;)a+=\".mark.group\";t.parent?(u=t.parent,a+=\".datum\"):u=t.group}else t.datum?(a=\"datum\",u=t.datum):qv(\"Invalid field reference: \"+r(t));return t.signal||(Iv(u)?(i[u]=1,u=Uv(u).map(r).join(\"][\")):u=Cg(u,e,n,i)),a+\"[\"+u+\"]\"}function zg(t,e){if(!Iv(t))return-1;var n=e.scaleType(t);return\"band\"===n||\"point\"===n?1:0}function Dg(t,e,n,i){var a;if(Iv(t))a=UD+t,n.hasOwnProperty(a)||(n[a]=e.scaleRef(t)),a=r(a);else{for(a in e.scales)n[UD+a]=e.scaleRef(a);a=r(UD)+\"+\"+(t.signal?\"(\"+gN(t.signal,e,n,i)+\")\":vN(t,e,n,i))}return\"_[\"+a+\"]\"}function Og(t,e,n,r){var i,a,o,u={},s=\"var o=item,datum=o.datum,$;\";for(i in t)a=t[i],jv(a)?s+=wN(i,a,r,n,u):(o=_N(i,a,r,n,u),s+=xN(\"o\",i,o));return s+=dN(t,e),s+=\"return 1;\",{$expr:s,$fields:Object.keys(u),$output:Object.keys(t)}}function Ng(t){return Fv(t)?t:{value:t}}function Tg(t,e,n){return null!=n?(t[e]={value:n},1):0}function Rg(t,e,n){for(var r in e)n&&n.hasOwnProperty(r)||(t[r]=am(t[r]||{},e[r]));return t}function Pg(t,e,n,r,i,a){var o,u;(a=a||{}).encoders={$encode:o={}},t=Lg(t,e,n,r,i.config);for(u in t)o[u]=Og(t[u],e,a,i);return a}function Lg(t,e,n,r,i){var a,o,u={};\"legend\"!=n&&0!==String(n).indexOf(\"axis\")||(n=null),o=n===kN?i.group:n===MN?am({},i.mark,i[e]):null;for(a in o)qg(a,t)||(\"fill\"===a||\"stroke\"===a)&&(qg(\"fill\",t)||qg(\"stroke\",t))||(u[a]={value:o[a]});return tm(r).forEach(function(e){var n=i.style&&i.style[e];for(var r in n)qg(r,t)||(u[r]={value:n[r]})}),t=am({},t),t.enter=am(u,t.enter),t}function qg(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}function Ug(t,e,n){var r,i,a,o={};for(i=0,a=t.params.length;i<a;++i)o[(r=t.params[i]).name]=jg(r,e,n);return o}function jg(t,e,n){var i=t.type,a=e[t.name];if(\"index\"===i)return Ig(t,e,n);{if(void 0!==a)return\"param\"===i?$g(t,e,n):\"projection\"===i?n.projectionRef(e[t.name]):t.array&&!ag(a)?a.map(function(e){return Fg(t,e,n)}):Fg(t,a,n);t.required&&qv(\"Missing required \"+r(e.type)+\" parameter: \"+r(t.name))}}function Fg(t,e,n){var r=t.type;if(ag(e))return Gg(r)?qv(\"Expression references can not be signals.\"):Xg(r)?n.fieldRef(e):Vg(r)?n.compareRef(e):n.signalRef(e.signal);var i=t.expr||Xg(r);return i&&Wg(e)?iO(e.expr,n):i&&Yg(e)?tg(e.field):Gg(r)?iO(e,n):Hg(r)?Kp(n.getData(e).values):Xg(r)?tg(e):Vg(r)?n.compareRef(e):e}function Ig(t,e,n){return Iv(e.from)||qv('Lookup \"from\" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function $g(t,e,n){var i=e[t.name];return t.array?(jv(i)||qv(\"Expected an array of sub-parameters. Instead: \"+r(i)),i.map(function(e){return Bg(t,e,n)})):Bg(t,i,n)}function Bg(t,e,n){var i,a,o,u,s;for(u=0,s=t.params.length;u<s;++u){a=t.params[u];for(o in a.key)if(a.key[o]!==e[o]){a=null;break}if(a)break}return a||qv(\"Unsupported parameter: \"+r(e)),i=am(Ug(a,e,n),a.key),Kp(n.add(IO(i)))}function Wg(t){return t&&t.expr}function Yg(t){return t&&t.field}function Hg(t){return\"data\"===t}function Gg(t){return\"expr\"===t}function Xg(t){return\"field\"===t}function Vg(t){return\"compare\"===t}function Jg(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Zg(t){return Iv(t)?t:null}function Qg(t,e,n){var r,i=ig(n.op,n.field);if(e.ops){for(var a=0,o=e.as.length;a<o;++a)if(e.as[a]===i)return}else e.ops=[\"count\"],e.fields=[null],e.as=[\"count\"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function Kg(t,e,n,r,i,a,o){var u,s,f=e[n]||(e[n]={}),c=rg(a),l=Zg(i);if(null!=l&&(t=e.scope,u=f[l+=c?\"|\"+c:\"\"]),!u){var h=a?{field:kO,pulse:e.countsRef(t,i,a)}:{field:t.fieldRef(i),pulse:Kp(e.output)};c&&(h.sort=t.sortRef(a)),s=t.add(Zp(r,void 0,h)),o&&(e.index[i]=s),u=Kp(s),null!=l&&(f[l]=u)}return u}function tv(t,e,n){var r=nv(e,n[1].encode,\"fontSize\",uN);if(t.size)return{$expr:\"Math.max(Math.ceil(Math.sqrt(_.scale(datum))),\"+r+\")\"};var i=nv(e,n[0].encode,\"size\");return Math.max(Math.ceil(Math.sqrt(i)),r)}function ev(t){var e={};return Tg(e,\"fill\",t.fillColor)+Tg(e,\"stroke\",t.strokeColor)+Tg(e,\"strokeWidth\",t.strokeWidth)+Tg(e,\"strokeDash\",t.strokeDash)+Tg(e,\"cornerRadius\",t.cornerRadius)?e:void 0}function nv(t,e,n,r){var i=e&&(e.update&&e.update[n]||e.enter&&e.enter[n]);return+(i?i.value:r&&(i=t.config.style[r])&&i[n])}function rv(t,e,n,r){var i,a,o,u,s,f,c=t.text,l=t.orient||e.orient,h=t.anchor||e.anchor,d=l===iN||l===rN?-1:1,p=l===rN||l===aN,g={group:p?\"width\":\"height\"},v={};return v.enter=i={opacity:{value:0}},Tg(i,\"fill\",e.color),Tg(i,\"font\",e.font),Tg(i,\"fontSize\",e.fontSize),Tg(i,\"fontWeight\",e.fontWeight),v.exit={opacity:{value:0}},v.update=a={opacity:{value:1},text:Fv(c)?c:{value:c+\"\"},offset:Ng((null!=t.offset?t.offset:e.offset)||0)},\"start\"===h?(s=0,f=\"left\"):\"end\"===h?(s=1,f=\"right\"):(s=.5,f=\"center\"),o={field:g,mult:s},u=d<0?{value:0}:p?{field:{group:\"height\"}}:{field:{group:\"width\"}},p?(a.x=o,a.y=u,a.angle={value:0},a.baseline={value:l===rN?\"bottom\":\"top\"}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:\"bottom\"}),a.align={value:f},a.limit={field:g},Tg(a,\"angle\",e.angle),Tg(a,\"baseline\",e.baseline),Tg(a,\"limit\",e.limit),SN(CN,EN,t.style||sN,null,r,v,n)}function iv(t,e){var n=[];t.transform&&t.transform.forEach(function(t){n.push(qN(t,e))}),t.on&&t.on.forEach(function(n){$N(n,e,t.name)}),e.addDataPipeline(t.name,av(t,e,n))}function av(t,e,n){var r,i,a,o,u,s=[],f=null,c=!1,l=!1;for(t.values?s.push(f=ov({$ingest:t.values,$format:t.format})):t.url?s.push(f=ov({$request:t.url,$format:t.format})):t.source&&(f=r=tm(t.source).map(function(t){return Kp(e.getData(t).output)}),s.push(null)),i=0,a=n.length;i<a;++i)u=(o=n[i]).metadata,f||u.source||s.push(f=ov()),s.push(o),u.generates&&(l=!0),u.modifies&&!l&&(c=!0),u.source?f=o:u.changes&&(f=null);return r&&(a=r.length-1,s[0]=YO({derive:c,pulse:a?r:r[0]}),(c||a)&&s.splice(1,0,ov())),f||s.push(ov()),s.push(XO({})),s}function ov(t){var e=zO({},t);return e.metadata={source:!0},e}function uv(t,e){return{scale:t.scale,range:e}}function sv(t,e){var n,r,i,a,o,u=e.config;return e.background=t.background||u.background,e.eventConfig=u.events,o=Kp(e.root=e.add(Qp())),e.addSignal(\"width\",t.width||-1),e.addSignal(\"height\",t.height||-1),e.addSignal(\"padding\",Iz(t.padding,u)),e.addSignal(\"autosize\",Fz(t.autosize,u)),tm(t.signals).forEach(function(t){tT[t.name]||Bz(t,e)}),r=e.add(zO()),i=Rg({enter:{x:{value:0},y:{value:0}},update:{width:{signal:\"width\"},height:{signal:\"height\"}}},t.encode),i=e.add(NO(Pg(i,AN,kN,t.style,e,{pulse:Kp(r)}))),a=e.add(JO({layout:e.objectProperty(t.layout),legendMargin:u.legendMargin,autosize:e.signalRef(\"autosize\"),mark:o,pulse:Kp(i)})),e.operators.pop(),e.pushState(Kp(i),Kp(a),null),KN(t,e,!0),e.operators.push(a),n=e.add(CO({mark:o,pulse:Kp(a)})),n=e.add(HO({pulse:Kp(n)})),n=e.add(XO({pulse:Kp(n)})),e.addData(\"root\",new Jg(e,r,r,n)),e}function fv(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function cv(t){this.config=t.config,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function lv(t){return(jv(t)?hv:dv)(t)}function hv(t){for(var e,n=\"[\",i=0,a=t.length;i<a;++i)e=t[i],n+=(i>0?\",\":\"\")+(Fv(e)?e.signal||lv(e):r(e));return n+\"]\"}function dv(t){var e,n,i=\"{\",a=0;for(e in t)n=t[e],i+=(++a>1?\",\":\"\")+r(e)+\":\"+(Fv(n)?n.signal||lv(n):r(n));return i+\"}\"}function pv(){return{padding:0,autosize:\"pad\",background:null,events:{defaults:{allow:[\"wheel\"]}},group:null,mark:null,arc:{fill:oT},area:{fill:oT},image:null,line:{stroke:oT,strokeWidth:aT},path:{stroke:oT},rect:{fill:oT},rule:{stroke:uT},shape:{stroke:oT},symbol:{fill:oT,size:64},text:{fill:uT,font:rT,fontSize:11},style:{\"guide-label\":{fill:uT,font:rT,fontSize:10},\"guide-title\":{fill:uT,font:rT,fontSize:11,fontWeight:\"bold\"},\"group-title\":{fill:uT,font:rT,fontSize:13,fontWeight:\"bold\"},point:{size:iT,strokeWidth:aT,shape:\"circle\"},circle:{size:iT,strokeWidth:aT},square:{size:iT,strokeWidth:aT,shape:\"square\"},cell:{fill:\"transparent\",stroke:fT}},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:sT,grid:!1,gridWidth:1,gridColor:fT,gridDash:[],gridOpacity:1,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:sT,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:\"center\",titlePadding:2},axisBand:{tickOffset:-1},legend:{orient:\"right\",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:fT,gradientStrokeWidth:0,gradientLabelBaseline:\"top\",gradientLabelOffset:2,labelAlign:\"left\",labelBaseline:\"middle\",labelOffset:8,labelLimit:160,symbolType:\"circle\",symbolSize:100,symbolFillColor:\"transparent\",symbolStrokeColor:sT,symbolStrokeWidth:1.5,titleAlign:\"left\",titleBaseline:\"top\",titleLimit:180},title:{orient:\"top\",anchor:\"middle\",offset:2},range:{category:{scheme:\"tableau10\"},ordinal:{scheme:\"blues\",extent:[.2,1]},heatmap:{scheme:\"viridis\"},ramp:{scheme:\"blues\",extent:[.2,1]},diverging:{scheme:\"blueorange\"},symbol:[\"circle\",\"square\",\"triangle-up\",\"cross\",\"diamond\",\"triangle-right\",\"triangle-down\",\"triangle-left\"]}}}function gv(t,e,n){\";\"!==e[e.length-1]&&(e=\"return(\"+e+\");\");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function vv(t,e){return gv([\"_\"],t,e)}function mv(t,e){return gv([\"datum\",\"_\"],t,e)}function yv(t,e){return gv([\"event\"],t,e)}function bv(t,e){return gv([\"_\",\"event\"],t,e)}function _v(t,e){return gv([\"item\",\"_\"],t,e)}function xv(t,e,n){n=n||{};var r,i;for(r in t)(i=t[r])&&i.$expr&&i.$params&&xv(i.$params,e,n),n[r]=jv(i)?i.map(function(t){return wv(t,e)}):wv(i,e);return n}function wv(t,e){if(!t||!Fv(t))return t;for(var n,r=0,i=cT.length;r<i;++r)if(n=cT[r],t.hasOwnProperty(n.key))return n.parse(t,e);return t}function Mv(t){return(t+\"\").toLowerCase()}function kv(t){return\"operator\"===Mv(t)}function Ev(t){return\"collect\"===Mv(t)}function Sv(t,e){var n,r;t.params&&((n=e.get(t.id))||qv(\"Invalid operator id: \"+t.id),r=xv(t.params,e),e.dataflow.connect(n,n.parameters(r)))}function Av(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Cv(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}function zv(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===yT?r.left+r.right:0)}function Dv(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===yT?r.top+r.bottom:0)}function Ov(t){function e(){t._autosize=t._resize=1}var n=t._signals,r=n.width,i=n.height,a=n.padding;t._resizeWidth=t.add(null,function(n){t._width=n.size,t._viewWidth=zv(t,n.size),e()},{size:r}),t._resizeHeight=t.add(null,function(n){t._height=n.size,t._viewHeight=Dv(t,n.size),e()},{size:i});var o=t.add(null,e,{pad:a});t._resizeWidth.rank=r.rank+1,t._resizeHeight.rank=i.rank+1,o.rank=a.rank+1}function Nv(t,e){return e.modified&&jv(e.input.value)&&t.indexOf(\"_:vega:_\")}function Tv(t,e){return!(\"parent\"===t||e instanceof Uy.Proxy)}function Rv(t,e){var n=this;e=e||{},me.call(n),n.loader(e.loader||n._loader),n.logLevel(e.logLevel||0),n._el=null,n._renderType=e.renderer||Hx.Canvas,n._scenegraph=new Ei;var r=n._scenegraph.root;n._renderer=null,n._redraw=!0,n._handler=(new zi).scene(r),n._eventListeners=[],n._preventDefault=!1;var i=mT(n,t,e.functions);n._runtime=i,n._signals=i.signals,n._bind=(t.bindings||[]).map(function(t){return{state:null,param:am({},t)}}),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._background=i.background||null,n._eventConfig=qh(i.eventConfig),n._width=n.width(),n._height=n.height(),n._viewWidth=zv(n,n._width),n._viewHeight=Dv(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Ov(n),Az(n)}function Pv(t,e){return t._signals.hasOwnProperty(e)?t._signals[e]:qv(\"Unrecognized signal name: \"+r(e))}var Lv=function(t,e,n){return t.fields=e||[],t.fname=n,t},qv=function(t){throw Error(t)},Uv=function(t){function e(){a.push(f+t.substring(n,r)),f=\"\",n=r+1}var n,r,i,a=[],o=null,u=0,s=t.length,f=\"\";for(t+=\"\",n=r=0;r<s;++r)if(\"\\\\\"===(i=t[r]))f+=t.substring(n,r),n=++r;else if(i===o)e(),o=null,u=-1;else{if(o)continue;n===u&&'\"'===i?(n=r+1,o=i):n===u&&\"'\"===i?(n=r+1,o=i):\".\"!==i||u?\"[\"===i?(r>n&&e(),u=n=r+1):\"]\"===i&&(u||qv(\"Access path missing open bracket: \"+t),u>0&&e(),u=0,n=r+1):r>n?e():n=r+1}return u&&qv(\"Access path missing closing bracket: \"+t),o&&qv(\"Access path missing closing quote: \"+t),r>n&&(r++,e()),a},jv=Array.isArray,Fv=function(t){return t===Object(t)},Iv=function(t){return\"string\"==typeof t},$v=function(t,e){var n=Uv(t),i=\"return _[\"+n.map(r).join(\"][\")+\"];\";return Lv(Function(\"_\",i),[t=1===n.length?n[0]:t],e||t)},Bv=[],Wv=$v(\"id\"),Yv=Lv(function(t){return t},Bv,\"identity\"),Hv=Lv(function(){return 0},Bv,\"zero\"),Gv=Lv(function(){return 1},Bv,\"one\"),Xv=Lv(function(){return!0},Bv,\"true\"),Vv=Lv(function(){return!1},Bv,\"false\"),Jv=1,Zv=3,Qv=4,Kv=function(t){var e=t||0;return{level:function(t){return arguments.length?(e=+t,this):e},error:function(){return e>=Jv&&i(\"error\",\"ERROR\",arguments),this},warn:function(){return e>=2&&i(\"warn\",\"WARN\",arguments),this},info:function(){return e>=Zv&&i(\"log\",\"INFO\",arguments),this},debug:function(){return e>=Qv&&i(\"log\",\"DEBUG\",arguments),this}}},tm=function(t){return null!=t?jv(t)?t:[t]:[]},em=function(t){return\"function\"==typeof t},nm=function(t,e){var i,a,o,u,s,f,c,l,h,d=[],p=(t=tm(t)).map(function(t,e){return null==t?null:(d.push(e),em(t)?t:Uv(t).map(r).join(\"][\"))}),g=d.length-1,v=tm(e),m=\"var u,v;return \";if(g<0)return null;for(a=0;a<=g;++a)o=p[i=d[a]],em(o)?(u=\"(u=this.\"+(f=\"f\"+i)+\"(a))\",s=\"(v=this.\"+f+\"(b))\",(c=c||{})[f]=o):(u=\"(u=a[\"+o+\"])\",s=\"(v=b[\"+o+\"])\"),f=\"((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))\",\"descending\"!==v[i]?(h=1,l=-1):(h=-1,l=1),m+=\"(\"+u+\"<\"+s+\"||u==null)&&v!=null?\"+l+\":(u>v||v==null)&&u!=null?\"+h+\":\"+f+\"!==u&&v===v?\"+l+\":v!==v&&u===u?\"+h+(i<g?\":\":\":0\");return o=Function(\"a\",\"b\",m+\";\"),c&&(o=o.bind(c)),t=t.reduce(function(t,e){return em(e)?(n(e)||[]).forEach(function(e){t[e]=1}):null!=e&&(t[e+\"\"]=1),t},{}),Lv(o,Object.keys(t))},rm=function(t){return em(t)?t:function(){return t}},im=function(t,e){function n(){e(i),r=i=null}var r,i;return function(e){i=e,r&&clearTimeout(r),r=setTimeout(n,t)}},am=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r){e=arguments[r];for(n in e)t[n]=e[n]}return t},om=function(t,e){var n,r,i,a,o,u=-1,s=t.length;if(null==e){for(;++u<s;)if(null!=(r=t[u])&&r>=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=t[u])&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=e(t[u],u,t))&&r>=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=e(t[u],u,t))&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]},um={},sm=function(t){function e(t){return i.hasOwnProperty(t)&&i[t]!==um}var n,r,i={};return n={size:0,empty:0,object:i,has:e,get:function(t){return e(t)?i[t]:void 0},set:function(t,r){return e(t)||(++n.size,i[t]===um&&--n.empty),i[t]=r,this},delete:function(t){return e(t)&&(--n.size,++n.empty,i[t]=um),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(t){return arguments.length?(r=t,n):r},clean:function(){var t,e,a={},o=0;for(t in i)(e=i[t])===um||r&&r(e)||(a[t]=e,++o);n.size=o,n.empty=0,n.object=i=a}},t&&Object.keys(t).forEach(function(e){n.set(e,t[e])}),n},fm=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},cm=function(t){return\"boolean\"==typeof t},lm=function(t){return\"[object Date]\"===Object.prototype.toString.call(t)},hm=function(t){return\"number\"==typeof t},dm=function(t){return\"[object RegExp]\"===Object.prototype.toString.call(t)},pm=function(t){var e=(t=t?tm(t):t)&&t.length?Function(\"_\",\"return ''+\"+t.map(function(t){return\"_[\"+Uv(t).map(r).join(\"][\")+\"]\"}).join(\"+'|'+\")+\";\"):function(){return\"\"};return Lv(e,t,\"key\")},gm=function(t,e,n,r){var i=e.length,a=n.length;if(!a)return e;if(!i)return n;for(var o=r||new e.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=t(e[u],n[s])>0?n[s++]:e[u++];for(;u<i;++u,++f)o[f]=e[u];for(;s<a;++s,++f)o[f]=n[s];return o},vm=function(t,e){for(var n=\"\";--e>=0;)n+=t;return n},mm=function(t,e,n,r){var i=n||\" \",a=t+\"\",o=e-a.length;return o<=0?a:\"left\"===r?vm(i,o)+a:\"center\"===r?vm(i,~~(o/2))+a+vm(i,Math.ceil(o/2)):a+vm(i,o)},ym=function(t){return t[t.length-1]},bm=function(t){return null==t||\"\"===t?null:!(!t||\"false\"===t||\"0\"===t)&&!!t},_m=function(t,e){return e=e||a,null==t||\"\"===t?null:e(t)},xm=function(t){return null==t||\"\"===t?null:+t},wm=function(t){return null==t||\"\"===t?null:t+\"\"},Mm=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=1;return e},km=function(t,e,n,r){var i=null!=r?r:\"\",a=t+\"\",o=a.length,u=Math.max(0,e-i.length);return o<=e?a:\"left\"===n?i+a.slice(o-u):\"center\"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i},Em=function(t,e,n){if(t){var r,i=0,a=t.length;if(e)for(;i<a;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}},Sm=Symbol(\"vega_id\"),Am=1,Cm=\"_:mod:_\",zm=v.prototype;zm.set=function(t,e,n,r){var i=this,a=i[t],o=i[Cm];return null!=e&&e>=0?(a[e]!==n||r)&&(a[e]=n,o[e+\":\"+t]=-1,o[t]=-1):(a!==n||r)&&(i[t]=n,o[t]=jv(n)?1+n.length:-1),i},zm.modified=function(t,e){var n,r=this[Cm];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(jv(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e+1<r[t]||!!r[e+\":\"+t]:!!r[t]},zm.clear=function(){return this[Cm]={},this};var Dm=0,Om=new v,Nm=m.prototype;Nm.targets=function(){return this._targets||(this._targets=o(Wv))},Nm.set=function(t){return this.value!==t?(this.value=t,1):0},Nm.skip=y(1),Nm.modified=y(2),Nm.parameters=function(t,e){function n(t,n,r){r instanceof m?(r!==u&&(e&&r.targets().add(u),c.push(r)),f.push({op:r,name:t,index:n})):s.set(t,n,r)}e=!1!==e;var r,i,a,o,u=this,s=u._argval=u._argval||new v,f=u._argops=u._argops||[],c=[];for(r in t)if(i=t[r],\"pulse\"===r)tm(i).forEach(function(t){t instanceof m?t!==u&&(t.targets().add(u),c.push(t)):qv(\"Pulse parameters must be operator instances.\")}),u.source=i;else if(jv(i))for(s.set(r,-1,Array(a=i.length)),o=0;o<a;++o)n(r,o,i[o]);else n(r,-1,i);return this.marshall().clear(),c},Nm.marshall=function(t){var e,n,r,i,a,o=this._argval||Om,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)a=(i=(e=u[n]).op).modified()&&i.stamp===t,o.set(e.name,e.index,i.value,a);return o},Nm.evaluate=function(t){if(this._update){var e=this.marshall(t.stamp),n=this._update(e,t);if(e.clear(),n!==this.value)this.value=n;else if(!this.modified())return t.StopPropagation}},Nm.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.stamp=t.stamp,this.pulse=e,e||t};var Tm=0,Rm=b.prototype;Rm._filter=Xv,Rm._apply=Yv,Rm.targets=function(){return this._targets||(this._targets=o(Wv))},Rm.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},Rm.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},Rm.filter=function(t){var e=_(t);return this.targets().add(e),e},Rm.apply=function(t){var e=_(null,t);return this.targets().add(e),e},Rm.merge=function(){var t=_();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},Rm.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return n-e>t?(e=n,1):0})},Rm.debounce=function(t){var e=_();return this.targets().add(_(null,null,im(t,function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},Rm.between=function(t,e){var n=!1;return t.targets().add(_(null,null,function(){n=!0})),e.targets().add(_(null,null,function(){n=!1})),this.filter(function(){return n})};x.prototype=w.prototype={constructor:x,has:function(t){return\"$\"+t in this},get:function(t){return this[\"$\"+t]},set:function(t,e){return this[\"$\"+t]=e,this},remove:function(t){var e=\"$\"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)\"$\"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)\"$\"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)\"$\"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)\"$\"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)\"$\"===e[0]&&++t;return t},empty:function(){for(var t in this)if(\"$\"===t[0])return!1;return!0},each:function(t){for(var e in this)\"$\"===e[0]&&t(this[e],e.slice(1),this)}};var Pm=function(){function t(e,i,o,u){if(i>=a.length)return null!=n&&e.sort(n),null!=r?r(e):e;for(var s,f,c,l=-1,h=e.length,d=a[i++],p=w(),g=o();++l<h;)(c=p.get(s=d(f=e[l])+\"\"))?c.push(f):p.set(s,[f]);return p.each(function(e,n){u(g,n,t(e,i,o,u))}),g}function e(t,n){if(++n>a.length)return t;var i,u=o[n-1];return null!=r&&n>=a.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:e(t,n)})})),null!=u?i.sort(function(t,e){return u(t.key,e.key)}):i}var n,r,i,a=[],o=[];return i={object:function(e){return t(e,0,M,k)},map:function(e){return t(e,0,E,S)},entries:function(n){return e(t(n,0,E,S),0)},key:function(t){return a.push(t),i},sortKeys:function(t){return o[a.length-1]=t,i},sortValues:function(t){return n=t,i},rollup:function(t){return r=t,i}}},Lm=w.prototype;A.prototype=function(t,e){var n=new A;if(t instanceof A)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:A,has:Lm.has,add:function(t){return t+=\"\",this[\"$\"+t]=t,this},remove:Lm.remove,clear:Lm.clear,values:Lm.keys,size:Lm.size,empty:Lm.empty,each:Lm.each};var qm={value:function(){}};z.prototype=C.prototype={constructor:z,on:function(t,e){var n,r=this._,i=D(t+\"\",r),a=-1,o=i.length;{if(!(arguments.length<2)){if(null!=e&&\"function\"!=typeof e)throw new Error(\"invalid callback: \"+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=N(r[n],t.name,e);else if(null==e)for(n in r)r[n]=N(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=O(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new z(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var Um=function(t,e){function n(t){var e,n=f.status;if(!n&&R(f)||n>=200&&n<300||304===n){if(a)try{e=a.call(r,f)}catch(t){return void u.call(\"error\",r,t)}else e=f;u.call(\"load\",r,e)}else u.call(\"error\",r,t)}var r,i,a,o,u=C(\"beforesend\",\"progress\",\"load\",\"error\"),s=w(),f=new XMLHttpRequest,c=null,l=null,h=0;if(\"undefined\"==typeof XDomainRequest||\"withCredentials\"in f||!/^(http(s)?:)?\\/\\//.test(t)||(f=new XDomainRequest),\"onload\"in f?f.onload=f.onerror=f.ontimeout=n:f.onreadystatechange=function(t){f.readyState>3&&n(t)},f.onprogress=function(t){u.call(\"progress\",r,t)},r={header:function(t,e){return t=(t+\"\").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+\"\"),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+\"\",r):i},responseType:function(t){return arguments.length?(o=t,r):o},timeout:function(t){return arguments.length?(h=+t,r):h},user:function(t){return arguments.length<1?c:(c=null==t?null:t+\"\",r)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+\"\",r)},response:function(t){return a=t,r},get:function(t,e){return r.send(\"GET\",t,e)},post:function(t,e){return r.send(\"POST\",t,e)},send:function(e,n,a){return f.open(e,t,!0,c,l),null==i||s.has(\"accept\")||s.set(\"accept\",i+\",*/*\"),f.setRequestHeader&&s.each(function(t,e){f.setRequestHeader(e,t)}),null!=i&&f.overrideMimeType&&f.overrideMimeType(i),null!=o&&(f.responseType=o),h>0&&(f.timeout=h),null==a&&\"function\"==typeof n&&(a=n,n=null),null!=a&&1===a.length&&(a=T(a)),null!=a&&r.on(\"error\",a).on(\"load\",function(t){a(null,t)}),u.call(\"beforesend\",r,f),f.send(null==n?null:n),r},abort:function(){return f.abort(),r},on:function(){var t=u.on.apply(u,arguments);return t===u?r:t}},null!=e){if(\"function\"!=typeof e)throw new Error(\"invalid callback: \"+e);return r.get(e)}return r},jm=function(t){function e(t,e){function n(){if(c>=f)return u;if(i)return i=!1,o;var e,n=c;if(34===t.charCodeAt(n)){for(var r=n;r++<f;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return c=r+2,13===(e=t.charCodeAt(r+1))?(i=!0,10===t.charCodeAt(r+2)&&++c):10===e&&(i=!0),t.slice(n+1,r).replace(/\"\"/g,'\"')}for(;c<f;){var s=1;if(10===(e=t.charCodeAt(c++)))i=!0;else if(13===e)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(e!==a)continue;return t.slice(n,c-s)}return t.slice(n)}for(var r,i,o={},u={},s=[],f=t.length,c=0,l=0;(r=n())!==u;){for(var h=[];r!==o&&r!==u;)h.push(r),r=n();e&&null==(h=e(h,l++))||s.push(h)}return s}function n(e){return e.map(r).join(t)}function r(t){return null==t?\"\":i.test(t+=\"\")?'\"'+t.replace(/\\\"/g,'\"\"')+'\"':t}var i=new RegExp('[\"'+t+\"\\n\\r]\"),a=t.charCodeAt(0);return{parse:function(t,n){var r,i,a=e(t,function(t,e){if(r)return r(t,e-1);i=t,r=n?L(t,n):P(t)});return a.columns=i,a},parseRows:e,format:function(e,n){return null==n&&(n=q(e)),[n.map(r).join(t)].concat(e.map(function(e){return n.map(function(t){return r(e[t])}).join(t)})).join(\"\\n\")},formatRows:function(t){return t.map(n).join(\"\\n\")}}},Fm=(jm(\",\"),jm(\"\\t\"),/^([A-Za-z]+:)?\\/\\//),Im=\"file://\",$m=[\"mimeType\",\"responseType\",\"user\",\"password\"],Bm=function(t){return{options:t||{},sanitize:F,load:j,file:$,http:I}},Wm={boolean:bm,integer:xm,number:xm,date:_m,string:wm},Ym=[function(t){return\"true\"===t||\"false\"===t||!0===t||!1===t},function(t){return X(t)&&(t=+t)==~~t},X,function(t){return!isNaN(Date.parse(t))}],Hm=[\"boolean\",\"integer\",\"number\",\"date\"],Gm=function(t,e){var n=e&&e.property?$v(e.property):Yv;return Fv(t)&&!Z(t)?Q(n(t)):n(JSON.parse(t))},Xm=function(){},Vm=function(t,e){return\"GeometryCollection\"===e.type?{type:\"FeatureCollection\",features:e.geometries.map(function(e){return et(t,e)})}:et(t,e)},Jm=function(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),u.push(r)}}var i={},a={},o={},u=[],s=-1;return e.forEach(function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),u=i[0],s=i[1];if(e=o[u])if(delete o[e.end],e.push(t),e.end=s,r=a[s]){delete a[r.start];var f=r===e?e:e.concat(r);a[f.start=e.start]=o[f.end=r.end]=f}else a[e.start]=o[e.end]=e;else if(e=a[s])if(delete a[e.start],e.unshift(t),e.start=u,r=o[u]){delete o[r.end];var c=r===e?e:r.concat(e);a[c.start=r.start]=o[c.end=e.end]=c}else a[e.start]=o[e.end]=e;else a[(e=[t]).start=u]=o[e.end=s]=e}),r(o,a),r(a,o),e.forEach(function(t){i[t<0?~t:t]||u.push([t])}),u},Zm=function(t){return nt(t,rt.apply(this,arguments))},Qm={dsv:J,csv:V(\",\"),tsv:V(\"\\t\"),json:Gm,topojson:function(t,e){var n,r;return t=Gm(t,e),e&&(r=e.feature)?(n=t.objects[r])?Vm(t,n).features:qv(\"Invalid TopoJSON object: \"+r):e&&(r=e.mesh)?(n=t.objects[r])?[Zm(t,n)]:qv(\"Invalid TopoJSON object: \"+r):void qv(\"Missing TopoJSON feature or mesh parameter.\")}},Km=function(t,e){return arguments.length>1?(Qm[t]=e,this):Qm.hasOwnProperty(t)?Qm[t]:null},ty=new Date,ey=new Date,ny=it(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ny.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?it(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ny:null};var ry=6e4,iy=6048e5,ay=it(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),oy=it(function(t){t.setTime(Math.floor(t/ry)*ry)},function(t,e){t.setTime(+t+e*ry)},function(t,e){return(e-t)/ry},function(t){return t.getMinutes()}),uy=it(function(t){var e=t.getTimezoneOffset()*ry%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),sy=it(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ry)/864e5},function(t){return t.getDate()-1}),fy=at(0),cy=at(1),ly=(at(2),at(3),at(4),at(5),at(6),it(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),hy=it(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});hy.every=function(t){return isFinite(t=Math.floor(t))&&t>0?it(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var dy=it(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*ry)},function(t,e){return(e-t)/ry},function(t){return t.getUTCMinutes()}),py=it(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),gy=it(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),vy=ot(0),my=ot(1),yy=(ot(2),ot(3),ot(4),ot(5),ot(6),it(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),by=it(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});by.every=function(t){return isFinite(t=Math.floor(t))&&t>0?it(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var _y,xy,wy,My,ky,Ey={\"-\":\"\",_:\" \",0:\"0\"},Sy=/^\\s*\\d+/,Ay=/^%/,Cy=/[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;ie({dateTime:\"%x, %X\",date:\"%-m/%-d/%Y\",time:\"%-I:%M:%S %p\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});Date.prototype.toISOString||My(\"%Y-%m-%dT%H:%M:%S.%LZ\"),+new Date(\"2000-01-01T00:00:00.000Z\")||ky(\"%Y-%m-%dT%H:%M:%S.%LZ\");var zy=function(t,e,n){var r=Km((e=e||{}).type||\"json\");return r||qv(\"Unknown data format type: \"+e.type),t=r(t,e),e.parse&&ae(t,e.parse,n),t.hasOwnProperty(\"columns\")&&delete t.columns,t},Dy={skip:!0},Oy={},Ny=fe.prototype;Ny.StopPropagation=Oy,Ny.ADD=1,Ny.REM=2,Ny.MOD=4,Ny.ADD_REM=3,Ny.ADD_MOD=5,Ny.ALL=7,Ny.REFLOW=8,Ny.SOURCE=16,Ny.NO_SOURCE=32,Ny.NO_FIELDS=64,Ny.fork=function(t){return new fe(this.dataflow).init(this,t)},Ny.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length?(t=new fe(this.dataflow).init(this),t.add=t.source,t):t},Ny.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source),n},Ny.runAfter=function(t){this.dataflow.runAfter(t)},Ny.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},Ny.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,he(this,1))),this},Ny.modifies=function(t){var e=tm(t),n=this.fields||(this.fields={});return e.forEach(function(t){n[t]=!0}),this},Ny.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?jv(t)?t.some(function(t){return e[t]}):e[t]:!!e)},Ny.filter=function(t,e){var n=this;return 1&t&&(n.addF=ce(n.addF,e)),2&t&&(n.remF=ce(n.remF,e)),4&t&&(n.modF=ce(n.modF,e)),16&t&&(n.srcF=ce(n.srcF,e)),n},Ny.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=le(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=le(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=le(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},Ny.visit=function(t,e){var n,r,i=this,a=e;return 16&t?(Em(i.source,i.srcF,a),i):(1&t&&Em(i.add,i.addF,a),2&t&&Em(i.rem,i.remF,a),4&t&&Em(i.mod,i.modF,a),8&t&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Em(n,he(i,5),a):Em(n,i.srcF,a))),i)};var Ty=fm(de,fe);Ty.fork=function(t){var e=new fe(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,function(t){return e.add.push(t)}),t&e.REM&&this.visit(e.REM,function(t){return e.rem.push(t)}),t&e.MOD&&this.visit(e.MOD,function(t){return e.mod.push(t)})),e},Ty.changed=function(t){return this.changes&t},Ty.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?jv(t)?t.some(function(t){return n[t]}):n[t]:0},Ty.filter=function(){qv(\"MultiPulse does not support filtering.\")},Ty.materialize=function(){qv(\"MultiPulse does not support materialization.\")},Ty.visit=function(t,e){var n=this,r=n.pulses,i=r.length,a=0;if(t&n.SOURCE)for(;a<i;++a)r[a].visit(t,e);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(t,e);return n};var Ry={skip:!1,force:!1},Py=pe.prototype;Py.size=function(){return this.nodes.length},Py.clear=function(){return this.nodes=[],this},Py.peek=function(){return this.nodes[0]},Py.push=function(t){var e=this.nodes;return e.push(t),ge(e,0,e.length-1,this.cmp)},Py.pop=function(){var t,e=this.nodes,n=e.pop();return e.length?(t=e[0],e[0]=n,ve(e,0,this.cmp)):t=n,t},Py.replace=function(t){var e=this.nodes,n=e[0];return e[0]=t,ve(e,0,this.cmp),n},Py.pushpop=function(t){var e=this.nodes,n=e[0];return e.length&&this.cmp(n,t)<0&&(e[0]=t,t=n,ve(e,0,this.cmp)),t};var Ly=me.prototype;Ly.stamp=function(){return this._clock},Ly.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},Ly.cleanThreshold=1e4,Ly.add=function(t,e,n,r){var i,a=1;return t instanceof m?i=t:t&&t.prototype instanceof m?i=new t:em(t)?i=new m(null,t):(a=0,i=new m(t,e)),this.rank(i),a&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},Ly.connect=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},Ly.rank=function(t){t.rank=++this._rank},Ly.rerank=function(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&qv(\"Cycle detected in dataflow graph.\")},Ly.pulse=function(t,e,n){this.touch(t,n||Ry);var r=new fe(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._pulses[t.id]=e.pulse(r,i),this},Ly.touch=function(t,e){var n=e||Ry;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},Ly.update=function(t,e,n){var r=n||Ry;return(t.set(e)||r.force)&&this.touch(t,r),this},Ly.changeset=g,Ly.ingest=function(t,e,n){return this.pulse(t,this.changeset().insert(zy(e,n)))},Ly.request=function(t,e,n){var r=this,i=r._pending||oe(r);i.requests+=1,r.loader().load(e,{context:\"dataflow\"}).then(function(e){r.ingest(t,e,n)},function(t){r.error(\"Loading failed\",e,t)}).catch(function(t){r.error(\"Data ingestion failed\",e,t)}).then(i.done,i.done)},Ly.events=function(t,e,n,r){for(var i,a=this,o=_(n,r),u=0,s=(i=\"string\"==typeof t&&\"undefined\"!=typeof document?document.querySelectorAll(t):tm(t)).length;u<s;++u)i[u].addEventListener(e,function(t){t.dataflow=a;try{o.receive(t)}catch(t){a.error(t)}finally{a.run()}});return o},Ly.on=function(t,e,n,r,i){return(t instanceof m?se:ue)(this,t,e,n,r,i),this},Ly.run=function(t){var e,n,r,i,a=this,u=0,s=a.logLevel();if(a._pending)return a.info(\"Awaiting requests, delaying dataflow run.\"),0;if(a._pulse)return a.error(\"Dataflow invoked recursively. Use the runAfter method to queue invocation.\"),0;if(!a._touched.length)return a.info(\"Dataflow invoked, but nothing to do.\"),0;a._pulse=new fe(a,++a._clock,t),s>=Zv&&(r=Date.now(),a.debug(\"-- START PROPAGATION (\"+a._clock+\") -----\")),a._touched.forEach(function(t){a._enqueue(t,!0)}),a._touched=o(Wv);try{for(;a._heap.size()>0;)(e=a._heap.pop()).rank===e.qrank?(n=e.run(a._getPulse(e,t)),s>=Qv&&a.debug(e.id,n===Oy?\"STOP\":n,e),n!==Oy&&(a._pulse=n,e._targets&&e._targets.forEach(function(t){a._enqueue(t)})),++u):a._enqueue(e,!0)}catch(t){i=t}if(a._pulses={},a._pulse=null,s>=Zv&&(r=Date.now()-r,a.info(\"> Pulse \"+a._clock+\": \"+u+\" operators; \"+r+\"ms\")),i&&(a._postrun=[],a.error(i)),a._onrun)try{a._onrun(a,u,i)}catch(t){a.error(t)}if(a._postrun.length){var f=a._postrun;a._postrun=[],f.forEach(function(t){try{t(a)}catch(t){a.error(t)}})}return u},Ly.runAsync=function(){return this._pending||Promise.resolve(this.run())},Ly.runAfter=function(t,e){if(this._pulse||e)this._postrun.push(t);else try{t(this)}catch(t){this.error(t)}},Ly._enqueue=function(t,e){var n=!this._pulses[t.id];n&&(this._pulses[t.id]=this._pulse),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},Ly._getPulse=function(t,e){var n,r=t.source,i=this._clock;return r&&jv(r)?(n=r.map(function(t){return t.pulse}),new de(this,i,n,e)):(r=r&&r.pulse,n=this._pulses[t.id],r&&r!==Oy&&(r.stamp===i&&n.target!==t?n=r:n.source=r.source),n)},Ly.error=ye(\"error\"),Ly.warn=ye(\"warn\"),Ly.info=ye(\"info\"),Ly.debug=ye(\"debug\"),Ly.logLevel=ye(\"level\");var qy=fm(be,m);qy.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e;return this.skip()?this.skip(!1):e=this.evaluate(t),(e=e||t)!==t.StopPropagation&&(this.pulse=e),this.stamp=t.stamp,e},qy.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},qy.transform=function(){};var Uy={},jy={values:Se({name:\"values\",init:\"cell.store = true;\",set:\"cell.data.values()\",idx:-1}),count:Se({name:\"count\",set:\"cell.num\"}),missing:Se({name:\"missing\",set:\"this.missing\"}),valid:Se({name:\"valid\",set:\"this.valid\"}),sum:Se({name:\"sum\",init:\"this.sum = 0;\",add:\"this.sum += v;\",rem:\"this.sum -= v;\",set:\"this.sum\"}),mean:Se({name:\"mean\",init:\"this.mean = 0;\",add:\"var d = v - this.mean; this.mean += d / this.valid;\",rem:\"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;\",set:\"this.mean\"}),average:Se({name:\"average\",set:\"this.mean\",req:[\"mean\"],idx:1}),variance:Se({name:\"variance\",init:\"this.dev = 0;\",add:\"this.dev += d * (v - this.mean);\",rem:\"this.dev -= d * (v - this.mean);\",set:\"this.valid > 1 ? this.dev / (this.valid-1) : 0\",req:[\"mean\"],idx:1}),variancep:Se({name:\"variancep\",set:\"this.valid > 1 ? this.dev / this.valid : 0\",req:[\"variance\"],idx:2}),stdev:Se({name:\"stdev\",set:\"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0\",req:[\"variance\"],idx:2}),stdevp:Se({name:\"stdevp\",set:\"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0\",req:[\"variance\"],idx:2}),stderr:Se({name:\"stderr\",set:\"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0\",req:[\"variance\"],idx:2}),distinct:Se({name:\"distinct\",set:\"cell.data.distinct(this.get)\",req:[\"values\"],idx:3}),ci0:Se({name:\"ci0\",set:\"cell.data.ci0(this.get)\",req:[\"values\"],idx:3}),ci1:Se({name:\"ci1\",set:\"cell.data.ci1(this.get)\",req:[\"values\"],idx:3}),median:Se({name:\"median\",set:\"cell.data.q2(this.get)\",req:[\"values\"],idx:3}),q1:Se({name:\"q1\",set:\"cell.data.q1(this.get)\",req:[\"values\"],idx:3}),q3:Se({name:\"q3\",set:\"cell.data.q3(this.get)\",req:[\"values\"],idx:3}),argmin:Se({name:\"argmin\",init:\"this.argmin = null;\",add:\"if (v < this.min) this.argmin = t;\",rem:\"if (v <= this.min) this.argmin = null;\",set:\"this.argmin || cell.data.argmin(this.get)\",req:[\"min\"],str:[\"values\"],idx:3}),argmax:Se({name:\"argmax\",init:\"this.argmax = null;\",add:\"if (v > this.max) this.argmax = t;\",rem:\"if (v >= this.max) this.argmax = null;\",set:\"this.argmax || cell.data.argmax(this.get)\",req:[\"max\"],str:[\"values\"],idx:3}),min:Se({name:\"min\",init:\"this.min = null;\",add:\"if (v < this.min || this.min === null) this.min = v;\",rem:\"if (v <= this.min) this.min = NaN;\",set:\"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)\",str:[\"values\"],idx:4}),max:Se({name:\"max\",init:\"this.max = null;\",add:\"if (v > this.max || this.max === null) this.max = v;\",rem:\"if (v >= this.max) this.max = NaN;\",set:\"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)\",str:[\"values\"],idx:4})},Fy=Object.keys(jy),Iy=function(t){var e,n,r,i,a,o,u,s,f=t.maxbins||20,c=t.base||10,l=Math.log(c),h=t.divide||[5,2],d=t.extent[0],p=t.extent[1],g=p-d;if(t.step)e=t.step;else if(t.steps){for(a=g/f,o=0,u=t.steps.length;o<u&&t.steps[o]<a;++o);e=t.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/l),r=t.minstep||0,e=Math.max(r,Math.pow(c,Math.round(Math.log(g)/l)-n));Math.ceil(g/e)>f;)e*=c;for(o=0,u=h.length;o<u;++o)(a=e/h[o])>=r&&g/a<=f&&(e=a)}return a=Math.log(e),i=a>=0?0:1+~~(-a/l),s=Math.pow(c,-i-1),(t.nice||void 0===t.nice)&&(d=d<(a=Math.floor(d/e+s)*e)?a-e:a,p=Math.ceil(p/e)*e),{start:d,stop:p,step:e}},$y=function(t,e){var n,r=[],i=t.length,a=-1;if(null==e)for(;++a<i;)isNaN(n=De(t[a]))||r.push(n);else for(;++a<i;)isNaN(n=De(e(t[a],a,t)))||r.push(n);return r},By=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Wy=function(t){return 1===t.length&&(t=Oe(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}},Yy=Wy(By),Hy=Yy.right,Gy=Yy.left,Xy=function(t){return null===t?NaN:+t},Vy=function(t,e){var n,r,i=t.length,a=0,o=-1,u=0,s=0;if(null==e)for(;++o<i;)isNaN(n=Xy(t[o]))||(s+=(r=n-u)*(n-(u+=r/++a)));else for(;++o<i;)isNaN(n=Xy(e(t[o],o,t)))||(s+=(r=n-u)*(n-(u+=r/++a)));if(a>1)return s/(a-1)},Jy=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},Zy=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a},Qy=Math.sqrt(50),Ky=Math.sqrt(10),tb=Math.sqrt(2),eb=function(t,e,n){var r,i,a,o=e<t,u=-1;if(o&&(r=t,t=e,e=r),0===(a=Ne(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),i=new Array(r=Math.ceil(e-t+1));++u<r;)i[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),i=new Array(r=Math.ceil(t-e+1));++u<r;)i[u]=(t-u)/a;return o&&i.reverse(),i},nb=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},rb=function(t,e,n){if(null==n&&(n=Xy),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}},ib=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r},ab=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n},ob=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ub=function(t,e){var n,r=t.length,i=-1,a=0;if(null==e)for(;++i<r;)(n=+t[i])&&(a+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(a+=n);return a},sb=function(t,e,n,r){var i,a,o,u,s=$y(t,r),f=s.length,c=e;for(o=0,u=Array(c);o<c;++o){for(i=0,a=0;a<f;++a)i+=s[~~(Math.random()*f)];u[o]=i/f}return[rb(u.sort(By),n/2),rb(u,1-n/2)]},fb=function(t,e){var n,r,i=NaN,a={};return a.mean=function(t){return arguments.length?(n=t||0,i=NaN,a):n},a.stdev=function(t){return arguments.length?(r=null==t?1:t,i=NaN,a):r},a.sample=function(){var t,e,a=0,o=0;if(i===i)return a=i,i=NaN,a;do{t=(a=2*Math.random()-1)*a+(o=2*Math.random()-1)*o}while(0===t||t>1);return e=Math.sqrt(-2*Math.log(t)/t),i=n+o*e*r,n+a*e*r},a.pdf=function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*e},a.cdf=function(t){var e,i=(t-n)/r,a=Math.abs(i);if(a>37)e=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(e=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),e/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):e=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-e:e},a.icdf=function(t){if(t<=0||t>=1)return NaN;var e=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(e,2))/2,o=Math.log(1-e*e)/i,u=(e>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+r*Math.SQRT2*u},a.mean(t).stdev(e)},cb=function(t,e){var n=$y(t,e);return[rb(n.sort(By),.25),rb(n,.5),rb(n,.75)]},lb=function(t,e){var n=fb(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(!(e=n)&&t&&(e=Re(t)),r):e},r.sample=function(){return t[~~(Math.random()*i)]+e*n.sample()},r.pdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.pdf((r-t[o])/e);return a/e/i},r.cdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.cdf((r-t[o])/e);return a/i},r.icdf=function(){throw Error(\"KDE icdf not supported.\")},r.data(t)},hb=function(t,e){function n(t){var e,n=[],r=0;for(e=0;e<a;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<a;++e)n[e]/=r;return n}var r,i={},a=0;return i.weights=function(t){return arguments.length?(r=n(e=t||[]),i):e},i.distributions=function(n){return arguments.length?(n?(a=n.length,t=n):(a=0,t=[]),i.weights(e)):t},i.sample=function(){for(var e=Math.random(),n=t[a-1],i=r[0],o=0;o<a-1;i+=r[++o])if(e<i){n=t[o];break}return n.sample()},i.pdf=function(e){for(var n=0,i=0;i<a;++i)n+=r[i]*t[i].pdf(e);return n},i.cdf=function(e){for(var n=0,i=0;i<a;++i)n+=r[i]*t[i].cdf(e);return n},i.icdf=function(){throw Error(\"Mixture icdf not supported.\")},i.distributions(t).weights(e)},db=function(t,e){null==e&&(e=null==t?1:t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(n=t||0,i=r-n,a):n},a.max=function(t){return arguments.length?(r=t||0,i=r-n,a):r},a.sample=function(){return n+i*Math.random()},a.pdf=function(t){return t>=n&&t<=r?1/i:0},a.cdf=function(t){return t<n?0:t>r?1:(t-n)/i},a.icdf=function(t){return t>=0&&t<=1?n+t*i:NaN},a.min(t).max(e)},pb=Pe.prototype;pb.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},pb.add=function(t){this._add.push(t)},pb.rem=function(t){this._rem.push(t)},pb.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(t=0;t<u;++t)f[a(i[t])]=1;for(t=0,e=0;t<o;++t)f[a(n=r[t])]?f[a(n)]=0:s[e++]=n;return this._rem=[],this._add=s},pb.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},a=0;--r>=0;)e=t(n[r])+\"\",i.hasOwnProperty(e)||(i[e]=1,++a);return a},pb.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=om(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},pb.argmin=function(t){return this.extent(t)[0]||{}},pb.argmax=function(t){return this.extent(t)[1]||{}},pb.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):1/0},pb.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):-1/0},pb.quartile=function(t){return this._get===t&&this._q||(this._q=cb(this.values(),t),this._get=t),this._q},pb.q1=function(t){return this.quartile(t)[0]},pb.q2=function(t){return this.quartile(t)[1]},pb.q3=function(t){return this.quartile(t)[2]},pb.ci=function(t){return this._get===t&&this._ci||(this._ci=sb(this.values(),1e3,.05,t),this._get=t),this._ci},pb.ci0=function(t){return this.ci(t)[0]},pb.ci1=function(t){return this.ci(t)[1]},Le.Definition={type:\"Aggregate\",metadata:{generates:!0,changes:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"ops\",type:\"enum\",array:!0,values:Fy},{name:\"fields\",type:\"field\",null:!0,array:!0},{name:\"as\",type:\"string\",null:!0,array:!0},{name:\"drop\",type:\"boolean\",default:!0},{name:\"cross\",type:\"boolean\",default:!1},{name:\"key\",type:\"field\"}]};var gb=fm(Le,be);gb.transform=function(t,e){var n,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),i.modifies(this._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},gb.cross=function(){function t(t){var e,n,r,u;for(e in t)for(r=t[e].tuple,n=0;n<o;++n)a[n][u=r[i[n]]]=u}function e(t,u,s){var f,c,l=i[s],h=a[s++];for(f in h)u[l]=h[f],c=t?t+\"|\"+f:f,s<o?e(c,u,s):r[c]||n.cell(c,u)}var n=this,r=n.value,i=n._dnames,a=i.map(function(){return{}}),o=i.length;t(n._prev),t(r),e(\"\",{},0)},gb.init=function(t){function r(t){for(var e,r=tm(n(t)),a=0,u=r.length;a<u;++a)o[e=r[a]]||(o[e]=1,i.push(e))}var i=this._inputs=[],a=this._outputs=[],o={};this._dims=tm(t.groupby),this._dnames=this._dims.map(function(t){var n=e(t);return r(t),a.push(n),n}),this.cellkey=t.key?t.key:Me(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var u,s,f,c,l,h,d=t.fields||[null],p=t.ops||[\"count\"],g=t.as||[],v=d.length,m={};for(v!==p.length&&qv(\"Unmatched number of fields and aggregate ops.\"),h=0;h<v;++h)u=d[h],s=p[h],null==u&&\"count\"!==s&&qv(\"Null aggregate field specified.\"),l=ke(s,c=e(u),g[h]),a.push(l),\"count\"!==s?((f=m[c])||(r(u),(f=m[c]=[]).field=u,this._measures.push(f)),\"count\"!==s&&(this._countOnly=!1),f.push(Ee(s,l))):this._counts.push(l);return this._measures=this._measures.map(function(t){return ze(t,t.field)}),{}},gb.cellkey=Me(),gb.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},gb.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Pe),n},gb.newtuple=function(t,e){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](t);return e?d(e.tuple,o):c(o)},gb.add=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(t),n=0,r=(e=a.agg).length;n<r;++n)e[n].add(e[n].get(t),t)},gb.rem=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(t),n=0,r=(e=a.agg).length;n<r;++n)e[n].rem(e[n].get(t),t)},gb.celltuple=function(t){var e,n,r,i=t.tuple,a=this._counts;for(t.store&&t.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=t.num;if(!this._countOnly)for(n=0,r=(e=t.agg).length;n<r;++n)e[n].set(i);return i},gb.changes=function(t){var e,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=t.add,c=t.rem,l=t.mod;if(u)for(n in u)e=u[n],s&&!e.num||c.push(e.tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=o[r]).num&&s?c:l).push(this.celltuple(e)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t},qe.Definition={type:\"Bin\",metadata:{modifies:!0},params:[{name:\"field\",type:\"field\",required:!0},{name:\"anchor\",type:\"number\"},{name:\"maxbins\",type:\"number\",default:20},{name:\"base\",type:\"number\",default:10},{name:\"divide\",type:\"number\",array:!0,default:[5,2]},{name:\"extent\",type:\"number\",array:!0,length:2,required:!0},{name:\"step\",type:\"number\"},{name:\"steps\",type:\"number\",array:!0},{name:\"minstep\",type:\"number\",default:0},{name:\"nice\",type:\"boolean\",default:!0},{name:\"name\",type:\"string\"},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"bin0\",\"bin1\"]}]};var vb=fm(qe,be);vb.transform=function(t,e){var r,i=this._bins(t),a=i.start,o=i.step,u=t.as||[\"bin0\",\"bin1\"],s=u[0],f=u[1];return r=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(n(t.field))?e.ADD_MOD:e.ADD,e.visit(r,function(t){var e=i(t);t[s]=e,t[f]=null==e?null:a+o*(1+(e-a)/o)}),e.modifies(u)},vb._bins=function(t){if(this.value&&!t.modified())return this.value;var r,i,a=t.field,o=Iy(t),u=o.start,s=o.stop,f=o.step;null!=(r=t.anchor)&&(i=r-(u+f*Math.floor((r-u)/f)),u+=i,s+=i);var c=function(t){var e=a(t);return null==e?null:(e=Math.max(u,Math.min(+e,s-f)),u+f*Math.floor((e-u)/f))};return c.start=u,c.stop=s,c.step=f,this.value=Lv(c,n(a),t.name||\"bin_\"+e(a))};var mb=function(t,e,n){var r=t,i=e||[],a=n||[],o={},u=0;return{add:function(t){a.push(t)},remove:function(t){o[r(t)]=++u},size:function(){return i.length},data:function(t,e){return u&&(i=i.filter(function(t){return!o[r(t)]}),o={},u=0),e&&t&&i.sort(t),a.length&&(i=t?gm(t,i,a.sort(t)):i.concat(a),a=[]),i}}};Ue.Definition={type:\"Collect\",metadata:{source:!0},params:[{name:\"sort\",type:\"compare\"}]},fm(Ue,be).transform=function(t,e){var n=e.fork(e.ALL),r=mb(s,this.value,n.materialize(n.ADD).add),i=t.sort,a=e.changed()||i&&(t.modified(\"sort\")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(i,a),n},fm(je,m),Ie.Definition={type:\"CountPattern\",metadata:{generates:!0,changes:!0},params:[{name:\"field\",type:\"field\",required:!0},{name:\"case\",type:\"enum\",values:[\"upper\",\"lower\",\"mixed\"],default:\"mixed\"},{name:\"pattern\",type:\"string\",default:'[\\\\w\"]+'},{name:\"stopwords\",type:\"string\",default:\"\"},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"text\",\"count\"]}]};var yb=fm(Ie,be);yb.transform=function(t,e){function n(e){return function(n){for(var r,i=$e(u(n),t.case,a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,a=this._match,o=this._stop,u=t.field,s=t.as||[\"text\",\"count\"],f=n(function(t){i[t]=1+(i[t]||0)}),c=n(function(t){i[t]-=1});return r?e.visit(e.SOURCE,f):(e.visit(e.ADD,f),e.visit(e.REM,c)),this._finish(e,s)},yb._parameterCheck=function(t,e){var n=!1;return!t.modified(\"stopwords\")&&this._stop||(this._stop=new RegExp(\"^\"+(t.stopwords||\"\")+\"$\",\"i\"),n=!0),!t.modified(\"pattern\")&&this._match||(this._match=new RegExp(t.pattern||\"[\\\\w']+\",\"g\"),n=!0),(t.modified(\"field\")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},yb._finish=function(t,e){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=e[0],s=e[1],f=t.fork();for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=c({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(e)},Be.Definition={type:\"Cross\",metadata:{source:!0,generates:!0,changes:!0},params:[{name:\"filter\",type:\"expr\"},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"a\",\"b\"]}]},fm(Be,be).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||[\"a\",\"b\"],a=i[0],o=i[1];return!r||e.changed(e.ADD_REM)||t.modified(\"as\")||t.modified(\"filter\")?(r&&(n.rem=r),n.add=this.value=We(e.source,a,o,t.filter||Xv)):n.mod=r,n.source=this.value,n.modifies(i)};var bb={kde:lb,mixture:hb,normal:fb,uniform:db},_b=\"distributions\",xb=\"function\",wb=\"field\",Mb=[{key:{function:\"normal\"},params:[{name:\"mean\",type:\"number\",default:0},{name:\"stdev\",type:\"number\",default:1}]},{key:{function:\"uniform\"},params:[{name:\"min\",type:\"number\",default:0},{name:\"max\",type:\"number\",default:1}]},{key:{function:\"kde\"},params:[{name:\"field\",type:\"field\",required:!0},{name:\"from\",type:\"data\"},{name:\"bandwidth\",type:\"number\",default:0}]}],kb={key:{function:\"mixture\"},params:[{name:\"distributions\",type:\"param\",array:!0,params:Mb},{name:\"weights\",type:\"number\",array:!0}]};He.Definition={type:\"Density\",metadata:{generates:!0,source:!0},params:[{name:\"extent\",type:\"number\",array:!0,length:2},{name:\"steps\",type:\"number\",default:100},{name:\"method\",type:\"string\",default:\"pdf\",values:[\"pdf\",\"cdf\"]},{name:\"distribution\",type:\"param\",params:Mb.concat(kb)},{name:\"as\",type:\"string\",array:!0,default:[\"value\",\"density\"]}]},fm(He,be).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=Ye(t.distribution,Ge(e)),i=t.method||\"pdf\";\"pdf\"!==i&&\"cdf\"!==i&&qv(\"Invalid density method: \"+i),t.extent||r.data||qv(\"Missing density extent parameter.\"),i=r[i];var a=t.as||[\"value\",\"density\"],o=t.extent||Jy(r.data()),u=(o[1]-o[0])/(t.steps||100),s=Zy(o[0],o[1]+u/2,u).map(function(t){var e={};return e[a[0]]=t,e[a[1]]=i(t),c(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n},Xe.Definition={type:\"Extent\",metadata:{},params:[{name:\"field\",type:\"field\",required:!0}]},fm(Xe,be).transform=function(t,e){var n=this.value,r=t.field,i=n[0],a=n[1],o=e.ADD;(e.changed()||e.modified(r.fields)||t.modified(\"field\"))&&(o=e.SOURCE,i=1/0,a=-1/0),e.visit(o,function(t){var e=r(t);e<i&&(i=e),e>a&&(a=e)}),this.value=[i,a]};var Eb=fm(Ve,m);Eb.connect=function(t){return this.targets().add(t),t.source=this},Eb.add=function(t){this.value.add.push(t)},Eb.rem=function(t){this.value.rem.push(t)},Eb.mod=function(t){this.value.mod.push(t)},Eb.init=function(t){this.value.init(t,t.NO_SOURCE)},Eb.evaluate=function(){return this.value};var Sb=fm(Je,be);Sb.activate=function(t){this._targets[this._targets.active++]=t},Sb.subflow=function(t,e,n,r){var i,a,o=this.value,u=o.hasOwnProperty(t)&&o[t];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[t])&&a.tuple,u=(i=n.dataflow).add(new Ve(n.fork(n.NO_SOURCE),this)).connect(e(i,t,a)),o[t]=u,this.activate(u)),u},Sb.transform=function(t,e){function n(t){return i.subflow(t,o,e)}var r=e.dataflow,i=this,a=t.key,o=t.subflow,u=this._keys,f=t.modified(\"key\");return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,function(t){var e=s(t),r=u.get(e);void 0!==r&&(u.delete(e),n(r).rem(t))}),e.visit(e.ADD,function(t){var e=a(t);u.set(s(t),e),n(e).add(t)}),f||e.modified(a.fields)?e.visit(e.MOD,function(t){var e=s(t),r=u.get(e),i=a(t);r===i?n(i).mod(t):(u.set(e,i),n(r).rem(t),n(i).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){n(u.get(s(t))).mod(t)}),f&&e.visit(e.REFLOW,function(t){var e=s(t),r=u.get(e),i=a(t);r!==i&&(u.set(e,i),n(r).rem(t),n(i).add(t))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),e},fm(Ze,m),Ke.Definition={type:\"Filter\",metadata:{changes:!0},params:[{name:\"expr\",type:\"expr\",required:!0}]},fm(Ke,be).transform=function(t,e){function n(e){var n=s(e),r=c(e,t),a=i.get(n);r&&a?(i.delete(n),o.push(e)):r||a?l&&r&&!a&&f.push(e):(i.set(n,1),u.push(e))}var r=e.dataflow,i=this.value,a=e.fork(),o=a.add,u=a.rem,f=a.mod,c=t.expr,l=!0;return e.visit(e.REM,function(t){var e=s(t);i.has(e)?i.delete(e):u.push(t)}),e.visit(e.ADD,function(e){c(e,t)?o.push(e):i.set(s(e),1)}),e.visit(e.MOD,n),t.modified()&&(l=!1,e.visit(e.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},tn.Definition={type:\"Fold\",metadata:{generates:!0,changes:!0},params:[{name:\"fields\",type:\"field\",array:!0,required:!0},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"key\",\"value\"]}]},fm(tn,be).transform=function(t,e){function n(t){for(var e,n=i[s(t)]=Array(p),r=0;r<p;++r)(e=n[r]=l(t))[f]=d[r],e[c]=o[r](t),v.add.push(e)}var r,i=this.value,a=t.modified(\"fields\"),o=t.fields,u=t.as||[\"key\",\"value\"],f=u[0],c=u[1],d=o.map(en),p=o.length,g=e.stamp,v=e.fork(e.NO_SOURCE),m=0,y=0;if(a){for(r in i)v.rem.push.apply(v.rem,i[r]);i=this.value={},e.visit(e.SOURCE,n)}else{for(e.visit(e.ADD,n);m<p;++m)e.modified(o[m].fields)&&(y|=1<<m);y&&e.visit(e.MOD,function(t){for(var e,n=i[s(t)],r=0;r<p;++r)y&1<<r&&((e=h(t,n[r],g))[f]=d[r],e[c]=o[r](t),v.mod.push(e))}),e.visit(e.REM,function(t){var e=s(t);v.rem.push.apply(v.rem,i[e]),i[e]=null})}return v.modifies(u)},nn.Definition={type:\"Formula\",metadata:{modifies:!0},params:[{name:\"expr\",type:\"expr\",required:!0},{name:\"as\",type:\"string\",required:!0},{name:\"initonly\",type:\"boolean\"}]},fm(nn,be).transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),a=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(a,function(e){e[r]=n(e,t)})},fm(rn,be).transform=function(t,e){var n,r,i,a=this.value,o=e.fork(e.ALL),u=t.size-a.length,s=t.generator;if(u>0){for(n=[];--u>=0;)n.push(i=c(s(t))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var Ab={value:\"value\",median:function(t,e){var n,r=t.length,i=-1,a=[];if(null==e)for(;++i<r;)isNaN(n=Xy(t[i]))||a.push(n);else for(;++i<r;)isNaN(n=Xy(e(t[i],i,t)))||a.push(n);return rb(a.sort(By),.5)},mean:function(t,e){var n,r=t.length,i=r,a=-1,o=0;if(null==e)for(;++a<r;)isNaN(n=Xy(t[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=Xy(e(t[a],a,t)))?--i:o+=n;if(i)return o/i},min:function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r},max:ib},Cb=[];an.Definition={type:\"Impute\",metadata:{changes:!0},params:[{name:\"field\",type:\"field\",required:!0},{name:\"key\",type:\"field\",required:!0},{name:\"keyvals\",array:!0},{name:\"groupby\",type:\"field\",array:!0},{name:\"method\",type:\"enum\",default:\"value\",values:[\"value\",\"mean\",\"median\",\"max\",\"min\"]},{name:\"value\",default:0}]},fm(an,be).transform=function(t,n){var r,i,a,o,u,s,f,l,h,d,p=n.fork(n.ALL),g=on(t),v=un(t),m=e(t.field),y=e(t.key),b=(t.groupby||[]).map(e),_=sn(n.source,t.groupby,t.key,t.keyvals),x=[],w=this.value,M=_.domain.length;for(u=0,l=_.length;u<l;++u)for(a=(r=_[u]).values,i=NaN,f=0;f<M;++f)if(null==r[f]){for(o=_.domain[f],d={_impute:!0},s=0,h=a.length;s<h;++s)d[b[s]]=a[s];d[y]=o,d[m]=isNaN(i)?i=g(r,v):i,x.push(c(d))}return x.length&&(p.add=p.materialize(p.ADD).add.concat(x)),w.length&&(p.rem=p.materialize(p.REM).rem.concat(w)),this.value=x,p},fn.Definition={type:\"JoinAggregate\",metadata:{modifies:!0},params:[{name:\"groupby\",type:\"field\",array:!0},{name:\"fields\",type:\"field\",null:!0,array:!0},{name:\"ops\",type:\"enum\",array:!0,values:Fy},{name:\"as\",type:\"string\",null:!0,array:!0},{name:\"key\",type:\"field\"}]};var zb=fm(fn,Le);zb.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(n=r.value=r.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),r.changes(),e.visit(e.SOURCE,function(t){am(t,n[r.cellkey(t)].tuple)}),e.reflow(i).modifies(this._outputs)},zb.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},fm(cn,m),hn.Definition={type:\"Lookup\",metadata:{modifies:!0},params:[{name:\"index\",type:\"index\",params:[{name:\"from\",type:\"data\",required:!0},{name:\"key\",type:\"field\",required:!0}]},{name:\"values\",type:\"field\",array:!0},{name:\"fields\",type:\"field\",array:!0,required:!0},{name:\"as\",type:\"string\",array:!0},{name:\"default\",default:null}]},fm(hn,be).transform=function(t,n){var r,i,a=n,o=t.as,u=t.fields,s=t.index,f=t.values,c=null==t.default?null:t.default,l=t.modified(),h=l?n.SOURCE:n.ADD,d=u.length;return f?(i=f.length,d>1&&!o&&qv('Multi-field lookup requires explicit \"as\" parameter.'),o&&o.length!==d*i&&qv('The \"as\" parameter has too few output field names.'),o=o||f.map(e),r=function(t){for(var e,n,r=0,a=0;r<d;++r)if(null==(n=s.get(u[r](t))))for(e=0;e<i;++e,++a)t[o[a]]=c;else for(e=0;e<i;++e,++a)t[o[a]]=f[e](n)}):(o||qv(\"Missing output field names.\"),r=function(t){for(var e,n=0;n<d;++n)e=s.get(u[n](t)),t[o[n]]=null==e?c:e}),l?a=n.reflow(!0):h|=u.some(function(t){return n.modified(t.fields)})?n.MOD:0,n.visit(h,r),a.modifies(o)},fm(dn,m),fm(gn,m),fm(mn,be),mn.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},fm(yn,Je).transform=function(t,e){var r=this,i=t.subflow,a=t.field;return(t.modified(\"field\")||a&&e.modified(n(a)))&&qv(\"PreFacet does not support field modification.\"),this._targets.active=0,e.visit(e.MOD,function(t){var n=r.subflow(s(t),i,e,t);a?a(t).forEach(function(t){n.mod(t)}):n.mod(t)}),e.visit(e.ADD,function(t){var n=r.subflow(s(t),i,e,t);a?a(t).forEach(function(t){n.add(c(t))}):n.add(t)}),e.visit(e.REM,function(t){var n=r.subflow(s(t),i,e,t);a?a(t).forEach(function(t){n.rem(t)}):n.rem(t)}),e},fm(bn,be).transform=function(t,e){return this.value=t.value,t.modified(\"value\")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},fm(_n,be).transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(),e.visit(e.REM,function(t){var e=s(t);n.rem.push(r[e]),r[e]=null}),e.visit(e.ADD,function(t){var e=l(t);r[s(t)]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(h(t,r[s(t)]))})),n},xn.Definition={type:\"Sample\",metadata:{source:!0,changes:!0},params:[{name:\"size\",type:\"number\",default:1e3}]},fm(xn,be).transform=function(t,e){function n(t){var e,n;o.length<a?o.push(t):(n=~~((u+1)*Math.random()))<o.length&&n>=f&&(e=o[n],c[s(e)]&&r.rem.push(e),o[n]=t),++u}var r=e.fork(),i=t.modified(\"size\"),a=t.size,o=this.value,u=this.count,f=0,c=o.reduce(function(t,e){return t[s(e)]=1,t},{});if(e.rem.length&&(e.visit(e.REM,function(t){var e=s(t);c[e]&&(c[e]=-1,r.rem.push(t)),--u}),o=o.filter(function(t){return-1!==c[s(t)]})),(e.rem.length||i)&&o.length<a&&e.source&&(f=u=o.length,e.visit(e.SOURCE,function(t){c[s(t)]||n(t)}),f=-1),i&&o.length>a){for(var l=0,h=o.length-a;l<h;++l)c[s(o[l])]=-1,r.rem.push(o[l]);o=o.slice(h)}return e.mod.length&&e.visit(e.MOD,function(t){c[s(t)]&&r.mod.push(t)}),e.add.length&&e.visit(e.ADD,n),(e.add.length||f<0)&&(r.add=o.filter(function(t){return!c[s(t)]})),this.count=u,this.value=r.source=o,r},wn.Definition={type:\"Sequence\",metadata:{generates:!0,source:!0},params:[{name:\"start\",type:\"number\",required:!0},{name:\"stop\",type:\"number\",required:!0},{name:\"step\",type:\"number\",default:1}],output:[\"value\"]},fm(wn,be).transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD);return n.rem=this.value?e.rem.concat(this.value):e.rem,n.source=this.value=Zy(t.start,t.stop,t.step||1).map(c),n.add=e.add.concat(this.value),n}},fm(Mn,be).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},fm(kn,be).transform=function(t,e){function n(t){a.set(i(t),t)}var r=e.dataflow,i=t.field,a=this.value,o=!0;return t.modified(\"field\")||e.modified(i.fields)?(a.clear(),e.visit(e.SOURCE,n)):e.changed()?(e.visit(e.REM,function(t){a.delete(i(t))}),e.visit(e.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),e.fork()},fm(En,be).transform=function(t,e){(!this.value||t.modified(\"field\")||t.modified(\"sort\")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};var Db={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=Db.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){(e=+e)>0||qv(\"ntile num must be greater than zero.\");var n=Db.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return(e=+e)>0||qv(\"nth_value nth must be greater than zero.\"),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}}},Ob=Object.keys(Db),Nb=An.prototype;Nb.init=function(){this.windows.forEach(function(t){t.init()}),this.cell&&this.cell.init()},Nb.update=function(t,e){var n,r=this,i=r.cell,a=r.windows,o=t.data,u=a&&a.length;if(i){for(n=t.p0;n<t.i0;++n)i.rem(o[n]);for(n=t.p1;n<t.i1;++n)i.add(o[n]);i.set(e)}for(n=0;n<u;++n)a[n].update(t,e)},zn.Definition={type:\"Window\",metadata:{modifies:!0},params:[{name:\"sort\",type:\"compare\"},{name:\"groupby\",type:\"field\",array:!0},{name:\"ops\",type:\"enum\",array:!0,values:Ob.concat(Fy)},{name:\"params\",type:\"number\",null:!0,array:!0},{name:\"fields\",type:\"field\",null:!0,array:!0},{name:\"as\",type:\"string\",null:!0,array:!0},{name:\"frame\",type:\"number\",null:!0,array:!0,length:2,default:[null,0]},{name:\"ignorePeers\",type:\"boolean\",default:!1}]};var Tb=fm(zn,be);Tb.transform=function(t,e){function n(t){return a.group(s(t))}var r,i,a=this,o=a.state,u=t.modified();this.stamp=e.stamp,o&&!u||(o=a.state=new An(t));var s=Me(t.groupby);for(u||e.modified(o.inputs)?(a.value={},e.visit(e.SOURCE,function(t){n(t).add(t)})):(e.visit(e.REM,function(t){n(t).remove(t)}),e.visit(e.ADD,function(t){n(t).add(t)})),r=0,i=a._mlen;r<i;++r)Dn(a._mods[r],o,t);return a._mlen=0,a._mods=[],e.reflow(u).modifies(o.outputs)},Tb.group=function(t){var e=this,n=e.value[t];return n||((n=e.value[t]=mb(s)).stamp=-1),n.stamp<e.stamp&&(n.stamp=e.stamp,e._mods[e._mlen++]=n),n};var Rb=Object.freeze({aggregate:Le,bin:qe,collect:Ue,compare:je,countpattern:Ie,cross:Be,density:He,extent:Xe,facet:Je,field:Ze,filter:Ke,fold:tn,formula:nn,generate:rn,impute:an,joinaggregate:fn,key:cn,lookup:hn,multiextent:dn,multivalues:gn,params:mn,prefacet:yn,proxy:bn,relay:_n,sample:xn,sequence:wn,sieve:Mn,subflow:Ve,tupleindex:kn,values:En,window:zn}),Pb=Tn.prototype;Pb.clone=function(){return new Tn(this)},Pb.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Pb.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Pb.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},Pb.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},Pb.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},Pb.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Pb.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},Pb.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t),a=e-e*r+n*i,o=n-e*i-n*r,u=this.x1,s=this.x2,f=this.y1,c=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*c+a,i*u+r*c+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*c+a,i*s+r*c+o)},Pb.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},Pb.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},Pb.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},Pb.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},Pb.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},Pb.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},Pb.width=function(){return this.x2-this.x1},Pb.height=function(){return this.y2-this.y1};var Lb=0,qb=function(t,e){var n,r=[];return n={id:\"gradient_\"+Lb++,x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}};fm(Pn,Rn);var Ub;try{Ub=require(\"canvas\")}catch(t){Ub=null}var jb=function(t,e){var n=Ln(null,\"canvas\");if(n&&n.getContext)n.width=t,n.height=e;else if(Ub)try{n=new Ub(t,e)}catch(t){n=null}return n},Fb=\"undefined\"!=typeof Image?Image:Ub&&Ub.Image||null,Ib=In.prototype;Ib.pending=function(){return this._pending},Ib.sanitizeURL=function(t){var e=this;return $n(e),e._loader.sanitize(t,{context:\"href\"}).then(function(t){return Bn(e),t}).catch(function(){return Bn(e),null})},Ib.loadImage=function(t){var e=this;return $n(e),e._loader.sanitize(t,{context:\"image\"}).then(function(t){var n=t.href;if(!n||!Fb)throw{url:n};var r=new Fb;return r.onload=function(){Bn(e),r.loaded=!0},r.onerror=function(){Bn(e),r.loaded=!1},r.src=n,r}).catch(function(t){return Bn(e),{loaded:!1,width:0,height:0,src:t&&t.url||\"\"}})},Ib.ready=function(){var t=this;return new Promise(function(e){function n(r){t.pending()?setTimeout(function(){n(!0)},10):e(r)}n(!1)})};var $b=Math.PI,Bb=2*$b,Wb=Bb-1e-6;Wn.prototype=Yn.prototype={constructor:Wn,moveTo:function(t,e){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+=\"Z\")},lineTo:function(t,e){this._+=\"L\"+(this._x1=+t)+\",\"+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+=\"Q\"+ +t+\",\"+ +e+\",\"+(this._x1=+n)+\",\"+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+=\"C\"+ +t+\",\"+ +e+\",\"+ +n+\",\"+ +r+\",\"+(this._x1=+i)+\",\"+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-t,s=r-e,f=a-t,c=o-e,l=f*f+c*c;if(i<0)throw new Error(\"negative radius: \"+i);if(null===this._x1)this._+=\"M\"+(this._x1=t)+\",\"+(this._y1=e);else if(l>1e-6)if(Math.abs(c*u-s*f)>1e-6&&i){var h=n-a,d=r-o,p=u*u+s*s,g=h*h+d*d,v=Math.sqrt(p),m=Math.sqrt(l),y=i*Math.tan(($b-Math.acos((p+l-g)/(2*v*m)))/2),b=y/m,_=y/v;Math.abs(b-1)>1e-6&&(this._+=\"L\"+(t+b*f)+\",\"+(e+b*c)),this._+=\"A\"+i+\",\"+i+\",0,0,\"+ +(c*h>f*d)+\",\"+(this._x1=t+_*u)+\",\"+(this._y1=e+_*s)}else this._+=\"L\"+(this._x1=t)+\",\"+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),s=t+o,f=e+u,c=1^a,l=a?r-i:i-r;if(n<0)throw new Error(\"negative radius: \"+n);null===this._x1?this._+=\"M\"+s+\",\"+f:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+=\"L\"+s+\",\"+f),n&&(l<0&&(l=l%Bb+Bb),l>Wb?this._+=\"A\"+n+\",\"+n+\",0,1,\"+c+\",\"+(t-o)+\",\"+(e-u)+\"A\"+n+\",\"+n+\",0,1,\"+c+\",\"+(this._x1=s)+\",\"+(this._y1=f):l>1e-6&&(this._+=\"A\"+n+\",\"+n+\",0,\"+ +(l>=$b)+\",\"+c+\",\"+(this._x1=t+n*Math.cos(i))+\",\"+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+=\"M\"+(this._x0=this._x1=+t)+\",\"+(this._y0=this._y1=+e)+\"h\"+ +n+\"v\"+ +r+\"h\"+-n+\"Z\"},toString:function(){return this._}};var Yb=function(t){return function(){return t}},Hb=Math.abs,Gb=Math.atan2,Xb=Math.cos,Vb=Math.max,Jb=Math.min,Zb=Math.sin,Qb=Math.sqrt,Kb=1e-12,t_=Math.PI,e_=t_/2,n_=2*t_;er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var r_=function(t){return new er(t)},i_=function(){function t(t){var u,s,f,c=t.length,l=!1;for(null==i&&(o=a(f=Yn())),u=0;u<=c;++u)!(u<c&&r(s=t[u],u,t))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+e(s,u,t),+n(s,u,t));if(f)return o=null,f+\"\"||null}var e=nr,n=rr,r=Yb(!0),i=null,a=r_,o=null;return t.x=function(n){return arguments.length?(e=\"function\"==typeof n?n:Yb(+n),t):e},t.y=function(e){return arguments.length?(n=\"function\"==typeof e?e:Yb(+e),t):n},t.defined=function(e){return arguments.length?(r=\"function\"==typeof e?e:Yb(!!e),t):r},t.curve=function(e){return arguments.length?(a=e,null!=i&&(o=a(i)),t):a},t.context=function(e){return arguments.length?(null==e?i=o=null:o=a(i=e),t):i},t},a_=function(){function t(t){var e,c,l,h,d,p=t.length,g=!1,v=new Array(p),m=new Array(p);for(null==u&&(f=s(d=Yn())),e=0;e<=p;++e){if(!(e<p&&o(h=t[e],e,t))===g)if(g=!g)c=e,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),l=e-1;l>=c;--l)f.point(v[l],m[l]);f.lineEnd(),f.areaEnd()}g&&(v[e]=+n(h,e,t),m[e]=+i(h,e,t),f.point(r?+r(h,e,t):v[e],a?+a(h,e,t):m[e]))}if(d)return f=null,d+\"\"||null}function e(){return i_().defined(o).curve(s).context(u)}var n=nr,r=null,i=Yb(0),a=rr,o=Yb(!0),u=null,s=r_,f=null;return t.x=function(e){return arguments.length?(n=\"function\"==typeof e?e:Yb(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n=\"function\"==typeof e?e:Yb(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:\"function\"==typeof e?e:Yb(+e),t):r},t.y=function(e){return arguments.length?(i=\"function\"==typeof e?e:Yb(+e),a=null,t):i},t.y0=function(e){return arguments.length?(i=\"function\"==typeof e?e:Yb(+e),t):i},t.y1=function(e){return arguments.length?(a=null==e?null:\"function\"==typeof e?e:Yb(+e),t):a},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(a)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(o=\"function\"==typeof e?e:Yb(!!e),t):o},t.curve=function(e){return arguments.length?(s=e,null!=u&&(f=s(u)),t):s},t.context=function(e){return arguments.length?(null==e?u=f=null:f=s(u=e),t):u},t},o_={draw:function(t,e){var n=Math.sqrt(e/t_);t.moveTo(n,0),t.arc(0,0,n,0,n_)}},u_=function(){};ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ir(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ir(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};or.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ir(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ir(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};sr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,u=e[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*o),this._beta*e[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var s_=function t(e){function n(t){return 1===e?new ar(t):new sr(t,e)}return n.beta=function(e){return t(+e)},n}(.85);cr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:fr(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:fr(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var f_=function t(e){function n(t){return new cr(t,e)}return n.tension=function(e){return t(+e)},n}(0);lr.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:fr(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var c_=function t(e){function n(t){return new lr(t,e)}return n.tension=function(e){return t(+e)},n}(0);hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fr(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var l_=function t(e){function n(t){return new hr(t,e)}return n.tension=function(e){return t(+e)},n}(0);pr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:dr(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var h_=function t(e){function n(t){return e?new pr(t,e):new cr(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);gr.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:dr(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var d_=function t(e){function n(t){return e?new gr(t,e):new lr(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);vr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dr(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var p_=function t(e){function n(t){return e?new vr(t,e):new hr(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);mr.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};wr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xr(this,this._t0,_r(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,xr(this,_r(this,n=br(this,t,e)),n);break;default:xr(this,this._t0,n=br(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Mr.prototype=Object.create(wr.prototype)).point=function(t,e){wr.prototype.point.call(this,e,t)},kr.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Sr(t),i=Sr(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};Ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var g_,v_={basis:{curve:function(t){return new ar(t)}},\"basis-closed\":{curve:function(t){return new or(t)}},\"basis-open\":{curve:function(t){return new ur(t)}},bundle:{curve:s_,tension:\"beta\",value:.85},cardinal:{curve:f_,tension:\"tension\",value:0},\"cardinal-open\":{curve:l_,tension:\"tension\",value:0},\"cardinal-closed\":{curve:c_,tension:\"tension\",value:0},\"catmull-rom\":{curve:h_,tension:\"alpha\",value:.5},\"catmull-rom-closed\":{curve:d_,tension:\"alpha\",value:.5},\"catmull-rom-open\":{curve:p_,tension:\"alpha\",value:.5},linear:{curve:r_},\"linear-closed\":{curve:function(t){return new mr(t)}},monotone:{horizontal:function(t){return new Mr(t)},vertical:function(t){return new wr(t)}},natural:{curve:function(t){return new Er(t)}},step:{curve:function(t){return new Ar(t,.5)}},\"step-after\":{curve:function(t){return new Ar(t,1)}},\"step-before\":{curve:function(t){return new Ar(t,0)}}},m_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},y_=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\\d)([-+])/g,/\\s|,|###/],b_=function(t){var e,n,r,i,a,o,u,s,f,c,l,h=[];for(s=0,c=(e=t.slice().replace(y_[0],\"###$1\").split(y_[1]).slice(1)).length;s<c;++s){for(r=(n=e[s]).slice(1).trim().replace(y_[2],\"$1###$2\").split(y_[3]),i=[o=n.charAt(0)],f=0,l=r.length;f<l;++f)(a=+r[f])===a&&i.push(a);if(u=m_[o.toLowerCase()],i.length-1>u)for(f=1,l=i.length;f<l;f+=u)h.push([o].concat(i.slice(f,f+u)));else h.push(i)}return h},__={},x_={},w_=[].join,M_=[\"l\",0,0,0,0,0,0,0],k_=function(t,e,n,r,i){var a,o,u,s,f,c=null,l=0,h=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var g=0,v=e.length;g<v;++g){switch(a=e[g],1!==i&&(a=Or(a,i)),a[0]){case\"l\":l+=a[1],h+=a[2],t.lineTo(l+n,h+r);break;case\"L\":l=a[1],h=a[2],t.lineTo(l+n,h+r);break;case\"h\":l+=a[1],t.lineTo(l+n,h+r);break;case\"H\":l=a[1],t.lineTo(l+n,h+r);break;case\"v\":h+=a[1],t.lineTo(l+n,h+r);break;case\"V\":h=a[1],t.lineTo(l+n,h+r);break;case\"m\":l+=a[1],h+=a[2],t.moveTo(l+n,h+r);break;case\"M\":l=a[1],h=a[2],t.moveTo(l+n,h+r);break;case\"c\":o=l+a[5],u=h+a[6],d=l+a[3],p=h+a[4],t.bezierCurveTo(l+a[1]+n,h+a[2]+r,d+n,p+r,o+n,u+r),l=o,h=u;break;case\"C\":l=a[5],h=a[6],d=a[3],p=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,d+n,p+r,l+n,h+r);break;case\"s\":o=l+a[3],u=h+a[4],d=2*l-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,l+a[1]+n,h+a[2]+r,o+n,u+r),d=l+a[1],p=h+a[2],l=o,h=u;break;case\"S\":o=a[3],u=a[4],d=2*l-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,a[1]+n,a[2]+r,o+n,u+r),l=o,h=u,d=a[1],p=a[2];break;case\"q\":o=l+a[3],u=h+a[4],d=l+a[1],p=h+a[2],t.quadraticCurveTo(d+n,p+r,o+n,u+r),l=o,h=u;break;case\"Q\":o=a[3],u=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),l=o,h=u,d=a[1],p=a[2];break;case\"t\":o=l+a[1],u=h+a[2],null===c[0].match(/[QqTt]/)?(d=l,p=h):\"t\"===c[0]?(d=2*l-s,p=2*h-f):\"q\"===c[0]&&(d=2*l-d,p=2*h-p),s=d,f=p,t.quadraticCurveTo(d+n,p+r,o+n,u+r),h=u,d=(l=o)+a[1],p=h+a[2];break;case\"T\":o=a[1],u=a[2],d=2*l-d,p=2*h-p,t.quadraticCurveTo(d+n,p+r,o+n,u+r),l=o,h=u;break;case\"a\":Nr(t,l+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+h+r]),l+=a[6],h+=a[7];break;case\"A\":Nr(t,l+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],h=a[7];break;case\"z\":case\"Z\":t.closePath()}c=a}},E_=2*Math.PI,S_=Math.sqrt(3)/2,A_={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,E_)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},\"triangle-up\":{draw:function(t,e){var n=Math.sqrt(e)/2,r=S_*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},\"triangle-down\":{draw:function(t,e){var n=Math.sqrt(e)/2,r=S_*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},\"triangle-right\":{draw:function(t,e){var n=Math.sqrt(e)/2,r=S_*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},\"triangle-left\":{draw:function(t,e){var n=Math.sqrt(e)/2,r=S_*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}}},C_={},z_=function(){function t(t,u,s){var f,c=null!=u?u:+e.call(this,t),l=null!=s?s:+n.call(this,t),h=+r.call(this,t),d=+i.call(this,t),p=+a.call(this,t);if(o||(o=f=Yn()),p<=0)o.rect(c,l,h,d);else{var g=c+h,v=l+d;o.moveTo(c+p,l),o.lineTo(g-p,l),o.quadraticCurveTo(g,l,g,l+p),o.lineTo(g,v-p),o.quadraticCurveTo(g,v,g-p,v),o.lineTo(c+p,v),o.quadraticCurveTo(c,v,c,v-p),o.lineTo(c,l+p),o.quadraticCurveTo(c,l,c+p,l),o.closePath()}if(f)return o=null,f+\"\"||null}var e=Pr,n=Lr,r=qr,i=Ur,a=jr(0),o=null;return t.x=function(n){return arguments.length?(e=\"function\"==typeof n?n:jr(+n),t):e},t.y=function(e){return arguments.length?(n=\"function\"==typeof e?e:jr(+e),t):n},t.width=function(e){return arguments.length?(r=\"function\"==typeof e?e:jr(+e),t):r},t.height=function(e){return arguments.length?(i=\"function\"==typeof e?e:jr(+e),t):i},t.cornerRadius=function(e){return arguments.length?(a=\"function\"==typeof e?e:jr(+e),t):a},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t},D_=Math.PI,O_=function(){function t(t,e,n){var r=n/2;if(o){var i=s-e,a=t-u;if(i||a){var l=Math.sqrt(i*i+a*a),h=(i/=l)*f,d=(a/=l)*f,p=Math.atan2(a,i);c.moveTo(u-h,s-d),c.lineTo(t-i*r,e-a*r),c.arc(t,e,r,p-D_,p),c.lineTo(u+h,s+d),c.arc(u,s,f,p,p+D_)}else c.arc(t,e,r,0,2*D_);c.closePath()}else o=1;u=t,s=e,f=r}function e(e){var u,s,f,l=e.length,h=!1;for(null==c&&(c=f=Yn()),u=0;u<=l;++u)!(u<l&&a(s=e[u],u,e))===h&&(h=!h)&&(o=0),h&&t(+n(s,u,e),+r(s,u,e),+i(s,u,e));if(f)return c=null,f+\"\"||null}var n,r,i,a,o,u,s,f,c=null;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.size=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(a=t,e):a},e.context=function(t){return arguments.length?(c=null==t?null:t,e):c},e},N_=function(){function t(){var t,f,c=+e.apply(this,arguments),l=+n.apply(this,arguments),h=a.apply(this,arguments)-e_,d=o.apply(this,arguments)-e_,p=Hb(d-h),g=d>h;if(s||(s=t=Yn()),l<c&&(f=l,l=c,c=f),l>Kb)if(p>n_-Kb)s.moveTo(l*Xb(h),l*Zb(h)),s.arc(0,0,l,h,d,!g),c>Kb&&(s.moveTo(c*Xb(d),c*Zb(d)),s.arc(0,0,c,d,h,g));else{var v,m,y=h,b=d,_=h,x=d,w=p,M=p,k=u.apply(this,arguments)/2,E=k>Kb&&(i?+i.apply(this,arguments):Qb(c*c+l*l)),S=Jb(Hb(l-c)/2,+r.apply(this,arguments)),A=S,C=S;if(E>Kb){var z=Gn(E/c*Zb(k)),D=Gn(E/l*Zb(k));(w-=2*z)>Kb?(z*=g?1:-1,_+=z,x-=z):(w=0,_=x=(h+d)/2),(M-=2*D)>Kb?(D*=g?1:-1,y+=D,b-=D):(M=0,y=b=(h+d)/2)}var O=l*Xb(y),N=l*Zb(y),T=c*Xb(x),R=c*Zb(x);if(S>Kb){var P=l*Xb(b),L=l*Zb(b),q=c*Xb(_),U=c*Zb(_);if(p<t_){var j=w>Kb?Kn(O,N,q,U,P,L,T,R):[T,R],F=O-j[0],I=N-j[1],$=P-j[0],B=L-j[1],W=1/Zb(Hn((F*$+I*B)/(Qb(F*F+I*I)*Qb($*$+B*B)))/2),Y=Qb(j[0]*j[0]+j[1]*j[1]);A=Jb(S,(c-Y)/(W-1)),C=Jb(S,(l-Y)/(W+1))}}M>Kb?C>Kb?(v=tr(q,U,O,N,l,C,g),m=tr(P,L,T,R,l,C,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),C<S?s.arc(v.cx,v.cy,C,Gb(v.y01,v.x01),Gb(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,C,Gb(v.y01,v.x01),Gb(v.y11,v.x11),!g),s.arc(0,0,l,Gb(v.cy+v.y11,v.cx+v.x11),Gb(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,C,Gb(m.y11,m.x11),Gb(m.y01,m.x01),!g))):(s.moveTo(O,N),s.arc(0,0,l,y,b,!g)):s.moveTo(O,N),c>Kb&&w>Kb?A>Kb?(v=tr(T,R,P,L,c,-A,g),m=tr(O,N,q,U,c,-A,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),A<S?s.arc(v.cx,v.cy,A,Gb(v.y01,v.x01),Gb(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,A,Gb(v.y01,v.x01),Gb(v.y11,v.x11),!g),s.arc(0,0,c,Gb(v.cy+v.y11,v.cx+v.x11),Gb(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,A,Gb(m.y11,m.x11),Gb(m.y01,m.x01),!g))):s.arc(0,0,c,x,_,g):s.lineTo(T,R)}else s.moveTo(0,0);if(s.closePath(),t)return s=null,t+\"\"||null}var e=Xn,n=Vn,r=Yb(0),i=null,a=Jn,o=Zn,u=Qn,s=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-t_/2;return[Xb(r)*t,Zb(r)*t]},t.innerRadius=function(n){return arguments.length?(e=\"function\"==typeof n?n:Yb(+n),t):e},t.outerRadius=function(e){return arguments.length?(n=\"function\"==typeof e?e:Yb(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r=\"function\"==typeof e?e:Yb(+e),t):r},t.padRadius=function(e){return arguments.length?(i=null==e?null:\"function\"==typeof e?e:Yb(+e),t):i},t.startAngle=function(e){return arguments.length?(a=\"function\"==typeof e?e:Yb(+e),t):a},t.endAngle=function(e){return arguments.length?(o=\"function\"==typeof e?e:Yb(+e),t):o},t.padAngle=function(e){return arguments.length?(u=\"function\"==typeof e?e:Yb(+e),t):u},t.context=function(e){return arguments.length?(s=null==e?null:e,t):s},t}().cornerRadius($r).padAngle(function(t){return t.padAngle||0}),T_=a_().x(Fr).y1(Ir).y0(function(t){return(t.y||0)+(t.height||0)}).defined(Br),R_=a_().y(Ir).x1(Fr).x0(function(t){return(t.x||0)+(t.width||0)}).defined(Br),P_=i_().x(Fr).y(Ir).defined(Br),L_=z_().x(Fr).y(Ir).width(function(t){return t.width||0}).height(function(t){return t.height||0}).cornerRadius($r),q_=function(){function t(){var t;if(r||(r=t=Yn()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+\"\"||null}var e=Yb(o_),n=Yb(64),r=null;return t.type=function(n){return arguments.length?(e=\"function\"==typeof n?n:Yb(n),t):e},t.size=function(e){return arguments.length?(n=\"function\"==typeof e?e:Yb(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t}().type(function(t){return Tr(t.shape||\"circle\")}).size(function(t){return null==t.size?64:t.size}),U_=O_().x(Fr).y(Ir).defined(Br).size(function(t){return t.size||1}),j_=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},F_=2*Math.PI,I_=F_/4,$_=F_-1e-8;Yr.beginPath=Hr,Yr.closePath=Hr,Yr.moveTo=Gr,Yr.lineTo=Gr,Yr.rect=function(t,e,n,r){Gr(t,e),Gr(t+n,e+r)},Yr.quadraticCurveTo=function(t,e,n,r){Gr(t,e),Gr(n,r)},Yr.bezierCurveTo=function(t,e,n,r,i,a){Gr(t,e),Gr(n,r),Gr(i,a)},Yr.arc=function(t,e,n,r,i,a){function o(t){f=n*Math.cos(t),c=n*Math.sin(t),f<l&&(l=f),f>h&&(h=f),c<d&&(d=c),c>p&&(p=c)}if(Math.abs(i-r)>$_)return Gr(t-n,e-n),void Gr(t+n,e+n);var u,s,f,c,l=1/0,h=-1/0,d=1/0,p=-1/0;if(o(r),o(i),i!==r)if((r%=F_)<0&&(r+=F_),(i%=F_)<0&&(i+=F_),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=F_,u=r-r%I_,s=0;s<3&&u>i;++s,u-=I_)o(u);else for(u=r-r%I_+I_,s=0;s<3&&u<i;++s,u+=I_)o(u);Gr(t+l,e+d),Gr(t+h,e+p)};var B_,W_,Y_=function(t,e,n){for(var r=n.width(),i=n.height(),a=n.x1+e.x1*r,o=n.y1+e.y1*i,u=n.x1+e.x2*r,s=n.y1+e.y2*i,f=e.stops,c=0,l=f.length,h=t.createLinearGradient(a,o,u,s);c<l;++c)h.addColorStop(f[c].offset,f[c].color);return h},H_=function(t,e,n){return n.id?Y_(t,n,e.bounds):n},G_=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=H_(t,e,e.fill),!0)},X_=[],V_=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=H_(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||\"butt\",t.lineJoin=e.strokeJoin||\"miter\",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||X_),t.lineDashOffset=e.strokeDashOffset||0),!0))},J_=function(){return!0},Z_=function(t,e){return\"translate(\"+t+\",\"+e+\")\"},Q_=function(t){return Z_(t.x||0,t.y||0)},K_=function(t,e){function n(t,n){var r=n.x||0,i=n.y||0;t.translate(r,i),t.beginPath(),e(t,n),t.translate(-r,-i)}return{type:t,tag:\"path\",nested:!1,attr:function(t,n){t(\"transform\",Q_(n)),t(\"d\",e(null,n))},bound:function(t,n){return e(Yr(t),n),j_(t,n).translate(n.x||0,n.y||0)},draw:Qr(n),pick:ri(n)}},tx=K_(\"arc\",function(t,e){return N_.context(t)(e)}),ex=function(t,e){function n(t,n){t.beginPath(),e(t,n)}var r=ni(n);return{type:t,tag:\"path\",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t(\"d\",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(Yr(t),r),j_(t,r[0]))},draw:Kr(n),pick:function(t,e,n,i,a,o){var u=e.items,s=e.bounds;return!u||!u.length||s&&!s.contains(a,o)?null:(t.pixelRatio>1&&(n*=t.pixelRatio,i*=t.pixelRatio),r(t,u,n,i)?u[0]:null)}}},nx=ex(\"area\",function(t,e){var n=e[0],r=n.interpolate||\"linear\";return(\"horizontal\"===n.orient?R_:T_).curve(Cr(r,n.orient,n.tension)).context(t)(e)}),rx=1,ix=function(t,e,n){var r=t._defs,i=e.clip_id||(e.clip_id=\"clip\"+rx++),a=r.clipping[i]||(r.clipping[i]={id:i});return a.width=n.width||0,a.height=n.height||0,\"url(#\"+i+\")\"},ax=.5,ox={type:\"group\",tag:\"g\",nested:!1,attr:function(t,e){t(\"transform\",Q_(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&j_(t.add(0,0).add(e.width||0,e.height||0),e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;Jr(e,function(e){var i,a,o=e.x||0,u=e.y||0,s=e.width||0,f=e.height||0;t.save(),t.translate(o,u),(e.stroke||e.fill)&&(a=null==e.opacity?1:e.opacity)>0&&(t.beginPath(),i=e.stroke?ax:0,Wr(t,e,i,i),e.fill&&G_(t,e,a)&&t.fill(),e.stroke&&V_(t,e,a)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,s,f),t.clip()),n&&n.translate(-o,-u),Jr(e,function(e){r.draw(t,e,n)}),n&&n.translate(o,u),t.restore()})},pick:function(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var o=this;return Zr(e,function(u){var s,f,c,l;if(!(l=u.bounds)||l.contains(i,a))return f=u.x||0,c=u.y||0,t.save(),t.translate(f,c),f=i-f,c=a-c,s=Zr(u,function(t){return ii(t,f,c)?o.pick(t,n,r,f,c):null}),t.restore(),s||((s=!1!==e.interactive&&(u.fill||u.stroke)&&f>=0&&f<=u.width&&c>=0&&c<=u.height)?u:null)})},background:function(t,e){var n=e.stroke?ax:0;t(\"class\",\"background\"),t(\"d\",Wr(null,e,n,n))},foreground:function(t,e,n){t(\"clip-path\",e.clip?ix(n,e,e):null)}},ux={type:\"image\",tag:\"image\",nested:!1,attr:function(t,e,n){var r=ai(e,n),i=e.x||0,a=e.y||0,o=(null!=e.width?e.width:r.width)||0,u=(null!=e.height?e.height:r.height)||0,s=!1===e.aspect?\"none\":\"xMidYMid\";i-=oi(e.align,o),a-=ui(e.baseline,u),t(\"href\",r.src||\"\",\"http://www.w3.org/1999/xlink\",\"xlink:href\"),t(\"transform\",Z_(i,a)),t(\"width\",o),t(\"height\",u),t(\"preserveAspectRatio\",s)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,a=(null!=e.width?e.width:n&&n.width)||0,o=(null!=e.height?e.height:n&&n.height)||0;return r-=oi(e.align,a),i-=ui(e.baseline,o),t.set(r,i,r+a,i+o)},draw:function(t,e,n){var r=this;Jr(e,function(e){if(!n||n.intersects(e.bounds)){var i,a,o,u,s=ai(e,r),f=e.x||0,c=e.y||0,l=(null!=e.width?e.width:s.width)||0,h=(null!=e.height?e.height:s.height)||0;f-=oi(e.align,l),c-=ui(e.baseline,h),!1!==e.aspect&&(a=s.width/s.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(c+=(h-(u=l/a))/2,h=u):(f+=(l-(u=h*a))/2,l=u))),s.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(s,f,c,l,h))}})},pick:ei(),get:ai,xOffset:oi,yOffset:ui},sx=ex(\"line\",function(t,e){var n=e[0],r=n.interpolate||\"linear\";return P_.curve(Cr(r,n.orient,n.tension)).context(t)(e)}),fx={type:\"path\",tag:\"path\",nested:!1,attr:function(t,e){t(\"transform\",Q_(e)),t(\"d\",e.path)},bound:function(t,e){return si(Yr(t),e)?t.set(0,0,0,0):j_(t,e)},draw:Qr(si),pick:ri(si)},cx={type:\"rect\",tag:\"path\",nested:!1,attr:function(t,e){t(\"d\",Wr(null,e))},bound:function(t,e){var n,r;return j_(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:Qr(fi),pick:ri(fi)},lx={type:\"rule\",tag:\"line\",nested:!1,attr:function(t,e){t(\"transform\",Q_(e)),t(\"x2\",null!=e.x2?e.x2-(e.x||0):0),t(\"y2\",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return j_(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){Jr(e,function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&ci(t,e,r)&&t.stroke()}})},pick:ei(function(t,e,n,r){return!!t.isPointInStroke&&ci(t,e,1)&&t.isPointInStroke(n,r)})},hx=K_(\"shape\",function(t,e){return(e.mark.shape||e.shape).context(t)(e)}),dx=K_(\"symbol\",function(t,e){return q_.context(t)(e)}),px={height:gi,measureWidth:di,estimateWidth:li,width:li,canvas:vi};vi(!0);var gx={left:\"start\",center:\"middle\",right:\"end\"},vx=new Tn,mx={arc:tx,area:nx,group:ox,image:ux,line:sx,path:fx,rect:cx,rule:lx,shape:hx,symbol:dx,text:{type:\"text\",tag:\"text\",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+_i(e),a=e.x||0,o=e.y||0,u=e.angle||0,s=e.radius||0;s&&(n=(e.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),t(\"text-anchor\",gx[e.align]||\"start\"),u?(n=Z_(a,o)+\" rotate(\"+u+\")\",(r||i)&&(n+=\" \"+Z_(r,i))):n=Z_(a+r,o+i),t(\"transform\",n)},bound:xi,draw:function(t,e,n){Jr(e,function(e){var r,i,a,o,u,s;n&&!n.intersects(e.bounds)||(s=mi(e))&&0!==(r=null==e.opacity?1:e.opacity)&&(t.font=bi(e),t.textAlign=e.align||\"left\",i=e.x||0,a=e.y||0,(o=e.radius)&&(u=(e.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),e.angle&&(t.save(),t.translate(i,a),t.rotate(e.angle*Math.PI/180),i=a=0),i+=e.dx||0,a+=(e.dy||0)+_i(e),e.fill&&G_(t,e,r)&&t.fillText(s,i,a),e.stroke&&V_(t,e,r)&&t.strokeText(s,i,a),e.angle&&t.restore())})},pick:ei(function(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=xi(vx,e,!0),u=-e.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),c=e.x,l=e.y,h=s*i-f*a+(c-c*s+l*f),d=f*i+s*a+(l-c*f-l*s);return o.contains(h,d)})},trail:ex(\"trail\",function(t,e){return U_.context(t)(e)})},yx=function(t,e,n){var r=mx[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new Tn),t,n)},bx={mark:null},_x=function(t,e,n){var r,i,a,o,u=mx[t.marktype],s=u.bound,f=t.items,c=f&&f.length;if(u.nested)return c?a=f[0]:(bx.mark=t,a=bx),o=yx(a,s,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new Tn,c)for(r=0,i=f.length;r<i;++r)e.union(yx(f[r],s,n));return t.bounds=e},xx=[\"marktype\",\"name\",\"role\",\"interactive\",\"clip\",\"items\",\"zindex\",\"x\",\"y\",\"width\",\"height\",\"align\",\"baseline\",\"fill\",\"fillOpacity\",\"opacity\",\"stroke\",\"strokeOpacity\",\"strokeWidth\",\"strokeCap\",\"strokeDash\",\"strokeDashOffset\",\"startAngle\",\"endAngle\",\"innerRadius\",\"outerRadius\",\"cornerRadius\",\"padAngle\",\"interpolate\",\"tension\",\"orient\",\"defined\",\"url\",\"path\",\"x2\",\"y2\",\"size\",\"shape\",\"text\",\"angle\",\"theta\",\"radius\",\"dx\",\"dy\",\"font\",\"fontSize\",\"fontWeight\",\"fontStyle\",\"fontVariant\"],wx=Ei.prototype;wx.toJSON=function(t){return wi(this.root,t||0)},wx.mark=function(t,e,n){var r=Si(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var Mx=Ai.prototype;Mx.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},Mx.element=function(){return this._el},Mx.origin=function(t){return this._origin=t||[0,0],this},Mx.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},Mx.on=function(){},Mx.off=function(){},Mx.handlers=function(){var t,e=this._handlers,n=[];for(t in e)n.push.apply(n,e[t]);return n},Mx.eventName=function(t){var e=t.indexOf(\".\");return e<0?t:t.slice(0,e)},Mx.handleHref=function(t,e,n){this._loader.sanitize(n,{context:\"href\"}).then(function(e){var n=new MouseEvent(t.type,t),r=Ln(null,\"a\");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)}).catch(function(){})},Mx.handleTooltip=function(t,e,n){this._el.setAttribute(\"title\",n||\"\")};var kx=Ci.prototype;kx.initialize=function(t,e,n,r){return this._el=t,this.resize(e,n,r)},kx.element=function(){return this._el},kx.scene=function(){return this._el&&this._el.firstChild},kx.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},kx.resize=function(t,e,n){return this._width=t,this._height=e,this._origin=n||[0,0],this},kx.dirty=function(){},kx.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},kx._render=function(){},kx.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)},kx._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(t){t&&i(),n._ready=null})}return r},kx.sanitizeURL=function(t){return this._load(\"sanitizeURL\",t)},kx.loadImage=function(t){return this._load(\"loadImage\",t)};var Ex=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]},Sx=fm(zi,Ai);Sx.initialize=function(t,e,n){var r=this._canvas=t&&qn(t,\"canvas\");if(r){var i=this;this.events.forEach(function(t){r.addEventListener(t,function(e){Sx[t]?Sx[t].call(i,e):i.fire(t,e)})})}return Ai.prototype.initialize.call(this,t,e,n)},Sx.canvas=function(){return this._canvas},Sx.context=function(){return this._canvas.getContext(\"2d\")},Sx.events=[\"keydown\",\"keypress\",\"keyup\",\"dragenter\",\"dragleave\",\"dragover\",\"mousedown\",\"mouseup\",\"mousemove\",\"mouseout\",\"mouseover\",\"click\",\"dblclick\",\"wheel\",\"mousewheel\",\"touchstart\",\"touchmove\",\"touchend\"],Sx.DOMMouseScroll=function(t){this.fire(\"mousewheel\",t)},Sx.mousemove=Di(\"mousemove\",\"mouseover\",\"mouseout\"),Sx.dragover=Di(\"dragover\",\"dragenter\",\"dragleave\"),Sx.mouseout=Oi(\"mouseout\"),Sx.dragleave=Oi(\"dragleave\"),Sx.mousedown=function(t){this._down=this._active,this.fire(\"mousedown\",t)},Sx.click=function(t){this._down===this._active&&(this.fire(\"click\",t),this._down=null)},Sx.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(\"touchstart\",t,!0)},Sx.touchmove=function(t){this.fire(\"touchmove\",t,!0)},Sx.touchend=function(t){this.fire(\"touchend\",t,!0),this._touch=null},Sx.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if(\"click\"===t&&a&&a.href?this.handleHref(e,a,a.href):(\"mouseover\"===t||\"mouseout\"===t)&&a&&a.tooltip&&this.handleTooltip(e,a,\"mouseover\"===t?a.tooltip:null),o)for(e.vegaType=t,r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},Sx.on=function(t,e){var n=this.eventName(t),r=this._handlers;return(r[n]||(r[n]=[])).push({type:t,handler:e}),this},Sx.off=function(t,e){var n,r=this.eventName(t),i=this._handlers[r];if(i){for(n=i.length;--n>=0;)i[n].type===t&&(e&&i[n].handler!==e||i.splice(n,1));return this}},Sx.pickEvent=function(t){var e=Ex(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},Sx.pick=function(t,e,n,r,i){var a=this.context();return mx[t.marktype].pick.call(this,a,t,e,n,r,i)};var Ax=function(t,e){var n=e.group;t.save(),t.beginPath(),t.rect(0,0,n.width||0,n.height||0),t.clip()},Cx=\"undefined\"!=typeof window?window.devicePixelRatio||1:1,zx=function(t,e,n,r){var i=\"undefined\"!=typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,a=t.getContext(\"2d\"),o=i?Cx:1;return t.width=e*o,t.height=n*o,1!==o&&(t.style.width=e+\"px\",t.style.height=n+\"px\"),a.pixelRatio=o,a.setTransform(o,0,0,o,o*r[0],o*r[1]),t},Dx=fm(Ni,Ci),Ox=Ci.prototype,Nx=new Tn;Dx.initialize=function(t,e,n,r){return this._canvas=jb(1,1),t&&(jn(t,0).appendChild(this._canvas),this._canvas.setAttribute(\"class\",\"marks\")),Ox.initialize.call(this,t,e,n,r)},Dx.resize=function(t,e,n){return Ox.resize.call(this,t,e,n),zx(this._canvas,this._width,this._height,this._origin),this._redraw=!0,this},Dx.canvas=function(){return this._canvas},Dx.context=function(){return this._canvas?this._canvas.getContext(\"2d\"):null},Dx.dirty=function(t){var e=Ri(t.bounds,t.mark.group);this._dirty.union(e)},Dx._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return e.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=Ti(e,a,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,a),e.restore(),this._dirty.clear(),this},Dx.draw=function(t,e,n){var r=mx[e.marktype];e.clip&&Ax(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},Dx.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var Tx=fm(Pi,Ai);Tx.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener(\"click\",this._hrefHandler),r.removeEventListener(\"mouseover\",this._tooltipHandler),r.removeEventListener(\"mouseout\",this._tooltipHandler)),this._svg=r=t&&qn(t,\"svg\"),r&&(r.addEventListener(\"click\",this._hrefHandler),r.addEventListener(\"mouseover\",this._tooltipHandler),r.addEventListener(\"mouseout\",this._tooltipHandler)),Ai.prototype.initialize.call(this,t,e,n)},Tx.svg=function(){return this._svg},Tx.on=function(t,e){var n=this.eventName(t),r=this._handlers,i={type:t,handler:e,listener:Li(this,e)};return(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener),this},Tx.off=function(t,e){var n,r=this.eventName(t),i=this._svg,a=this._handlers[r];if(a){for(n=a.length;--n>=0;)(a[n].type===t&&!e||a[n].handler===e)&&(this._svg&&i.removeEventListener(r,a[n].listener),a.splice(n,1));return this}};var Rx={version:\"1.1\",xmlns:\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\"},Px={fill:\"fill\",fillOpacity:\"fill-opacity\",stroke:\"stroke\",strokeWidth:\"stroke-width\",strokeOpacity:\"stroke-opacity\",strokeCap:\"stroke-linecap\",strokeJoin:\"stroke-linejoin\",strokeDash:\"stroke-dasharray\",strokeDashOffset:\"stroke-dashoffset\",strokeMiterLimit:\"stroke-miterlimit\",opacity:\"opacity\"},Lx=Object.keys(Px),qx=Rx.xmlns,Ux=fm(ji,Ci),jx=Ci.prototype;Ux.initialize=function(t,e,n,r){return t&&(this._svg=Un(t,0,\"svg\",qx),this._svg.setAttribute(\"class\",\"marks\"),jn(t,1),this._root=Un(this._svg,0,\"g\",qx),jn(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),jx.initialize.call(this,t,e,n,r)},Ux.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty(\"background-color\",t),jx.background.apply(this,arguments)},Ux.resize=function(t,e,n){return jx.resize.call(this,t,e,n),this._svg&&(this._svg.setAttribute(\"width\",this._width),this._svg.setAttribute(\"height\",this._height),this._svg.setAttribute(\"viewBox\",\"0 0 \"+this._width+\" \"+this._height),this._root.setAttribute(\"transform\",\"translate(\"+this._origin+\")\")),this._dirty=[],this},Ux.svg=function(){if(!this._svg)return null;var t={class:\"marks\",width:this._width,height:this._height,viewBox:\"0 0 \"+this._width+\" \"+this._height};for(var e in Rx)t[e]=Rx[e];return qi(\"svg\",t)+this._svg.innerHTML+Ui(\"svg\")},Ux._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),jn(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Ux.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=Un(e,0,\"defs\",qx)),Fi(r,n.gradient[t],i++);for(t in n.clipping)r||(n.el=r=Un(e,0,\"defs\",qx)),Ii(r,n.clipping[t],i++);r&&(0===i?(e.removeChild(r),n.el=null):jn(r,i))},Ux._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},Ux.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},Ux.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},Ux._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(n=(e=t[a]).mark).marktype!==r&&(r=n.marktype,i=mx[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,n.dirty=s,$i(n.group,s)),e.exit?(i.nested&&n.items.length?(u=n.items[0])._svg&&this._update(i,u._svg,u):e._svg&&(u=e._svg.parentNode)&&u.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==s&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,$i(e,s)),e._update=s);return!this._dirtyAll},Ux.draw=function(t,e,n){function r(t){var e=a.isDirty(t),n=Wi(t,i,f,o.tag);e&&(a._update(o,n,t),s&&Bi(a,n,t)),f=n,++c}if(!this.isDirty(e))return e._svg;var i,a=this,o=mx[e.marktype],u=!1===e.interactive?\"none\":null,s=\"g\"===o.tag,f=null,c=0;return(i=Wi(e,t,n,\"g\")).setAttribute(\"class\",Fn(e)),!s&&u&&i.style.setProperty(\"pointer-events\",u),e.clip&&i.setAttribute(\"clip-path\",ix(a,e,e.group)),o.nested?e.items.length&&r(e.items[0]):Jr(e,r),jn(i,c),i};var Fx=null,Ix=null,$x={group:function(t,e,n){Ix=e.__values__,Fx=e.childNodes[1],t.foreground(Yi,n,this),Fx=e.childNodes[0],t.background(Yi,n,this);var r=!1===n.mark.interactive?\"none\":null;r!==Ix.events&&(Fx.style.setProperty(\"pointer-events\",r),Ix.events=r)},text:function(t,e,n){var r=mi(n);r!==Ix.text&&(e.textContent=r,Ix.text=r),(r=bi(n))!==Ix.font&&(e.style.setProperty(\"font\",r),Ix.font=r)}};Ux._update=function(t,e,n){Fx=e,Ix=e.__values__,t.attr(Yi,n,this);var r=$x[t.type];r&&r.call(this,t,e,n),this.style(Fx,n)},Ux.style=function(t,e){if(null!=e){var n,r,i,a,o;for(n=0,r=Lx.length;n<r;++n)(o=e[i=Lx[n]])!==Ix[i]&&(a=Px[i],null==o?\"fill\"===a?t.style.setProperty(a,\"none\"):t.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o=\"url(\"+Hi()+\"#\"+o.id+\")\"),t.style.setProperty(a,o+\"\")),Ix[i]=o)}};var Bx=fm(Gi,Ci),Wx=Ci.prototype;Bx.resize=function(t,e,n){Wx.resize.call(this,t,e,n);var r=this._origin,i=this._text,a={class:\"marks\",width:this._width,height:this._height,viewBox:\"0 0 \"+this._width+\" \"+this._height};for(var o in Rx)a[o]=Rx[o];return i.head=qi(\"svg\",a),i.root=qi(\"g\",{transform:\"translate(\"+r+\")\"}),i.foot=Ui(\"g\")+Ui(\"svg\"),this},Bx.svg=function(){var t=this._text;return t.head+t.defs+t.root+t.body+t.foot},Bx._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},Bx.buildDefs=function(){var t,e,n,r,i=this._defs,a=\"\";for(e in i.gradient){for(r=(n=i.gradient[e]).stops,a+=qi(\"linearGradient\",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<r.length;++t)a+=qi(\"stop\",{offset:r[t].offset,\"stop-color\":r[t].color})+Ui(\"stop\");a+=Ui(\"linearGradient\")}for(e in i.clipping)n=i.clipping[e],a+=qi(\"clipPath\",{id:e}),a+=qi(\"rect\",{x:0,y:0,width:n.width,height:n.height})+Ui(\"rect\"),a+=Ui(\"clipPath\");return a.length>0?qi(\"defs\")+a+Ui(\"defs\"):\"\"};var Yx;Bx.attributes=function(t,e){return Yx={},t(Xi,e,this),Yx},Bx.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(function(t){t[\"xlink:href\"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},Bx.mark=function(t){function e(e){var s=r.href(e);s&&(u+=qi(\"a\",s)),n=\"g\"!==a?Vi(e,t,a,o):null,u+=qi(a,r.attributes(i.attr,e),n),\"text\"===a?u+=Ji(mi(e)):\"g\"===a&&(u+=qi(\"path\",r.attributes(i.background,e),Vi(e,t,\"bgrect\",o))+Ui(\"path\"),u+=qi(\"g\",r.attributes(i.foreground,e))+r.markGroup(e)+Ui(\"g\")),u+=Ui(a),s&&(u+=Ui(\"a\"))}var n,r=this,i=mx[t.marktype],a=i.tag,o=this._defs,u=\"\";return\"g\"!==a&&!1===t.interactive&&(n='style=\"pointer-events: none;\"'),u+=qi(\"g\",{class:Fn(t),\"clip-path\":t.clip?ix(r,t,t.group):null},n),i.nested?t.items&&t.items.length&&e(t.items[0]):Jr(t,e),u+Ui(\"g\")},Bx.markGroup=function(t){var e=this,n=\"\";return Jr(t,function(t){n+=e.mark(t)}),n};var Hx={Canvas:\"canvas\",PNG:\"png\",SVG:\"svg\",None:\"none\"},Gx={};Gx.canvas=Gx.png={renderer:Ni,headless:Ni,handler:zi},Gx.svg={renderer:ji,headless:Gi,handler:Pi},Gx.none={};var Xx=1e-9,Vx=fm(ea,be),Jx=new Tn;Vx.transform=function(t,e){var n,r=e.dataflow,i=t.mark,a=i.marktype,o=mx[a],u=o.bound,s=i.clip,f=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),f=na(i,u),i.items.forEach(function(t){t.bounds.clear().union(f)})):\"group\"===a||t.modified()?(e.visit(e.MOD,function(t){r.dirty(t)}),f.clear(),i.items.forEach(function(t){f.union(na(t,u))})):(n=e.changed(e.REM),e.visit(e.ADD,function(t){f.union(na(t,u))}),e.visit(e.MOD,function(t){n=n||f.alignsWith(t.bounds),r.dirty(t),f.union(na(t,u))}),n&&!s&&(f.clear(),i.items.forEach(function(t){f.union(t.bounds)}))),s&&f.intersect(Jx.set(0,0,i.group.width,i.group.height)),e.modifies(\"bounds\")};var Zx=\":vega_identifier:\";ra.Definition={type:\"Identifier\",metadata:{modifies:!0},params:[{name:\"as\",type:\"string\",required:!0}]},fm(ra,be).transform=function(t,e){var n=ia(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,function(t){t[i]||(t[i]=++r)}),n.set(this.value=r),e},fm(aa,be).transform=function(t,e){var n=this.value;n||((n=e.dataflow.scenegraph().mark(t.markdef,oa(t),t.index)).group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this,this.value=n);var r=\"group\"===n.marktype?Pn:Rn;return e.visit(e.ADD,function(t){r.call(t,n)}),n.items=e.source,e};var Qx={parity:function(t){return t.filter(function(t,e){return e%2?t.opacity=0:1})},greedy:function(t){var e;return t.filter(function(t,n){return n&&sa(e.bounds,t.bounds)?t.opacity=0:(e=t,1)})}};fm(ua,be).transform=function(t,e){var n=Qx[t.method]||Qx.parity,r=e.materialize(e.SOURCE).source,i=r;if(i){if(\"greedy\"===t.method&&(i=r=r.filter(ca)),i.length>=3&&fa(i)){e=e.reflow(t.modified()).modifies(\"opacity\");do{i=n(i)}while(i.length>=3&&fa(i));i.length<3&&!ym(r).opacity&&(i.length>1&&(ym(i).opacity=0),ym(r).opacity=1)}return e}},fm(la,be).transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,function(t){n.dirty(t)}),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};var Kx=\"axis\",tw=\"legend\",ew=\"row-header\",nw=\"row-footer\",rw=\"row-title\",iw=\"column-header\",aw=\"column-footer\",ow=\"column-title\",uw=\"fit\",sw=\"pad\",fw=\"none\",cw=\"padding\",lw=\"top\",hw=\"left\",dw=\"right\",pw=\"bottom\",gw=\"axis\",vw=\"title\",mw=\"frame\",yw=\"legend\",bw=\"scope\",_w=\"row-header\",xw=\"row-footer\",ww=\"column-header\",Mw=\"column-footer\",kw=.5,Ew=new Tn;fm(Ma,be).transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach(function(e){t.layout&&_a(n,e,t.layout),ka(n,e,t)}),e};var Sw=Object.freeze({bound:ea,identifier:ra,mark:aa,overlap:ua,render:la,viewlayout:Ma}),Aw=\"log\",Cw=\"band\",zw=\"point\",Dw=\"ordinal\",Ow=\"quantile\",Nw=\"quantize\",Tw=\"threshold\",Rw=\"bin-ordinal\",Pw=\"sequential\",Lw=function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}},qw=function(t){return function(e){var n,r,i,a,o=t.range(),u=e[0],s=e[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=t.invertExtent(o[f]),s=t.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}},Uw=function(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0},jw=Array.prototype,Fw=jw.map,Iw=jw.slice,$w={name:\"implicit\"},Bw=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},Ww=\"\\\\s*([+-]?\\\\d+)\\\\s*\",Yw=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",Hw=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",Gw=/^#([0-9a-f]{3})$/,Xw=/^#([0-9a-f]{6})$/,Vw=new RegExp(\"^rgb\\\\(\"+[Ww,Ww,Ww]+\"\\\\)$\"),Jw=new RegExp(\"^rgb\\\\(\"+[Hw,Hw,Hw]+\"\\\\)$\"),Zw=new RegExp(\"^rgba\\\\(\"+[Ww,Ww,Ww,Yw]+\"\\\\)$\"),Qw=new RegExp(\"^rgba\\\\(\"+[Hw,Hw,Hw,Yw]+\"\\\\)$\"),Kw=new RegExp(\"^hsl\\\\(\"+[Yw,Hw,Hw]+\"\\\\)$\"),tM=new RegExp(\"^hsla\\\\(\"+[Yw,Hw,Hw,Yw]+\"\\\\)$\"),eM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bw(Ra,Pa,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+\"\"}}),Bw(Fa,ja,Ta(Ra,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Fa(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Fa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?\")\":\", \"+t+\")\")}})),Bw(Wa,Ba,Ta(Ra,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Wa(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Wa(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Fa(Ya(t>=240?t-240:t+120,i,r),Ya(t,i,r),Ya(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var nM=Math.PI/180,rM=180/Math.PI,iM=.95047,aM=1,oM=1.08883,uM=4/29,sM=6/29,fM=3*sM*sM,cM=sM*sM*sM;Bw(Xa,Ga,Ta(Ra,{brighter:function(t){return new Xa(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Xa(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=aM*Ja(t),e=iM*Ja(e),n=oM*Ja(n),new Fa(Za(3.2404542*e-1.5371385*t-.4985314*n),Za(-.969266*e+1.8760108*t+.041556*n),Za(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Bw(eo,to,Ta(Ra,{brighter:function(t){return new eo(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new eo(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ha(this).rgb()}}));var lM=-.14861,hM=1.78277,dM=-.29227,pM=-.90649,gM=1.97294,vM=gM*pM,mM=gM*hM,yM=hM*dM-pM*lM;Bw(io,ro,Ta(Ra,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new io(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new io(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*nM,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Fa(255*(e+n*(lM*r+hM*i)),255*(e+n*(dM*r+pM*i)),255*(e+n*(gM*r)),this.opacity)}}));var bM,_M,xM,wM,MM,kM=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,u=r<e-1?t[r+2]:2*a-i;return ao((n-r/e)*e,o,i,a,u)}},EM=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],u=t[(r+2)%e];return ao((n-r/e)*e,i,a,o,u)}},SM=function(t){return function(){return t}},AM=function t(e){function n(t,e){var n=r((t=ja(t)).r,(e=ja(e)).r),i=r(t.g,e.g),a=r(t.b,e.b),o=co(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+\"\"}}var r=fo(e);return n.gamma=t,n}(1),CM=lo(kM),zM=lo(EM),DM=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(r),o=new Array(r);for(n=0;n<i;++n)a[n]=qM(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}},OM=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},NM=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},TM=function(t,e){var n,r={},i={};null!==t&&\"object\"==typeof t||(t={}),null!==e&&\"object\"==typeof e||(e={});for(n in e)n in t?r[n]=qM(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},RM=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,PM=new RegExp(RM.source,\"g\"),LM=function(t,e){var n,r,i,a=RM.lastIndex=PM.lastIndex=0,o=-1,u=[],s=[];for(t+=\"\",e+=\"\";(n=RM.exec(t))&&(r=PM.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:NM(n,r)})),a=PM.lastIndex;return a<e.length&&(i=e.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?po(s[0].x):ho(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join(\"\")})},qM=function(t,e){var n,r=typeof e;return null==e||\"boolean\"===r?SM(e):(\"number\"===r?NM:\"string\"===r?(n=Pa(e))?(e=n,AM):LM:e instanceof Pa?AM:e instanceof Date?OM:Array.isArray(e)?DM:\"function\"!=typeof e.valueOf&&\"function\"!=typeof e.toString||isNaN(e)?TM:NM)(t,e)},UM=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},jM=180/Math.PI,FM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},IM=function(t,e,n,r,i,a){var o,u,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*jM,skewX:Math.atan(s)*jM,scaleX:o,scaleY:u}},$M=go(function(t){return\"none\"===t?FM:(bM||(bM=document.createElement(\"DIV\"),_M=document.documentElement,xM=document.defaultView),bM.style.transform=t,t=xM.getComputedStyle(_M.appendChild(bM),null).getPropertyValue(\"transform\"),_M.removeChild(bM),t=t.slice(7,-1).split(\",\"),IM(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},\"px, \",\"px)\",\"deg)\"),BM=go(function(t){return null==t?FM:(wM||(wM=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\")),wM.setAttribute(\"transform\",t),(t=wM.transform.baseVal.consolidate())?(t=t.matrix,IM(t.a,t.b,t.c,t.d,t.e,t.f)):FM)},\", \",\")\",\")\"),WM=Math.SQRT2,YM=bo(so),HM=bo(co),GM=_o(so),XM=_o(co),VM=xo(so),JM=xo(co),ZM=Object.freeze({interpolate:qM,interpolateArray:DM,interpolateBasis:kM,interpolateBasisClosed:EM,interpolateDate:OM,interpolateNumber:NM,interpolateObject:TM,interpolateRound:UM,interpolateString:LM,interpolateTransformCss:$M,interpolateTransformSvg:BM,interpolateZoom:function(t,e){var n,r,i=t[0],a=t[1],o=t[2],u=e[0],s=e[1],f=e[2],c=u-i,l=s-a,h=c*c+l*l;if(h<1e-12)r=Math.log(f/o)/WM,n=function(t){return[i+t*c,a+t*l,o*Math.exp(WM*t*r)]};else{var d=Math.sqrt(h),p=(f*f-o*o+4*h)/(2*o*2*d),g=(f*f-o*o-4*h)/(2*f*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/WM,n=function(t){var e=t*r,n=vo(v),u=o/(2*d)*(n*yo(WM*e+v)-mo(v));return[i+u*c,a+u*l,o*n/vo(WM*e+v)]}}return n.duration=1e3*r,n},interpolateRgb:AM,interpolateRgbBasis:CM,interpolateRgbBasisClosed:zM,interpolateHsl:YM,interpolateHslLong:HM,interpolateLab:function(t,e){var n=co((t=Ga(t)).l,(e=Ga(e)).l),r=co(t.a,e.a),i=co(t.b,e.b),a=co(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+\"\"}},interpolateHcl:GM,interpolateHclLong:XM,interpolateCubehelix:VM,interpolateCubehelixLong:JM,quantize:function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}}),QM=function(t){return function(){return t}},KM=function(t){return+t},tk=[0,1],ek=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf(\"e\"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},nk=function(t){return(t=ek(Math.abs(t)))?t[1]:NaN},rk=function(t,e){return function(n,r){for(var i=n.length,a=[],o=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(e)}},ik=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}},ak=function(t,e){var n=ek(t,e);if(!n)return t+\"\";var r=n[0],i=n[1];return i<0?\"0.\"+new Array(-i).join(\"0\")+r:r.length>i+1?r.slice(0,i+1)+\".\"+r.slice(i+1):r+new Array(i-r.length+2).join(\"0\")},ok={\"\":function(t,e){t:for(var n,r=(t=t.toPrecision(e)).length,i=1,a=-1;i<r;++i)switch(t[i]){case\".\":a=n=i;break;case\"0\":0===a&&(a=i),n=i;break;case\"e\":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t},\"%\":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+\"\"},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ak(100*t,e)},r:ak,s:function(t,e){var n=ek(t,e);if(!n)return t+\"\";var r=n[0],i=n[1],a=i-(MM=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join(\"0\"):a>0?r.slice(0,a)+\".\"+r.slice(a):\"0.\"+new Array(1-a).join(\"0\")+ek(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},uk=/^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;zo.prototype=Do.prototype,Do.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(null==this.width?\"\":Math.max(1,0|this.width))+(this.comma?\",\":\"\")+(null==this.precision?\"\":\".\"+Math.max(0,0|this.precision))+this.type};var sk,fk,ck,lk=function(t){return t},hk=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"],dk=function(t){function e(t){function e(t){var e,r,o,c=v,_=m;if(\"c\"===g)_=y(t)+_,t=\"\";else{var x=(t=+t)<0;if(t=y(Math.abs(t),p),x&&0==+t&&(x=!1),c=(x?\"(\"===f?f:\"-\":\"-\"===f||\"(\"===f?\"\":f)+c,_=_+(\"s\"===g?hk[8+MM/3]:\"\")+(x&&\"(\"===f?\")\":\"\"),b)for(e=-1,r=t.length;++e<r;)if(48>(o=t.charCodeAt(e))||o>57){_=(46===o?i+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}d&&!l&&(t=n(t,1/0));var w=c.length+t.length+_.length,M=w<h?new Array(h-w+1).join(u):\"\";switch(d&&l&&(t=n(M+t,M.length?h-_.length:1/0),M=\"\"),s){case\"<\":t=c+t+_+M;break;case\"=\":t=c+M+t+_;break;case\"^\":t=M.slice(0,w=M.length>>1)+c+t+_+M.slice(w);break;default:t=M+c+t+_}return a(t)}var u=(t=zo(t)).fill,s=t.align,f=t.sign,c=t.symbol,l=t.zero,h=t.width,d=t.comma,p=t.precision,g=t.type,v=\"$\"===c?r[0]:\"#\"===c&&/[boxX]/.test(g)?\"0\"+g.toLowerCase():\"\",m=\"$\"===c?r[1]:/[%p]/.test(g)?o:\"\",y=ok[g],b=!g||/[defgprs%]/.test(g);return p=null==p?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+\"\"},e}var n=t.grouping&&t.thousands?rk(t.grouping,t.thousands):lk,r=t.currency,i=t.decimal,a=t.numerals?ik(t.numerals):lk,o=t.percent||\"%\";return{format:e,formatPrefix:function(t,n){var r=e((t=zo(t),t.type=\"f\",t)),i=3*Math.max(-8,Math.min(8,Math.floor(nk(n)/3))),a=Math.pow(10,-i),o=hk[8+i/3];return function(t){return r(a*t)+o}}}};Oo({decimal:\".\",thousands:\",\",grouping:[3],currency:[\"$\",\"\"]});var pk=function(t){return Math.max(0,-nk(Math.abs(t)))},gk=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(nk(e)/3)))-nk(Math.abs(t)))},vk=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,nk(e)-nk(t))+1},mk=function(t,e,n){var r,i=t[0],a=t[t.length-1],o=Te(i,a,null==e?10:e);switch((n=zo(null==n?\",f\":n)).type){case\"s\":var u=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=gk(o,u))||(n.precision=r),ck(n,u);case\"\":case\"e\":case\"g\":case\"p\":case\"r\":null!=n.precision||isNaN(r=vk(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-(\"e\"===n.type));break;case\"f\":case\"%\":null!=n.precision||isNaN(r=pk(o))||(n.precision=r-2*(\"%\"===n.type))}return fk(n)},yk=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t},bk=1e3,_k=60*bk,xk=60*_k,wk=24*xk,Mk=7*wk,kk=30*wk,Ek=365*wk,Sk=function(t){return t.match(/.{6}/g).map(function(t){return\"#\"+t})},Ak=Sk(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\"),Ck=Sk(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\"),zk=Sk(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\"),Dk=Sk(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");JM(ro(300,.5,0),ro(-240,.5,1));JM(ro(-100,.75,.35),ro(80,1.5,.8)),JM(ro(260,.75,.35),ro(80,1.5,.8)),ro();var Ok=Jo(Sk(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\")),Nk=Jo(Sk(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\")),Tk=Jo(Sk(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\")),Rk=Jo(Sk(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\")),Pk=Array.prototype.map,Lk=Array.prototype.slice,qk={identity:Ro,linear:To,log:Io,ordinal:Na,pow:Bo,sqrt:function(){return Bo().exponent(.5)},quantile:Wo,quantize:Yo,threshold:Ho,time:function(){return Vo(hy,ly,fy,sy,uy,oy,ay,ny,xy).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},utc:function(){return Vo(by,yy,vy,gy,py,dy,ay,ny,My).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},band:Zo,point:function(){return Qo(Zo().paddingInner(1))},sequential:nu,\"bin-linear\":tu,\"bin-ordinal\":eu};for(var Uk in qk)iu(Uk,qk[Uk]);var jk=au(\"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac\"),Fk=au(\"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5\"),Ik=new Array(3).concat(\"67a9cff7f7f7f1a340\",\"0571b092c5defdb863e66101\",\"0571b092c5def7f7f7fdb863e66101\",\"2166ac67a9cfd1e5f0fee0b6f1a340b35806\",\"2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806\",\"2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806\",\"2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806\",\"0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08\",\"0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08\").map(au),$k=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]=\"#\"+t.slice(6*r,6*++r);return n},Bk=$k(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\"),Wk=$k(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\"),Yk=$k(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\"),Hk=$k(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\"),Gk=$k(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\"),Xk=$k(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\"),Vk=$k(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\"),Jk=$k(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\"),Zk=function(t){return CM(t[t.length-1])},Qk=new Array(3).concat(\"d8b365f5f5f55ab4ac\",\"a6611adfc27d80cdc1018571\",\"a6611adfc27df5f5f580cdc1018571\",\"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\").map($k),Kk=Zk(Qk),tE=new Array(3).concat(\"af8dc3f7f7f77fbf7b\",\"7b3294c2a5cfa6dba0008837\",\"7b3294c2a5cff7f7f7a6dba0008837\",\"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\").map($k),eE=Zk(tE),nE=new Array(3).concat(\"e9a3c9f7f7f7a1d76a\",\"d01c8bf1b6dab8e1864dac26\",\"d01c8bf1b6daf7f7f7b8e1864dac26\",\"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\").map($k),rE=Zk(nE),iE=new Array(3).concat(\"998ec3f7f7f7f1a340\",\"5e3c99b2abd2fdb863e66101\",\"5e3c99b2abd2f7f7f7fdb863e66101\",\"542788998ec3d8daebfee0b6f1a340b35806\",\"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\").map($k),aE=Zk(iE),oE=new Array(3).concat(\"ef8a62f7f7f767a9cf\",\"ca0020f4a58292c5de0571b0\",\"ca0020f4a582f7f7f792c5de0571b0\",\"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\").map($k),uE=Zk(oE),sE=new Array(3).concat(\"ef8a62ffffff999999\",\"ca0020f4a582bababa404040\",\"ca0020f4a582ffffffbababa404040\",\"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\").map($k),fE=Zk(sE),cE=new Array(3).concat(\"fc8d59ffffbf91bfdb\",\"d7191cfdae61abd9e92c7bb6\",\"d7191cfdae61ffffbfabd9e92c7bb6\",\"d73027fc8d59fee090e0f3f891bfdb4575b4\",\"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\").map($k),lE=Zk(cE),hE=new Array(3).concat(\"fc8d59ffffbf91cf60\",\"d7191cfdae61a6d96a1a9641\",\"d7191cfdae61ffffbfa6d96a1a9641\",\"d73027fc8d59fee08bd9ef8b91cf601a9850\",\"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\").map($k),dE=Zk(hE),pE=new Array(3).concat(\"fc8d59ffffbf99d594\",\"d7191cfdae61abdda42b83ba\",\"d7191cfdae61ffffbfabdda42b83ba\",\"d53e4ffc8d59fee08be6f59899d5943288bd\",\"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\").map($k),gE=Zk(pE),vE=new Array(3).concat(\"e5f5f999d8c92ca25f\",\"edf8fbb2e2e266c2a4238b45\",\"edf8fbb2e2e266c2a42ca25f006d2c\",\"edf8fbccece699d8c966c2a42ca25f006d2c\",\"edf8fbccece699d8c966c2a441ae76238b45005824\",\"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\").map($k),mE=Zk(vE),yE=new Array(3).concat(\"e0ecf49ebcda8856a7\",\"edf8fbb3cde38c96c688419d\",\"edf8fbb3cde38c96c68856a7810f7c\",\"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\").map($k),bE=Zk(yE),_E=new Array(3).concat(\"e0f3dba8ddb543a2ca\",\"f0f9e8bae4bc7bccc42b8cbe\",\"f0f9e8bae4bc7bccc443a2ca0868ac\",\"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\").map($k),xE=Zk(_E),wE=new Array(3).concat(\"fee8c8fdbb84e34a33\",\"fef0d9fdcc8afc8d59d7301f\",\"fef0d9fdcc8afc8d59e34a33b30000\",\"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\").map($k),ME=Zk(wE),kE=new Array(3).concat(\"ece2f0a6bddb1c9099\",\"f6eff7bdc9e167a9cf02818a\",\"f6eff7bdc9e167a9cf1c9099016c59\",\"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\").map($k),EE=Zk(kE),SE=new Array(3).concat(\"ece7f2a6bddb2b8cbe\",\"f1eef6bdc9e174a9cf0570b0\",\"f1eef6bdc9e174a9cf2b8cbe045a8d\",\"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\").map($k),AE=Zk(SE),CE=new Array(3).concat(\"e7e1efc994c7dd1c77\",\"f1eef6d7b5d8df65b0ce1256\",\"f1eef6d7b5d8df65b0dd1c77980043\",\"f1eef6d4b9dac994c7df65b0dd1c77980043\",\"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\").map($k),zE=Zk(CE),DE=new Array(3).concat(\"fde0ddfa9fb5c51b8a\",\"feebe2fbb4b9f768a1ae017e\",\"feebe2fbb4b9f768a1c51b8a7a0177\",\"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\").map($k),OE=Zk(DE),NE=new Array(3).concat(\"edf8b17fcdbb2c7fb8\",\"ffffcca1dab441b6c4225ea8\",\"ffffcca1dab441b6c42c7fb8253494\",\"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\").map($k),TE=Zk(NE),RE=new Array(3).concat(\"f7fcb9addd8e31a354\",\"ffffccc2e69978c679238443\",\"ffffccc2e69978c67931a354006837\",\"ffffccd9f0a3addd8e78c67931a354006837\",\"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\").map($k),PE=Zk(RE),LE=new Array(3).concat(\"fff7bcfec44fd95f0e\",\"ffffd4fed98efe9929cc4c02\",\"ffffd4fed98efe9929d95f0e993404\",\"ffffd4fee391fec44ffe9929d95f0e993404\",\"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\").map($k),qE=Zk(LE),UE=new Array(3).concat(\"ffeda0feb24cf03b20\",\"ffffb2fecc5cfd8d3ce31a1c\",\"ffffb2fecc5cfd8d3cf03b20bd0026\",\"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\").map($k),jE=Zk(UE),FE=new Array(3).concat(\"deebf79ecae13182bd\",\"eff3ffbdd7e76baed62171b5\",\"eff3ffbdd7e76baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed63182bd08519c\",\"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\").map($k),IE=Zk(FE),$E=new Array(3).concat(\"e5f5e0a1d99b31a354\",\"edf8e9bae4b374c476238b45\",\"edf8e9bae4b374c47631a354006d2c\",\"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\").map($k),BE=Zk($E),WE=new Array(3).concat(\"f0f0f0bdbdbd636363\",\"f7f7f7cccccc969696525252\",\"f7f7f7cccccc969696636363252525\",\"f7f7f7d9d9d9bdbdbd969696636363252525\",\"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\").map($k),YE=Zk(WE),HE=new Array(3).concat(\"efedf5bcbddc756bb1\",\"f2f0f7cbc9e29e9ac86a51a3\",\"f2f0f7cbc9e29e9ac8756bb154278f\",\"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\").map($k),GE=Zk(HE),XE=new Array(3).concat(\"fee0d2fc9272de2d26\",\"fee5d9fcae91fb6a4acb181d\",\"fee5d9fcae91fb6a4ade2d26a50f15\",\"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\").map($k),VE=Zk(XE),JE=new Array(3).concat(\"fee6cefdae6be6550d\",\"feeddefdbe85fd8d3cd94701\",\"feeddefdbe85fd8d3ce6550da63603\",\"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\").map($k),ZE=Zk(JE),QE=Object.freeze({schemeAccent:Bk,schemeDark2:Wk,schemePaired:Yk,schemePastel1:Hk,schemePastel2:Gk,schemeSet1:Xk,schemeSet2:Vk,schemeSet3:Jk,interpolateBrBG:Kk,schemeBrBG:Qk,interpolatePRGn:eE,schemePRGn:tE,interpolatePiYG:rE,schemePiYG:nE,interpolatePuOr:aE,schemePuOr:iE,interpolateRdBu:uE,schemeRdBu:oE,interpolateRdGy:fE,schemeRdGy:sE,interpolateRdYlBu:lE,schemeRdYlBu:cE,interpolateRdYlGn:dE,schemeRdYlGn:hE,interpolateSpectral:gE,schemeSpectral:pE,interpolateBuGn:mE,schemeBuGn:vE,interpolateBuPu:bE,schemeBuPu:yE,interpolateGnBu:xE,schemeGnBu:_E,interpolateOrRd:ME,schemeOrRd:wE,interpolatePuBuGn:EE,schemePuBuGn:kE,interpolatePuBu:AE,schemePuBu:SE,interpolatePuRd:zE,schemePuRd:CE,interpolateRdPu:OE,schemeRdPu:DE,interpolateYlGnBu:TE,schemeYlGnBu:NE,interpolateYlGn:PE,schemeYlGn:RE,interpolateYlOrBr:qE,schemeYlOrBr:LE,interpolateYlOrRd:jE,schemeYlOrRd:UE,interpolateBlues:IE,schemeBlues:FE,interpolateGreens:BE,schemeGreens:$E,interpolateGreys:YE,schemeGreys:WE,interpolatePurples:GE,schemePurples:HE,interpolateReds:VE,schemeReds:XE,interpolateOranges:ZE,schemeOranges:JE}),KE={blueorange:Ik},tS={category10:Ak,category20:Dk,category20b:Ck,category20c:zk,accent:Bk,dark2:Wk,paired:Yk,pastel1:Hk,pastel2:Gk,set1:Xk,set2:Vk,set3:Jk,tableau10:jk,tableau20:Fk,viridis:Ok,magma:Nk,inferno:Tk,plasma:Rk,blueorange:CM(ym(Ik))};ou(\"blues\",\"Blues\"),ou(\"greens\",\"Greens\"),ou(\"greys\",\"Greys\"),ou(\"purples\",\"Purples\"),ou(\"reds\",\"Reds\"),ou(\"oranges\",\"Oranges\"),ou(\"brownbluegreen\",\"BrBG\"),ou(\"purplegreen\",\"PRGn\"),ou(\"pinkyellowgreen\",\"PiYG\"),ou(\"purpleorange\",\"PuOr\"),ou(\"redblue\",\"RdBu\"),ou(\"redgrey\",\"RdGy\"),ou(\"redyellowblue\",\"RdYlBu\"),ou(\"redyellowgreen\",\"RdYlGn\"),ou(\"spectral\",\"Spectral\"),ou(\"bluegreen\",\"BuGn\"),ou(\"bluepurple\",\"BuPu\"),ou(\"greenblue\",\"GnBu\"),ou(\"orangered\",\"OrRd\"),ou(\"purplebluegreen\",\"PuBuGn\"),ou(\"purpleblue\",\"PuBu\"),ou(\"purplered\",\"PuRd\"),ou(\"redpurple\",\"RdPu\"),ou(\"yellowgreenblue\",\"YlGnBu\"),ou(\"yellowgreen\",\"YlGn\"),ou(\"yelloworangebrown\",\"YlOrBr\"),ou(\"yelloworangered\",\"YlOrRd\");var eS=function(t,e){if(arguments.length>1)return tS[t]=e,this;var n=t.split(\"-\");return t=n[0],(n=+n[1]+1)&&KE.hasOwnProperty(t)?KE[t][n-1]:!n&&tS.hasOwnProperty(t)?tS[t]:void 0},nS={millisecond:ny,second:ay,minute:oy,hour:uy,day:sy,week:fy,month:ly,year:hy},rS={millisecond:ny,second:ay,minute:dy,hour:py,day:gy,week:vy,month:yy,year:by};fm(wu,be).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,a=t.values?t.values.length:pu(i,t.count),o=t.format||mu(i,a,t.formatSpecifier),u=t.values?gu(i,t.values):vu(i,a);return r&&(n.rem=r),r=u.map(function(t){return c({value:t,label:o(t)})}),t.extra&&r.push(c({extra:{value:r[0].value},label:\"\"})),n.source=r,n.add=r,this.value=r,n},fm(Mu,be).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||ku,a=t.key||s,o=this.value;return jv(r.encode)&&(r.encode=null),o||(e=e.addAll(),this.value=o=sm().test(Eu),o.lookup=function(t){return o.get(a(t))}),(t.modified(\"key\")||e.modified(a))&&qv(\"DataJoin does not support modified key function or fields.\"),e.visit(e.ADD,function(t){var e=a(t),n=o.get(e);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(e,n=i(t)),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,function(t){var e=a(t),n=o.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,function(t){var e=a(t),n=o.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&r.modifies(\"datum\"),t.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},fm(Su,be).transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.encoders,i=e.encode;if(jv(i)){if(!n.changed()&&!i.every(function(t){return r[t]}))return e.StopPropagation;i=i[0]}var a=\"enter\"===i,o=r.update||Vv,u=r.enter||Vv,s=r.exit||Vv,f=(i&&!a?r[i]:o)||Vv;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(e){u(e,t),o(e,t),f!==Vv&&f!==o&&f(e,t)}),n.modifies(u.output),n.modifies(o.output),f!==Vv&&f!==o&&n.modifies(f.output)),e.changed(e.REM)&&s!==Vv&&(e.visit(e.REM,function(e){s(e,t)}),n.modifies(s.output)),a||f!==Vv){var c=e.MOD|(t.modified()?e.REFLOW:0);a?(e.visit(c,function(e){var r=u(e,t);(f(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(u.output)):e.visit(c,function(e){f(e,t)&&n.mod.push(e)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:e.StopPropagation};var iS={};iS[Ow]=function(t){var e=[-1/0].concat(t.quantiles());return e.max=1/0,e},iS[Nw]=function(t){var e=t.domain(),n=e[0],r=ym(e),i=t.range().length,a=new Array(i),o=0;for(a[0]=-1/0;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=1/0,a},iS[Tw]=function(t){var e=[-1/0].concat(t.domain());return e.max=1/0,e},iS[\"bin-linear\"]=Cu,iS[Rw]=Cu,fm(Tu,be).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=0,i=this.value,a=\"gradient\"===t.type,o=t.scale,u=null==t.count?5:pu(o,t.count),s=t.format||mu(o,u,t.formatSpecifier),f=t.values||Au(o,u,a);if(s=zu(o,s),i&&(n.rem=i),a)var l=t.values?o.domain():f,h=su(o,l[0],ym(l));else{var d,p=t.size;em(p)?(t.values||0!==o(f[0])||(f=f.slice(1)),d=f.reduce(function(e,n){return Math.max(e,p(n,t))},0)):p=rm(d=p||8)}return i=f.map(function(e,n){var i=c({index:n,label:s(e,n,f),value:e});return a?i.perc=h(e):(i.offset=d,i.size=p(e,t),i.total=Math.round(r),r+=i.size),i}),n.source=i,n.add=i,this.value=i,n};var aS=sm({line:ju,\"line-radial\":function(t,e,n,r){return ju(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:Fu,\"arc-radial\":function(t,e,n,r){return Fu(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:Iu,\"curve-radial\":function(t,e,n,r){return Iu(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},\"orthogonal-horizontal\":function(t,e,n,r){return\"M\"+t+\",\"+e+\"V\"+r+\"H\"+n},\"orthogonal-vertical\":function(t,e,n,r){return\"M\"+t+\",\"+e+\"H\"+n+\"V\"+r},\"orthogonal-radial\":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),u=Math.sin(n);return\"M\"+e*i+\",\"+e*a+\"A\"+e+\",\"+e+\" 0 0,\"+((Math.abs(n-t)>Math.PI?n<=t:n>t)?1:0)+\" \"+e*o+\",\"+e*u+\"L\"+r*o+\",\"+r*u},\"diagonal-horizontal\":function(t,e,n,r){var i=(t+n)/2;return\"M\"+t+\",\"+e+\"C\"+i+\",\"+e+\" \"+i+\",\"+r+\" \"+n+\",\"+r},\"diagonal-vertical\":function(t,e,n,r){var i=(e+r)/2;return\"M\"+t+\",\"+e+\"C\"+t+\",\"+i+\" \"+n+\",\"+i+\" \"+n+\",\"+r},\"diagonal-radial\":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),u=Math.sin(n),s=(e+r)/2;return\"M\"+e*i+\",\"+e*a+\"C\"+s*i+\",\"+s*a+\" \"+s*o+\",\"+s*u+\" \"+r*o+\",\"+r*u}});Uu.Definition={type:\"LinkPath\",metadata:{modifies:!0},params:[{name:\"sourceX\",type:\"field\",default:\"source.x\"},{name:\"sourceY\",type:\"field\",default:\"source.y\"},{name:\"targetX\",type:\"field\",default:\"target.x\"},{name:\"targetY\",type:\"field\",default:\"target.y\"},{name:\"orient\",type:\"enum\",default:\"vertical\",values:[\"horizontal\",\"vertical\",\"radial\"]},{name:\"shape\",type:\"enum\",default:\"line\",values:[\"line\",\"arc\",\"curve\",\"diagonal\",\"orthogonal\"]},{name:\"as\",type:\"string\",default:\"path\"}]},fm(Uu,be).transform=function(t,e){var n=t.sourceX||Ru,r=t.sourceY||Pu,i=t.targetX||Lu,a=t.targetY||qu,o=t.as||\"path\",u=t.orient||\"vertical\",s=t.shape||\"line\",f=aS.get(s+\"-\"+u)||aS.get(s);return f||qv(\"LinkPath unsupported type: \"+t.shape+(t.orient?\"-\"+t.orient:\"\")),e.visit(e.SOURCE,function(t){t[o]=f(n(t),r(t),i(t),a(t))}),e.reflow(t.modified()).modifies(o)},$u.Definition={type:\"Pie\",metadata:{modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"startAngle\",type:\"number\",default:0},{name:\"endAngle\",type:\"number\",default:6.283185307179586},{name:\"sort\",type:\"boolean\",default:!1},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"startAngle\",\"endAngle\"]}]},fm($u,be).transform=function(t,e){var n,r,i,a=t.as||[\"startAngle\",\"endAngle\"],o=a[0],u=a[1],s=t.field||Gv,f=t.startAngle||0,c=null!=t.endAngle?t.endAngle:2*Math.PI,l=e.source,h=l.map(s),d=h.length,p=f,g=(c-f)/ub(h),v=Zy(d);for(t.sort&&v.sort(function(t,e){return h[t]-h[e]}),n=0;n<d;++n)i=h[v[n]],(r=l[v[n]])[o]=p,r[u]=p+=i*g;return this.value=h,e.reflow(t.modified()).modifies(a)};var oS=5,uS=Mm([\"linear\",\"pow\",\"sqrt\"]),sS=Mm([\"set\",\"modified\",\"clear\",\"type\",\"scheme\",\"schemeExtent\",\"schemeCount\",\"domain\",\"domainMin\",\"domainMid\",\"domainMax\",\"domainRaw\",\"nice\",\"zero\",\"range\",\"rangeStep\",\"round\",\"reverse\",\"interpolate\",\"interpolateGamma\"]);fm(Bu,be).transform=function(t,e){var n,r=e.dataflow,i=this.value;i&&!t.modified(\"type\")||(this.value=i=iu((t.type||\"linear\").toLowerCase())());for(n in t)sS[n]||(em(i[n])?i[n](t[n]):r.warn(\"Unsupported scale property: \"+n));return Hu(i,t,Wu(i,t,r)),e.fork(e.NO_SOURCE|e.NO_FIELDS)},fm(Qu,be).transform=function(t,e){var n=t.modified(\"sort\")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified(\"datum\");return n&&e.source.sort(t.sort),this.modified(n),e};Ku.Definition={type:\"Stack\",metadata:{modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"groupby\",type:\"field\",array:!0},{name:\"sort\",type:\"compare\"},{name:\"offset\",type:\"enum\",default:\"zero\",values:[\"zero\",\"center\",\"normalize\"]},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"y0\",\"y1\"]}]},fm(Ku,be).transform=function(t,e){var n,r,i,a,o=t.as||[\"y0\",\"y1\"],u=o[0],s=o[1],f=t.field||Gv,c=\"center\"===t.offset?ts:\"normalize\"===t.offset?es:ns;for(r=0,i=(n=rs(e.source,t.groupby,t.sort,f)).length,a=n.max;r<i;++r)c(n[r],a,f,u,s);return e.reflow(t.modified()).modifies(o)};var fS=Object.freeze({axisticks:wu,datajoin:Mu,encode:Su,legendentries:Tu,linkpath:Uu,pie:$u,scale:Bu,sortitems:Qu,stack:Ku}),cS=Array.prototype.slice,lS=function(t,e){return t-e},hS=function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r},dS=function(t){return function(){return t}},pS=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=is(t,e[r]))return n;return 0},gS=function(){},vS=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,.5],[.5,1]],[[1,1.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,1.5]],[[1.5,1],[1,.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],mS=function(){function t(t){var n=o(t);if(Array.isArray(n))n=n.slice().sort(lS);else{var r=Jy(t),i=r[0],a=r[1];n=Te(i,a,n),n=Zy(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){var r=[],i=[];return e(t,n,function(e){u(e,t,n),hS(e)>0?r.push([e]):i.push(e)}),i.forEach(function(t){for(var e,n=0,i=r.length;n<i;++n)if(-1!==pS((e=r[n])[0],t))return void e.push(t)}),r}).map(function(t,e){return{type:\"MultiPolygon\",value:n[e],coordinates:t}})}function e(t,e,r){function o(t){var e,i,a=[t[0][0]+u,t[0][1]+s],o=[t[1][0]+u,t[1][1]+s],f=n(a),c=n(o);(e=p[f])?(i=d[c])?(delete p[e.end],delete d[i.start],e===i?(e.ring.push(o),r(e.ring)):d[e.start]=p[i.end]={start:e.start,end:i.end,ring:e.ring.concat(i.ring)}):(delete p[e.end],e.ring.push(o),p[e.end=c]=e):(e=d[c])?(i=p[f])?(delete d[e.start],delete p[i.end],e===i?(e.ring.push(o),r(e.ring)):d[i.start]=p[e.end]={start:i.start,end:e.end,ring:i.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(a),d[e.start=f]=e):d[f]=p[c]={start:f,end:c,ring:[a,o]}}var u,s,f,c,l,h,d=new Array,p=new Array;for(u=s=-1,c=t[0]>=e,vS[c<<1].forEach(o);++u<i-1;)f=c,c=t[u+1]>=e,vS[f|c<<1].forEach(o);for(vS[c<<0].forEach(o);++s<a-1;){for(u=-1,c=t[s*i+i]>=e,l=t[s*i]>=e,vS[c<<1|l<<2].forEach(o);++u<i-1;)f=c,c=t[s*i+i+u+1]>=e,h=l,l=t[s*i+u+1]>=e,vS[f|c<<1|l<<2|h<<3].forEach(o);vS[c|l<<3].forEach(o)}for(u=-1,l=t[s*i]>=e,vS[l<<2].forEach(o);++u<i-1;)h=l,l=t[s*i+u+1]>=e,vS[l<<2|h<<3].forEach(o);vS[l<<3].forEach(o)}function n(t){return 2*t[0]+t[1]*(i+1)*4}function r(t,e,n){t.forEach(function(t){var r,o=t[0],u=t[1],s=0|o,f=0|u,c=e[f*i+s];o>0&&o<i&&s===o&&(r=e[f*i+s-1],t[0]=o+(n-r)/(c-r)-.5),u>0&&u<a&&f===u&&(r=e[(f-1)*i+s],t[1]=u+(n-r)/(c-r)-.5)})}var i=1,a=1,o=nb,u=r;return t.size=function(e){if(!arguments.length)return[i,a];var n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!(n>0&&r>0))throw new Error(\"invalid size\");return i=n,a=r,t},t.thresholds=function(e){return arguments.length?(o=\"function\"==typeof e?e:dS(Array.isArray(e)?cS.call(e):e),t):o},t.smooth=function(e){return arguments.length?(u=e?r:gS,t):u===r},t},yS=function(){function t(t){var n=new Float32Array(d*p),r=new Float32Array(d*p);t.forEach(function(t,e,r){var i=o(t,e,r)+h>>l,a=u(t,e,r)+h>>l;i>=0&&i<d&&a>=0&&a<p&&++n[i+a*d]}),ss({width:d,height:p,data:n},{width:d,height:p,data:r},c>>l),fs({width:d,height:p,data:r},{width:d,height:p,data:n},c>>l),ss({width:d,height:p,data:n},{width:d,height:p,data:r},c>>l),fs({width:d,height:p,data:r},{width:d,height:p,data:n},c>>l),ss({width:d,height:p,data:n},{width:d,height:p,data:r},c>>l),fs({width:d,height:p,data:r},{width:d,height:p,data:n},c>>l);var i=g(n);if(!Array.isArray(i)){var a=ib(n);i=Te(0,a,i),(i=Zy(0,Math.floor(a/i)*i,i)).shift()}return mS().thresholds(i).size([d,p])(n).map(e)}function e(t){return t.value*=Math.pow(2,-2*l),t.coordinates.forEach(n),t}function n(t){t.forEach(r)}function r(t){t.forEach(i)}function i(t){t[0]=t[0]*Math.pow(2,l)-h,t[1]=t[1]*Math.pow(2,l)-h}function a(){return h=3*c,d=s+2*h>>l,p=f+2*h>>l,t}var o=cs,u=ls,s=960,f=500,c=20,l=2,h=3*c,d=s+2*h>>l,p=f+2*h>>l,g=dS(20);return t.x=function(e){return arguments.length?(o=\"function\"==typeof e?e:dS(+e),t):o},t.y=function(e){return arguments.length?(u=\"function\"==typeof e?e:dS(+e),t):u},t.size=function(t){if(!arguments.length)return[s,f];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error(\"invalid size\");return s=e,f=n,a()},t.cellSize=function(t){if(!arguments.length)return 1<<l;if(!((t=+t)>=1))throw new Error(\"invalid cell size\");return l=Math.floor(Math.log(t)/Math.LN2),a()},t.thresholds=function(e){return arguments.length?(g=\"function\"==typeof e?e:dS(Array.isArray(e)?cS.call(e):e),t):g},t.bandwidth=function(t){if(!arguments.length)return Math.sqrt(c*(c+1));if(!((t=+t)>=0))throw new Error(\"invalid bandwidth\");return c=Math.round((Math.sqrt(4*t*t+1)-1)/2),a()},t},bS=[\"values\",\"size\"],_S=[\"x\",\"y\",\"size\",\"cellSize\",\"bandwidth\"];hs.Definition={type:\"Contour\",metadata:{generates:!0,source:!0},params:[{name:\"size\",type:\"number\",array:!0,length:2,required:!0},{name:\"values\",type:\"number\",array:!0},{name:\"x\",type:\"field\"},{name:\"y\",type:\"field\"},{name:\"cellSize\",type:\"number\"},{name:\"bandwidth\",type:\"number\"},{name:\"count\",type:\"number\"},{name:\"nice\",type:\"number\",default:!1},{name:\"thresholds\",type:\"number\",array:!0}]},fm(hs,be).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i,a=e.fork(e.NO_SOURCE|e.NO_FIELDS),o=t.count||10;return t.values?(n=mS(),r=bS,i=t.values):(n=yS(),r=_S,i=e.materialize(e.SOURCE).source),n.thresholds(t.thresholds||(t.nice?o:ds(o))),r.forEach(function(e){null!=t[e]&&n[e](t[e])}),this.value&&(a.rem=this.value),this.value=a.source=a.add=n(i).map(c),a};var xS=\"FeatureCollection\";ps.Definition={type:\"GeoJSON\",metadata:{},params:[{name:\"fields\",type:\"field\",array:!0,length:2},{name:\"geojson\",type:\"field\"}]},fm(ps,be).transform=function(t,e){var r,i=this._features,a=this._points,o=t.fields,u=o&&o[0],s=o&&o[1],f=t.geojson,c=e.ADD;r=t.modified()||e.changed(e.REM)||e.modified(n(f))||u&&e.modified(n(u))||s&&e.modified(n(s)),this.value&&!r||(c=e.SOURCE,this._features=i=[],this._points=a=[]),f&&e.visit(c,function(t){i.push(f(t))}),u&&s&&(e.visit(c,function(t){var e=u(t),n=s(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&a.push([e,n])}),i=i.concat({type:\"Feature\",geometry:{type:\"MultiPoint\",coordinates:a}})),this.value={type:xS,features:i}};var wS=function(){return new gs};gs.prototype={constructor:gs,reset:function(){this.s=this.t=0},add:function(t){vs(MS,t,this.t),vs(this,MS.s,this.s),this.s?this.t+=MS.t:this.s=MS.t},valueOf:function(){return this.s}};var MS=new gs,kS=1e-6,ES=Math.PI,SS=ES/2,AS=ES/4,CS=2*ES,zS=180/ES,DS=ES/180,OS=Math.abs,NS=Math.atan,TS=Math.atan2,RS=Math.cos,PS=Math.ceil,LS=Math.exp,qS=Math.log,US=Math.pow,jS=Math.sin,FS=Math.sign||function(t){return t>0?1:t<0?-1:0},IS=Math.sqrt,$S=Math.tan,BS={Feature:function(t,e){_s(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)_s(n[r].geometry,e)}},WS={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){xs(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)xs(n[r],e,0)},Polygon:function(t,e){ws(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ws(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)_s(n[r],e)}},YS=function(t,e){t&&BS.hasOwnProperty(t.type)?BS[t.type](t,e):_s(t,e)},HS=(wS(),wS(),wS(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n});Ds.invert=Ds;var GS,XS,VS,JS,ZS,QS,KS,tA,eA,nA,rA,iA=function(t){function e(e){return e=t(e[0]*DS,e[1]*DS),e[0]*=zS,e[1]*=zS,e}return t=Os(t[0]*DS,t[1]*DS,t.length>2?t[2]*DS:0),e.invert=function(e){return e=t.invert(e[0]*DS,e[1]*DS),e[0]*=zS,e[1]*=zS,e},e},aA=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:bs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},oA=function(t,e,n,r,i,a){var o,u=t[0],s=t[1],f=0,c=1,l=e[0]-u,h=e[1]-s;if(o=n-u,l||!(o>0)){if(o/=l,l<0){if(o<f)return;o<c&&(c=o)}else if(l>0){if(o>c)return;o>f&&(f=o)}if(o=i-u,l||!(o<0)){if(o/=l,l<0){if(o>c)return;o>f&&(f=o)}else if(l>0){if(o<f)return;o<c&&(c=o)}if(o=r-s,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>f&&(f=o)}if(o=a-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<c&&(c=o)}return f>0&&(t[0]=u+f*l,t[1]=s+f*h),c<1&&(e[0]=u+c*l,e[1]=s+c*h),!0}}}}},uA=function(t,e){return OS(t[0]-e[0])<kS&&OS(t[1]-e[1])<kS},sA=function(t,e,n,r,i){var a,o,u=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(uA(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);i.lineEnd()}else u.push(n=new qs(r,t,null,!0)),s.push(n.o=new qs(r,null,n,!1)),u.push(n=new qs(o,t,null,!1)),s.push(n.o=new qs(o,null,n,!0))}}),u.length){for(s.sort(e),Us(u),Us(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,c,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=f.length;a<o;++a)i.point((c=f[a])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}f=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}},fA=1e9,cA=-fA,lA=wS(),hA=function(t,e){var n=e[0],r=e[1],i=[jS(n),-RS(n),0],a=0,o=0;lA.reset();for(var u=0,s=t.length;u<s;++u)if(c=(f=t[u]).length)for(var f,c,l=f[c-1],h=l[0],d=l[1]/2+AS,p=jS(d),g=RS(d),v=0;v<c;++v,h=y,p=_,g=x,l=m){var m=f[v],y=m[0],b=m[1]/2+AS,_=jS(b),x=RS(b),w=y-h,M=w>=0?1:-1,k=M*w,E=k>ES,S=p*_;if(lA.add(TS(S*M*jS(k),g*x+S*RS(k))),a+=E?w+M*CS:w,E^h>=n^y>=n){var A=Ss(ks(l),ks(m));zs(A);var C=Ss(i,A);zs(C);var z=(E^w>=0?-1:1)*ys(C[2]);(r>z||r===z&&(A[0]||A[1]))&&(o+=E^w>=0?1:-1)}}return(a<-kS||a<kS&&lA<-kS)^1&o},dA=wS(),pA={sphere:bs,point:bs,lineStart:function(){pA.point=Is,pA.lineEnd=Fs},lineEnd:bs,polygonStart:bs,polygonEnd:bs},gA=function(t){return dA.reset(),YS(t,pA),+dA},vA=[null,null],mA={type:\"LineString\",coordinates:vA},yA=function(t){return t},bA=wS(),_A=wS(),xA={point:bs,lineStart:bs,lineEnd:bs,polygonStart:function(){xA.lineStart=Hs,xA.lineEnd=Vs},polygonEnd:function(){xA.lineStart=xA.lineEnd=xA.point=bs,bA.add(OS(_A)),_A.reset()},result:function(){var t=bA/2;return bA.reset(),t}},wA=1/0,MA=wA,kA=-wA,EA=kA,SA={point:function(t,e){t<wA&&(wA=t),t>kA&&(kA=t),e<MA&&(MA=e),e>EA&&(EA=e)},lineStart:bs,lineEnd:bs,polygonStart:bs,polygonEnd:bs,result:function(){var t=[[wA,MA],[kA,EA]];return kA=EA=-(MA=wA=1/0),t}},AA=0,CA=0,zA=0,DA=0,OA=0,NA=0,TA=0,RA=0,PA=0,LA={point:Js,lineStart:Zs,lineEnd:tf,polygonStart:function(){LA.lineStart=ef,LA.lineEnd=nf},polygonEnd:function(){LA.point=Js,LA.lineStart=Zs,LA.lineEnd=tf},result:function(){var t=PA?[TA/PA,RA/PA]:NA?[DA/NA,OA/NA]:zA?[AA/zA,CA/zA]:[NaN,NaN];return AA=CA=zA=DA=OA=NA=TA=RA=PA=0,t}};of.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,CS)}},result:bs};var qA,UA,jA,FA,IA,$A=wS(),BA={point:bs,lineStart:function(){BA.point=uf},lineEnd:function(){qA&&sf(UA,jA),BA.point=bs},polygonStart:function(){qA=!0},polygonEnd:function(){qA=null},result:function(){var t=+$A;return $A.reset(),t}};ff.prototype={_radius:4.5,_circle:cf(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push(\"Z\"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push(\"M\",t,\",\",e),this._point=1;break;case 1:this._string.push(\"L\",t,\",\",e);break;default:null==this._circle&&(this._circle=cf(this._radius)),this._string.push(\"M\",t,\",\",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join(\"\");return this._string=[],t}return null}};var WA=function(t,e){function n(t){return t&&(\"function\"==typeof a&&i.pointRadius(+a.apply(this,arguments)),YS(t,r(i))),i.result()}var r,i,a=4.5;return n.area=function(t){return YS(t,r(xA)),xA.result()},n.measure=function(t){return YS(t,r(BA)),BA.result()},n.bounds=function(t){return YS(t,r(SA)),SA.result()},n.centroid=function(t){return YS(t,r(LA)),LA.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,yA):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new ff):new of(e=t),\"function\"!=typeof a&&i.pointRadius(a),n):e},n.pointRadius=function(t){return arguments.length?(a=\"function\"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(t).context(e)},YA=function(t,e,n,r){return function(i,a){function o(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function u(t,e){var n=i(t,e);v.point(n[0],n[1])}function s(){x.point=u,v.lineStart()}function f(){x.point=o,v.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function l(){b.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),b.lineEnd();var t,e,n,r,i=b.clean(),o=y.result(),u=o.length;if(g.pop(),d.push(g),g=null,u)if(1&i){if(n=o[0],(e=n.length-1)>0){for(_||(a.polygonStart(),_=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else u>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(lf))}var d,p,g,v=e(a),m=i.invert(r[0],r[1]),y=aA(),b=e(y),_=!1,x={point:o,lineStart:s,lineEnd:f,polygonStart:function(){x.point=c,x.lineStart=l,x.lineEnd=h,p=[],d=[]},polygonEnd:function(){x.point=o,x.lineStart=s,x.lineEnd=f,p=ab(p);var t=hA(d,m);p.length?(_||(a.polygonStart(),_=!0),sA(p,hf,t,n,a)):t&&(_||(a.polygonStart(),_=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),_&&(a.polygonEnd(),_=!1),p=d=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return x}},HA=YA(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var u=a>0?ES:-ES,s=OS(a-n);OS(s-ES)<kS?(t.point(n,r=(r+o)/2>0?SS:-SS),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),e=0):i!==u&&s>=ES&&(OS(n-i)<kS&&(n-=i*kS),OS(a-u)<kS&&(a-=u*kS),r=df(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=a,r=o),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*SS,r.point(-ES,i),r.point(0,i),r.point(ES,i),r.point(ES,0),r.point(ES,-i),r.point(0,-i),r.point(-ES,-i),r.point(-ES,0),r.point(-ES,i);else if(OS(t[0]-e[0])>kS){var a=t[0]<e[0]?ES:-ES;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-ES,-SS]),GA=function(t,e){function n(t,e){return RS(t)*RS(e)>a}function r(t,e,n){var r=[1,0,0],i=Ss(ks(t),ks(e)),o=Es(i,i),u=i[0],s=o-u*u;if(!s)return!n&&t;var f=a*o/s,c=-a*u/s,l=Ss(r,i),h=Cs(r,f);As(h,Cs(i,c));var d=l,p=Es(h,d),g=Es(d,d),v=p*p-g*(Es(h,h)-1);if(!(v<0)){var m=IS(v),y=Cs(d,(-p-m)/g);if(As(y,h),y=Ms(y),!n)return y;var b,_=t[0],x=e[0],w=t[1],M=e[1];x<_&&(b=_,_=x,x=b);var k=x-_,E=OS(k-ES)<kS,S=E||k<kS;if(!E&&M<w&&(b=w,w=M,M=b),S?E?w+M>0^y[1]<(OS(y[0]-_)<kS?w:M):w<=y[1]&&y[1]<=M:k>ES^(_<=y[0]&&y[0]<=x)){var A=Cs(d,(-p+m)/g);return As(A,h),[y,Ms(A)]}}}function i(e,n){var r=o?t:ES-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=RS(t),o=a>0,u=OS(a)>kS;return YA(n,function(t){var e,a,s,f,c;return{lineStart:function(){f=s=!1,c=1},point:function(l,h){var d,p=[l,h],g=n(l,h),v=o?g?0:i(l,h):g?i(l+(l<0?ES:-ES),h):0;if(!e&&(f=s=g)&&t.lineStart(),g!==s&&(!(d=r(e,p))||uA(e,d)||uA(p,d))&&(p[0]+=kS,p[1]+=kS,g=n(p[0],p[1])),g!==s)c=0,g?(t.lineStart(),d=r(p,e),t.point(d[0],d[1])):(d=r(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(u&&e&&o^g){var m;v&a||!(m=r(p,e,!0))||(c=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&uA(e,p)||t.point(p[0],p[1]),e=p,s=g,a=v},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return c|(f&&s)<<1}}},function(n,r,i,a){Ps(a,t,e,i,n,r)},o?[0,-t]:[-ES,t-ES])};gf.prototype={constructor:gf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var XA=16,VA=RS(30*DS),JA=function(t,e){return+e?bf(t,e):yf(t)},ZA=pf({point:function(t,e){this.stream.point(t*DS,e*DS)}}),QA=function(){return wf(kf).scale(155.424).center([0,33.6442])},KA=function(){return QA().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},tC=Sf(function(t){return IS(2/(1+t))});tC.invert=Af(function(t){return 2*ys(t/2)});var eC=Sf(function(t){return(t=ms(t))&&t/jS(t)});eC.invert=Af(function(t){return t});Cf.invert=function(t,e){return[t,2*NS(LS(e))-SS]};Nf.invert=Nf;Rf.invert=Af(NS);Pf.invert=Af(ys);Lf.invert=Af(function(t){return 2*NS(t)});qf.invert=function(t,e){return[-e,2*NS(LS(t))-SS]};var nC=WA(),rC=[\"clipAngle\",\"clipExtent\",\"scale\",\"translate\",\"center\",\"rotate\",\"parallels\",\"precision\",\"coefficient\",\"distance\",\"fraction\",\"lobes\",\"parallel\",\"radius\",\"ratio\",\"spacing\",\"tilt\"],iC={albers:KA,albersusa:function(){function t(t){var e=t[0],n=t[1];return u=null,i.point(e,n),u||(a.point(e,n),u)||(o.point(e,n),u)}function e(){return n=r=null,t}var n,r,i,a,o,u,s=KA(),f=QA().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=QA().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){u=[t,e]}};return t.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:s).invert(t)},t.stream=function(t){return n&&r===t?n:n=Ef([s.stream(r=t),f.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(s.precision(t),f.precision(t),c.precision(t),e()):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),f.scale(.35*e),c.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(t){if(!arguments.length)return s.translate();var n=s.scale(),r=+t[0],u=+t[1];return i=s.translate(t).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(l),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+kS,u+.12*n+kS],[r-.214*n-kS,u+.234*n-kS]]).stream(l),o=c.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+kS,u+.166*n+kS],[r-.115*n-kS,u+.234*n-kS]]).stream(l),e()},t.fitExtent=function(e,n){return vf(t,e,n)},t.fitSize=function(e,n){return mf(t,e,n)},t.scale(1070)},azimuthalequalarea:function(){return _f(tC).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return _f(eC).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return wf(Of).scale(109.5).parallels([30,30])},conicequalarea:QA,conicequidistant:function(){return wf(Tf).scale(131.154).center([0,13.9389])},equirectangular:function(){return _f(Nf).scale(152.63)},gnomonic:function(){return _f(Rf).scale(144.049).clipAngle(60)},mercator:function(){return zf(Cf).scale(961/CS)},orthographic:function(){return _f(Pf).scale(249.5).clipAngle(90+kS)},stereographic:function(){return _f(Lf).scale(250).clipAngle(142)},transversemercator:function(){var t=zf(qf),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}};for(var aC in iC)jf(aC,iC[aC]);If.Definition={type:\"GeoPath\",metadata:{modifies:!0},params:[{name:\"projection\",type:\"projection\"},{name:\"field\",type:\"field\"},{name:\"as\",type:\"string\",default:\"path\"}]},fm(If,be).transform=function(t,e){function n(t){t[u]=a(o(t))}var r,i=e.fork(e.ALL),a=this.value,o=t.field||Yv,u=t.as||\"path\";return!a||t.modified()?(this.value=a=Ff(t.projection).context(null),i.materialize().reflow().visit(i.SOURCE,n)):(a.context(null),r=o===Yv||e.modified(o.fields),i.visit(r?i.ADD_MOD:i.ADD,n)),i.modifies(u)},$f.Definition={type:\"GeoPoint\",metadata:{modifies:!0},params:[{name:\"projection\",type:\"projection\",required:!0},{name:\"fields\",type:\"field\",array:!0,required:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:2,default:[\"x\",\"y\"]}]},fm($f,be).transform=function(t,e){function n(t){var e=i([a(t),o(t)]);e?(t[s]=e[0],t[f]=e[1]):(t[s]=void 0,t[f]=void 0)}var r,i=t.projection,a=t.fields[0],o=t.fields[1],u=t.as||[\"x\",\"y\"],s=u[0],f=u[1];return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,n):(r=e.modified(a.fields)||e.modified(o.fields),e.visit(r?e.ADD_MOD:e.ADD,n)),e.modifies(u)},Bf.Definition={type:\"GeoShape\",metadata:{modifies:!0},params:[{name:\"projection\",type:\"projection\"},{name:\"field\",type:\"field\",default:\"datum\"},{name:\"as\",type:\"string\",default:\"shape\"}]},fm(Bf,be).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||$v(\"datum\"),a=t.as||\"shape\",o=n.ADD_MOD;return r&&!t.modified()||(this.value=r=Wf(Ff(t.projection),i),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(t){t[a]=r}),n.modifies(a)},Yf.Definition={type:\"Graticule\",metadata:{source:!0,generates:!0,changes:!0},params:[{name:\"extent\",type:\"array\",array:!0,length:2,content:{type:\"number\",array:!0,length:2}},{name:\"extentMajor\",type:\"array\",array:!0,length:2,content:{type:\"number\",array:!0,length:2}},{name:\"extentMinor\",type:\"array\",array:!0,length:2,content:{type:\"number\",array:!0,length:2}},{name:\"step\",type:\"number\",array:!0,length:2},{name:\"stepMajor\",type:\"number\",array:!0,length:2,default:[90,360]},{name:\"stepMinor\",type:\"number\",array:!0,length:2,default:[10,10]},{name:\"precision\",type:\"number\",default:2.5}]},fm(Yf,be).transform=function(t,e){var n,r=e.fork(),i=this.value,a=this.generator;if(!i.length||t.modified())for(var o in t)em(a[o])&&a[o](t[o]);return n=a(),i.length?r.mod.push(d(i[0],n)):r.add.push(c(n)),i[0]=n,r.source=i,r},fm(Hf,be).transform=function(t,e){var n=this.value;return!n||t.modified(\"type\")?(this.value=n=Xf(t.type),rC.forEach(function(e){null!=t[e]&&Vf(n,e,t[e])})):rC.forEach(function(e){t.modified(e)&&Vf(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&Gf(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var oC=Object.freeze({contour:hs,geojson:ps,geopath:If,geopoint:$f,geoshape:Bf,graticule:Yf,projection:Hf}),uC=function(t){return function(){return t}},sC=function(){return 1e-6*(Math.random()-.5)},fC=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},cC=tc.prototype=ec.prototype;cC.copy=function(){var t,e,n=new ec(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=nc(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=nc(e));return n},cC.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Zf(this.cover(e,n),e,n,t)},cC.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),u=new Array(a),s=1/0,f=1/0,c=-1/0,l=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,u[n]=i,r<s&&(s=r),r>c&&(c=r),i<f&&(f=i),i>l&&(l=i));for(c<s&&(s=this._x0,c=this._x1),l<f&&(f=this._y0,l=this._y1),this.cover(s,f).cover(c,l),n=0;n<a;++n)Zf(this,o[n],u[n],t[n]);return this},cC.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>a))return this;var o,u,s=i-n,f=this._root;switch(u=(e<(r+a)/2)<<1|t<(n+i)/2){case 0:do{o=new Array(4),o[u]=f,f=o}while(s*=2,i=n+s,a=r+s,t>i||e>a);break;case 1:do{o=new Array(4),o[u]=f,f=o}while(s*=2,n=i-s,a=r+s,n>t||e>a);break;case 2:do{o=new Array(4),o[u]=f,f=o}while(s*=2,i=n+s,r=a-s,t>i||r>e);break;case 3:do{o=new Array(4),o[u]=f,f=o}while(s*=2,n=i-s,r=a-s,n>t||r>e)}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},cC.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},cC.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},cC.find=function(t,e,n){var r,i,a,o,u,s,f,c=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new fC(g,c,l,h,d)),null==n?n=1/0:(c=t-n,l=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>h||(a=s.y0)>d||(o=s.x1)<c||(u=s.y1)<l))if(g.length){var v=(i+o)/2,m=(a+u)/2;p.push(new fC(g[3],v,m,o,u),new fC(g[2],i,m,v,u),new fC(g[1],v,a,o,m),new fC(g[0],i,a,v,m)),(f=(e>=m)<<1|t>=v)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=s)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);c=t-x,l=e-x,h=t+x,d=e+x,r=g.data}}return r},cC.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,u,s,f,c,l,h,d=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((f=a>=(u=(p+v)/2))?p=u:v=u,(c=o>=(s=(g+m)/2))?g=s:m=s,e=d,!(d=d[l=c<<1|f]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},cC.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},cC.root=function(){return this._root},cC.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},cC.visit=function(t){var e,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new fC(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&s.length){var f=(r+a)/2,c=(i+o)/2;(n=s[3])&&u.push(new fC(n,f,c,a,o)),(n=s[2])&&u.push(new fC(n,r,c,f,o)),(n=s[1])&&u.push(new fC(n,f,i,a,c)),(n=s[0])&&u.push(new fC(n,r,i,f,c))}return this},cC.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new fC(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,u=e.y0,s=e.x1,f=e.y1,c=(o+s)/2,l=(u+f)/2;(a=i[0])&&n.push(new fC(a,o,u,c,l)),(a=i[1])&&n.push(new fC(a,c,u,s,l)),(a=i[2])&&n.push(new fC(a,o,l,c,f)),(a=i[3])&&n.push(new fC(a,c,l,s,f))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},cC.x=function(t){return arguments.length?(this._x=t,this):this._x},cC.y=function(t){return arguments.length?(this._y=t,this):this._y};var lC,hC,dC=0,pC=0,gC=0,vC=1e3,mC=0,yC=0,bC=0,_C=\"object\"==typeof performance&&performance.now?performance:Date,xC=\"object\"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};fc.prototype=cc.prototype={constructor:fc,restart:function(t,e,n){if(\"function\"!=typeof t)throw new TypeError(\"callback is not a function\");n=(null==n?uc():+n)+(null==e?0:+e),this._next||hC===this||(hC?hC._next=this:lC=this,hC=this),this._call=t,this._time=n,gc()},stop:function(){this._call&&(this._call=null,this._time=1/0,gc())}};var wC=10,MC=Math.PI*(3-Math.sqrt(5)),kC=function(t){function e(){n(),d.call(\"tick\",a),o<u&&(h.stop(),d.call(\"end\",a))}function n(){var e,n,r=t.length;for(o+=(f-o)*s,l.each(function(t){t(o)}),e=0;e<r;++e)null==(n=t[e]).fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0)}function r(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=wC*Math.sqrt(n),a=n*MC;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function i(e){return e.initialize&&e.initialize(t),e}var a,o=1,u=.001,s=1-Math.pow(u,1/300),f=0,c=.6,l=w(),h=cc(e),d=C(\"tick\",\"end\");return null==t&&(t=[]),r(),a={tick:n,restart:function(){return h.restart(e),a},stop:function(){return h.stop(),a},nodes:function(e){return arguments.length?(t=e,r(),l.each(i),a):t},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(u=+t,a):u},alphaDecay:function(t){return arguments.length?(s=+t,a):+s},alphaTarget:function(t){return arguments.length?(f=+t,a):f},velocityDecay:function(t){return arguments.length?(c=1-t,a):1-c},force:function(t,e){return arguments.length>1?(null==e?l.remove(t):l.set(t,i(e)),a):l.get(t)},find:function(e,n,r){var i,a,o,u,s,f=0,c=t.length;for(null==r?r=1/0:r*=r,f=0;f<c;++f)(o=(i=e-(u=t[f]).x)*i+(a=n-u.y)*a)<r&&(s=u,r=o);return s},on:function(t,e){return arguments.length>1?(d.on(t,e),a):d.on(t)}}},EC={center:function(t,e){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)o+=(i=r[n]).x,u+=i.y;for(o=o/a-t,u=u/a-e,n=0;n<a;++n)(i=r[n]).x-=o,i.y-=u}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},collide:function(t){function e(){for(var t,e,r,s,f,c,l,h=i.length,d=0;d<u;++d)for(e=tc(i,rc,ic).visitAfter(n),t=0;t<h;++t)r=i[t],c=a[r.index],l=c*c,s=r.x+r.vx,f=r.y+r.vy,e.visit(function(t,e,n,i,a){var u=t.data,h=t.r,d=c+h;if(!u)return e>s+d||i<s-d||n>f+d||a<f-d;if(u.index>r.index){var p=s-u.x-u.vx,g=f-u.y-u.vy,v=p*p+g*g;v<d*d&&(0===p&&(p=sC(),v+=p*p),0===g&&(g=sC(),v+=g*g),v=(d-(v=Math.sqrt(v)))/v*o,r.vx+=(p*=v)*(d=(h*=h)/(l+h)),r.vy+=(g*=v)*d,u.vx-=p*(d=1-d),u.vy-=g*d)}})}function n(t){if(t.data)return t.r=a[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function r(){if(i){var e,n,r=i.length;for(a=new Array(r),e=0;e<r;++e)n=i[e],a[n.index]=+t(n,e,i)}}var i,a,o=1,u=1;return\"function\"!=typeof t&&(t=uC(null==t?1:+t)),e.initialize=function(t){i=t,r()},e.iterations=function(t){return arguments.length?(u=+t,e):u},e.strength=function(t){return arguments.length?(o=+t,e):o},e.radius=function(n){return arguments.length?(t=\"function\"==typeof n?n:uC(+n),r(),e):t},e},nbody:function(){function t(t){var e,u=i.length,s=tc(i,vc,mc).visitAfter(n);for(o=t,e=0;e<u;++e)a=i[e],s.visit(r)}function e(){if(i){var t,e,n=i.length;for(u=new Array(n),t=0;t<n;++t)e=i[t],u[e.index]=+s(e,t,i)}}function n(t){var e,n,r,i,a,o=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(o+=n,r+=n*e.x,i+=n*e.y);t.x=r/o,t.y=i/o}else{(e=t).x=e.data.x,e.y=e.data.y;do{o+=u[e.data.index]}while(e=e.next)}t.value=o}function r(t,e,n,r){if(!t.value)return!0;var i=t.x-a.x,s=t.y-a.y,h=r-e,d=i*i+s*s;if(h*h/l<d)return d<c&&(0===i&&(i=sC(),d+=i*i),0===s&&(s=sC(),d+=s*s),d<f&&(d=Math.sqrt(f*d)),a.vx+=i*t.value*o/d,a.vy+=s*t.value*o/d),!0;if(!(t.length||d>=c)){(t.data!==a||t.next)&&(0===i&&(i=sC(),d+=i*i),0===s&&(s=sC(),d+=s*s),d<f&&(d=Math.sqrt(f*d)));do{t.data!==a&&(h=u[t.data.index]*o/d,a.vx+=i*h,a.vy+=s*h)}while(t=t.next)}}var i,a,o,u,s=uC(-30),f=1,c=1/0,l=.81;return t.initialize=function(t){i=t,e()},t.strength=function(n){return arguments.length?(s=\"function\"==typeof n?n:uC(+n),e(),t):s},t.distanceMin=function(e){return arguments.length?(f=e*e,t):Math.sqrt(f)},t.distanceMax=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.theta=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t},link:function(t){function e(e){for(var n=0,r=t.length;n<d;++n)for(var i,u,s,c,l,h,p,g=0;g<r;++g)u=(i=t[g]).source,c=(s=i.target).x+s.vx-u.x-u.vx||sC(),l=s.y+s.vy-u.y-u.vy||sC(),c*=h=((h=Math.sqrt(c*c+l*l))-o[g])/h*e*a[g],l*=h,s.vx-=c*(p=f[g]),s.vy-=l*p,u.vx+=c*(p=1-p),u.vy+=l*p}function n(){if(u){var e,n,l=u.length,h=t.length,d=w(u,c);for(e=0,s=new Array(l);e<h;++e)(n=t[e]).index=e,\"object\"!=typeof n.source&&(n.source=oc(d,n.source)),\"object\"!=typeof n.target&&(n.target=oc(d,n.target)),s[n.source.index]=(s[n.source.index]||0)+1,s[n.target.index]=(s[n.target.index]||0)+1;for(e=0,f=new Array(h);e<h;++e)n=t[e],f[e]=s[n.source.index]/(s[n.source.index]+s[n.target.index]);a=new Array(h),r(),o=new Array(h),i()}}function r(){if(u)for(var e=0,n=t.length;e<n;++e)a[e]=+l(t[e],e,t)}function i(){if(u)for(var e=0,n=t.length;e<n;++e)o[e]=+h(t[e],e,t)}var a,o,u,s,f,c=ac,l=function(t){return 1/Math.min(s[t.source.index],s[t.target.index])},h=uC(30),d=1;return null==t&&(t=[]),e.initialize=function(t){u=t,n()},e.links=function(r){return arguments.length?(t=r,n(),e):t},e.id=function(t){return arguments.length?(c=t,e):c},e.iterations=function(t){return arguments.length?(d=+t,e):d},e.strength=function(t){return arguments.length?(l=\"function\"==typeof t?t:uC(+t),r(),e):l},e.distance=function(t){return arguments.length?(h=\"function\"==typeof t?t:uC(+t),i(),e):h},e},x:function(t){function e(t){for(var e,n=0,o=r.length;n<o;++n)(e=r[n]).vx+=(a[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)i[e]=isNaN(a[e]=+t(r[e],e,r))?0:+o(r[e],e,r)}}var r,i,a,o=uC(.1);return\"function\"!=typeof t&&(t=uC(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(o=\"function\"==typeof t?t:uC(+t),n(),e):o},e.x=function(r){return arguments.length?(t=\"function\"==typeof r?r:uC(+r),n(),e):t},e},y:function(t){function e(t){for(var e,n=0,o=r.length;n<o;++n)(e=r[n]).vy+=(a[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)i[e]=isNaN(a[e]=+t(r[e],e,r))?0:+o(r[e],e,r)}}var r,i,a,o=uC(.1);return\"function\"!=typeof t&&(t=uC(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(o=\"function\"==typeof t?t:uC(+t),n(),e):o},e.y=function(r){return arguments.length?(t=\"function\"==typeof r?r:uC(+r),n(),e):t},e}},SC=\"forces\",AC=[\"alpha\",\"alphaMin\",\"alphaTarget\",\"velocityDecay\",\"forces\"],CC=[\"static\",\"iterations\"],zC=[\"x\",\"y\",\"vx\",\"vy\"];yc.Definition={type:\"Force\",metadata:{modifies:!0},params:[{name:\"static\",type:\"boolean\",default:!1},{name:\"restart\",type:\"boolean\",default:!1},{name:\"iterations\",type:\"number\",default:300},{name:\"alpha\",type:\"number\",default:1},{name:\"alphaMin\",type:\"number\",default:.001},{name:\"alphaTarget\",type:\"number\",default:0},{name:\"velocityDecay\",type:\"number\",default:.4},{name:\"forces\",type:\"param\",array:!0,params:[{key:{force:\"center\"},params:[{name:\"x\",type:\"number\",default:0},{name:\"y\",type:\"number\",default:0}]},{key:{force:\"collide\"},params:[{name:\"radius\",type:\"number\",expr:!0},{name:\"strength\",type:\"number\",default:.7},{name:\"iterations\",type:\"number\",default:1}]},{key:{force:\"nbody\"},params:[{name:\"strength\",type:\"number\",default:-30},{name:\"theta\",type:\"number\",default:.9},{name:\"distanceMin\",type:\"number\",default:1},{name:\"distanceMax\",type:\"number\"}]},{key:{force:\"link\"},params:[{name:\"links\",type:\"data\"},{name:\"id\",type:\"field\"},{name:\"distance\",type:\"number\",default:30,expr:!0},{name:\"strength\",type:\"number\",expr:!0},{name:\"iterations\",type:\"number\",default:1}]},{key:{force:\"x\"},params:[{name:\"strength\",type:\"number\",default:.1},{name:\"x\",type:\"field\"}]},{key:{force:\"y\"},params:[{name:\"strength\",type:\"number\",default:.1},{name:\"y\",type:\"field\"}]}]},{name:\"as\",type:\"string\",array:!0,modify:!1,default:zC}]};var DC=fm(yc,be);DC.transform=function(t,e){var n=this.value,r=e.changed(e.ADD_REM),i=t.modified(AC),a=t.iterations||300;if(n?(r&&(e.modifies(\"index\"),n.nodes(e.source)),(i||e.changed(e.MOD))&&xc(n,t,0,e)):(this.value=n=_c(e.source,t),n.on(\"tick\",bc(e.dataflow,this)),t.static||(r=!0,n.tick()),e.modifies(\"index\")),i||r||t.modified(CC)||e.changed()&&t.restart)if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),t.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return e.StopPropagation;return this.finish(t,e)},DC.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===SC&&\"link\"===n.op._argval.force)for(var u,s=n.op._argops,f=0,c=s.length;f<c;++f)if(\"links\"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(zC)};var OC=Object.freeze({force:yc});Uc.prototype=Rc.prototype={constructor:Uc,count:function(){return this.eachAfter(Nc)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=Tc(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Rc(this).eachBefore(Lc)}};var NC=Array.prototype.slice,TC=function(t){for(var e,n,r=0,i=(t=jc(NC.call(t))).length,a=[];r<i;)e=t[r],n&&$c(n,e)?++r:(n=Wc(a=Fc(a,e)),r=0);return n},RC=function(t){return function(){return t}},PC=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},LC=function(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,f=t.value&&(r-e)/t.value;++u<s;)(a=o[u]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*f},qC=\"$\",UC={depth:-1},jC={},FC=function(){function t(t){var r,i,a,o,u,s,f,c=t.length,l=new Array(c),h={};for(i=0;i<c;++i)r=t[i],u=l[i]=new Uc(r),null!=(s=e(r,i,t))&&(s+=\"\")&&(h[f=qC+(u.id=s)]=f in h?jC:u);for(i=0;i<c;++i)if(u=l[i],null!=(s=n(t[i],i,t))&&(s+=\"\")){if(!(o=h[qC+s]))throw new Error(\"missing: \"+s);if(o===jC)throw new Error(\"ambiguous: \"+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error(\"multiple roots\");a=u}if(!a)throw new Error(\"no root\");if(a.parent=UC,a.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(qc),a.parent=null,c>0)throw new Error(\"cycle\");return a}var e=ol,n=ul;return t.id=function(n){return arguments.length?(e=tl(n),t):e},t.parentId=function(e){return arguments.length?(n=tl(e),t):n},t};pl.prototype=Object.create(Uc.prototype);var IC=function(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,f=t.value&&(i-n)/t.value;++u<s;)(a=o[u]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*f},$C=(1+Math.sqrt(5))/2,BC=function t(e){function n(t,n,r,i,a){vl(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}($C),WC=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=a,t.eachBefore(e),o=[0],r&&t.eachBefore(PC),t}function e(t){var e=o[t.depth],r=t.x0+e,i=t.y0+e,a=t.x1-e,h=t.y1-e;a<r&&(r=a=(r+a)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=a,t.y1=h,t.children&&(e=o[t.depth+1]=u(t)/2,r+=l(t)-e,i+=s(t)-e,a-=f(t)-e,h-=c(t)-e,a<r&&(r=a=(r+a)/2),h<i&&(i=h=(i+h)/2),n(t,r,i,a,h))}var n=BC,r=!1,i=1,a=1,o=[0],u=el,s=el,f=el,c=el,l=el;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],a=+e[1],t):[i,a]},t.tile=function(e){return arguments.length?(n=tl(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(u=\"function\"==typeof e?e:RC(+e),t):u},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(s=\"function\"==typeof e?e:RC(+e),t):s},t.paddingRight=function(e){return arguments.length?(f=\"function\"==typeof e?e:RC(+e),t):f},t.paddingBottom=function(e){return arguments.length?(c=\"function\"==typeof e?e:RC(+e),t):c},t.paddingLeft=function(e){return arguments.length?(l=\"function\"==typeof e?e:RC(+e),t):l},t},YC=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,u,s,f,c,l=-1,h=o.length,d=t.value;++l<h;){for(s=(u=o[l]).children,f=u.value=0,c=s.length;f<c;++f)u.value+=s[f].value;u.dice?LC(u,n,r,i,r+=(a-r)*u.value/d):IC(u,n,r,n+=(i-n)*u.value/d,a),d-=u.value}else t._squarify=o=vl(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}($C);ml.Definition={type:\"Nest\",metadata:{treesource:!0,source:!0,generates:!0,changes:!0},params:[{name:\"keys\",type:\"field\",array:!0},{name:\"key\",type:\"field\"},{name:\"generate\",type:\"boolean\"}]},fm(ml,be).transform=function(t,e){e.source||qv(\"Nest transform requires an upstream data source.\");var n,r,i,a=t.key||s,o=t.generate,u=t.modified(),f=o||u?e.fork(e.ALL):e;return(!this.value||u||e.changed())&&(o&&this.value&&(f.materialize(f.REM),this.value.each(function(t){t.children&&f.rem.push(t)})),n=tm(t.keys).reduce(function(t,e){return t.key(e),t},Pm()).entries(e.source),this.value=r=Rc({values:n},yl),o&&(f.materialize(f.ADD),f.source=f.source.slice(),r.each(function(t){t.children&&(t=c(t.data),f.add.push(t),f.source.push(t))})),i=r.lookup={},r.each(function(t){null!=s(t.data)&&(i[a(t.data)]=t)})),f.source.root=this.value,f},fm(bl,be).transform=function(t,e){e.source&&e.source.root||qv(this.constructor.name+\" transform requires a backing tree data source.\");var n=this.layout(t.method),r=this.fields,i=e.source.root,a=t.as||r;t.field&&i.sum(t.field),t.sort&&i.sort(t.sort),_l(n,this.params,t);try{this.value=n(i)}catch(t){qv(t)}return i.each(function(t){xl(t,r,a)}),e.reflow(t.modified()).modifies(a).modifies(\"leaf\")};var HC=[\"x\",\"y\",\"r\",\"depth\",\"children\"];wl.Definition={type:\"Pack\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"padding\",type:\"number\",default:0},{name:\"radius\",type:\"field\",default:null},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:3,default:HC}]};var GC=fm(wl,bl);GC.layout=function(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(rl(e)).eachAfter(il(i,.5)).eachBefore(al(1)):t.eachBefore(rl(nl)).eachAfter(il(el,1)).eachAfter(il(i,t.r/Math.min(n,r))).eachBefore(al(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=el;return t.radius=function(n){return arguments.length?(e=Kc(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=\"function\"==typeof e?e:RC(+e),t):i},t},GC.params=[\"size\",\"padding\"],GC.fields=HC;var XC=[\"x0\",\"y0\",\"x1\",\"y1\",\"depth\",\"children\"];Ml.Definition={type:\"Partition\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"padding\",type:\"number\",default:0},{name:\"round\",type:\"boolean\",default:!1},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:4,default:XC}]};var VC=fm(Ml,bl);VC.layout=function(){function t(t){var o=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/o,t.eachBefore(e(r,o)),a&&t.eachBefore(PC),t}function e(t,e){return function(n){n.children&&LC(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u}}var n=1,r=1,i=0,a=!1;return t.round=function(e){return arguments.length?(a=!!e,t):a},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},VC.params=[\"size\",\"round\",\"padding\"],VC.fields=XC,kl.Definition={type:\"Stratify\",metadata:{treesource:!0},params:[{name:\"key\",type:\"field\",required:!0},{name:\"parentKey\",type:\"field\",required:!0}]},fm(kl,be).transform=function(t,e){e.source||qv(\"Stratify transform requires an upstream data source.\");var n,r,i=t.modified();return(!this.value||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields))&&(n=FC().id(t.key).parentId(t.parentKey)(e.source),r=n.lookup={},n.each(function(e){r[t.key(e.data)]=e}),this.value=n),e.source.root=this.value,i?e.fork(e.ALL):e};var JC={tidy:function(){function t(t){var r=gl(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),s)t.eachBefore(i);else{var f=t,c=t,l=t;t.eachBefore(function(t){t.x<f.x&&(f=t),t.x>c.x&&(c=t),t.depth>l.depth&&(l=t)});var h=f===c?1:a(f,c)/2,d=h-f.x,p=o/(c.x+h+d),g=u/(l.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*g})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){hl(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+a(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+a(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,o=t,u=e,s=i.parent.children[0],f=i.m,c=o.m,l=u.m,h=s.m;u=cl(u),i=fl(i),u&&i;)s=fl(s),(o=cl(o)).a=t,(r=u.z+l-i.z-f+a(u._,i._))>0&&(ll(dl(u,t,n),t,r),f+=r,c+=r),l+=u.m,f+=i.m,h+=s.m,c+=o.m;u&&!cl(o)&&(o.t=u,o.m+=l-c),i&&!fl(s)&&(s.t=i,s.m+=f-h,n=t)}return n}function i(t){t.x*=o,t.y=t.depth*u}var a=sl,o=1,u=1,s=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(s=!1,o=+e[0],u=+e[1],t):s?null:[o,u]},t.nodeSize=function(e){return arguments.length?(s=!0,o=+e[0],u=+e[1],t):s?[o,u]:null},t},cluster:function(){function t(t){var a,o=0;t.eachAfter(function(t){var n=t.children;n?(t.x=Sc(n),t.y=Cc(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)});var u=Dc(t),s=Oc(t),f=u.x-e(u,s)/2,c=s.x+e(s,u)/2;return t.eachAfter(i?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*r}:function(e){e.x=(e.x-f)/(c-f)*n,e.y=(1-(t.y?e.y/t.y:1))*r})}var e=Ec,n=1,r=1,i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(i=!1,n=+e[0],r=+e[1],t):i?null:[n,r]},t.nodeSize=function(e){return arguments.length?(i=!0,n=+e[0],r=+e[1],t):i?[n,r]:null},t}},ZC=[\"x\",\"y\",\"depth\",\"children\"];El.Definition={type:\"Tree\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"method\",type:\"enum\",default:\"tidy\",values:[\"tidy\",\"cluster\"]},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"nodeSize\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:4,default:ZC}]};var QC=fm(El,bl);QC.layout=function(t){var e=t||\"tidy\";if(JC.hasOwnProperty(e))return JC[e]();qv(\"Unrecognized Tree layout method: \"+e)},QC.params=[\"size\",\"nodeSize\",\"separation\"],QC.fields=ZC,Sl.Definition={type:\"TreeLinks\",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:\"key\",type:\"field\"}]},fm(Sl,be).transform=function(t,e){function n(t){var e=i[t];e&&(o[t]=1,u.mod.push(e))}e.source&&e.source.root||qv(\"TreeLinks transform requires a backing tree data source.\");var r=e.source.root.lookup,i=this.value,a=t.key||s,o={},u=e.fork();return e.visit(e.REM,function(t){var e=a(t),n=i[e];n&&(delete i[e],u.rem.push(n))}),e.visit(e.ADD,function(t){var e,n=a(t);(e=Al(r[n]))&&(u.add.push(i[n]=c({source:e,target:t})),o[n]=1)}),e.visit(e.MOD,function(t){var e=a(t),i=r[e].children;if(n(e),i)for(var u=0,s=i.length;u<s;++u)o[e=a(i[u].data)]||n(e)}),u};var KC={binary:function(t,e,n,r,i){function a(t,e,n,r,i,o,u){if(t>=e-1){var f=s[t];return f.x0=r,f.y0=i,f.x1=o,void(f.y1=u)}for(var l=c[t],h=n/2+l,d=t+1,p=e-1;d<p;){var g=d+p>>>1;c[g]<h?d=g+1:p=g}h-c[d-1]<c[d]-h&&t+1<d&&--d;var v=c[d]-l,m=n-v;if(o-r>u-i){var y=(r*m+o*v)/n;a(t,d,v,r,i,y,u),a(d,e,m,y,i,o,u)}else{var b=(i*m+u*v)/n;a(t,d,v,r,i,o,b),a(d,e,m,r,b,o,u)}}var o,u,s=t.children,f=s.length,c=new Array(f+1);for(c[0]=u=o=0;o<f;++o)c[o+1]=u+=s[o].value;a(0,f,t.value,e,n,r,i)},dice:LC,slice:IC,slicedice:function(t,e,n,r,i){(1&t.depth?IC:LC)(t,e,n,r,i)},squarify:BC,resquarify:YC},tz=[\"x0\",\"y0\",\"x1\",\"y1\",\"depth\",\"children\"];Cl.Definition={type:\"Treemap\",metadata:{tree:!0,modifies:!0},params:[{name:\"field\",type:\"field\"},{name:\"sort\",type:\"compare\"},{name:\"method\",type:\"enum\",default:\"squarify\",values:[\"squarify\",\"resquarify\",\"binary\",\"dice\",\"slice\",\"slicedice\"]},{name:\"padding\",type:\"number\",default:0},{name:\"paddingInner\",type:\"number\",default:0},{name:\"paddingOuter\",type:\"number\",default:0},{name:\"paddingTop\",type:\"number\",default:0},{name:\"paddingRight\",type:\"number\",default:0},{name:\"paddingBottom\",type:\"number\",default:0},{name:\"paddingLeft\",type:\"number\",default:0},{name:\"ratio\",type:\"number\",default:1.618033988749895},{name:\"round\",type:\"boolean\",default:!1},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"as\",type:\"string\",array:!0,length:4,default:tz}]};var ez=fm(Cl,bl);ez.layout=function(){var t=WC();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){KC.hasOwnProperty(e)?t.tile(KC[e]):qv(\"Unrecognized Treemap layout method: \"+e)},t},ez.params=[\"method\",\"ratio\",\"size\",\"round\",\"padding\",\"paddingInner\",\"paddingOuter\",\"paddingTop\",\"paddingRight\",\"paddingBottom\",\"paddingLeft\"],ez.fields=tz;var nz=Object.freeze({nest:ml,pack:wl,partition:Ml,stratify:kl,tree:El,treelinks:Sl,treemap:Cl}),rz=function(t){return function(){return t}};Ol.prototype={constructor:Ol,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Pl(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Tl(this,n),n=(t=n).U),n.C=!1,r.C=!0,Rl(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Rl(this,n),n=(t=n).U),n.C=!1,r.C=!0,Tl(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?Pl(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Tl(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Rl(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Tl(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Rl(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Tl(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Rl(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var iz,az,oz,uz,sz,fz=[],cz=[],lz=1e-6,hz=1e-12;oh.prototype={constructor:oh,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Wl(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,s=-1,f=e[i[a-1]],c=f.left===u?f.right:f.left;++s<a;)o=c,c=(f=e[i[s]]).left===u?f.right:f.left,o&&c&&r<o.index&&r<c.index&&ih(u,o,c)<0&&t.push([u.data,o.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var s=t-i.site[0],f=e-i.site[1],c=s*s+f*f;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=t-u[0],f=e-u[1],l=s*s+f*f;l<c&&(c=l,o=u.index)}})}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}};var dz=function(){function t(t){return new oh(t.map(function(r,i){var a=[Math.round(e(r,i,t)/lz)*lz,Math.round(n(r,i,t)/lz)*lz];return a.index=i,a.data=r,a}),r)}var e=zl,n=Dl,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e=\"function\"==typeof n?n:rz(+n),t):e},t.y=function(e){return arguments.length?(n=\"function\"==typeof e?e:rz(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t};uh.Definition={type:\"Voronoi\",metadata:{modifies:!0},params:[{name:\"x\",type:\"field\",required:!0},{name:\"y\",type:\"field\",required:!0},{name:\"size\",type:\"number\",array:!0,length:2},{name:\"extent\",type:\"array\",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:\"number\",array:!0,length:2}},{name:\"as\",type:\"string\",default:\"path\"}]};var pz=[[-1e5,-1e5],[1e5,1e5]];fm(uh,be).transform=function(t,e){var n,r,i,a,o=t.as||\"path\",u=e.source;for(n=dz().x(t.x).y(t.y),t.size?n.size(t.size):n.extent(t.extent||pz),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?\"M\"+r[i].join(\"L\")+\"Z\":null;return e.reflow(t.modified()).modifies(o)};var gz=Object.freeze({voronoi:uh}),vz=Math.PI/180,mz=64,yz=2048,bz=function(){function t(t){t.width=t.height=1;var e=Math.sqrt(t.getContext(\"2d\").getImageData(0,0,1,1).data.length>>2);t.width=(mz<<5)/e,t.height=yz/e;var n=t.getContext(\"2d\");return n.fillStyle=n.strokeStyle=\"red\",n.textAlign=\"center\",{context:n,ratio:e}}function e(t,e,n){for(var r,i,a,o=e.x,u=e.y,s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),l=c(f),d=h()<.5?1:-1,p=-d;(r=l(p+=d))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=s));)if(e.x=o+i,e.y=u+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>f[0]||e.y+e.y1>f[1])&&(!n||!fh(e,t,f[0]))&&(!n||lh(e,n))){for(var g,v=e.sprite,m=e.width>>5,y=f[0]>>5,b=e.x-(m<<4),_=127&b,x=32-_,w=e.y1-e.y0,M=(e.y+e.y0)*y+(b>>5),k=0;k<w;k++){g=0;for(var E=0;E<=m;E++)t[M+E]|=g<<x|(E<m?(g=v[k*m+E])>>>_:0);M+=y}return e.sprite=null,!0}return!1}var n,r,i,a,o,u,s,f=[256,256],c=hh,l=[],h=Math.random,d={},p=ph;return d.layout=function(){for(var c=t(p()),d=dh((f[0]>>5)*f[1]),g=null,v=l.length,m=-1,y=[],b=l.map(function(t){return{text:n(t),font:r(t),style:a(t),weight:o(t),rotate:u(t),size:~~i(t),padding:s(t),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:t}}).sort(function(t,e){return e.size-t.size});++m<v;){var _=b[m];_.x=f[0]*(h()+.5)>>1,_.y=f[1]*(h()+.5)>>1,sh(c,_,b,m),_.hasText&&e(d,_,g)&&(y.push(_),g?ch(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=f[0]>>1,_.y-=f[1]>>1)}return y},d.words=function(t){return arguments.length?(l=t,d):l},d.size=function(t){return arguments.length?(f=[+t[0],+t[1]],d):f},d.font=function(t){return arguments.length?(r=gh(t),d):r},d.fontStyle=function(t){return arguments.length?(a=gh(t),d):a},d.fontWeight=function(t){return arguments.length?(o=gh(t),d):o},d.rotate=function(t){return arguments.length?(u=gh(t),d):u},d.text=function(t){return arguments.length?(n=gh(t),d):n},d.spiral=function(t){return arguments.length?(c=_z[t]||t,d):c},d.fontSize=function(t){return arguments.length?(i=gh(t),d):i},d.padding=function(t){return arguments.length?(s=gh(t),d):s},d.random=function(t){return arguments.length?(h=t,d):h},d},_z={archimedean:hh,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},xz=[\"x\",\"y\",\"font\",\"fontSize\",\"fontStyle\",\"fontWeight\",\"angle\"],wz=[\"text\",\"font\",\"rotate\",\"fontSize\",\"fontStyle\",\"fontWeight\"];vh.Definition={type:\"Wordcloud\",metadata:{modifies:!0},params:[{name:\"size\",type:\"number\",array:!0,length:2},{name:\"font\",type:\"string\",expr:!0,default:\"sans-serif\"},{name:\"fontStyle\",type:\"string\",expr:!0,default:\"normal\"},{name:\"fontWeight\",type:\"string\",expr:!0,default:\"normal\"},{name:\"fontSize\",type:\"number\",expr:!0,default:14},{name:\"fontSizeRange\",type:\"number\",array:\"nullable\",default:[10,50]},{name:\"rotate\",type:\"number\",expr:!0,default:0},{name:\"text\",type:\"field\"},{name:\"spiral\",type:\"string\",values:[\"archimedean\",\"rectangular\"]},{name:\"padding\",type:\"number\",expr:!0},{name:\"as\",type:\"string\",array:!0,length:7,default:xz}]},fm(vh,be).transform=function(t,e){var n=t.modified();if(n||e.changed(e.ADD_REM)||wz.some(function(n){var r=t[n];return em(r)&&e.modified(r.fields)})){var r,i=e.materialize(e.SOURCE).source,a=this.value,o=t.as||xz,u=t.fontSize||14;if(em(u)?r=t.fontSizeRange:u=rm(u),r){var s=u,f=iu(\"sqrt\")().domain(mh(s,i)).range(r);u=function(t){return f(s(t))}}i.forEach(function(t){t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0});for(var c,l,h=a.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||\"archimedean\").rotate(t.rotate||0).font(t.font||\"sans-serif\").fontStyle(t.fontStyle||\"normal\").fontWeight(t.fontWeight||\"normal\").fontSize(u).layout(),d=a.size(),p=d[0]>>1,g=d[1]>>1,v=0,m=h.length;v<m;++v)(l=(c=h[v]).datum)[o[0]]=c.x+p,l[o[1]]=c.y+g,l[o[2]]=c.font,l[o[3]]=c.size,l[o[4]]=c.style,l[o[5]]=c.weight,l[o[6]]=c.rotate;return e.reflow(n).modifies(o)}};var Mz=Object.freeze({wordcloud:vh}),kz=function(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this,a=i.bisect(i.range,t.value),o=t.index,u=a[0],s=a[1],f=o.length;for(n=0;n<u;++n)e[o[n]]|=r;for(n=s;n<f;++n)e[o[n]]|=r;return i}}};Ah.Definition={type:\"CrossFilter\",metadata:{},params:[{name:\"fields\",type:\"field\",array:!0,required:!0},{name:\"query\",type:\"array\",array:!0,required:!0,content:{type:\"number\",array:!0,length:2}}]};var Ez=fm(Ah,be);Ez.transform=function(t,e){return this._dims?t.modified(\"fields\")||t.fields.some(function(t){return e.modified(t.fields)})?this.reinit(t,e):this.eval(t,e):this.init(t,e)},Ez.init=function(t,e){for(var n,r,i=t.fields,a=t.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)r=o[n=i[f].fname]||(o[n]=kh()),u.push(kz(r,f,a[f]));return this.eval(t,e)},Ez.reinit=function(t,e){var n,r,i,a,o,u,s,f,c,l=e.materialize().fork(),h=t.fields,d=t.query,p=this._indices,g=this._dims,v=this.value,m=v.curr(),y=v.prev(),b=v.all(),_=l.rem=l.add,x=l.mod,w=d.length,M={};if(y.set(m),e.rem.length&&(o=this.remove(t,e,l)),e.add.length&&v.add(e.add),e.mod.length)for(u={},s=0,f=(a=e.mod).length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)c=h[s],(!g[s]||t.modified(\"fields\",s)||e.modified(c.fields))&&((n=M[i=c.fname])||(p[i]=r=kh(),M[i]=n=r.insert(c,e.source,0)),g[s]=kz(r,s,d[s]).onAdd(n,m));for(s=0,f=v.data().length;s<f;++s)o[s]||(y[s]!==m[s]?_.push(s):u[s]&&m[s]!==b&&x.push(s));return v.mask=(1<<w)-1,l},Ez.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified(\"query\")&&!t.modified(\"fields\")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},Ez.insert=function(t,e,n){var r,i,a,o=e.add,u=this.value,s=this._dims,f=this._indices,c=t.fields,l={},h=n.add,d=u.size(),p=d+o.length,g=s.length;u.resize(p,g),u.add(o);var v=u.curr(),m=u.prev(),y=u.all();for(r=0;r<g;++r)a=l[i=c[r].fname]||(l[i]=f[i].insert(c[r],o,d)),s[r].onAdd(a,v);for(;d<p;++d)m[d]=y,v[d]!==y&&h.push(d)},Ez.modify=function(t,e){var n,r,i,a=e.mod,o=this.value,u=o.curr(),s=o.all(),f=t.mod;for(n=0,r=f.length;n<r;++n)u[i=f[n]._index]!==s&&a.push(i)},Ez.remove=function(t,e,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),c=s.prev(),l=s.all(),h={},d=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)h[a=p[r]._index]=1,c[a]=o=f[a],f[a]=l,o!==l&&d.push(a);for(a in u)u[a].remove(i,h);return this.reindex(e,i,h),h},Ez.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter(function(){var t=i.remove(e,n);for(var a in r)r[a].reindex(t)})},Ez.update=function(t,e,n){var r,i,a=this._dims,o=t.query,u=e.stamp,s=a.length,f=0;for(n.filters=0,i=0;i<s;++i)t.modified(\"query\",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,f=0;i<s;++i)t.modified(\"query\",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},Ez.incrementAll=function(t,e,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),c=u.prev(),l=t.index(),h=t.bisect(t.range),d=t.bisect(e),p=d[0],g=d[1],v=h[0],m=h[1],y=t.one;if(p<v)for(i=p,a=Math.min(v,g);i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(p>v)for(i=v,a=Math.min(p,m);i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(g>m)for(i=Math.max(p,m),a=g;i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<m)for(i=Math.max(v,g),a=m;i<a;++i)s[o=l[i]]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;t.range=e.slice()},Ez.incrementOne=function(t,e,n,r){var i,a,o,u=this.value.curr(),s=t.index(),f=t.bisect(t.range),c=t.bisect(e),l=c[0],h=c[1],d=f[0],p=f[1],g=t.one;if(l<d)for(i=l,a=Math.min(d,h);i<a;++i)u[o=s[i]]^=g,n.push(o);else if(l>d)for(i=d,a=Math.min(l,p);i<a;++i)u[o=s[i]]^=g,r.push(o);if(h>p)for(i=Math.max(l,p),a=h;i<a;++i)u[o=s[i]]^=g,n.push(o);else if(h<p)for(i=Math.max(d,h),a=p;i<a;++i)u[o=s[i]]^=g,r.push(o);t.range=e.slice()},Ch.Definition={type:\"ResolveFilter\",metadata:{},params:[{name:\"ignore\",type:\"number\",required:!0,description:\"A bit mask indicating which filters to ignore.\"},{name:\"filter\",type:\"object\",required:!0,description:\"Per-tuple filter bitmaps from a CrossFilter transform.\"}]},fm(Ch,be).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0==(i&n))return e.StopPropagation;var a=e.fork(e.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(t){return u[t]&n?null:o[t]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(t){var e=u[t]&n;return!e&&e^s[t]&n?o[t]:null}),a.filter(a.REM,function(t){var e=u[t]&n;return e&&!(e^e^s[t]&n)?o[t]:null})):(a.filter(a.ADD,f),a.filter(a.REM,function(t){return(u[t]&n)===i?o[t]:null})),a.filter(a.SOURCE,function(t){return f(t._index)})};var Sz=Object.freeze({crossfilter:Ah,resolvefilter:Ch}),Az=function(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:\"default\",item:null})),t.on(t.events(\"view\",\"mousemove\"),e,function(t,n){var r=e.value,i=r?Iv(r)?r:r.user:\"default\",a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),t.add(null,function(t){var e=t.cursor,n=this.value;return Iv(e)||(n=e.item,e=e.user),zh(e&&\"default\"!==e?e:n||e),n},{cursor:e})},Cz=function(t,e,n){var r,i,a,o=t._renderer.scene();return o&&(a=Rh(t),i=e.changedTouches?e.changedTouches[0]:e,(r=Ex(i,o))[0]-=a[0],r[1]-=a[1]),e.dataflow=t,e.vega=Lh(t,n,r),e.item=n,e},zz=\"view\",Dz=\"window\",Oz=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r},Nz=\"vega-bind\",Tz=\"vega-bind-name\",Rz=\"vega-bind-radio\",Pz=\"vega-option-\",Lz=function(t,e,n){if(e){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(e){i.source=!0,t.signal(r.signal,e).run()}},r.debounce&&(i.update=im(r.debounce,i.update))),Iv(e)&&(e=document.querySelector(e)),$h(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,function(){i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i}},qz=function(t,e,n,r){return(e=e||new r(t.loader())).initialize(n,Nh(t),Th(t),Rh(t)).background(t._background)},Uz=function(t,e,n,r){var i=(new r).scene(t.scenegraph().root).initialize(n,Rh(t),t);return e&&(i.handleTooltip=e.handleTooltip,e.handlers().forEach(function(t){i.on(t.type,t.handler)})),i},jz=function(t,e){var n=Zi(e);return n&&n.headless?t.runAsync().then(function(){return qz(t,null,null,n.headless).renderAsync(t._scenegraph.root)}):Promise.reject(\"Unrecognized renderer type: \"+e)},Fz=function(t,e){return t=t||e.autosize,Fv(t)?t:(t=t||\"pad\",{type:t})},Iz=function(t,e){return t=t||e.padding,Fv(t)?t:(t=+t||0,{top:t,bottom:t,left:t,right:t})},$z=[\"value\",\"update\",\"react\",\"bind\"],Bz=function(t,e){var n=t.name;if(\"outer\"===t.push)e.signals[n]||Zh(\"No prior signal definition\",n),$z.forEach(function(e){void 0!==t[e]&&Zh(\"Invalid property \",e)});else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}};Qh.prototype.visit=function(t){var e,n,r,i=this;if(t(i))return 1;for(n=0,r=(e=Kh(i)).length;n<r;++n)if(e[n].visit(t))return 1};var Wz,Yz,Hz,Gz,Xz=1,Vz=2,Jz=3,Zz=4,Qz=5,Kz=6,tD=7,eD=8,nD=\"ArrayExpression\",rD=\"BinaryExpression\",iD=\"CallExpression\",aD=\"ConditionalExpression\",oD=\"Identifier\",uD=\"Literal\",sD=\"LogicalExpression\",fD=\"MemberExpression\",cD=\"ObjectExpression\",lD=\"Property\",hD=\"UnaryExpression\",dD=\"Unexpected token %0\",pD=\"Unexpected number\",gD=\"Unexpected string\",vD=\"Unexpected identifier\",mD=\"Unexpected reserved word\",yD=\"Unexpected end of input\",bD=\"Invalid regular expression\",_D=\"Invalid regular expression: missing /\",xD=\"Octal literals are not allowed in strict mode.\",wD=\"Duplicate data property in object literal not allowed in strict mode\",MD=\"ILLEGAL\",kD=\"Disabled.\",ED=new RegExp(\"[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]\"),SD=new RegExp(\"[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]\"),AD={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1},CD={if:1,this:1},zD=function(t){Yz=0,Hz=(Wz=t).length,Gz=null,Sd();var e=ip();if(Gz.type!==Vz)throw new Error(\"Unexpect token after expression.\");return e},DD={NaN:\"NaN\",E:\"Math.E\",LN2:\"Math.LN2\",LN10:\"Math.LN10\",LOG2E:\"Math.LOG2E\",LOG10E:\"Math.LOG10E\",PI:\"Math.PI\",SQRT1_2:\"Math.SQRT1_2\",SQRT2:\"Math.SQRT2\",MIN_VALUE:\"Number.MIN_VALUE\",MAX_VALUE:\"Number.MAX_VALUE\"},OD=function(t){function e(e,n,r,i){var a=t(n[0]);return r&&(a=r+\"(\"+a+\")\",0===r.lastIndexOf(\"new \",0)&&(a=\"(\"+a+\")\")),a+\".\"+e+(i<0?\"\":0===i?\"()\":\"(\"+n.slice(1).map(t).join(\",\")+\")\")}function n(t,n,r){return function(i){return e(t,i,n,r)}}var r=\"new Date\";return{isNaN:\"isNaN\",isFinite:\"isFinite\",abs:\"Math.abs\",acos:\"Math.acos\",asin:\"Math.asin\",atan:\"Math.atan\",atan2:\"Math.atan2\",ceil:\"Math.ceil\",cos:\"Math.cos\",exp:\"Math.exp\",floor:\"Math.floor\",log:\"Math.log\",max:\"Math.max\",min:\"Math.min\",pow:\"Math.pow\",random:\"Math.random\",round:\"Math.round\",sin:\"Math.sin\",sqrt:\"Math.sqrt\",tan:\"Math.tan\",clamp:function(e){e.length<3&&qv(\"Missing arguments to clamp function.\"),e.length>3&&qv(\"Too many arguments to clamp function.\");var n=e.map(t);return\"Math.max(\"+n[1]+\", Math.min(\"+n[2]+\",\"+n[0]+\"))\"},now:\"Date.now\",utc:\"Date.UTC\",datetime:r,date:n(\"getDate\",r,0),day:n(\"getDay\",r,0),year:n(\"getFullYear\",r,0),month:n(\"getMonth\",r,0),hours:n(\"getHours\",r,0),minutes:n(\"getMinutes\",r,0),seconds:n(\"getSeconds\",r,0),milliseconds:n(\"getMilliseconds\",r,0),time:n(\"getTime\",r,0),timezoneoffset:n(\"getTimezoneOffset\",r,0),utcdate:n(\"getUTCDate\",r,0),utcday:n(\"getUTCDay\",r,0),utcyear:n(\"getUTCFullYear\",r,0),utcmonth:n(\"getUTCMonth\",r,0),utchours:n(\"getUTCHours\",r,0),utcminutes:n(\"getUTCMinutes\",r,0),utcseconds:n(\"getUTCSeconds\",r,0),utcmilliseconds:n(\"getUTCMilliseconds\",r,0),length:n(\"length\",null,-1),indexof:n(\"indexOf\",null),lastindexof:n(\"lastIndexOf\",null),slice:n(\"slice\",null),parseFloat:\"parseFloat\",parseInt:\"parseInt\",upper:n(\"toUpperCase\",\"String\",0),lower:n(\"toLowerCase\",\"String\",0),substring:n(\"substring\",\"String\"),replace:n(\"replace\",\"String\"),regexp:\"RegExp\",test:n(\"test\",\"RegExp\"),if:function(e){e.length<3&&qv(\"Missing arguments to if function.\"),e.length>3&&qv(\"Too many arguments to if function.\");var n=e.map(t);return\"(\"+n[0]+\"?\"+n[1]+\":\"+n[2]+\")\"}}},ND={},TD=new Date(2e3,0,1),RD=\"undefined\"!=typeof window&&window||null,PD=\"Literal\",LD=\"Identifier\",qD=\"@\",UD=\"%\",jD=\":\",FD=mp(\"area\"),ID=mp(\"bounds\"),$D=mp(\"centroid\"),BD={},WD=function(t,e,n,r){var i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),n=void 0===n||n,r=void 0===r||r,(n?a<=t:a<t)&&(r?t<=o:t<o)},YD=\"bin_\",HD=\"intersect\",GD=\"union\",XD=\"index:unit\",VD={isArray:jv,isBoolean:cm,isDate:lm,isNumber:hm,isObject:Fv,isRegExp:dm,isString:Iv,isTuple:u,toBoolean:bm,toDate:_m,toNumber:xm,toString:wm,pad:mm,peek:ym,truncate:km,rgb:ja,lab:Ga,hcl:to,hsl:Ba,sequence:Zy,format:function(t,e){return ap(\"format\",fk,e)(t)},utcFormat:function(t,e){return ap(\"utcFormat\",My,e)(t)},utcParse:function(t,e){return ap(\"utcParse\",ky,e)(t)},timeFormat:op,timeParse:function(t,e){return ap(\"timeParse\",wy,e)(t)},monthFormat:function(t){return up(t,1,\"%B\")},monthAbbrevFormat:function(t){return up(t,1,\"%b\")},dayFormat:function(t){return up(0,2+t,\"%A\")},dayAbbrevFormat:function(t){return up(0,2+t,\"%a\")},quarter:function(t){return 1+~~(new Date(t).getMonth()/3)},utcquarter:function(t){return 1+~~(new Date(t).getUTCMonth()/3)},warn:function(){return sp(this.context.dataflow,\"warn\",arguments)},info:function(){return sp(this.context.dataflow,\"info\",arguments)},debug:function(){return sp(this.context.dataflow,\"debug\",arguments)},inScope:function(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},clampRange:function(t,e,n){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-e?[e,n]:[Math.min(Math.max(i,e),n-r),Math.min(Math.max(a,r),n)]},pinchDistance:function(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){return RD?RD.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){return RD?[RD.innerWidth,RD.innerHeight]:[void 0,void 0]},span:function(t){return t[t.length-1]-t[0]||0},bandspace:function(t,e,n){return Uw(t||0,e||0,n||0)},inrange:WD,setdata:function(t,e){var n=this.context.dataflow,r=this.context.data[t].input;return n.pulse(r,n.changeset().remove(Xv).insert(e)),1},panLinear:function(t,e){return gp(t,e,xm,Yv)},panLog:function(t,e){var n=Math.sign(t[0]);return gp(t,e,dp(n),hp(n))},panPow:function(t,e,n){return gp(t,e,pp(n),pp(1/n))},zoomLinear:function(t,e,n){return vp(t,e,n,xm,Yv)},zoomLog:function(t,e,n){var r=Math.sign(t[0]);return vp(t,e,n,dp(r),hp(r))},zoomPow:function(t,e,n,r){return vp(t,e,n,pp(r),pp(1/r))},encode:function(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,a){var o,s,f=this.context.dataflow,c=this.context.data[t],l=c.input,h=c.changes,d=f.stamp();if(!1===f._trigger||!(l.value.length||e||r))return 0;if((!h||h.stamp<d)&&(c.changes=h=f.changeset(),h.stamp=d,f.runAfter(function(){c.modified=!0,f.pulse(l,h).run()},!0)),n&&(o=!0===n?Xv:jv(n)||u(n)?n:kp(n),h.remove(o)),e&&h.insert(e),r&&(o=kp(r),l.value.some(o)?h.remove(o):h.insert(r)),i)for(s in a)h.modify(i,s,a[s]);return 1}},JD=[\"view\",\"item\",\"group\",\"xy\",\"x\",\"y\"],ZD=\"event.vega.\",QD=\"this.\",KD={};Pp(\"bandwidth\",function(t,e){var n=fp(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0},lp),Pp(\"copy\",function(t,e){var n=fp(t,(e||this).context);return n?n.copy():void 0},lp),Pp(\"domain\",function(t,e){var n=fp(t,(e||this).context);return n?n.domain():[]},lp),Pp(\"range\",function(t,e){var n=fp(t,(e||this).context);return n&&n.range?n.range():[]},lp),Pp(\"invert\",function(t,e,n){var r=fp(t,(n||this).context);return r?jv(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0},lp),Pp(\"scale\",function(t,e,n){var r=fp(t,(n||this).context);return r?r(e):void 0},lp),Pp(\"gradient\",function(t,e,n,r){var i=qb(e,n),a=t.domain(),o=a[0],u=a[a.length-1],s=su(t,o,u);t.ticks&&(o!==(a=t.ticks(+r||15))[0]&&a.unshift(o),u!==a[a.length-1]&&a.push(u));for(var f=0,c=a.length;f<c;++f)i.stop(s(a[f]),t(a[f]));return i},lp),Pp(\"geoArea\",FD,lp),Pp(\"geoBounds\",ID,lp),Pp(\"geoCentroid\",$D,lp),Pp(\"indata\",function(t,e,n){var r=this.context.data[t][\"index:\"+e],i=r?r.value.get(n):void 0;return i?i.count:i},function(t,e,n,r){e[0].type!==PD&&qv(\"First argument to indata must be a string literal.\"),e[1].type!==PD&&qv(\"Second argument to indata must be a string literal.\");var i=e[0].value,a=e[1].value,o=qD+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}),Pp(\"data\",yp,bp),Pp(\"vlSingle\",Cp,bp),Pp(\"vlSingleDomain\",Dp,bp),Pp(\"vlMulti\",Cp,zp),Pp(\"vlMultiDomain\",Dp,zp),Pp(\"vlInterval\",function(t,e,n){return Ap.call(this,t,e,n,Sp)},bp),Pp(\"vlIntervalDomain\",function(t,e,n,r){var i,a,o,u,s,f=this.context.data[t],c=f?f.values.value:[],l=c[0],h=0;if(l){for(i=l.intervals.length;h<i;++h)if(a=l.intervals[h],e&&a.encoding===e||n&&a.field===n){if(!a.extent)return;o=h,s=a.extent.length>2;break}return u=c.reduce(function(t,e){var n=e.intervals[o].extent,r=s?n.map(function(t){return{unit:e.unit,value:t}}):{unit:e.unit,value:n};return s?t.push.apply(t,r):t.push(r),t},[]),s?Op(u,r):Np(u,r)}},bp),Pp(\"treePath\",function(t,e,n){var r=xp(t,this),i=r[e],a=r[n];return i&&a?i.path(a).map(_p):void 0},bp),Pp(\"treeAncestors\",function(t,e){var n=xp(t,this)[e];return n?n.ancestors().map(_p):void 0},bp);var tO,eO,nO={blacklist:[\"_\"],whitelist:[\"datum\",\"event\",\"item\"],fieldvar:\"datum\",globalvar:function(t){return\"_[\"+r(\"$\"+t)+\"]\"},functions:function(t){var e=OD(t);JD.forEach(function(t){e[t]=ZD+t});for(var n in VD)e[n]=QD+n;return e},constants:DD,visitors:KD},rO=function(t){function e(t){if(Iv(t))return t;var e=d[t.type];return null==e&&qv(\"Unsupported type: \"+t.type),e(t)}function n(t){var n={code:e(t),globals:Object.keys(f),fields:Object.keys(c)};return f={},c={},n}var r=(t=t||{}).whitelist?Mm(t.whitelist):{},i=t.blacklist?Mm(t.blacklist):{},a=t.constants||DD,o=(t.functions||OD)(e),u=t.globalvar,s=t.fieldvar,f={},c={},l=0,h=em(u)?u:function(t){return u+'[\"'+t+'\"]'},d={Literal:function(t){return t.raw},Identifier:function(t){var e=t.name;return l>0?e:i.hasOwnProperty(e)?qv(\"Illegal identifier: \"+e):a.hasOwnProperty(e)?a[e]:r.hasOwnProperty(e)?e:(f[e]=1,h(e))},MemberExpression:function(t){var n=!t.computed,r=e(t.object);n&&(l+=1);var i=e(t.property);return r===s&&(c[i]=1),n&&(l-=1),r+(n?\".\"+i:\"[\"+i+\"]\")},CallExpression:function(t){\"Identifier\"!==t.callee.type&&qv(\"Illegal callee type: \"+t.callee.type);var n=t.callee.name,r=t.arguments,i=o.hasOwnProperty(n)&&o[n];return i||qv(\"Unrecognized function: \"+n),em(i)?i(r):i+\"(\"+r.map(e).join(\",\")+\")\"},ArrayExpression:function(t){return\"[\"+t.elements.map(e).join(\",\")+\"]\"},BinaryExpression:function(t){return\"(\"+e(t.left)+t.operator+e(t.right)+\")\"},UnaryExpression:function(t){return\"(\"+t.operator+e(t.argument)+\")\"},ConditionalExpression:function(t){return\"(\"+e(t.test)+\"?\"+e(t.consequent)+\":\"+e(t.alternate)+\")\"},LogicalExpression:function(t){return\"(\"+e(t.left)+t.operator+e(t.right)+\")\"},ObjectExpression:function(t){return\"{\"+t.properties.map(e).join(\",\")+\"}\"},Property:function(t){l+=1;var n=e(t.key);return l-=1,n+\":\"+e(t.value)}};return n.functions=o,n.constants=a,n}(nO),iO=function(t,e,n){var i,a,o={};try{i=zD(t)}catch(e){qv(\"Expression parse error: \"+r(t))}return i.visit(function(t){if(\"CallExpression\"===t.type){var n=t.callee.name,r=nO.visitors[n];r&&r(n,t.arguments,e,o)}}),(a=rO(i)).globals.forEach(function(t){var n=\"$\"+t;!o.hasOwnProperty(n)&&e.getSignal(t)&&(o[n]=e.signalRef(t))}),{$expr:n?n+\"return(\"+a.code+\");\":a.code,$fields:a.fields,$params:o}},aO=\"view\",oO=\"scope\",uO=function(t,e){return t.signal?e.getSignal(t.signal).id:t.scale?e.getScale(t.scale).id:qp(t,e)},sO=function(t,e,n){return tO=e||fO,eO=n||bO,Yp(t.trim()).map(Hp)},fO=\"view\",cO=\"[\",lO=\"]\",hO=\"{\",dO=\"}\",pO=\":\",gO=\",\",vO=\"@\",mO=\">\",yO=/[[\\]{}]/,bO={\"*\":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},_O=\"var datum=event.item&&event.item.datum;\",xO=function(t,e,n){var i,a=t.events,o=t.update,u=t.encode,s=[],f=\"\";a||qv(\"Signal update missing events specification.\"),Iv(a)&&(a=sO(a)),(a=tm(a).filter(function(t){return t.signal||t.scale?(s.push(t),0):1})).length&&s.push(a.length>1?{merge:a}:a[0]),null!=u&&(o&&qv(\"Signal encode and update are mutually exclusive.\"),o=\"encode(item(),\"+r(u)+\")\"),f=Iv(o)?iO(o,e,_O):null!=o.expr?iO(o.expr,e,_O):null!=o.value?o.value:null!=o.signal?{$expr:\"_.value\",$params:{value:e.signalRef(o.signal)}}:qv(\"Invalid signal update specification.\"),i={target:n,update:f},t.force&&(i.options={force:!0}),s.forEach(function(t){t={source:uO(t,e)},e.addUpdate(am(t,i))})},wO=function(t,e){var n=e.getSignal(t.name);if(t.update){var r=iO(t.update,e);n.update=r.$expr,n.params=r.$params}t.on&&t.on.forEach(function(t){xO(t,e,n.id)})},MO={$tupleid:1,toString:function(){return\":_tupleid_:\"}},kO=tg(\"key\"),EO=\"descending\",SO=ug(\"aggregate\"),AO=ug(\"axisticks\"),CO=ug(\"bound\"),zO=ug(\"collect\"),DO=ug(\"compare\"),OO=ug(\"datajoin\"),NO=ug(\"encode\"),TO=ug(\"facet\"),RO=ug(\"field\"),PO=ug(\"key\"),LO=ug(\"legendentries\"),qO=ug(\"mark\"),UO=ug(\"multiextent\"),jO=ug(\"multivalues\"),FO=ug(\"overlap\"),IO=ug(\"params\"),$O=ug(\"prefacet\"),BO=ug(\"projection\"),WO=ug(\"proxy\"),YO=ug(\"relay\"),HO=ug(\"render\"),GO=ug(\"scale\"),XO=ug(\"sieve\"),VO=ug(\"sortitems\"),JO=ug(\"viewlayout\"),ZO=ug(\"values\"),QO=0,KO=[\"identity\",\"ordinal\",\"band\",\"point\",\"bin-linear\",\"bin-ordinal\",\"linear\",\"pow\",\"sqrt\",\"log\",\"sequential\",\"time\",\"utc\",\"quantize\",\"quantile\",\"threshold\"],tN=Mm(KO),eN=Mm(KO.slice(1,6)),nN=function(t,e){var n={};for(var r in t)\"name\"!==r&&(n[r]=Ag(t[r],e));e.addProjection(t.name,n)},rN=\"top\",iN=\"left\",aN=\"bottom\",oN=\"value\",uN=\"guide-label\",sN=\"group-title\",fN=[\"shape\",\"size\",\"fill\",\"stroke\",\"strokeDash\",\"opacity\"],cN={name:1,interactive:1},lN=Mm([\"rule\"]),hN=Mm([\"group\",\"image\",\"rect\"]),dN=function(t,e){var n=\"\";return lN[e]?n:(t.x2&&(t.x?(hN[e]&&(n+=\"if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;\"),n+=\"o.width=o.x2-o.x;\"):n+=\"o.x=o.x2-(o.width||0);\"),t.xc&&(n+=\"o.x=o.xc-(o.width||0)/2;\"),t.y2&&(t.y?(hN[e]&&(n+=\"if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;\"),n+=\"o.height=o.y2-o.y;\"):n+=\"o.y=o.y2-(o.height||0);\"),t.yc&&(n+=\"o.y=o.yc-(o.height||0)/2;\"),n)},pN=function(t,e,n,r){function i(t,i,a,o){return\"this.\"+t+\"(\"+[_N(null,i,e,n,r),_N(null,a,e,n,r),_N(null,o,e,n,r)].join(\",\")+\").toString()\"}return t.c?i(\"hcl\",t.h,t.c,t.l):t.h||t.s?i(\"hsl\",t.h,t.s,t.l):t.l||t.a?i(\"lab\",t.l,t.a,t.b):t.r||t.g||t.b?i(\"rgb\",t.r,t.g,t.b):null},gN=function(t,e,n,r){var i=iO(t,e);return i.$fields.forEach(function(t){r[t]=1}),am(n,i.$params),i.$expr},vN=function(t,e,n,r){return Cg(Fv(t)?t:{datum:t},e,n,r)},mN=function(t,e,n,r,i){var a,o,u,s=Dg(t.scale,n,r,i);return null!=t.range?(o=s+\".range()\",e=0===(a=+t.range)?o+\"[0]\":\"($=\"+o+\",\"+(1===a?\"$[$.length-1]\":\"$[0]+\"+a+\"*($[$.length-1]-$[0])\")+\")\"):(void 0!==e&&(e=s+\"(\"+e+\")\"),t.band&&(u=zg(t.scale,n))&&(a=(o=s+\".bandwidth\")+\"()\"+(1===(a=+t.band)?\"\":\"*\"+a),u<0&&(a=\"(\"+o+\"?\"+a+\":0)\"),e=(e?e+\"+\":\"\")+a,t.extra&&(e=\"(datum.extra?\"+s+\"(datum.extra.value):\"+e+\")\")),null==e&&(e=\"0\")),e},yN=function(t,e,n,i){return\"this.gradient(\"+Dg(t.gradient,e,n,i)+\",\"+r(t.start)+\",\"+r(t.stop)+\",\"+r(t.count)+\")\"},bN=function(t,e,n,r){return Fv(t)?\"(\"+_N(null,t,e,n,r)+\")\":t},_N=function(t,e,n,i,a){if(null!=e.gradient)return yN(e,n,i,a);var o=e.signal?gN(e.signal,n,i,a):e.color?pN(e.color,n,i,a):null!=e.field?vN(e.field,n,i,a):void 0!==e.value?r(e.value):void 0;return null!=e.scale&&(o=mN(e,o,n,i,a)),void 0===o&&(o=null),null!=e.exponent&&(o=\"Math.pow(\"+o+\",\"+bN(e.exponent,n,i,a)+\")\"),null!=e.mult&&(o+=\"*\"+bN(e.mult,n,i,a)),null!=e.offset&&(o+=\"+\"+bN(e.offset,n,i,a)),e.round&&(o=\"Math.round(\"+o+\")\"),o},xN=function(t,e,n){return t+\"[\"+r(e)+\"]=\"+n+\";\"},wN=function(t,e,n,r,i){var a=\"\";return e.forEach(function(e){var o=_N(t,e,n,r,i);a+=e.test?gN(e.test,n,r,i)+\"?\"+o+\":\":o}),xN(\"o\",t,a)},MN=\"mark\",kN=\"frame\",EN=\"title\",SN=function(t,e,n,r,i,a,o){return{type:t,name:o?o.name:void 0,role:e,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:Rg(a,o,cN)}},AN=\"group\",CN=\"text\",zN=function(t,e,n,r){var i,a,o={value:0},u={};return u.enter=i={opacity:o,x:o,y:o},Tg(i,\"width\",n.gradientWidth),Tg(i,\"height\",n.gradientHeight),Tg(i,\"stroke\",n.gradientStrokeColor),Tg(i,\"strokeWidth\",n.gradientStrokeWidth),u.exit={opacity:o},u.update=a={x:o,y:o,fill:{gradient:e},opacity:{value:1}},Tg(a,\"width\",n.gradientWidth),Tg(a,\"height\",n.gradientHeight),SN(\"rect\",\"legend-gradient\",null,void 0,void 0,u,r)},DN=function(t,e,n,r){var i,a,o={value:0},u={};return u.enter=i={opacity:o,text:{field:\"label\"}},Tg(i,\"fill\",e.labelColor),Tg(i,\"font\",e.labelFont),Tg(i,\"fontSize\",e.labelFontSize),Tg(i,\"baseline\",e.gradientLabelBaseline),Tg(i,\"limit\",e.gradientLabelLimit),u.exit={opacity:o},u.update=a={opacity:{value:1}},i.x=a.x={field:\"perc\",mult:e.gradientWidth},i.y=a.y={value:e.gradientHeight,offset:e.gradientLabelOffset},i.align=a.align={signal:'datum.perc<=0?\"left\":datum.perc>=1?\"right\":\"center\"'},SN(CN,\"legend-label\",uN,\"perc\",r,u,n)},ON=function(t,e,n,r){var i,a,o={value:0},u={};return u.enter=i={opacity:o},Tg(i,\"align\",e.labelAlign),Tg(i,\"baseline\",e.labelBaseline),Tg(i,\"fill\",e.labelColor),Tg(i,\"font\",e.labelFont),Tg(i,\"fontSize\",e.labelFontSize),Tg(i,\"limit\",e.labelLimit),u.exit={opacity:o},u.update=a={opacity:{value:1},text:{field:\"label\"}},i.x=a.x={field:\"offset\",offset:e.labelOffset},i.y=a.y={field:\"size\",mult:.5,offset:{field:\"total\",offset:{field:{group:\"entryPadding\"},mult:{field:\"index\"}}}},SN(CN,\"legend-label\",uN,oN,r,u,n)},NN=function(t,e,n,r){var i,a,o={value:0},u={};return u.enter=i={opacity:o},Tg(i,\"shape\",e.symbolType),Tg(i,\"size\",e.symbolSize),Tg(i,\"strokeWidth\",e.symbolStrokeWidth),t.fill||(Tg(i,\"fill\",e.symbolFillColor),Tg(i,\"stroke\",e.symbolStrokeColor)),u.exit={opacity:o},u.update=a={opacity:{value:1}},i.x=a.x={field:\"offset\",mult:.5},i.y=a.y={field:\"size\",mult:.5,offset:{field:\"total\",offset:{field:{group:\"entryPadding\"},mult:{field:\"index\"}}}},fN.forEach(function(e){t[e]&&(a[e]=i[e]={scale:t[e],field:oN})}),SN(\"symbol\",\"legend-symbol\",null,oN,r,u,n)},TN=function(t,e,n,r){var i,a={value:0},o=t.title,u={};return u.enter=i={x:{field:{group:\"padding\"}},y:{field:{group:\"padding\"}},opacity:a},Tg(i,\"align\",e.titleAlign),Tg(i,\"baseline\",e.titleBaseline),Tg(i,\"fill\",e.titleColor),Tg(i,\"font\",e.titleFont),Tg(i,\"fontSize\",e.titleFontSize),Tg(i,\"fontWeight\",e.titleFontWeight),Tg(i,\"limit\",e.titleLimit),u.exit={opacity:a},u.update={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+\"\"}},SN(CN,\"legend-title\",\"guide-title\",null,r,u,n)},RN=function(t,e,n,r,i,a,o){return{type:AN,name:n,role:t,style:e,from:r,interactive:i,encode:a,marks:o}},PN=function(t){var e=t.role||\"\";return e.indexOf(\"axis\")&&e.indexOf(\"legend\")?t.type===AN?\"scope\":e||MN:e},LN=function(t){return{clip:t.clip||!1,interactive:!1!==t.interactive,marktype:t.type,name:t.name||void 0,role:t.role||PN(t),zindex:+t.zindex||void 0}},qN=function(t,e){var n=_e(t.type);n||qv(\"Unrecognized transform type: \"+r(t.type));var i=Zp(n.type.toLowerCase(),null,Ug(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i},UN=function(t,e,n){var r,i,a,o,u;return t?(r=t.facet)&&(e||qv(\"Only group marks can be faceted.\"),null!=r.field?o=u=Kp(n.getData(r.data).output):(i=n.keyRef(r.groupby),t.data?u=Kp(n.getData(t.data).aggregate):((a=qN(am({type:\"aggregate\",groupby:tm(r.groupby)},r.aggregate))).params.key=i,a.params.pulse=Kp(n.getData(r.data).output),o=u=Kp(n.add(a))))):o=Kp(n.add(zO(null,[{}]))),o||(o=t.$ref?t:Kp(n.getData(t.data).output)),{key:i,pulse:o,parent:u}};Jg.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],a=e[n-1],o=e[n-2],u=null;for(t.add(e[0]);r<n;++r)e[r].params.pulse=Kp(e[r-1]),t.add(e[r]),\"aggregate\"===e[r].type&&(u=e[r]);return new Jg(t,i,o,a,u)};var jN=Jg.prototype;jN.countsRef=function(t,e,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=Zg(e);return null!=s&&(t=o.scope,r=u[s]),r?n&&n.field&&Qg(t,r.agg.params,n):(a={groupby:t.fieldRef(e,\"key\"),pulse:Kp(o.output)},n&&n.field&&Qg(t,a,n),r={agg:i=t.add(SO(a)),ref:Kp(r=t.add(zO({pulse:Kp(i)})))},null!=s&&(u[s]=r)),r.ref},jN.tuplesRef=function(){return Kp(this.values)},jN.extentRef=function(t,e){return Kg(t,this,\"extent\",\"extent\",e,!1)},jN.domainRef=function(t,e){return Kg(t,this,\"domain\",\"values\",e,!1)},jN.valuesRef=function(t,e,n){return Kg(t,this,\"vals\",\"values\",e,n||!0)},jN.lookupRef=function(t,e){return Kg(t,this,\"lookup\",\"tupleindex\",e,!1)},jN.indataRef=function(t,e){return Kg(t,this,\"indata\",\"tupleindex\",e,!0,!0)};var FN=function(t,e,n){var i,a,o,u,s=t.from.facet,f=s.name,c=Kp(e.getData(s.data).output);s.name||qv(\"Facet must have a name: \"+r(s)),s.data||qv(\"Facet must reference a data set: \"+r(s)),s.field?u=e.add($O({field:e.fieldRef(s.field),pulse:c})):s.groupby?u=e.add(TO({key:e.keyRef(s.groupby),group:Kp(e.proxy(n.parent)),pulse:c})):qv(\"Facet must specify groupby or field: \"+r(s)),a=(i=e.fork()).add(zO()),o=i.add(XO({pulse:Kp(a)})),i.addData(f,new Jg(i,a,a,o)),i.addSignal(\"parent\",null),u.params.subflow={$subflow:KN(t,i).toRuntime()}},IN=function(t,e,n){var r=e.add($O({pulse:n.pulse})),i=e.fork();i.add(XO()),i.addSignal(\"parent\",null),r.params.subflow={$subflow:KN(t,i).toRuntime()}},$N=function(t,e,n){var r,i,a=t.remove,o=t.insert,u=t.toggle,s=t.modify,f=t.values,c=e.add(Qp());r=\"if(\"+t.trigger+',modify(\"'+n+'\",'+[o,a,u,s,f].map(function(t){return null==t?\"null\":t}).join(\",\")+\"),0)\",i=iO(r,e),c.update=i.$expr,c.params=i.$params},BN=function(t,e){var n,r,i,a,o,u,s,f,c,l,h,d,p,g=PN(t),v=t.type===AN,m=t.from&&t.from.facet,y=t.layout||\"scope\"===g||g===kN,b=g===MN||y||m;i=UN(t.from,v,e),c=Kp(r=e.add(OO({key:i.key||(t.key?tg(t.key):void 0),pulse:i.pulse,clean:!v}))),r=a=e.add(zO({pulse:c})),l=Kp(r=e.add(qO({markdef:LN(t),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef(\"parent\"):null,index:e.markpath(),pulse:Kp(r)}))),(r=e.add(NO(Pg(t.encode,t.type,g,t.style,e,{pulse:l})))).params.parent=e.encode(),t.transform&&t.transform.forEach(function(t){var n=qN(t,e);(n.metadata.generates||n.metadata.changes)&&qv(\"Mark transforms should not generate new data.\"),n.params.pulse=Kp(r),e.add(r=n)}),t.sort&&(r=e.add(VO({sort:e.compareRef(t.sort),pulse:Kp(r)}))),h=Kp(r),(m||y)&&(d=Kp(y=e.add(JO({layout:e.objectProperty(t.layout),legendMargin:e.config.legendMargin,mark:l,pulse:h})))),p=Kp(o=e.add(CO({mark:l,pulse:d||h}))),v&&(b&&((n=e.operators).pop(),y&&n.pop()),e.pushState(h,d||p,c),m?FN(t,e,i):b?IN(t,e,i):KN(t,e),e.popState(),b&&(y&&n.push(y),n.push(o))),t.overlap&&(p=Kp(e.add(FO({method:!0===t.overlap?\"parity\":t.overlap,pulse:p})))),u=e.add(HO({pulse:p})),s=e.add(XO({pulse:Kp(u)},void 0,e.parent())),null!=t.name&&(f=t.name,e.addData(f,new Jg(e,a,u,s)),t.on&&t.on.forEach(function(t){(t.insert||t.remove||t.toggle)&&qv(\"Marks only support modify triggers.\"),$N(t,e,f)}))},WN=function(t,e){var n,r,i,a,o,u,s,f,c=t.type||\"symbol\",l=e.config.legend,h=t.encode||{},d=h.legend||{},p=d.name||void 0,g=!!d.interactive,v=d.style,m=t.size||t.shape||t.fill||t.stroke||t.strokeDash||t.opacity;return m||qv(\"Missing valid scale for legend.\"),n={orient:og(t.orient,l.orient),title:null!=t.title},r=Kp(e.add(zO(null,[n]))),d=Rg({enter:ev(l),update:{offset:Ng(og(t.offset,l.offset)),padding:Ng(og(t.padding,l.padding)),titlePadding:Ng(og(t.titlePadding,l.titlePadding))}},d,cN),u={update:{x:{field:{group:\"padding\"}},y:{field:{group:\"padding\"}},entryPadding:Ng(og(t.entryPadding,l.entryPadding))}},\"gradient\"===c?(i=Kp(e.add(LO({type:\"gradient\",scale:e.scaleRef(m),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),f=[zN(0,m,l,h.gradient),DN(0,l,h.labels,i)]):(i=Kp(e.add(LO(s={scale:e.scaleRef(m),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),f=[NN(t,l,h.symbols,i),ON(0,l,h.labels,i)],s.size=tv(t,e,f)),f=[RN(\"legend-entry\",null,null,r,g,u,f)],n.title&&(o=TN(t,l,h.title,r),u.update.y.offset={field:{group:\"titlePadding\"},offset:nv(e,o.encode,\"fontSize\",\"guide-title\")},f.push(o)),a=RN(\"legend\",v,p,r,g,d,f),t.zindex&&(a.zindex=t.zindex),BN(a,e)},YN=function(t,e){t=Iv(t)?{text:t}:t;var n,r,i,a=e.config.title,o=am({},t.encode);return n={orient:null!=t.orient?t.orient:a.orient},r=Kp(e.add(zO(null,[n]))),o.name=t.name,o.interactive=t.interactive,i=rv(t,a,o,r),t.zindex&&(i.zindex=t.zindex),BN(i,e)},HN=function(t,e){var n=e.config,r=t.orient,i=r===rN||r===aN?n.axisX:n.axisY,a=n[\"axis\"+r[0].toUpperCase()+r.slice(1)],o=\"band\"===e.scaleType(t.scale)&&n.axisBand;return i||a||o?am({},n.axis,i,a,o):n.axis},GN=function(t,e,n,r){var i,a,o,u,s,f=t.orient,c={value:0},l={};return l.enter=i={opacity:c},Tg(i,\"stroke\",e.domainColor),Tg(i,\"strokeWidth\",e.domainWidth),l.exit={opacity:c},l.update=a={opacity:{value:1}},f===rN||f===aN?(o=\"x\",s=\"y\"):(o=\"y\",s=\"x\"),u=o+\"2\",i[s]=c,a[o]=i[o]=uv(t,0),a[u]=i[u]=uv(t,1),SN(\"rule\",\"axis-domain\",null,null,r,l,n)},XN=function(t,e,n,r){var i,a,o,u,s,f,c,l,h=t.orient,d=t.gridScale,p=h===iN||h===rN?1:-1,g=p*t.offset||0,v={value:0},m={};return m.enter=i={opacity:v},Tg(i,\"stroke\",e.gridColor),Tg(i,\"strokeWidth\",e.gridWidth),Tg(i,\"strokeDash\",e.gridDash),m.exit=a={opacity:v},m.update=o={},Tg(o,\"opacity\",e.gridOpacity),u={scale:t.scale,field:oN,band:e.bandPosition,round:e.tickRound,extra:e.tickExtra,offset:e.tickOffset},h===rN||h===aN?(s=\"x\",f=\"y\",l=\"height\"):(s=\"y\",f=\"x\",l=\"width\"),c=f+\"2\",o[s]=i[s]=a[s]=u,d?(i[f]={scale:d,range:0,mult:p,offset:g},o[c]=i[c]={scale:d,range:1,mult:p,offset:g}):(i[f]={value:g},o[c]=i[c]={signal:l,mult:p,offset:g}),SN(\"rule\",\"axis-grid\",null,oN,r,m,n)},VN=function(t,e,n,r,i){var a,o,u,s,f,c=t.orient,l=c===iN||c===rN?-1:1,h={value:0},d={};return d.enter=a={opacity:h},Tg(a,\"stroke\",e.tickColor),Tg(a,\"strokeWidth\",e.tickWidth),d.exit=o={opacity:h},d.update=u={opacity:{value:1}},s=Ng(i),s.mult=l,f={scale:t.scale,field:oN,band:e.bandPosition,round:e.tickRound,extra:e.tickExtra,offset:e.tickOffset},c===rN||c===aN?(u.y=a.y=h,u.y2=a.y2=s,u.x=a.x=o.x=f):(u.x=a.x=h,u.x2=a.x2=s,u.y=a.y=o.y=f),SN(\"rule\",\"axis-tick\",null,oN,r,d,n)},JN=function(t,e,n,r,i){var a,o,u,s,f,c=t.orient,l=t.labelOverlap,h=c===iN||c===rN?-1:1,d=null!=t.labelPadding?t.labelPadding:e.labelPadding,p={value:0},g={};return g.enter=a={opacity:p},Tg(a,\"angle\",e.labelAngle),Tg(a,\"fill\",e.labelColor),Tg(a,\"font\",e.labelFont),Tg(a,\"fontSize\",e.labelFontSize),Tg(a,\"limit\",e.labelLimit),g.exit=o={opacity:p},g.update=u={opacity:{value:1},text:{field:\"label\"}},s=Ng(i),s.mult=h,s.offset=Ng(d),s.offset.mult=h,f={scale:t.scale,field:oN,band:.5,offset:e.tickOffset},c===rN||c===aN?(u.y=a.y=s,u.x=a.x=o.x=f,Tg(u,\"align\",\"center\"),Tg(u,\"baseline\",c===rN?\"bottom\":\"top\")):(u.x=a.x=s,u.y=a.y=o.y=f,Tg(u,\"align\",\"right\"===c?\"left\":\"right\"),Tg(u,\"baseline\",\"middle\")),t=SN(CN,\"axis-label\",uN,oN,r,g,n),t.overlap=l||e.labelOverlap,t},ZN=function(t,e,n,r){var i,a,o,u=t.orient,s=t.title,f=u===iN||u===rN?-1:1,c=u===rN||u===aN,l={};return l.enter=i={opacity:{value:0}},Tg(i,\"align\",e.titleAlign),Tg(i,\"fill\",e.titleColor),Tg(i,\"font\",e.titleFont),Tg(i,\"fontSize\",e.titleFontSize),Tg(i,\"fontWeight\",e.titleFontWeight),Tg(i,\"limit\",e.titleLimit),l.exit={opacity:{value:0}},l.update=a={opacity:{value:1},text:s&&s.signal?{signal:s.signal}:{value:s+\"\"}},o={scale:t.scale,range:.5},c?(a.x=o,a.angle={value:0},a.baseline={value:u===rN?\"bottom\":\"top\"}):(a.y=o,a.angle={value:90*f},a.baseline={value:\"bottom\"}),Tg(a,\"angle\",e.titleAngle),Tg(a,\"baseline\",e.titleBaseline),!Tg(a,\"x\",e.titleX)&&c&&!qg(\"x\",n)&&(l.enter.auto={value:!0}),!Tg(a,\"y\",e.titleY)&&!c&&!qg(\"y\",n)&&(l.enter.auto={value:!0}),SN(CN,\"axis-title\",\"guide-title\",null,r,l,n)},QN=function(t,e){var n,r,i,a,o,u,s=HN(t,e),f=t.encode||{},c=f.axis||{},l=c.name||void 0,h=!!c.interactive,d=c.style;return n={orient:t.orient,ticks:!!og(t.ticks,s.ticks),labels:!!og(t.labels,s.labels),grid:!!og(t.grid,s.grid),domain:!!og(t.domain,s.domain),title:!!og(t.title,!1)},r=Kp(e.add(zO({},[n]))),c=Rg({update:{range:{signal:'abs(span(range(\"'+t.scale+'\")))'},offset:Ng(og(t.offset,0)),position:Ng(og(t.position,0)),titlePadding:Ng(og(t.titlePadding,s.titlePadding)),minExtent:Ng(og(t.minExtent,s.minExtent)),maxExtent:Ng(og(t.maxExtent,s.maxExtent))}},f.axis,cN),i=Kp(e.add(AO({scale:e.scaleRef(t.scale),extra:s.tickExtra,count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),u=[],n.grid&&u.push(XN(t,s,f.grid,i)),n.ticks&&(a=og(t.tickSize,s.tickSize),u.push(VN(t,s,f.ticks,i,a))),n.labels&&(a=n.ticks?a:0,u.push(JN(t,s,f.labels,i,a))),n.domain&&u.push(GN(t,s,f.domain,r)),n.title&&u.push(ZN(t,s,f.title,r)),o=RN(\"axis\",d,l,r,h,c,u),t.zindex&&(o.zindex=t.zindex),BN(o,e)},KN=function(t,e,n){var r=tm(t.signals),i=tm(t.scales);return n||r.forEach(function(t){Bz(t,e)}),tm(t.projections).forEach(function(t){nN(t,e)}),i.forEach(function(t){cg(t,e)}),tm(t.data).forEach(function(t){iv(t,e)}),i.forEach(function(t){lg(t,e)}),r.forEach(function(t){wO(t,e)}),tm(t.axes).forEach(function(t){QN(t,e)}),tm(t.marks).forEach(function(t){BN(t,e)}),tm(t.legends).forEach(function(t){WN(t,e)}),t.title&&YN(t.title,e),e.parseLambdas(),e},tT=Mm([\"width\",\"height\",\"padding\",\"autosize\"]),eT=fv.prototype=cv.prototype;eT.fork=function(){return new cv(this)},eT.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},eT.id=function(){return(this._subid?this._subid+\":\":0)+this._id++},eT.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(function(e){e.$ref=t.id}),t.refs=null),t},eT.proxy=function(t){var e=t instanceof Jp?Kp(t):t;return this.add(WO({value:e}))},eT.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},eT.addUpdate=function(t){return this.updates.push(t),t},eT.finish=function(){function t(t,e,n){var r;t&&((r=t.data||(t.data={}))[e]||(r[e]=[])).push(n)}var e,n;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;for(e in this.data){t((n=this.data[e]).input,e,\"input\"),t(n.output,e,\"output\"),t(n.values,e,\"values\");for(var r in n.index)t(n.index[r],e,\"index:\"+r)}return this},eT.pushState=function(t,e,n){this._encode.push(Kp(this.add(XO({pulse:t})))),this._parent.push(e),this._lookup.push(n?Kp(this.proxy(n)):null),this._markpath.push(-1)},eT.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},eT.parent=function(){return ym(this._parent)},eT.encode=function(){return ym(this._encode)},eT.lookup=function(){return ym(this._lookup)},eT.markpath=function(){var t=this._markpath;return++t[t.length-1]},eT.fieldRef=function(t,e){if(Iv(t))return tg(t,e);t.signal||qv(\"Unsupported field reference: \"+r(t));var n,i=t.signal,a=this.field[i];return a||(n={name:this.signalRef(i)},e&&(n.as=e),this.field[i]=a=Kp(this.add(RO(n)))),a},eT.compareRef=function(t){function e(t){return ag(t)?(r=!0,Kp(n[t.signal])):t}var n=this.signals,r=!1,i=tm(t.field).map(e),a=tm(t.order).map(e);return r?Kp(this.add(DO({fields:i,orders:a}))):eg(i,a)},eT.keyRef=function(t){var e=this.signals,n=!1;return t=tm(t).map(function(t){return ag(t)?(n=!0,Kp(e[t.signal])):t}),n?Kp(this.add(PO({fields:t}))):ng(t)},eT.sortRef=function(t){if(!t)return t;var e=[ig(t.op,t.field),MO],n=t.order||\"ascending\";return n.signal?Kp(this.add(DO({fields:e,orders:[n=this.signalRef(n.signal),n]}))):eg(e,[n,n])},eT.event=function(t,e){var n=t+\":\"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},eT.addSignal=function(t,e){this.signals.hasOwnProperty(t)&&qv(\"Duplicate signal name: \"+r(t));var n=e instanceof Jp?e:this.add(Qp(e));return this.signals[t]=n},eT.getSignal=function(t){return this.signals[t]||qv(\"Unrecognized signal name: \"+r(t)),this.signals[t]},eT.signalRef=function(t){return this.signals[t]?Kp(this.signals[t]):(this.lambdas.hasOwnProperty(t)||(this.lambdas[t]=this.add(Qp(null))),Kp(this.lambdas[t]))},eT.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=iO(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},eT.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},eT.objectProperty=function(t){return t&&Fv(t)?this.signalRef(t.signal||lv(t)):t},eT.addBinding=function(t,e){this.bindings||qv(\"Nested signals do not support binding: \"+r(t)),this.bindings.push(am({signal:t},e))},eT.addScaleProj=function(t,e){this.scales.hasOwnProperty(t)&&qv(\"Duplicate scale or projection name: \"+r(t)),this.scales[t]=this.add(e)},eT.addScale=function(t,e){this.addScaleProj(t,GO(e))},eT.addProjection=function(t,e){this.addScaleProj(t,BO(e))},eT.getScale=function(t){return this.scales[t]||qv(\"Unrecognized scale name: \"+r(t)),this.scales[t]},eT.projectionRef=eT.scaleRef=function(t){return Kp(this.getScale(t))},eT.projectionType=eT.scaleType=function(t){return this.getScale(t).params.type},eT.addData=function(t,e){return this.data.hasOwnProperty(t)&&qv(\"Duplicate data set name: \"+r(t)),this.data[t]=e},eT.getData=function(t){return this.data[t]||qv(\"Undefined data set name: \"+r(t)),this.data[t]},eT.addDataPipeline=function(t,e){return this.data.hasOwnProperty(t)&&qv(\"Duplicate data set name: \"+r(t)),this.addData(t,Jg.fromEntries(this,e))};var nT=function(t){var e=pv();return(t||[]).forEach(function(t){var n;if(t)for(n in t)e[n]=Fv(e[n])?am(e[n],t[n]):e[n]=t[n]}),e},rT=\"sans-serif\",iT=30,aT=2,oT=\"#4c78a8\",uT=\"#000\",sT=\"#888\",fT=\"#ddd\",cT=[{key:\"$ref\",parse:function(t,e){return e.get(t.$ref)||qv(\"Operator not defined: \"+t.$ref)}},{key:\"$key\",parse:function(t,e){var n=\"k:\"+t.$key;return e.fn[n]||(e.fn[n]=pm(t.$key))}},{key:\"$expr\",parse:function(t,e){var n=\"e:\"+t.$expr;return e.fn[n]||(e.fn[n]=Lv(mv(t.$expr,e),t.$fields,t.$name))}},{key:\"$field\",parse:function(t,e){if(!t.$field)return null;var n=\"f:\"+t.$field+\"_\"+t.$name;return e.fn[n]||(e.fn[n]=$v(t.$field,t.$name))}},{key:\"$encode\",parse:function(t,e){var n,r,i=t.$encode,a={};for(n in i)r=i[n],a[n]=Lv(_v(r.$expr,e),r.$fields),a[n].output=r.$output;return a}},{key:\"$compare\",parse:function(t,e){var n=\"c:\"+t.$compare+\"_\"+t.$order,r=tm(t.$compare).map(function(t){return t&&t.$tupleid?s:t});return e.fn[n]||(e.fn[n]=nm(r,t.$order))}},{key:\"$context\",parse:function(t,e){return e}},{key:\"$subflow\",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var a=pT(n,e.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}},{key:\"$tupleid\",parse:function(){return s}}],lT=function(t,e){kv(t.type)||!t.type?e.operator(t,t.update?vv(t.update,e):null):e.transform(t,t.type)},hT=function(t,e){var n,r=null!=t.filter?yv(t.filter,e):void 0,i=null!=t.stream?e.get(t.stream):void 0;t.source?i=e.events(t.source,t.type,r):t.merge&&(i=(n=t.merge.map(e.get.bind(e)))[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map(e.get.bind(e)),i=i.between(n[0],n[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&qv(\"Invalid stream definition: \"+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)},dT=function(t,e){var n=e.get(t.source),r=null,i=t.update,a=void 0;n||qv(\"Source not defined: \"+t.source),r=t.target&&t.target.$expr?yv(t.target.$expr,e):e.get(t.target),i&&i.$expr&&(i.$params&&(a=xv(i.$params,e)),i=bv(i.$expr,e)),e.update(t,n,r,i,a)},pT=function(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),n.forEach(function(t){lT(t,e)}),n.forEach(function(t){Sv(t,e)}),(t.streams||[]).forEach(function(t){hT(t,e)}),(t.updates||[]).forEach(function(t){dT(t,e)}),e.resolve()},gT={skip:!0},vT=function(t,e,n){return new Av(t,e,n)};Av.prototype=Cv.prototype={fork:function(){var t=new Cv(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n,r=this,i=r.dataflow;if(r.set(t.id,e),Ev(t.type)&&(n=t.value)&&(n.$ingest?i.ingest(e,n.$ingest,n.$format):n.$request?i.request(e,n.$request,n.$format):i.pulse(e,i.changeset().insert(n))),t.root&&(r.root=e),t.parent){var a=r.get(t.parent.$ref);a?(i.connect(a,[e]),e.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(t.parent.$ref),i.connect(a,[e]),e.targets().add(a)})}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(var o in t.data)n=r.data[o]||(r.data[o]={}),t.data[o].forEach(function(t){n[t]=e})},resolve:function(){return(this.unresolved||[]).forEach(function(t){t()}),delete this.unresolved,this},operator:function(t,e,n){this.add(t,this.dataflow.add(t.value,e,n,t.react))},transform:function(t,e,n){this.add(t,this.dataflow.add(this.transforms[Mv(e)],n))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(function(e){return e.getState(t)})),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(function(t){n.update(e.signals[t],i[t],gT)}),Object.keys(r||{}).forEach(function(t){n.pulse(e.data[t].input,n.changeset().remove(Xv).insert(r[t]))}),(t.subcontext||[]).forEach(function(t,n){var r=e.subcontext[n];r&&r.setState(t)})}};var mT=function(t,e,n){return pT(e,vT(t,Uy,n||VD))},yT=\"padding\",bT=fm(Rv,me);bT.run=function(t){if(me.prototype.run.call(this,t),this._redraw||this._resize)try{this.render()}catch(t){this.error(t)}return this},bT.render=function(){return this._renderer&&(this._resize&&(this._resize=0,Ph(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},bT.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},bT.container=function(){return this._el},bT.scenegraph=function(){return this._scenegraph},bT.signal=function(t,e,n){var r=Pv(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},bT.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background},bT.width=function(t){return arguments.length?this.signal(\"width\",t):this.signal(\"width\")},bT.height=function(t){return arguments.length?this.signal(\"height\",t):this.signal(\"height\")},bT.padding=function(t){return arguments.length?this.signal(\"padding\",t):this.signal(\"padding\")},bT.autosize=function(t){return arguments.length?this.signal(\"autosize\",t):this.signal(\"autosize\")},bT.renderer=function(t){return arguments.length?(Zi(t)||qv(\"Unrecognized renderer type: \"+t),t!==this._renderType&&(this._renderType=t,this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._renderType},bT.loader=function(t){return arguments.length?(t!==this._loader&&(me.prototype.loader.call(this,t),this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._loader},bT.resize=function(){return this._autosize=1,this},bT._resizeView=function(t,e,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.width(n),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.height(r),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run(\"enter\"),a&&o.runAfter(function(){o.resize()})})},bT.addEventListener=function(t,e){return this._handler.on(t,e),this},bT.removeEventListener=function(t,e){return this._handler.off(t,e),this},bT.addSignalListener=function(t,e){var n=Pv(this,t),r=function(){e(t,n.value)};return r.handler=e,this.on(n,null,r),this},bT.removeSignalListener=function(t,e){var n=Pv(this,t)._targets||[],r=n.filter(function(t){var n=t._update;return n&&n.handler===e});return r.length&&n.remove(r[0]),this},bT.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},bT.tooltipHandler=function(t){var e=this._handler;return arguments.length?(e.handleTooltip=t||Ai.prototype.handleTooltip,this):e.handleTooltip},bT.events=function(t,e,n){var r,i=this,a=new b(n),o=function(n,r){t===zz&&Uh(i,e)&&n.preventDefault();try{a.receive(Cz(i,n,r))}catch(t){i.error(t)}finally{i.run()}};if(t===zz)return i.addEventListener(e,o),a;if(t===Dz?\"undefined\"!=typeof window&&(r=[window]):\"undefined\"!=typeof document&&(r=document.querySelectorAll(t)),!r)return i.warn(\"Can not resolve event source: \"+t),a;for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(e,o);return i._eventListeners.push({type:e,sources:r,handler:o}),a},bT.finalize=function(){for(var t,e,n=this._eventListeners,r=n.length;--r>=0;)for(t=(e=n[r]).sources.length;--t>=0;)e.sources[t].removeEventListener(e.type,e.handler)},bT.hover=function(t,e){return t=[t||\"hover\"],e=[e||\"update\",t],this.on(this.events(\"view\",\"mouseover\",jh),Fh,Ih(t)),this.on(this.events(\"view\",\"mouseout\",jh),Fh,Ih(e)),this},bT.data=function(t){return Dh(this,t).values.value},bT.change=Oh,bT.insert=function(t,e){return Oh.call(this,t,g().insert(e))},bT.remove=function(t,e){return Oh.call(this,t,g().remove(e))},bT.initialize=function(t,e){var n,r,i=this,a=i._renderType,o=Zi(a);return t=i._el=t?Vh(i,t):null,o||i.error(\"Unrecognized renderer type: \"+a),n=o.handler||zi,r=t?o.renderer:o.headless,i._renderer=r?qz(i,i._renderer,t,r):null,i._handler=Uz(i,i._handler,t,n),i._redraw=!0,t&&(e=e?Vh(i,e):t.appendChild(Oz(\"div\",{class:\"vega-bindings\"})),i._bind.forEach(function(t){t.param.element&&Vh(i,t.param.element)}),i._bind.forEach(function(t){Lz(i,t.param.element||e,t)})),i},bT.toImageURL=function(t){return t!==Hx.Canvas&&t!==Hx.SVG&&t!==Hx.PNG?Promise.reject(\"Unrecognized image type: \"+t):jz(this,t).then(function(e){return t===Hx.SVG?Jh(e.svg(),\"image/svg+xml\"):e.canvas().toDataURL(\"image/png\")})},bT.toCanvas=function(){return jz(this,Hx.Canvas).then(function(t){return t.canvas()})},bT.toSVG=function(){return jz(this,Hx.SVG).then(function(t){return t.svg()})},bT.getState=function(t){return this._runtime.getState(t||{data:Nv,signals:Tv,recurse:!0})},bT.setState=function(t){var e=this;return e._trigger=!1,e._runtime.setState(t),e.run().runAfter(function(){e._trigger=!0}),this},am(Uy,Rb,Sw,fS,oC,OC,nz,gz,Mz,Sz),t.version=\"3.0.2\",t.Dataflow=me,t.EventStream=b,t.Parameters=v,t.Pulse=fe,t.MultiPulse=de,t.Operator=m,t.Transform=be,t.changeset=g,t.ingest=c,t.isTuple=u,t.definition=_e,t.transform=xe,t.transforms=Uy,t.tupleid=s,t.scale=iu,t.scheme=eS,t.interpolate=cu,t.interpolateRange=uu,t.timeInterval=hu,t.utcInterval=du,t.projection=jf,t.View=Rv,t.parse=function(t,e){return Fv(t)||qv(\"Input Vega specification must be an object.\"),sv(t,new fv(nT([e,t.config]))).toRuntime()},t.expressionFunction=Pp,t.formatLocale=Oo,t.timeFormatLocale=ie,t.runtime=pT,t.runtimeContext=vT,t.bin=Iy,t.bootstrapCI=sb,t.randomInteger=function(t,e){null==e&&(e=t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(n=t||0,i=r-n,a):n},a.max=function(t){return arguments.length?(r=t||0,i=r-n,a):r},a.sample=function(){return n+Math.floor(i*Math.random())},a.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},a.cdf=function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},a.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN},a.min(t).max(e)},t.randomKDE=lb,t.randomMixture=hb,t.randomNormal=fb,t.randomUniform=db,t.quartiles=cb,t.accessor=Lv,t.accessorName=e,t.accessorFields=n,t.id=Wv,t.identity=Yv,t.zero=Hv,t.one=Gv,t.truthy=Xv,t.falsy=Vv,t.logger=Kv,t.None=0,t.Error=Jv,t.Warn=2,t.Info=Zv,t.Debug=Qv,t.array=tm,t.compare=nm,t.constant=rm,t.debounce=im,t.error=qv,t.extend=am,t.extentIndex=om,t.fastmap=sm,t.field=$v,t.inherits=fm,t.isArray=jv,t.isBoolean=cm,t.isDate=lm,t.isFunction=em,t.isNumber=hm,t.isObject=Fv,t.isRegExp=dm,t.isString=Iv,t.key=pm,t.merge=gm,t.pad=mm,t.peek=ym,t.repeat=vm,t.splitAccessPath=Uv,t.stringValue=r,t.toBoolean=bm,t.toDate=_m,t.toNumber=xm,t.toString=wm,t.toSet=Mm,t.truncate=km,t.visitArray=Em,t.loader=Bm,t.read=zy,t.inferType=Y,t.inferTypes=H,t.typeParsers=Wm,t.formats=Km,t.Bounds=Tn,t.Gradient=qb,t.GroupItem=Pn,t.ResourceLoader=In,t.Item=Rn,t.Scenegraph=Ei,t.Handler=Ai,t.Renderer=Ci,t.CanvasHandler=zi,t.CanvasRenderer=Ni,t.SVGHandler=Pi,t.SVGRenderer=ji,t.SVGStringRenderer=Gi,t.RenderType=Hx,t.renderModule=Zi,t.Marks=mx,t.boundContext=Yr,t.boundStroke=j_,t.boundItem=yx,t.boundMark=_x,t.pathCurves=Cr,t.pathSymbols=Tr,t.pathRectangle=z_,t.pathTrail=O_,t.pathParse=b_,t.pathRender=k_,t.point=Ex,t.canvas=jb,t.domCreate=Ln,t.domFind=qn,t.domChild=Un,t.domClear=jn,t.openTag=qi,t.closeTag=Ui,t.font=bi,t.textMetrics=px,t.resetSVGClipId=function(){rx=1},t.sceneEqual=Qi,t.pathEqual=Ki,t.sceneToJSON=wi,t.sceneFromJSON=Mi,t.sceneZOrder=Vr,t.sceneVisit=Jr,t.scenePickVisit=Zr,Object.defineProperty(t,\"__esModule\",{value:!0})});"

/***/ }),
/* 48 */
/***/ (function(module, exports) {

//
// Autogenerated by Thrift Compiler (0.10.0)
//
// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
//


//HELPER FUNCTIONS AND STRUCTURES

MapD_connect_args = function(args) {
  this.user = null;
  this.passwd = null;
  this.dbname = null;
  if (args) {
    if (args.user !== undefined && args.user !== null) {
      this.user = args.user;
    }
    if (args.passwd !== undefined && args.passwd !== null) {
      this.passwd = args.passwd;
    }
    if (args.dbname !== undefined && args.dbname !== null) {
      this.dbname = args.dbname;
    }
  }
};
MapD_connect_args.prototype = {};
MapD_connect_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.user = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.passwd = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.dbname = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_connect_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_connect_args');
  if (this.user !== null && this.user !== undefined) {
    output.writeFieldBegin('user', Thrift.Type.STRING, 1);
    output.writeString(this.user);
    output.writeFieldEnd();
  }
  if (this.passwd !== null && this.passwd !== undefined) {
    output.writeFieldBegin('passwd', Thrift.Type.STRING, 2);
    output.writeString(this.passwd);
    output.writeFieldEnd();
  }
  if (this.dbname !== null && this.dbname !== undefined) {
    output.writeFieldBegin('dbname', Thrift.Type.STRING, 3);
    output.writeString(this.dbname);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_connect_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = args.success;
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_connect_result.prototype = {};
MapD_connect_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRING) {
        this.success = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_connect_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_connect_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRING, 0);
    output.writeString(this.success);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_disconnect_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_disconnect_args.prototype = {};
MapD_disconnect_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_disconnect_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_disconnect_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_disconnect_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_disconnect_result.prototype = {};
MapD_disconnect_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_disconnect_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_disconnect_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_server_status_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_get_server_status_args.prototype = {};
MapD_get_server_status_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_server_status_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_server_status_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_server_status_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TServerStatus(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_server_status_result.prototype = {};
MapD_get_server_status_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TServerStatus();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_server_status_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_server_status_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_status_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_get_status_args.prototype = {};
MapD_get_status_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_status_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_status_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_status_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyList(args.success, [TServerStatus]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_status_result.prototype = {};
MapD_get_status_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.LIST) {
        var _size186 = 0;
        var _rtmp3190;
        this.success = [];
        var _etype189 = 0;
        _rtmp3190 = input.readListBegin();
        _etype189 = _rtmp3190.etype;
        _size186 = _rtmp3190.size;
        for (var _i191 = 0; _i191 < _size186; ++_i191)
        {
          var elem192 = null;
          elem192 = new TServerStatus();
          elem192.read(input);
          this.success.push(elem192);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_status_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_status_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.LIST, 0);
    output.writeListBegin(Thrift.Type.STRUCT, this.success.length);
    for (var iter193 in this.success)
    {
      if (this.success.hasOwnProperty(iter193))
      {
        iter193 = this.success[iter193];
        iter193.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_tables_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_get_tables_args.prototype = {};
MapD_get_tables_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_tables_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_tables_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_tables_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyList(args.success, [null]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_tables_result.prototype = {};
MapD_get_tables_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.LIST) {
        var _size194 = 0;
        var _rtmp3198;
        this.success = [];
        var _etype197 = 0;
        _rtmp3198 = input.readListBegin();
        _etype197 = _rtmp3198.etype;
        _size194 = _rtmp3198.size;
        for (var _i199 = 0; _i199 < _size194; ++_i199)
        {
          var elem200 = null;
          elem200 = input.readString().value;
          this.success.push(elem200);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_tables_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_tables_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.LIST, 0);
    output.writeListBegin(Thrift.Type.STRING, this.success.length);
    for (var iter201 in this.success)
    {
      if (this.success.hasOwnProperty(iter201))
      {
        iter201 = this.success[iter201];
        output.writeString(iter201);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_table_details_args = function(args) {
  this.session = null;
  this.table_name = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
  }
};
MapD_get_table_details_args.prototype = {};
MapD_get_table_details_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_table_details_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_table_details_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_table_details_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TTableDetails(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_table_details_result.prototype = {};
MapD_get_table_details_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TTableDetails();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_table_details_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_table_details_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_internal_table_details_args = function(args) {
  this.session = null;
  this.table_name = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
  }
};
MapD_get_internal_table_details_args.prototype = {};
MapD_get_internal_table_details_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_internal_table_details_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_internal_table_details_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_internal_table_details_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TTableDetails(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_internal_table_details_result.prototype = {};
MapD_get_internal_table_details_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TTableDetails();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_internal_table_details_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_internal_table_details_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_users_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_get_users_args.prototype = {};
MapD_get_users_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_users_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_users_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_users_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyList(args.success, [null]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_users_result.prototype = {};
MapD_get_users_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.LIST) {
        var _size202 = 0;
        var _rtmp3206;
        this.success = [];
        var _etype205 = 0;
        _rtmp3206 = input.readListBegin();
        _etype205 = _rtmp3206.etype;
        _size202 = _rtmp3206.size;
        for (var _i207 = 0; _i207 < _size202; ++_i207)
        {
          var elem208 = null;
          elem208 = input.readString().value;
          this.success.push(elem208);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_users_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_users_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.LIST, 0);
    output.writeListBegin(Thrift.Type.STRING, this.success.length);
    for (var iter209 in this.success)
    {
      if (this.success.hasOwnProperty(iter209))
      {
        iter209 = this.success[iter209];
        output.writeString(iter209);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_databases_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_get_databases_args.prototype = {};
MapD_get_databases_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_databases_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_databases_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_databases_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyList(args.success, [TDBInfo]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_databases_result.prototype = {};
MapD_get_databases_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.LIST) {
        var _size210 = 0;
        var _rtmp3214;
        this.success = [];
        var _etype213 = 0;
        _rtmp3214 = input.readListBegin();
        _etype213 = _rtmp3214.etype;
        _size210 = _rtmp3214.size;
        for (var _i215 = 0; _i215 < _size210; ++_i215)
        {
          var elem216 = null;
          elem216 = new TDBInfo();
          elem216.read(input);
          this.success.push(elem216);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_databases_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_databases_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.LIST, 0);
    output.writeListBegin(Thrift.Type.STRUCT, this.success.length);
    for (var iter217 in this.success)
    {
      if (this.success.hasOwnProperty(iter217))
      {
        iter217 = this.success[iter217];
        iter217.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_version_args = function(args) {
};
MapD_get_version_args.prototype = {};
MapD_get_version_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    input.skip(ftype);
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_version_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_version_args');
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_version_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = args.success;
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_version_result.prototype = {};
MapD_get_version_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRING) {
        this.success = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_version_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_version_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRING, 0);
    output.writeString(this.success);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_start_heap_profile_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_start_heap_profile_args.prototype = {};
MapD_start_heap_profile_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_start_heap_profile_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_start_heap_profile_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_start_heap_profile_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_start_heap_profile_result.prototype = {};
MapD_start_heap_profile_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_start_heap_profile_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_start_heap_profile_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_stop_heap_profile_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_stop_heap_profile_args.prototype = {};
MapD_stop_heap_profile_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_stop_heap_profile_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_stop_heap_profile_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_stop_heap_profile_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_stop_heap_profile_result.prototype = {};
MapD_stop_heap_profile_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_stop_heap_profile_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_stop_heap_profile_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_heap_profile_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_get_heap_profile_args.prototype = {};
MapD_get_heap_profile_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_heap_profile_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_heap_profile_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_heap_profile_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = args.success;
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_heap_profile_result.prototype = {};
MapD_get_heap_profile_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRING) {
        this.success = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_heap_profile_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_heap_profile_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRING, 0);
    output.writeString(this.success);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_memory_args = function(args) {
  this.session = null;
  this.memory_level = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.memory_level !== undefined && args.memory_level !== null) {
      this.memory_level = args.memory_level;
    }
  }
};
MapD_get_memory_args.prototype = {};
MapD_get_memory_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.memory_level = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_memory_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_memory_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.memory_level !== null && this.memory_level !== undefined) {
    output.writeFieldBegin('memory_level', Thrift.Type.STRING, 2);
    output.writeString(this.memory_level);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_memory_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyList(args.success, [TNodeMemoryInfo]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_memory_result.prototype = {};
MapD_get_memory_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.LIST) {
        var _size218 = 0;
        var _rtmp3222;
        this.success = [];
        var _etype221 = 0;
        _rtmp3222 = input.readListBegin();
        _etype221 = _rtmp3222.etype;
        _size218 = _rtmp3222.size;
        for (var _i223 = 0; _i223 < _size218; ++_i223)
        {
          var elem224 = null;
          elem224 = new TNodeMemoryInfo();
          elem224.read(input);
          this.success.push(elem224);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_memory_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_memory_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.LIST, 0);
    output.writeListBegin(Thrift.Type.STRUCT, this.success.length);
    for (var iter225 in this.success)
    {
      if (this.success.hasOwnProperty(iter225))
      {
        iter225 = this.success[iter225];
        iter225.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_clear_cpu_memory_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_clear_cpu_memory_args.prototype = {};
MapD_clear_cpu_memory_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_clear_cpu_memory_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_clear_cpu_memory_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_clear_cpu_memory_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_clear_cpu_memory_result.prototype = {};
MapD_clear_cpu_memory_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_clear_cpu_memory_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_clear_cpu_memory_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_clear_gpu_memory_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_clear_gpu_memory_args.prototype = {};
MapD_clear_gpu_memory_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_clear_gpu_memory_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_clear_gpu_memory_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_clear_gpu_memory_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_clear_gpu_memory_result.prototype = {};
MapD_clear_gpu_memory_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_clear_gpu_memory_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_clear_gpu_memory_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_rollback_table_epoch_args = function(args) {
  this.session = null;
  this.db_id = null;
  this.table_id = null;
  this.new_epoch = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.db_id !== undefined && args.db_id !== null) {
      this.db_id = args.db_id;
    }
    if (args.table_id !== undefined && args.table_id !== null) {
      this.table_id = args.table_id;
    }
    if (args.new_epoch !== undefined && args.new_epoch !== null) {
      this.new_epoch = args.new_epoch;
    }
  }
};
MapD_rollback_table_epoch_args.prototype = {};
MapD_rollback_table_epoch_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I32) {
        this.db_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I32) {
        this.table_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I32) {
        this.new_epoch = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_rollback_table_epoch_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_rollback_table_epoch_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.db_id !== null && this.db_id !== undefined) {
    output.writeFieldBegin('db_id', Thrift.Type.I32, 2);
    output.writeI32(this.db_id);
    output.writeFieldEnd();
  }
  if (this.table_id !== null && this.table_id !== undefined) {
    output.writeFieldBegin('table_id', Thrift.Type.I32, 3);
    output.writeI32(this.table_id);
    output.writeFieldEnd();
  }
  if (this.new_epoch !== null && this.new_epoch !== undefined) {
    output.writeFieldBegin('new_epoch', Thrift.Type.I32, 4);
    output.writeI32(this.new_epoch);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_rollback_table_epoch_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_rollback_table_epoch_result.prototype = {};
MapD_rollback_table_epoch_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_rollback_table_epoch_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_rollback_table_epoch_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_execute_args = function(args) {
  this.session = null;
  this.query = null;
  this.column_format = null;
  this.nonce = null;
  this.first_n = -1;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.query !== undefined && args.query !== null) {
      this.query = args.query;
    }
    if (args.column_format !== undefined && args.column_format !== null) {
      this.column_format = args.column_format;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
    if (args.first_n !== undefined && args.first_n !== null) {
      this.first_n = args.first_n;
    }
  }
};
MapD_sql_execute_args.prototype = {};
MapD_sql_execute_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.query = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.BOOL) {
        this.column_format = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.I32) {
        this.first_n = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_execute_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_execute_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.query !== null && this.query !== undefined) {
    output.writeFieldBegin('query', Thrift.Type.STRING, 2);
    output.writeString(this.query);
    output.writeFieldEnd();
  }
  if (this.column_format !== null && this.column_format !== undefined) {
    output.writeFieldBegin('column_format', Thrift.Type.BOOL, 3);
    output.writeBool(this.column_format);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 4);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  if (this.first_n !== null && this.first_n !== undefined) {
    output.writeFieldBegin('first_n', Thrift.Type.I32, 5);
    output.writeI32(this.first_n);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_execute_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TQueryResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_sql_execute_result.prototype = {};
MapD_sql_execute_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TQueryResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_execute_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_execute_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_execute_df_args = function(args) {
  this.session = null;
  this.query = null;
  this.device_type = null;
  this.device_id = 0;
  this.first_n = -1;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.query !== undefined && args.query !== null) {
      this.query = args.query;
    }
    if (args.device_type !== undefined && args.device_type !== null) {
      this.device_type = args.device_type;
    }
    if (args.device_id !== undefined && args.device_id !== null) {
      this.device_id = args.device_id;
    }
    if (args.first_n !== undefined && args.first_n !== null) {
      this.first_n = args.first_n;
    }
  }
};
MapD_sql_execute_df_args.prototype = {};
MapD_sql_execute_df_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.query = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I32) {
        this.device_type = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I32) {
        this.device_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.I32) {
        this.first_n = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_execute_df_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_execute_df_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.query !== null && this.query !== undefined) {
    output.writeFieldBegin('query', Thrift.Type.STRING, 2);
    output.writeString(this.query);
    output.writeFieldEnd();
  }
  if (this.device_type !== null && this.device_type !== undefined) {
    output.writeFieldBegin('device_type', Thrift.Type.I32, 3);
    output.writeI32(this.device_type);
    output.writeFieldEnd();
  }
  if (this.device_id !== null && this.device_id !== undefined) {
    output.writeFieldBegin('device_id', Thrift.Type.I32, 4);
    output.writeI32(this.device_id);
    output.writeFieldEnd();
  }
  if (this.first_n !== null && this.first_n !== undefined) {
    output.writeFieldBegin('first_n', Thrift.Type.I32, 5);
    output.writeI32(this.first_n);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_execute_df_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TDataFrame(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_sql_execute_df_result.prototype = {};
MapD_sql_execute_df_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TDataFrame();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_execute_df_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_execute_df_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_execute_gdf_args = function(args) {
  this.session = null;
  this.query = null;
  this.device_id = 0;
  this.first_n = -1;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.query !== undefined && args.query !== null) {
      this.query = args.query;
    }
    if (args.device_id !== undefined && args.device_id !== null) {
      this.device_id = args.device_id;
    }
    if (args.first_n !== undefined && args.first_n !== null) {
      this.first_n = args.first_n;
    }
  }
};
MapD_sql_execute_gdf_args.prototype = {};
MapD_sql_execute_gdf_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.query = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I32) {
        this.device_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I32) {
        this.first_n = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_execute_gdf_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_execute_gdf_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.query !== null && this.query !== undefined) {
    output.writeFieldBegin('query', Thrift.Type.STRING, 2);
    output.writeString(this.query);
    output.writeFieldEnd();
  }
  if (this.device_id !== null && this.device_id !== undefined) {
    output.writeFieldBegin('device_id', Thrift.Type.I32, 3);
    output.writeI32(this.device_id);
    output.writeFieldEnd();
  }
  if (this.first_n !== null && this.first_n !== undefined) {
    output.writeFieldBegin('first_n', Thrift.Type.I32, 4);
    output.writeI32(this.first_n);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_execute_gdf_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TDataFrame(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_sql_execute_gdf_result.prototype = {};
MapD_sql_execute_gdf_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TDataFrame();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_execute_gdf_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_execute_gdf_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_interrupt_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_interrupt_args.prototype = {};
MapD_interrupt_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_interrupt_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_interrupt_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_interrupt_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_interrupt_result.prototype = {};
MapD_interrupt_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_interrupt_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_interrupt_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_validate_args = function(args) {
  this.session = null;
  this.query = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.query !== undefined && args.query !== null) {
      this.query = args.query;
    }
  }
};
MapD_sql_validate_args.prototype = {};
MapD_sql_validate_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.query = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_validate_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_validate_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.query !== null && this.query !== undefined) {
    output.writeFieldBegin('query', Thrift.Type.STRING, 2);
    output.writeString(this.query);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_sql_validate_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyMap(args.success, [TColumnType]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_sql_validate_result.prototype = {};
MapD_sql_validate_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.MAP) {
        var _size226 = 0;
        var _rtmp3230;
        this.success = {};
        var _ktype227 = 0;
        var _vtype228 = 0;
        _rtmp3230 = input.readMapBegin();
        _ktype227 = _rtmp3230.ktype;
        _vtype228 = _rtmp3230.vtype;
        _size226 = _rtmp3230.size;
        for (var _i231 = 0; _i231 < _size226; ++_i231)
        {
          if (_i231 > 0 ) {
            if (input.rstack.length > input.rpos[input.rpos.length -1] + 1) {
              input.rstack.pop();
            }
          }
          var key232 = null;
          var val233 = null;
          key232 = input.readString().value;
          val233 = new TColumnType();
          val233.read(input);
          this.success[key232] = val233;
        }
        input.readMapEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_sql_validate_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_sql_validate_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.MAP, 0);
    output.writeMapBegin(Thrift.Type.STRING, Thrift.Type.STRUCT, Thrift.objectLength(this.success));
    for (var kiter234 in this.success)
    {
      if (this.success.hasOwnProperty(kiter234))
      {
        var viter235 = this.success[kiter234];
        output.writeString(kiter234);
        viter235.write(output);
      }
    }
    output.writeMapEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_set_execution_mode_args = function(args) {
  this.session = null;
  this.mode = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.mode !== undefined && args.mode !== null) {
      this.mode = args.mode;
    }
  }
};
MapD_set_execution_mode_args.prototype = {};
MapD_set_execution_mode_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I32) {
        this.mode = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_set_execution_mode_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_set_execution_mode_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.mode !== null && this.mode !== undefined) {
    output.writeFieldBegin('mode', Thrift.Type.I32, 2);
    output.writeI32(this.mode);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_set_execution_mode_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_set_execution_mode_result.prototype = {};
MapD_set_execution_mode_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_set_execution_mode_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_set_execution_mode_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_render_vega_args = function(args) {
  this.session = null;
  this.widget_id = null;
  this.vega_json = null;
  this.compression_level = null;
  this.nonce = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.widget_id !== undefined && args.widget_id !== null) {
      this.widget_id = args.widget_id;
    }
    if (args.vega_json !== undefined && args.vega_json !== null) {
      this.vega_json = args.vega_json;
    }
    if (args.compression_level !== undefined && args.compression_level !== null) {
      this.compression_level = args.compression_level;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
MapD_render_vega_args.prototype = {};
MapD_render_vega_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.widget_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.vega_json = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I32) {
        this.compression_level = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_render_vega_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_render_vega_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.widget_id !== null && this.widget_id !== undefined) {
    output.writeFieldBegin('widget_id', Thrift.Type.I64, 2);
    output.writeI64(this.widget_id);
    output.writeFieldEnd();
  }
  if (this.vega_json !== null && this.vega_json !== undefined) {
    output.writeFieldBegin('vega_json', Thrift.Type.STRING, 3);
    output.writeString(this.vega_json);
    output.writeFieldEnd();
  }
  if (this.compression_level !== null && this.compression_level !== undefined) {
    output.writeFieldBegin('compression_level', Thrift.Type.I32, 4);
    output.writeI32(this.compression_level);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 5);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_render_vega_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TRenderResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_render_vega_result.prototype = {};
MapD_render_vega_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TRenderResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_render_vega_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_render_vega_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_result_row_for_pixel_args = function(args) {
  this.session = null;
  this.widget_id = null;
  this.pixel = null;
  this.table_col_names = null;
  this.column_format = null;
  this.pixelRadius = null;
  this.nonce = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.widget_id !== undefined && args.widget_id !== null) {
      this.widget_id = args.widget_id;
    }
    if (args.pixel !== undefined && args.pixel !== null) {
      this.pixel = new TPixel(args.pixel);
    }
    if (args.table_col_names !== undefined && args.table_col_names !== null) {
      this.table_col_names = Thrift.copyMap(args.table_col_names, [Thrift.copyList, null]);
    }
    if (args.column_format !== undefined && args.column_format !== null) {
      this.column_format = args.column_format;
    }
    if (args.pixelRadius !== undefined && args.pixelRadius !== null) {
      this.pixelRadius = args.pixelRadius;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
MapD_get_result_row_for_pixel_args.prototype = {};
MapD_get_result_row_for_pixel_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.widget_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRUCT) {
        this.pixel = new TPixel();
        this.pixel.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.MAP) {
        var _size236 = 0;
        var _rtmp3240;
        this.table_col_names = {};
        var _ktype237 = 0;
        var _vtype238 = 0;
        _rtmp3240 = input.readMapBegin();
        _ktype237 = _rtmp3240.ktype;
        _vtype238 = _rtmp3240.vtype;
        _size236 = _rtmp3240.size;
        for (var _i241 = 0; _i241 < _size236; ++_i241)
        {
          if (_i241 > 0 ) {
            if (input.rstack.length > input.rpos[input.rpos.length -1] + 1) {
              input.rstack.pop();
            }
          }
          var key242 = null;
          var val243 = null;
          key242 = input.readString().value;
          var _size244 = 0;
          var _rtmp3248;
          val243 = [];
          var _etype247 = 0;
          _rtmp3248 = input.readListBegin();
          _etype247 = _rtmp3248.etype;
          _size244 = _rtmp3248.size;
          for (var _i249 = 0; _i249 < _size244; ++_i249)
          {
            var elem250 = null;
            elem250 = input.readString().value;
            val243.push(elem250);
          }
          input.readListEnd();
          this.table_col_names[key242] = val243;
        }
        input.readMapEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.BOOL) {
        this.column_format = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.I32) {
        this.pixelRadius = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_result_row_for_pixel_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_result_row_for_pixel_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.widget_id !== null && this.widget_id !== undefined) {
    output.writeFieldBegin('widget_id', Thrift.Type.I64, 2);
    output.writeI64(this.widget_id);
    output.writeFieldEnd();
  }
  if (this.pixel !== null && this.pixel !== undefined) {
    output.writeFieldBegin('pixel', Thrift.Type.STRUCT, 3);
    this.pixel.write(output);
    output.writeFieldEnd();
  }
  if (this.table_col_names !== null && this.table_col_names !== undefined) {
    output.writeFieldBegin('table_col_names', Thrift.Type.MAP, 4);
    output.writeMapBegin(Thrift.Type.STRING, Thrift.Type.LIST, Thrift.objectLength(this.table_col_names));
    for (var kiter251 in this.table_col_names)
    {
      if (this.table_col_names.hasOwnProperty(kiter251))
      {
        var viter252 = this.table_col_names[kiter251];
        output.writeString(kiter251);
        output.writeListBegin(Thrift.Type.STRING, viter252.length);
        for (var iter253 in viter252)
        {
          if (viter252.hasOwnProperty(iter253))
          {
            iter253 = viter252[iter253];
            output.writeString(iter253);
          }
        }
        output.writeListEnd();
      }
    }
    output.writeMapEnd();
    output.writeFieldEnd();
  }
  if (this.column_format !== null && this.column_format !== undefined) {
    output.writeFieldBegin('column_format', Thrift.Type.BOOL, 5);
    output.writeBool(this.column_format);
    output.writeFieldEnd();
  }
  if (this.pixelRadius !== null && this.pixelRadius !== undefined) {
    output.writeFieldBegin('pixelRadius', Thrift.Type.I32, 6);
    output.writeI32(this.pixelRadius);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 7);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_result_row_for_pixel_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TPixelTableRowResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_result_row_for_pixel_result.prototype = {};
MapD_get_result_row_for_pixel_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TPixelTableRowResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_result_row_for_pixel_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_result_row_for_pixel_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_frontend_view_args = function(args) {
  this.session = null;
  this.view_name = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.view_name !== undefined && args.view_name !== null) {
      this.view_name = args.view_name;
    }
  }
};
MapD_get_frontend_view_args.prototype = {};
MapD_get_frontend_view_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.view_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_frontend_view_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_frontend_view_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.view_name !== null && this.view_name !== undefined) {
    output.writeFieldBegin('view_name', Thrift.Type.STRING, 2);
    output.writeString(this.view_name);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_frontend_view_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TFrontendView(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_frontend_view_result.prototype = {};
MapD_get_frontend_view_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TFrontendView();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_frontend_view_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_frontend_view_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_frontend_views_args = function(args) {
  this.session = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
  }
};
MapD_get_frontend_views_args.prototype = {};
MapD_get_frontend_views_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_frontend_views_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_frontend_views_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_frontend_views_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyList(args.success, [TFrontendView]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_frontend_views_result.prototype = {};
MapD_get_frontend_views_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.LIST) {
        var _size254 = 0;
        var _rtmp3258;
        this.success = [];
        var _etype257 = 0;
        _rtmp3258 = input.readListBegin();
        _etype257 = _rtmp3258.etype;
        _size254 = _rtmp3258.size;
        for (var _i259 = 0; _i259 < _size254; ++_i259)
        {
          var elem260 = null;
          elem260 = new TFrontendView();
          elem260.read(input);
          this.success.push(elem260);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_frontend_views_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_frontend_views_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.LIST, 0);
    output.writeListBegin(Thrift.Type.STRUCT, this.success.length);
    for (var iter261 in this.success)
    {
      if (this.success.hasOwnProperty(iter261))
      {
        iter261 = this.success[iter261];
        iter261.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_create_frontend_view_args = function(args) {
  this.session = null;
  this.view_name = null;
  this.view_state = null;
  this.image_hash = null;
  this.view_metadata = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.view_name !== undefined && args.view_name !== null) {
      this.view_name = args.view_name;
    }
    if (args.view_state !== undefined && args.view_state !== null) {
      this.view_state = args.view_state;
    }
    if (args.image_hash !== undefined && args.image_hash !== null) {
      this.image_hash = args.image_hash;
    }
    if (args.view_metadata !== undefined && args.view_metadata !== null) {
      this.view_metadata = args.view_metadata;
    }
  }
};
MapD_create_frontend_view_args.prototype = {};
MapD_create_frontend_view_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.view_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.view_state = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.image_hash = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRING) {
        this.view_metadata = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_create_frontend_view_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_create_frontend_view_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.view_name !== null && this.view_name !== undefined) {
    output.writeFieldBegin('view_name', Thrift.Type.STRING, 2);
    output.writeString(this.view_name);
    output.writeFieldEnd();
  }
  if (this.view_state !== null && this.view_state !== undefined) {
    output.writeFieldBegin('view_state', Thrift.Type.STRING, 3);
    output.writeString(this.view_state);
    output.writeFieldEnd();
  }
  if (this.image_hash !== null && this.image_hash !== undefined) {
    output.writeFieldBegin('image_hash', Thrift.Type.STRING, 4);
    output.writeString(this.image_hash);
    output.writeFieldEnd();
  }
  if (this.view_metadata !== null && this.view_metadata !== undefined) {
    output.writeFieldBegin('view_metadata', Thrift.Type.STRING, 5);
    output.writeString(this.view_metadata);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_create_frontend_view_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_create_frontend_view_result.prototype = {};
MapD_create_frontend_view_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_create_frontend_view_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_create_frontend_view_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_delete_frontend_view_args = function(args) {
  this.session = null;
  this.view_name = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.view_name !== undefined && args.view_name !== null) {
      this.view_name = args.view_name;
    }
  }
};
MapD_delete_frontend_view_args.prototype = {};
MapD_delete_frontend_view_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.view_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_delete_frontend_view_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_delete_frontend_view_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.view_name !== null && this.view_name !== undefined) {
    output.writeFieldBegin('view_name', Thrift.Type.STRING, 2);
    output.writeString(this.view_name);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_delete_frontend_view_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_delete_frontend_view_result.prototype = {};
MapD_delete_frontend_view_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_delete_frontend_view_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_delete_frontend_view_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_link_view_args = function(args) {
  this.session = null;
  this.link = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.link !== undefined && args.link !== null) {
      this.link = args.link;
    }
  }
};
MapD_get_link_view_args.prototype = {};
MapD_get_link_view_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.link = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_link_view_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_link_view_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.link !== null && this.link !== undefined) {
    output.writeFieldBegin('link', Thrift.Type.STRING, 2);
    output.writeString(this.link);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_link_view_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TFrontendView(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_link_view_result.prototype = {};
MapD_get_link_view_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TFrontendView();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_link_view_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_link_view_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_create_link_args = function(args) {
  this.session = null;
  this.view_state = null;
  this.view_metadata = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.view_state !== undefined && args.view_state !== null) {
      this.view_state = args.view_state;
    }
    if (args.view_metadata !== undefined && args.view_metadata !== null) {
      this.view_metadata = args.view_metadata;
    }
  }
};
MapD_create_link_args.prototype = {};
MapD_create_link_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.view_state = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.view_metadata = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_create_link_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_create_link_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.view_state !== null && this.view_state !== undefined) {
    output.writeFieldBegin('view_state', Thrift.Type.STRING, 2);
    output.writeString(this.view_state);
    output.writeFieldEnd();
  }
  if (this.view_metadata !== null && this.view_metadata !== undefined) {
    output.writeFieldBegin('view_metadata', Thrift.Type.STRING, 3);
    output.writeString(this.view_metadata);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_create_link_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = args.success;
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_create_link_result.prototype = {};
MapD_create_link_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRING) {
        this.success = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_create_link_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_create_link_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRING, 0);
    output.writeString(this.success);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_load_table_binary_args = function(args) {
  this.session = null;
  this.table_name = null;
  this.rows = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.rows !== undefined && args.rows !== null) {
      this.rows = Thrift.copyList(args.rows, [TRow]);
    }
  }
};
MapD_load_table_binary_args.prototype = {};
MapD_load_table_binary_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size262 = 0;
        var _rtmp3266;
        this.rows = [];
        var _etype265 = 0;
        _rtmp3266 = input.readListBegin();
        _etype265 = _rtmp3266.etype;
        _size262 = _rtmp3266.size;
        for (var _i267 = 0; _i267 < _size262; ++_i267)
        {
          var elem268 = null;
          elem268 = new TRow();
          elem268.read(input);
          this.rows.push(elem268);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_load_table_binary_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_load_table_binary_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.rows !== null && this.rows !== undefined) {
    output.writeFieldBegin('rows', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRUCT, this.rows.length);
    for (var iter269 in this.rows)
    {
      if (this.rows.hasOwnProperty(iter269))
      {
        iter269 = this.rows[iter269];
        iter269.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_load_table_binary_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_load_table_binary_result.prototype = {};
MapD_load_table_binary_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_load_table_binary_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_load_table_binary_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_load_table_binary_columnar_args = function(args) {
  this.session = null;
  this.table_name = null;
  this.cols = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.cols !== undefined && args.cols !== null) {
      this.cols = Thrift.copyList(args.cols, [TColumn]);
    }
  }
};
MapD_load_table_binary_columnar_args.prototype = {};
MapD_load_table_binary_columnar_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size270 = 0;
        var _rtmp3274;
        this.cols = [];
        var _etype273 = 0;
        _rtmp3274 = input.readListBegin();
        _etype273 = _rtmp3274.etype;
        _size270 = _rtmp3274.size;
        for (var _i275 = 0; _i275 < _size270; ++_i275)
        {
          var elem276 = null;
          elem276 = new TColumn();
          elem276.read(input);
          this.cols.push(elem276);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_load_table_binary_columnar_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_load_table_binary_columnar_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.cols !== null && this.cols !== undefined) {
    output.writeFieldBegin('cols', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRUCT, this.cols.length);
    for (var iter277 in this.cols)
    {
      if (this.cols.hasOwnProperty(iter277))
      {
        iter277 = this.cols[iter277];
        iter277.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_load_table_binary_columnar_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_load_table_binary_columnar_result.prototype = {};
MapD_load_table_binary_columnar_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_load_table_binary_columnar_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_load_table_binary_columnar_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_load_table_args = function(args) {
  this.session = null;
  this.table_name = null;
  this.rows = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.rows !== undefined && args.rows !== null) {
      this.rows = Thrift.copyList(args.rows, [TStringRow]);
    }
  }
};
MapD_load_table_args.prototype = {};
MapD_load_table_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size278 = 0;
        var _rtmp3282;
        this.rows = [];
        var _etype281 = 0;
        _rtmp3282 = input.readListBegin();
        _etype281 = _rtmp3282.etype;
        _size278 = _rtmp3282.size;
        for (var _i283 = 0; _i283 < _size278; ++_i283)
        {
          var elem284 = null;
          elem284 = new TStringRow();
          elem284.read(input);
          this.rows.push(elem284);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_load_table_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_load_table_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.rows !== null && this.rows !== undefined) {
    output.writeFieldBegin('rows', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRUCT, this.rows.length);
    for (var iter285 in this.rows)
    {
      if (this.rows.hasOwnProperty(iter285))
      {
        iter285 = this.rows[iter285];
        iter285.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_load_table_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_load_table_result.prototype = {};
MapD_load_table_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_load_table_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_load_table_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_detect_column_types_args = function(args) {
  this.session = null;
  this.file_name = null;
  this.copy_params = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.file_name !== undefined && args.file_name !== null) {
      this.file_name = args.file_name;
    }
    if (args.copy_params !== undefined && args.copy_params !== null) {
      this.copy_params = new TCopyParams(args.copy_params);
    }
  }
};
MapD_detect_column_types_args.prototype = {};
MapD_detect_column_types_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.file_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRUCT) {
        this.copy_params = new TCopyParams();
        this.copy_params.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_detect_column_types_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_detect_column_types_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.file_name !== null && this.file_name !== undefined) {
    output.writeFieldBegin('file_name', Thrift.Type.STRING, 2);
    output.writeString(this.file_name);
    output.writeFieldEnd();
  }
  if (this.copy_params !== null && this.copy_params !== undefined) {
    output.writeFieldBegin('copy_params', Thrift.Type.STRUCT, 3);
    this.copy_params.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_detect_column_types_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TDetectResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_detect_column_types_result.prototype = {};
MapD_detect_column_types_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TDetectResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_detect_column_types_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_detect_column_types_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_create_table_args = function(args) {
  this.session = null;
  this.table_name = null;
  this.row_desc = null;
  this.table_type = 0;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.row_desc !== undefined && args.row_desc !== null) {
      this.row_desc = Thrift.copyList(args.row_desc, [TColumnType]);
    }
    if (args.table_type !== undefined && args.table_type !== null) {
      this.table_type = args.table_type;
    }
  }
};
MapD_create_table_args.prototype = {};
MapD_create_table_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size286 = 0;
        var _rtmp3290;
        this.row_desc = [];
        var _etype289 = 0;
        _rtmp3290 = input.readListBegin();
        _etype289 = _rtmp3290.etype;
        _size286 = _rtmp3290.size;
        for (var _i291 = 0; _i291 < _size286; ++_i291)
        {
          var elem292 = null;
          elem292 = new TColumnType();
          elem292.read(input);
          this.row_desc.push(elem292);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I32) {
        this.table_type = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_create_table_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_create_table_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.row_desc !== null && this.row_desc !== undefined) {
    output.writeFieldBegin('row_desc', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRUCT, this.row_desc.length);
    for (var iter293 in this.row_desc)
    {
      if (this.row_desc.hasOwnProperty(iter293))
      {
        iter293 = this.row_desc[iter293];
        iter293.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.table_type !== null && this.table_type !== undefined) {
    output.writeFieldBegin('table_type', Thrift.Type.I32, 4);
    output.writeI32(this.table_type);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_create_table_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_create_table_result.prototype = {};
MapD_create_table_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_create_table_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_create_table_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_import_table_args = function(args) {
  this.session = null;
  this.table_name = null;
  this.file_name = null;
  this.copy_params = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.file_name !== undefined && args.file_name !== null) {
      this.file_name = args.file_name;
    }
    if (args.copy_params !== undefined && args.copy_params !== null) {
      this.copy_params = new TCopyParams(args.copy_params);
    }
  }
};
MapD_import_table_args.prototype = {};
MapD_import_table_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.file_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRUCT) {
        this.copy_params = new TCopyParams();
        this.copy_params.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_import_table_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_import_table_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.file_name !== null && this.file_name !== undefined) {
    output.writeFieldBegin('file_name', Thrift.Type.STRING, 3);
    output.writeString(this.file_name);
    output.writeFieldEnd();
  }
  if (this.copy_params !== null && this.copy_params !== undefined) {
    output.writeFieldBegin('copy_params', Thrift.Type.STRUCT, 4);
    this.copy_params.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_import_table_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_import_table_result.prototype = {};
MapD_import_table_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_import_table_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_import_table_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_import_geo_table_args = function(args) {
  this.session = null;
  this.table_name = null;
  this.file_name = null;
  this.copy_params = null;
  this.row_desc = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.file_name !== undefined && args.file_name !== null) {
      this.file_name = args.file_name;
    }
    if (args.copy_params !== undefined && args.copy_params !== null) {
      this.copy_params = new TCopyParams(args.copy_params);
    }
    if (args.row_desc !== undefined && args.row_desc !== null) {
      this.row_desc = Thrift.copyList(args.row_desc, [TColumnType]);
    }
  }
};
MapD_import_geo_table_args.prototype = {};
MapD_import_geo_table_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.file_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRUCT) {
        this.copy_params = new TCopyParams();
        this.copy_params.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.LIST) {
        var _size294 = 0;
        var _rtmp3298;
        this.row_desc = [];
        var _etype297 = 0;
        _rtmp3298 = input.readListBegin();
        _etype297 = _rtmp3298.etype;
        _size294 = _rtmp3298.size;
        for (var _i299 = 0; _i299 < _size294; ++_i299)
        {
          var elem300 = null;
          elem300 = new TColumnType();
          elem300.read(input);
          this.row_desc.push(elem300);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_import_geo_table_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_import_geo_table_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.file_name !== null && this.file_name !== undefined) {
    output.writeFieldBegin('file_name', Thrift.Type.STRING, 3);
    output.writeString(this.file_name);
    output.writeFieldEnd();
  }
  if (this.copy_params !== null && this.copy_params !== undefined) {
    output.writeFieldBegin('copy_params', Thrift.Type.STRUCT, 4);
    this.copy_params.write(output);
    output.writeFieldEnd();
  }
  if (this.row_desc !== null && this.row_desc !== undefined) {
    output.writeFieldBegin('row_desc', Thrift.Type.LIST, 5);
    output.writeListBegin(Thrift.Type.STRUCT, this.row_desc.length);
    for (var iter301 in this.row_desc)
    {
      if (this.row_desc.hasOwnProperty(iter301))
      {
        iter301 = this.row_desc[iter301];
        iter301.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_import_geo_table_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_import_geo_table_result.prototype = {};
MapD_import_geo_table_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_import_geo_table_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_import_geo_table_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_import_table_status_args = function(args) {
  this.session = null;
  this.import_id = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.import_id !== undefined && args.import_id !== null) {
      this.import_id = args.import_id;
    }
  }
};
MapD_import_table_status_args.prototype = {};
MapD_import_table_status_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.import_id = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_import_table_status_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_import_table_status_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.import_id !== null && this.import_id !== undefined) {
    output.writeFieldBegin('import_id', Thrift.Type.STRING, 2);
    output.writeString(this.import_id);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_import_table_status_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TImportStatus(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_import_table_status_result.prototype = {};
MapD_import_table_status_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TImportStatus();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_import_table_status_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_import_table_status_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_start_query_args = function(args) {
  this.session = null;
  this.query_ra = null;
  this.just_explain = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.query_ra !== undefined && args.query_ra !== null) {
      this.query_ra = args.query_ra;
    }
    if (args.just_explain !== undefined && args.just_explain !== null) {
      this.just_explain = args.just_explain;
    }
  }
};
MapD_start_query_args.prototype = {};
MapD_start_query_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.query_ra = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.BOOL) {
        this.just_explain = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_start_query_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_start_query_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.query_ra !== null && this.query_ra !== undefined) {
    output.writeFieldBegin('query_ra', Thrift.Type.STRING, 2);
    output.writeString(this.query_ra);
    output.writeFieldEnd();
  }
  if (this.just_explain !== null && this.just_explain !== undefined) {
    output.writeFieldBegin('just_explain', Thrift.Type.BOOL, 3);
    output.writeBool(this.just_explain);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_start_query_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TPendingQuery(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_start_query_result.prototype = {};
MapD_start_query_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TPendingQuery();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_start_query_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_start_query_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_execute_first_step_args = function(args) {
  this.pending_query = null;
  if (args) {
    if (args.pending_query !== undefined && args.pending_query !== null) {
      this.pending_query = new TPendingQuery(args.pending_query);
    }
  }
};
MapD_execute_first_step_args.prototype = {};
MapD_execute_first_step_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.pending_query = new TPendingQuery();
        this.pending_query.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_execute_first_step_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_execute_first_step_args');
  if (this.pending_query !== null && this.pending_query !== undefined) {
    output.writeFieldBegin('pending_query', Thrift.Type.STRUCT, 1);
    this.pending_query.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_execute_first_step_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TStepResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_execute_first_step_result.prototype = {};
MapD_execute_first_step_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TStepResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_execute_first_step_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_execute_first_step_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_broadcast_serialized_rows_args = function(args) {
  this.serialized_rows = null;
  this.row_desc = null;
  this.query_id = null;
  if (args) {
    if (args.serialized_rows !== undefined && args.serialized_rows !== null) {
      this.serialized_rows = args.serialized_rows;
    }
    if (args.row_desc !== undefined && args.row_desc !== null) {
      this.row_desc = Thrift.copyList(args.row_desc, [TColumnType]);
    }
    if (args.query_id !== undefined && args.query_id !== null) {
      this.query_id = args.query_id;
    }
  }
};
MapD_broadcast_serialized_rows_args.prototype = {};
MapD_broadcast_serialized_rows_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.serialized_rows = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.LIST) {
        var _size302 = 0;
        var _rtmp3306;
        this.row_desc = [];
        var _etype305 = 0;
        _rtmp3306 = input.readListBegin();
        _etype305 = _rtmp3306.etype;
        _size302 = _rtmp3306.size;
        for (var _i307 = 0; _i307 < _size302; ++_i307)
        {
          var elem308 = null;
          elem308 = new TColumnType();
          elem308.read(input);
          this.row_desc.push(elem308);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.query_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_broadcast_serialized_rows_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_broadcast_serialized_rows_args');
  if (this.serialized_rows !== null && this.serialized_rows !== undefined) {
    output.writeFieldBegin('serialized_rows', Thrift.Type.STRING, 1);
    output.writeString(this.serialized_rows);
    output.writeFieldEnd();
  }
  if (this.row_desc !== null && this.row_desc !== undefined) {
    output.writeFieldBegin('row_desc', Thrift.Type.LIST, 2);
    output.writeListBegin(Thrift.Type.STRUCT, this.row_desc.length);
    for (var iter309 in this.row_desc)
    {
      if (this.row_desc.hasOwnProperty(iter309))
      {
        iter309 = this.row_desc[iter309];
        iter309.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.query_id !== null && this.query_id !== undefined) {
    output.writeFieldBegin('query_id', Thrift.Type.I64, 3);
    output.writeI64(this.query_id);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_broadcast_serialized_rows_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_broadcast_serialized_rows_result.prototype = {};
MapD_broadcast_serialized_rows_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_broadcast_serialized_rows_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_broadcast_serialized_rows_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_render_vega_raw_pixels_args = function(args) {
  this.session = null;
  this.widget_id = null;
  this.node_idx = null;
  this.vega_json = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.widget_id !== undefined && args.widget_id !== null) {
      this.widget_id = args.widget_id;
    }
    if (args.node_idx !== undefined && args.node_idx !== null) {
      this.node_idx = args.node_idx;
    }
    if (args.vega_json !== undefined && args.vega_json !== null) {
      this.vega_json = args.vega_json;
    }
  }
};
MapD_render_vega_raw_pixels_args.prototype = {};
MapD_render_vega_raw_pixels_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.widget_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I16) {
        this.node_idx = input.readI16().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.vega_json = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_render_vega_raw_pixels_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_render_vega_raw_pixels_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.widget_id !== null && this.widget_id !== undefined) {
    output.writeFieldBegin('widget_id', Thrift.Type.I64, 2);
    output.writeI64(this.widget_id);
    output.writeFieldEnd();
  }
  if (this.node_idx !== null && this.node_idx !== undefined) {
    output.writeFieldBegin('node_idx', Thrift.Type.I16, 3);
    output.writeI16(this.node_idx);
    output.writeFieldEnd();
  }
  if (this.vega_json !== null && this.vega_json !== undefined) {
    output.writeFieldBegin('vega_json', Thrift.Type.STRING, 4);
    output.writeString(this.vega_json);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_render_vega_raw_pixels_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TRawPixelDataResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_render_vega_raw_pixels_result.prototype = {};
MapD_render_vega_raw_pixels_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TRawPixelDataResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_render_vega_raw_pixels_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_render_vega_raw_pixels_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_insert_data_args = function(args) {
  this.session = null;
  this.insert_data = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.insert_data !== undefined && args.insert_data !== null) {
      this.insert_data = new TInsertData(args.insert_data);
    }
  }
};
MapD_insert_data_args.prototype = {};
MapD_insert_data_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRUCT) {
        this.insert_data = new TInsertData();
        this.insert_data.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_insert_data_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_insert_data_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.insert_data !== null && this.insert_data !== undefined) {
    output.writeFieldBegin('insert_data', Thrift.Type.STRUCT, 2);
    this.insert_data.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_insert_data_result = function(args) {
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_insert_data_result.prototype = {};
MapD_insert_data_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_insert_data_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_insert_data_result');
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_table_descriptor_args = function(args) {
  this.session = null;
  this.table_name = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
  }
};
MapD_get_table_descriptor_args.prototype = {};
MapD_get_table_descriptor_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_table_descriptor_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_table_descriptor_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_table_descriptor_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyMap(args.success, [TColumnType]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_table_descriptor_result.prototype = {};
MapD_get_table_descriptor_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.MAP) {
        var _size310 = 0;
        var _rtmp3314;
        this.success = {};
        var _ktype311 = 0;
        var _vtype312 = 0;
        _rtmp3314 = input.readMapBegin();
        _ktype311 = _rtmp3314.ktype;
        _vtype312 = _rtmp3314.vtype;
        _size310 = _rtmp3314.size;
        for (var _i315 = 0; _i315 < _size310; ++_i315)
        {
          if (_i315 > 0 ) {
            if (input.rstack.length > input.rpos[input.rpos.length -1] + 1) {
              input.rstack.pop();
            }
          }
          var key316 = null;
          var val317 = null;
          key316 = input.readString().value;
          val317 = new TColumnType();
          val317.read(input);
          this.success[key316] = val317;
        }
        input.readMapEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_table_descriptor_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_table_descriptor_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.MAP, 0);
    output.writeMapBegin(Thrift.Type.STRING, Thrift.Type.STRUCT, Thrift.objectLength(this.success));
    for (var kiter318 in this.success)
    {
      if (this.success.hasOwnProperty(kiter318))
      {
        var viter319 = this.success[kiter318];
        output.writeString(kiter318);
        viter319.write(output);
      }
    }
    output.writeMapEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_row_descriptor_args = function(args) {
  this.session = null;
  this.table_name = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
  }
};
MapD_get_row_descriptor_args.prototype = {};
MapD_get_row_descriptor_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_row_descriptor_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_row_descriptor_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 2);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_row_descriptor_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = Thrift.copyList(args.success, [TColumnType]);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_row_descriptor_result.prototype = {};
MapD_get_row_descriptor_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.LIST) {
        var _size320 = 0;
        var _rtmp3324;
        this.success = [];
        var _etype323 = 0;
        _rtmp3324 = input.readListBegin();
        _etype323 = _rtmp3324.etype;
        _size320 = _rtmp3324.size;
        for (var _i325 = 0; _i325 < _size320; ++_i325)
        {
          var elem326 = null;
          elem326 = new TColumnType();
          elem326.read(input);
          this.success.push(elem326);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_row_descriptor_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_row_descriptor_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.LIST, 0);
    output.writeListBegin(Thrift.Type.STRUCT, this.success.length);
    for (var iter327 in this.success)
    {
      if (this.success.hasOwnProperty(iter327))
      {
        iter327 = this.success[iter327];
        iter327.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_render_args = function(args) {
  this.session = null;
  this.query = null;
  this.render_type = null;
  this.nonce = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.query !== undefined && args.query !== null) {
      this.query = args.query;
    }
    if (args.render_type !== undefined && args.render_type !== null) {
      this.render_type = args.render_type;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
MapD_render_args.prototype = {};
MapD_render_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.query = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.render_type = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_render_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_render_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.query !== null && this.query !== undefined) {
    output.writeFieldBegin('query', Thrift.Type.STRING, 2);
    output.writeString(this.query);
    output.writeFieldEnd();
  }
  if (this.render_type !== null && this.render_type !== undefined) {
    output.writeFieldBegin('render_type', Thrift.Type.STRING, 3);
    output.writeString(this.render_type);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 4);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_render_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TRenderResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_render_result.prototype = {};
MapD_render_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TRenderResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_render_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_render_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_rows_for_pixels_args = function(args) {
  this.session = null;
  this.widget_id = null;
  this.pixels = null;
  this.table_name = null;
  this.col_names = null;
  this.column_format = null;
  this.nonce = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.widget_id !== undefined && args.widget_id !== null) {
      this.widget_id = args.widget_id;
    }
    if (args.pixels !== undefined && args.pixels !== null) {
      this.pixels = Thrift.copyList(args.pixels, [TPixel]);
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.col_names !== undefined && args.col_names !== null) {
      this.col_names = Thrift.copyList(args.col_names, [null]);
    }
    if (args.column_format !== undefined && args.column_format !== null) {
      this.column_format = args.column_format;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
MapD_get_rows_for_pixels_args.prototype = {};
MapD_get_rows_for_pixels_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.widget_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size328 = 0;
        var _rtmp3332;
        this.pixels = [];
        var _etype331 = 0;
        _rtmp3332 = input.readListBegin();
        _etype331 = _rtmp3332.etype;
        _size328 = _rtmp3332.size;
        for (var _i333 = 0; _i333 < _size328; ++_i333)
        {
          var elem334 = null;
          elem334 = new TPixel();
          elem334.read(input);
          this.pixels.push(elem334);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.LIST) {
        var _size335 = 0;
        var _rtmp3339;
        this.col_names = [];
        var _etype338 = 0;
        _rtmp3339 = input.readListBegin();
        _etype338 = _rtmp3339.etype;
        _size335 = _rtmp3339.size;
        for (var _i340 = 0; _i340 < _size335; ++_i340)
        {
          var elem341 = null;
          elem341 = input.readString().value;
          this.col_names.push(elem341);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.BOOL) {
        this.column_format = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_rows_for_pixels_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_rows_for_pixels_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.widget_id !== null && this.widget_id !== undefined) {
    output.writeFieldBegin('widget_id', Thrift.Type.I64, 2);
    output.writeI64(this.widget_id);
    output.writeFieldEnd();
  }
  if (this.pixels !== null && this.pixels !== undefined) {
    output.writeFieldBegin('pixels', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRUCT, this.pixels.length);
    for (var iter342 in this.pixels)
    {
      if (this.pixels.hasOwnProperty(iter342))
      {
        iter342 = this.pixels[iter342];
        iter342.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 4);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.col_names !== null && this.col_names !== undefined) {
    output.writeFieldBegin('col_names', Thrift.Type.LIST, 5);
    output.writeListBegin(Thrift.Type.STRING, this.col_names.length);
    for (var iter343 in this.col_names)
    {
      if (this.col_names.hasOwnProperty(iter343))
      {
        iter343 = this.col_names[iter343];
        output.writeString(iter343);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.column_format !== null && this.column_format !== undefined) {
    output.writeFieldBegin('column_format', Thrift.Type.BOOL, 6);
    output.writeBool(this.column_format);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 7);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_rows_for_pixels_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TPixelResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_rows_for_pixels_result.prototype = {};
MapD_get_rows_for_pixels_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TPixelResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_rows_for_pixels_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_rows_for_pixels_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_row_for_pixel_args = function(args) {
  this.session = null;
  this.widget_id = null;
  this.pixel = null;
  this.table_name = null;
  this.col_names = null;
  this.column_format = null;
  this.pixelRadius = null;
  this.nonce = null;
  if (args) {
    if (args.session !== undefined && args.session !== null) {
      this.session = args.session;
    }
    if (args.widget_id !== undefined && args.widget_id !== null) {
      this.widget_id = args.widget_id;
    }
    if (args.pixel !== undefined && args.pixel !== null) {
      this.pixel = new TPixel(args.pixel);
    }
    if (args.table_name !== undefined && args.table_name !== null) {
      this.table_name = args.table_name;
    }
    if (args.col_names !== undefined && args.col_names !== null) {
      this.col_names = Thrift.copyList(args.col_names, [null]);
    }
    if (args.column_format !== undefined && args.column_format !== null) {
      this.column_format = args.column_format;
    }
    if (args.pixelRadius !== undefined && args.pixelRadius !== null) {
      this.pixelRadius = args.pixelRadius;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
MapD_get_row_for_pixel_args.prototype = {};
MapD_get_row_for_pixel_args.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.session = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.widget_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRUCT) {
        this.pixel = new TPixel();
        this.pixel.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.LIST) {
        var _size344 = 0;
        var _rtmp3348;
        this.col_names = [];
        var _etype347 = 0;
        _rtmp3348 = input.readListBegin();
        _etype347 = _rtmp3348.etype;
        _size344 = _rtmp3348.size;
        for (var _i349 = 0; _i349 < _size344; ++_i349)
        {
          var elem350 = null;
          elem350 = input.readString().value;
          this.col_names.push(elem350);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.BOOL) {
        this.column_format = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.I32) {
        this.pixelRadius = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 8:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_row_for_pixel_args.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_row_for_pixel_args');
  if (this.session !== null && this.session !== undefined) {
    output.writeFieldBegin('session', Thrift.Type.STRING, 1);
    output.writeString(this.session);
    output.writeFieldEnd();
  }
  if (this.widget_id !== null && this.widget_id !== undefined) {
    output.writeFieldBegin('widget_id', Thrift.Type.I64, 2);
    output.writeI64(this.widget_id);
    output.writeFieldEnd();
  }
  if (this.pixel !== null && this.pixel !== undefined) {
    output.writeFieldBegin('pixel', Thrift.Type.STRUCT, 3);
    this.pixel.write(output);
    output.writeFieldEnd();
  }
  if (this.table_name !== null && this.table_name !== undefined) {
    output.writeFieldBegin('table_name', Thrift.Type.STRING, 4);
    output.writeString(this.table_name);
    output.writeFieldEnd();
  }
  if (this.col_names !== null && this.col_names !== undefined) {
    output.writeFieldBegin('col_names', Thrift.Type.LIST, 5);
    output.writeListBegin(Thrift.Type.STRING, this.col_names.length);
    for (var iter351 in this.col_names)
    {
      if (this.col_names.hasOwnProperty(iter351))
      {
        iter351 = this.col_names[iter351];
        output.writeString(iter351);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.column_format !== null && this.column_format !== undefined) {
    output.writeFieldBegin('column_format', Thrift.Type.BOOL, 6);
    output.writeBool(this.column_format);
    output.writeFieldEnd();
  }
  if (this.pixelRadius !== null && this.pixelRadius !== undefined) {
    output.writeFieldBegin('pixelRadius', Thrift.Type.I32, 7);
    output.writeI32(this.pixelRadius);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 8);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapD_get_row_for_pixel_result = function(args) {
  this.success = null;
  this.e = null;
  if (args instanceof TMapDException) {
    this.e = args;
    return;
  }
  if (args) {
    if (args.success !== undefined && args.success !== null) {
      this.success = new TPixelRowResult(args.success);
    }
    if (args.e !== undefined && args.e !== null) {
      this.e = args.e;
    }
  }
};
MapD_get_row_for_pixel_result.prototype = {};
MapD_get_row_for_pixel_result.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 0:
      if (ftype == Thrift.Type.STRUCT) {
        this.success = new TPixelRowResult();
        this.success.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.e = new TMapDException();
        this.e.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

MapD_get_row_for_pixel_result.prototype.write = function(output) {
  output.writeStructBegin('MapD_get_row_for_pixel_result');
  if (this.success !== null && this.success !== undefined) {
    output.writeFieldBegin('success', Thrift.Type.STRUCT, 0);
    this.success.write(output);
    output.writeFieldEnd();
  }
  if (this.e !== null && this.e !== undefined) {
    output.writeFieldBegin('e', Thrift.Type.STRUCT, 1);
    this.e.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

MapDClient = function(input, output) {
    this.input = input;
    this.output = (!output) ? input : output;
    this.seqid = 0;
};
MapDClient.prototype = {};
MapDClient.prototype.connect = function(user, passwd, dbname, callback) {
  this.send_connect(user, passwd, dbname, callback);
  if (!callback) {
    return this.recv_connect();
  }
};

MapDClient.prototype.send_connect = function(user, passwd, dbname, callback) {
  this.output.writeMessageBegin('connect', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_connect_args();
  args.user = user;
  args.passwd = passwd;
  args.dbname = dbname;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_connect();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_connect = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_connect_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'connect failed: unknown result';
};
MapDClient.prototype.disconnect = function(session, callback) {
  this.send_disconnect(session, callback);
  if (!callback) {
  this.recv_disconnect();
  }
};

MapDClient.prototype.send_disconnect = function(session, callback) {
  this.output.writeMessageBegin('disconnect', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_disconnect_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_disconnect();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_disconnect = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_disconnect_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.get_server_status = function(session, callback) {
  this.send_get_server_status(session, callback);
  if (!callback) {
    return this.recv_get_server_status();
  }
};

MapDClient.prototype.send_get_server_status = function(session, callback) {
  this.output.writeMessageBegin('get_server_status', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_server_status_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_server_status();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_server_status = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_server_status_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_server_status failed: unknown result';
};
MapDClient.prototype.get_status = function(session, callback) {
  this.send_get_status(session, callback);
  if (!callback) {
    return this.recv_get_status();
  }
};

MapDClient.prototype.send_get_status = function(session, callback) {
  this.output.writeMessageBegin('get_status', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_status_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_status();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_status = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_status_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_status failed: unknown result';
};
MapDClient.prototype.get_tables = function(session, callback) {
  this.send_get_tables(session, callback);
  if (!callback) {
    return this.recv_get_tables();
  }
};

MapDClient.prototype.send_get_tables = function(session, callback) {
  this.output.writeMessageBegin('get_tables', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_tables_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_tables();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_tables = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_tables_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_tables failed: unknown result';
};
MapDClient.prototype.get_table_details = function(session, table_name, callback) {
  this.send_get_table_details(session, table_name, callback);
  if (!callback) {
    return this.recv_get_table_details();
  }
};

MapDClient.prototype.send_get_table_details = function(session, table_name, callback) {
  this.output.writeMessageBegin('get_table_details', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_table_details_args();
  args.session = session;
  args.table_name = table_name;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_table_details();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_table_details = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_table_details_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_table_details failed: unknown result';
};
MapDClient.prototype.get_internal_table_details = function(session, table_name, callback) {
  this.send_get_internal_table_details(session, table_name, callback);
  if (!callback) {
    return this.recv_get_internal_table_details();
  }
};

MapDClient.prototype.send_get_internal_table_details = function(session, table_name, callback) {
  this.output.writeMessageBegin('get_internal_table_details', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_internal_table_details_args();
  args.session = session;
  args.table_name = table_name;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_internal_table_details();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_internal_table_details = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_internal_table_details_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_internal_table_details failed: unknown result';
};
MapDClient.prototype.get_users = function(session, callback) {
  this.send_get_users(session, callback);
  if (!callback) {
    return this.recv_get_users();
  }
};

MapDClient.prototype.send_get_users = function(session, callback) {
  this.output.writeMessageBegin('get_users', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_users_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_users();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_users = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_users_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_users failed: unknown result';
};
MapDClient.prototype.get_databases = function(session, callback) {
  this.send_get_databases(session, callback);
  if (!callback) {
    return this.recv_get_databases();
  }
};

MapDClient.prototype.send_get_databases = function(session, callback) {
  this.output.writeMessageBegin('get_databases', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_databases_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_databases();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_databases = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_databases_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_databases failed: unknown result';
};
MapDClient.prototype.get_version = function(callback) {
  this.send_get_version(callback);
  if (!callback) {
    return this.recv_get_version();
  }
};

MapDClient.prototype.send_get_version = function(callback) {
  this.output.writeMessageBegin('get_version', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_version_args();
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_version();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_version = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_version_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_version failed: unknown result';
};
MapDClient.prototype.start_heap_profile = function(session, callback) {
  this.send_start_heap_profile(session, callback);
  if (!callback) {
  this.recv_start_heap_profile();
  }
};

MapDClient.prototype.send_start_heap_profile = function(session, callback) {
  this.output.writeMessageBegin('start_heap_profile', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_start_heap_profile_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_start_heap_profile();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_start_heap_profile = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_start_heap_profile_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.stop_heap_profile = function(session, callback) {
  this.send_stop_heap_profile(session, callback);
  if (!callback) {
  this.recv_stop_heap_profile();
  }
};

MapDClient.prototype.send_stop_heap_profile = function(session, callback) {
  this.output.writeMessageBegin('stop_heap_profile', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_stop_heap_profile_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_stop_heap_profile();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_stop_heap_profile = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_stop_heap_profile_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.get_heap_profile = function(session, callback) {
  this.send_get_heap_profile(session, callback);
  if (!callback) {
    return this.recv_get_heap_profile();
  }
};

MapDClient.prototype.send_get_heap_profile = function(session, callback) {
  this.output.writeMessageBegin('get_heap_profile', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_heap_profile_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_heap_profile();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_heap_profile = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_heap_profile_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_heap_profile failed: unknown result';
};
MapDClient.prototype.get_memory = function(session, memory_level, callback) {
  this.send_get_memory(session, memory_level, callback);
  if (!callback) {
    return this.recv_get_memory();
  }
};

MapDClient.prototype.send_get_memory = function(session, memory_level, callback) {
  this.output.writeMessageBegin('get_memory', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_memory_args();
  args.session = session;
  args.memory_level = memory_level;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_memory();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_memory = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_memory_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_memory failed: unknown result';
};
MapDClient.prototype.clear_cpu_memory = function(session, callback) {
  this.send_clear_cpu_memory(session, callback);
  if (!callback) {
  this.recv_clear_cpu_memory();
  }
};

MapDClient.prototype.send_clear_cpu_memory = function(session, callback) {
  this.output.writeMessageBegin('clear_cpu_memory', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_clear_cpu_memory_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_clear_cpu_memory();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_clear_cpu_memory = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_clear_cpu_memory_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.clear_gpu_memory = function(session, callback) {
  this.send_clear_gpu_memory(session, callback);
  if (!callback) {
  this.recv_clear_gpu_memory();
  }
};

MapDClient.prototype.send_clear_gpu_memory = function(session, callback) {
  this.output.writeMessageBegin('clear_gpu_memory', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_clear_gpu_memory_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_clear_gpu_memory();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_clear_gpu_memory = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_clear_gpu_memory_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.rollback_table_epoch = function(session, db_id, table_id, new_epoch, callback) {
  this.send_rollback_table_epoch(session, db_id, table_id, new_epoch, callback);
  if (!callback) {
  this.recv_rollback_table_epoch();
  }
};

MapDClient.prototype.send_rollback_table_epoch = function(session, db_id, table_id, new_epoch, callback) {
  this.output.writeMessageBegin('rollback_table_epoch', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_rollback_table_epoch_args();
  args.session = session;
  args.db_id = db_id;
  args.table_id = table_id;
  args.new_epoch = new_epoch;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_rollback_table_epoch();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_rollback_table_epoch = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_rollback_table_epoch_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.sql_execute = function(session, query, column_format, nonce, first_n, callback) {
  this.send_sql_execute(session, query, column_format, nonce, first_n, callback);
  if (!callback) {
    return this.recv_sql_execute();
  }
};

MapDClient.prototype.send_sql_execute = function(session, query, column_format, nonce, first_n, callback) {
  this.output.writeMessageBegin('sql_execute', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_sql_execute_args();
  args.session = session;
  args.query = query;
  args.column_format = column_format;
  args.nonce = nonce;
  args.first_n = first_n;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_sql_execute();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_sql_execute = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_sql_execute_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'sql_execute failed: unknown result';
};
MapDClient.prototype.sql_execute_df = function(session, query, device_type, device_id, first_n, callback) {
  this.send_sql_execute_df(session, query, device_type, device_id, first_n, callback);
  if (!callback) {
    return this.recv_sql_execute_df();
  }
};

MapDClient.prototype.send_sql_execute_df = function(session, query, device_type, device_id, first_n, callback) {
  this.output.writeMessageBegin('sql_execute_df', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_sql_execute_df_args();
  args.session = session;
  args.query = query;
  args.device_type = device_type;
  args.device_id = device_id;
  args.first_n = first_n;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_sql_execute_df();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_sql_execute_df = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_sql_execute_df_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'sql_execute_df failed: unknown result';
};
MapDClient.prototype.sql_execute_gdf = function(session, query, device_id, first_n, callback) {
  this.send_sql_execute_gdf(session, query, device_id, first_n, callback);
  if (!callback) {
    return this.recv_sql_execute_gdf();
  }
};

MapDClient.prototype.send_sql_execute_gdf = function(session, query, device_id, first_n, callback) {
  this.output.writeMessageBegin('sql_execute_gdf', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_sql_execute_gdf_args();
  args.session = session;
  args.query = query;
  args.device_id = device_id;
  args.first_n = first_n;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_sql_execute_gdf();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_sql_execute_gdf = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_sql_execute_gdf_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'sql_execute_gdf failed: unknown result';
};
MapDClient.prototype.interrupt = function(session, callback) {
  this.send_interrupt(session, callback);
  if (!callback) {
  this.recv_interrupt();
  }
};

MapDClient.prototype.send_interrupt = function(session, callback) {
  this.output.writeMessageBegin('interrupt', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_interrupt_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_interrupt();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_interrupt = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_interrupt_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.sql_validate = function(session, query, callback) {
  this.send_sql_validate(session, query, callback);
  if (!callback) {
    return this.recv_sql_validate();
  }
};

MapDClient.prototype.send_sql_validate = function(session, query, callback) {
  this.output.writeMessageBegin('sql_validate', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_sql_validate_args();
  args.session = session;
  args.query = query;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_sql_validate();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_sql_validate = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_sql_validate_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'sql_validate failed: unknown result';
};
MapDClient.prototype.set_execution_mode = function(session, mode, callback) {
  this.send_set_execution_mode(session, mode, callback);
  if (!callback) {
  this.recv_set_execution_mode();
  }
};

MapDClient.prototype.send_set_execution_mode = function(session, mode, callback) {
  this.output.writeMessageBegin('set_execution_mode', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_set_execution_mode_args();
  args.session = session;
  args.mode = mode;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_set_execution_mode();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_set_execution_mode = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_set_execution_mode_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.render_vega = function(session, widget_id, vega_json, compression_level, nonce, callback) {
  this.send_render_vega(session, widget_id, vega_json, compression_level, nonce, callback);
  if (!callback) {
    return this.recv_render_vega();
  }
};

MapDClient.prototype.send_render_vega = function(session, widget_id, vega_json, compression_level, nonce, callback) {
  this.output.writeMessageBegin('render_vega', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_render_vega_args();
  args.session = session;
  args.widget_id = widget_id;
  args.vega_json = vega_json;
  args.compression_level = compression_level;
  args.nonce = nonce;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_render_vega();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_render_vega = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_render_vega_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'render_vega failed: unknown result';
};
MapDClient.prototype.get_result_row_for_pixel = function(session, widget_id, pixel, table_col_names, column_format, pixelRadius, nonce, callback) {
  this.send_get_result_row_for_pixel(session, widget_id, pixel, table_col_names, column_format, pixelRadius, nonce, callback);
  if (!callback) {
    return this.recv_get_result_row_for_pixel();
  }
};

MapDClient.prototype.send_get_result_row_for_pixel = function(session, widget_id, pixel, table_col_names, column_format, pixelRadius, nonce, callback) {
  this.output.writeMessageBegin('get_result_row_for_pixel', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_result_row_for_pixel_args();
  args.session = session;
  args.widget_id = widget_id;
  args.pixel = pixel;
  args.table_col_names = table_col_names;
  args.column_format = column_format;
  args.pixelRadius = pixelRadius;
  args.nonce = nonce;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_result_row_for_pixel();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_result_row_for_pixel = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_result_row_for_pixel_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_result_row_for_pixel failed: unknown result';
};
MapDClient.prototype.get_frontend_view = function(session, view_name, callback) {
  this.send_get_frontend_view(session, view_name, callback);
  if (!callback) {
    return this.recv_get_frontend_view();
  }
};

MapDClient.prototype.send_get_frontend_view = function(session, view_name, callback) {
  this.output.writeMessageBegin('get_frontend_view', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_frontend_view_args();
  args.session = session;
  args.view_name = view_name;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_frontend_view();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_frontend_view = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_frontend_view_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_frontend_view failed: unknown result';
};
MapDClient.prototype.get_frontend_views = function(session, callback) {
  this.send_get_frontend_views(session, callback);
  if (!callback) {
    return this.recv_get_frontend_views();
  }
};

MapDClient.prototype.send_get_frontend_views = function(session, callback) {
  this.output.writeMessageBegin('get_frontend_views', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_frontend_views_args();
  args.session = session;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_frontend_views();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_frontend_views = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_frontend_views_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_frontend_views failed: unknown result';
};
MapDClient.prototype.create_frontend_view = function(session, view_name, view_state, image_hash, view_metadata, callback) {
  this.send_create_frontend_view(session, view_name, view_state, image_hash, view_metadata, callback);
  if (!callback) {
  this.recv_create_frontend_view();
  }
};

MapDClient.prototype.send_create_frontend_view = function(session, view_name, view_state, image_hash, view_metadata, callback) {
  this.output.writeMessageBegin('create_frontend_view', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_create_frontend_view_args();
  args.session = session;
  args.view_name = view_name;
  args.view_state = view_state;
  args.image_hash = image_hash;
  args.view_metadata = view_metadata;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_create_frontend_view();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_create_frontend_view = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_create_frontend_view_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.delete_frontend_view = function(session, view_name, callback) {
  this.send_delete_frontend_view(session, view_name, callback);
  if (!callback) {
  this.recv_delete_frontend_view();
  }
};

MapDClient.prototype.send_delete_frontend_view = function(session, view_name, callback) {
  this.output.writeMessageBegin('delete_frontend_view', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_delete_frontend_view_args();
  args.session = session;
  args.view_name = view_name;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_delete_frontend_view();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_delete_frontend_view = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_delete_frontend_view_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.get_link_view = function(session, link, callback) {
  this.send_get_link_view(session, link, callback);
  if (!callback) {
    return this.recv_get_link_view();
  }
};

MapDClient.prototype.send_get_link_view = function(session, link, callback) {
  this.output.writeMessageBegin('get_link_view', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_link_view_args();
  args.session = session;
  args.link = link;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_link_view();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_link_view = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_link_view_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_link_view failed: unknown result';
};
MapDClient.prototype.create_link = function(session, view_state, view_metadata, callback) {
  this.send_create_link(session, view_state, view_metadata, callback);
  if (!callback) {
    return this.recv_create_link();
  }
};

MapDClient.prototype.send_create_link = function(session, view_state, view_metadata, callback) {
  this.output.writeMessageBegin('create_link', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_create_link_args();
  args.session = session;
  args.view_state = view_state;
  args.view_metadata = view_metadata;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_create_link();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_create_link = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_create_link_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'create_link failed: unknown result';
};
MapDClient.prototype.load_table_binary = function(session, table_name, rows, callback) {
  this.send_load_table_binary(session, table_name, rows, callback);
  if (!callback) {
  this.recv_load_table_binary();
  }
};

MapDClient.prototype.send_load_table_binary = function(session, table_name, rows, callback) {
  this.output.writeMessageBegin('load_table_binary', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_load_table_binary_args();
  args.session = session;
  args.table_name = table_name;
  args.rows = rows;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_load_table_binary();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_load_table_binary = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_load_table_binary_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.load_table_binary_columnar = function(session, table_name, cols, callback) {
  this.send_load_table_binary_columnar(session, table_name, cols, callback);
  if (!callback) {
  this.recv_load_table_binary_columnar();
  }
};

MapDClient.prototype.send_load_table_binary_columnar = function(session, table_name, cols, callback) {
  this.output.writeMessageBegin('load_table_binary_columnar', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_load_table_binary_columnar_args();
  args.session = session;
  args.table_name = table_name;
  args.cols = cols;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_load_table_binary_columnar();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_load_table_binary_columnar = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_load_table_binary_columnar_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.load_table = function(session, table_name, rows, callback) {
  this.send_load_table(session, table_name, rows, callback);
  if (!callback) {
  this.recv_load_table();
  }
};

MapDClient.prototype.send_load_table = function(session, table_name, rows, callback) {
  this.output.writeMessageBegin('load_table', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_load_table_args();
  args.session = session;
  args.table_name = table_name;
  args.rows = rows;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_load_table();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_load_table = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_load_table_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.detect_column_types = function(session, file_name, copy_params, callback) {
  this.send_detect_column_types(session, file_name, copy_params, callback);
  if (!callback) {
    return this.recv_detect_column_types();
  }
};

MapDClient.prototype.send_detect_column_types = function(session, file_name, copy_params, callback) {
  this.output.writeMessageBegin('detect_column_types', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_detect_column_types_args();
  args.session = session;
  args.file_name = file_name;
  args.copy_params = copy_params;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_detect_column_types();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_detect_column_types = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_detect_column_types_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'detect_column_types failed: unknown result';
};
MapDClient.prototype.create_table = function(session, table_name, row_desc, table_type, callback) {
  this.send_create_table(session, table_name, row_desc, table_type, callback);
  if (!callback) {
  this.recv_create_table();
  }
};

MapDClient.prototype.send_create_table = function(session, table_name, row_desc, table_type, callback) {
  this.output.writeMessageBegin('create_table', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_create_table_args();
  args.session = session;
  args.table_name = table_name;
  args.row_desc = row_desc;
  args.table_type = table_type;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_create_table();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_create_table = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_create_table_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.import_table = function(session, table_name, file_name, copy_params, callback) {
  this.send_import_table(session, table_name, file_name, copy_params, callback);
  if (!callback) {
  this.recv_import_table();
  }
};

MapDClient.prototype.send_import_table = function(session, table_name, file_name, copy_params, callback) {
  this.output.writeMessageBegin('import_table', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_import_table_args();
  args.session = session;
  args.table_name = table_name;
  args.file_name = file_name;
  args.copy_params = copy_params;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_import_table();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_import_table = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_import_table_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.import_geo_table = function(session, table_name, file_name, copy_params, row_desc, callback) {
  this.send_import_geo_table(session, table_name, file_name, copy_params, row_desc, callback);
  if (!callback) {
  this.recv_import_geo_table();
  }
};

MapDClient.prototype.send_import_geo_table = function(session, table_name, file_name, copy_params, row_desc, callback) {
  this.output.writeMessageBegin('import_geo_table', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_import_geo_table_args();
  args.session = session;
  args.table_name = table_name;
  args.file_name = file_name;
  args.copy_params = copy_params;
  args.row_desc = row_desc;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_import_geo_table();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_import_geo_table = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_import_geo_table_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.import_table_status = function(session, import_id, callback) {
  this.send_import_table_status(session, import_id, callback);
  if (!callback) {
    return this.recv_import_table_status();
  }
};

MapDClient.prototype.send_import_table_status = function(session, import_id, callback) {
  this.output.writeMessageBegin('import_table_status', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_import_table_status_args();
  args.session = session;
  args.import_id = import_id;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_import_table_status();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_import_table_status = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_import_table_status_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'import_table_status failed: unknown result';
};
MapDClient.prototype.start_query = function(session, query_ra, just_explain, callback) {
  this.send_start_query(session, query_ra, just_explain, callback);
  if (!callback) {
    return this.recv_start_query();
  }
};

MapDClient.prototype.send_start_query = function(session, query_ra, just_explain, callback) {
  this.output.writeMessageBegin('start_query', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_start_query_args();
  args.session = session;
  args.query_ra = query_ra;
  args.just_explain = just_explain;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_start_query();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_start_query = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_start_query_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'start_query failed: unknown result';
};
MapDClient.prototype.execute_first_step = function(pending_query, callback) {
  this.send_execute_first_step(pending_query, callback);
  if (!callback) {
    return this.recv_execute_first_step();
  }
};

MapDClient.prototype.send_execute_first_step = function(pending_query, callback) {
  this.output.writeMessageBegin('execute_first_step', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_execute_first_step_args();
  args.pending_query = pending_query;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_execute_first_step();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_execute_first_step = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_execute_first_step_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'execute_first_step failed: unknown result';
};
MapDClient.prototype.broadcast_serialized_rows = function(serialized_rows, row_desc, query_id, callback) {
  this.send_broadcast_serialized_rows(serialized_rows, row_desc, query_id, callback);
  if (!callback) {
  this.recv_broadcast_serialized_rows();
  }
};

MapDClient.prototype.send_broadcast_serialized_rows = function(serialized_rows, row_desc, query_id, callback) {
  this.output.writeMessageBegin('broadcast_serialized_rows', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_broadcast_serialized_rows_args();
  args.serialized_rows = serialized_rows;
  args.row_desc = row_desc;
  args.query_id = query_id;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_broadcast_serialized_rows();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_broadcast_serialized_rows = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_broadcast_serialized_rows_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.render_vega_raw_pixels = function(session, widget_id, node_idx, vega_json, callback) {
  this.send_render_vega_raw_pixels(session, widget_id, node_idx, vega_json, callback);
  if (!callback) {
    return this.recv_render_vega_raw_pixels();
  }
};

MapDClient.prototype.send_render_vega_raw_pixels = function(session, widget_id, node_idx, vega_json, callback) {
  this.output.writeMessageBegin('render_vega_raw_pixels', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_render_vega_raw_pixels_args();
  args.session = session;
  args.widget_id = widget_id;
  args.node_idx = node_idx;
  args.vega_json = vega_json;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_render_vega_raw_pixels();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_render_vega_raw_pixels = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_render_vega_raw_pixels_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'render_vega_raw_pixels failed: unknown result';
};
MapDClient.prototype.insert_data = function(session, insert_data, callback) {
  this.send_insert_data(session, insert_data, callback);
  if (!callback) {
  this.recv_insert_data();
  }
};

MapDClient.prototype.send_insert_data = function(session, insert_data, callback) {
  this.output.writeMessageBegin('insert_data', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_insert_data_args();
  args.session = session;
  args.insert_data = insert_data;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_insert_data();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_insert_data = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_insert_data_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  return;
};
MapDClient.prototype.get_table_descriptor = function(session, table_name, callback) {
  this.send_get_table_descriptor(session, table_name, callback);
  if (!callback) {
    return this.recv_get_table_descriptor();
  }
};

MapDClient.prototype.send_get_table_descriptor = function(session, table_name, callback) {
  this.output.writeMessageBegin('get_table_descriptor', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_table_descriptor_args();
  args.session = session;
  args.table_name = table_name;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_table_descriptor();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_table_descriptor = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_table_descriptor_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_table_descriptor failed: unknown result';
};
MapDClient.prototype.get_row_descriptor = function(session, table_name, callback) {
  this.send_get_row_descriptor(session, table_name, callback);
  if (!callback) {
    return this.recv_get_row_descriptor();
  }
};

MapDClient.prototype.send_get_row_descriptor = function(session, table_name, callback) {
  this.output.writeMessageBegin('get_row_descriptor', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_row_descriptor_args();
  args.session = session;
  args.table_name = table_name;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_row_descriptor();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_row_descriptor = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_row_descriptor_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_row_descriptor failed: unknown result';
};
MapDClient.prototype.render = function(session, query, render_type, nonce, callback) {
  this.send_render(session, query, render_type, nonce, callback);
  if (!callback) {
    return this.recv_render();
  }
};

MapDClient.prototype.send_render = function(session, query, render_type, nonce, callback) {
  this.output.writeMessageBegin('render', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_render_args();
  args.session = session;
  args.query = query;
  args.render_type = render_type;
  args.nonce = nonce;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_render();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_render = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_render_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'render failed: unknown result';
};
MapDClient.prototype.get_rows_for_pixels = function(session, widget_id, pixels, table_name, col_names, column_format, nonce, callback) {
  this.send_get_rows_for_pixels(session, widget_id, pixels, table_name, col_names, column_format, nonce, callback);
  if (!callback) {
    return this.recv_get_rows_for_pixels();
  }
};

MapDClient.prototype.send_get_rows_for_pixels = function(session, widget_id, pixels, table_name, col_names, column_format, nonce, callback) {
  this.output.writeMessageBegin('get_rows_for_pixels', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_rows_for_pixels_args();
  args.session = session;
  args.widget_id = widget_id;
  args.pixels = pixels;
  args.table_name = table_name;
  args.col_names = col_names;
  args.column_format = column_format;
  args.nonce = nonce;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_rows_for_pixels();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_rows_for_pixels = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_rows_for_pixels_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_rows_for_pixels failed: unknown result';
};
MapDClient.prototype.get_row_for_pixel = function(session, widget_id, pixel, table_name, col_names, column_format, pixelRadius, nonce, callback) {
  this.send_get_row_for_pixel(session, widget_id, pixel, table_name, col_names, column_format, pixelRadius, nonce, callback);
  if (!callback) {
    return this.recv_get_row_for_pixel();
  }
};

MapDClient.prototype.send_get_row_for_pixel = function(session, widget_id, pixel, table_name, col_names, column_format, pixelRadius, nonce, callback) {
  this.output.writeMessageBegin('get_row_for_pixel', Thrift.MessageType.CALL, this.seqid);
  var args = new MapD_get_row_for_pixel_args();
  args.session = session;
  args.widget_id = widget_id;
  args.pixel = pixel;
  args.table_name = table_name;
  args.col_names = col_names;
  args.column_format = column_format;
  args.pixelRadius = pixelRadius;
  args.nonce = nonce;
  args.write(this.output);
  this.output.writeMessageEnd();
  if (callback) {
    var self = this;
    this.output.getTransport().flush(true, function() {
      var result = null;
      try {
        result = self.recv_get_row_for_pixel();
      } catch (e) {
        result = e;
      }
      callback(result);
    });
  } else {
    return this.output.getTransport().flush();
  }
};

MapDClient.prototype.recv_get_row_for_pixel = function() {
  var ret = this.input.readMessageBegin();
  var fname = ret.fname;
  var mtype = ret.mtype;
  var rseqid = ret.rseqid;
  if (mtype == Thrift.MessageType.EXCEPTION) {
    var x = new Thrift.TApplicationException();
    x.read(this.input);
    this.input.readMessageEnd();
    throw x;
  }
  var result = new MapD_get_row_for_pixel_result();
  result.read(this.input);
  this.input.readMessageEnd();

  if (null !== result.e) {
    throw result.e;
  }
  if (null !== result.success) {
    return result.success;
  }
  throw 'get_row_for_pixel failed: unknown result';
};


/***/ }),
/* 49 */
/***/ (function(module, exports) {

//
// Autogenerated by Thrift Compiler (0.10.0)
//
// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
//


TDatumType = {
  'SMALLINT' : 0,
  'INT' : 1,
  'BIGINT' : 2,
  'FLOAT' : 3,
  'DECIMAL' : 4,
  'DOUBLE' : 5,
  'STR' : 6,
  'TIME' : 7,
  'TIMESTAMP' : 8,
  'DATE' : 9,
  'BOOL' : 10,
  'INTERVAL_DAY_TIME' : 11,
  'INTERVAL_YEAR_MONTH' : 12
};
TEncodingType = {
  'NONE' : 0,
  'FIXED' : 1,
  'RL' : 2,
  'DIFF' : 3,
  'DICT' : 4,
  'SPARSE' : 5
};
TExecuteMode = {
  'HYBRID' : 0,
  'GPU' : 1,
  'CPU' : 2
};
TDeviceType = {
  'CPU' : 0,
  'GPU' : 1
};
TTableType = {
  'DELIMITED' : 0,
  'POLYGON' : 1
};
TMergeType = {
  'UNION' : 0,
  'REDUCE' : 1
};
TExpressionRangeType = {
  'INVALID' : 0,
  'INTEGER' : 1,
  'FLOAT' : 2,
  'DOUBLE' : 3
};
TDatumVal = function(args) {
  this.int_val = null;
  this.real_val = null;
  this.str_val = null;
  this.arr_val = null;
  if (args) {
    if (args.int_val !== undefined && args.int_val !== null) {
      this.int_val = args.int_val;
    }
    if (args.real_val !== undefined && args.real_val !== null) {
      this.real_val = args.real_val;
    }
    if (args.str_val !== undefined && args.str_val !== null) {
      this.str_val = args.str_val;
    }
    if (args.arr_val !== undefined && args.arr_val !== null) {
      this.arr_val = Thrift.copyList(args.arr_val, [null]);
    }
  }
};
TDatumVal.prototype = {};
TDatumVal.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I64) {
        this.int_val = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.DOUBLE) {
        this.real_val = input.readDouble().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.str_val = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.LIST) {
        var _size0 = 0;
        var _rtmp34;
        this.arr_val = [];
        var _etype3 = 0;
        _rtmp34 = input.readListBegin();
        _etype3 = _rtmp34.etype;
        _size0 = _rtmp34.size;
        for (var _i5 = 0; _i5 < _size0; ++_i5)
        {
          var elem6 = null;
          elem6 = new TDatum();
          elem6.read(input);
          this.arr_val.push(elem6);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TDatumVal.prototype.write = function(output) {
  output.writeStructBegin('TDatumVal');
  if (this.int_val !== null && this.int_val !== undefined) {
    output.writeFieldBegin('int_val', Thrift.Type.I64, 1);
    output.writeI64(this.int_val);
    output.writeFieldEnd();
  }
  if (this.real_val !== null && this.real_val !== undefined) {
    output.writeFieldBegin('real_val', Thrift.Type.DOUBLE, 2);
    output.writeDouble(this.real_val);
    output.writeFieldEnd();
  }
  if (this.str_val !== null && this.str_val !== undefined) {
    output.writeFieldBegin('str_val', Thrift.Type.STRING, 3);
    output.writeString(this.str_val);
    output.writeFieldEnd();
  }
  if (this.arr_val !== null && this.arr_val !== undefined) {
    output.writeFieldBegin('arr_val', Thrift.Type.LIST, 4);
    output.writeListBegin(Thrift.Type.STRUCT, this.arr_val.length);
    for (var iter7 in this.arr_val)
    {
      if (this.arr_val.hasOwnProperty(iter7))
      {
        iter7 = this.arr_val[iter7];
        iter7.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TDatum = function(args) {
  this.val = null;
  this.is_null = null;
  if (args) {
    if (args.val !== undefined && args.val !== null) {
      this.val = new TDatumVal(args.val);
    }
    if (args.is_null !== undefined && args.is_null !== null) {
      this.is_null = args.is_null;
    }
  }
};
TDatum.prototype = {};
TDatum.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.val = new TDatumVal();
        this.val.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.BOOL) {
        this.is_null = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TDatum.prototype.write = function(output) {
  output.writeStructBegin('TDatum');
  if (this.val !== null && this.val !== undefined) {
    output.writeFieldBegin('val', Thrift.Type.STRUCT, 1);
    this.val.write(output);
    output.writeFieldEnd();
  }
  if (this.is_null !== null && this.is_null !== undefined) {
    output.writeFieldBegin('is_null', Thrift.Type.BOOL, 2);
    output.writeBool(this.is_null);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TStringValue = function(args) {
  this.str_val = null;
  this.is_null = null;
  if (args) {
    if (args.str_val !== undefined && args.str_val !== null) {
      this.str_val = args.str_val;
    }
    if (args.is_null !== undefined && args.is_null !== null) {
      this.is_null = args.is_null;
    }
  }
};
TStringValue.prototype = {};
TStringValue.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.str_val = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.BOOL) {
        this.is_null = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TStringValue.prototype.write = function(output) {
  output.writeStructBegin('TStringValue');
  if (this.str_val !== null && this.str_val !== undefined) {
    output.writeFieldBegin('str_val', Thrift.Type.STRING, 1);
    output.writeString(this.str_val);
    output.writeFieldEnd();
  }
  if (this.is_null !== null && this.is_null !== undefined) {
    output.writeFieldBegin('is_null', Thrift.Type.BOOL, 2);
    output.writeBool(this.is_null);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TTypeInfo = function(args) {
  this.type = null;
  this.encoding = null;
  this.nullable = null;
  this.is_array = null;
  this.precision = null;
  this.scale = null;
  this.comp_param = null;
  if (args) {
    if (args.type !== undefined && args.type !== null) {
      this.type = args.type;
    }
    if (args.encoding !== undefined && args.encoding !== null) {
      this.encoding = args.encoding;
    }
    if (args.nullable !== undefined && args.nullable !== null) {
      this.nullable = args.nullable;
    }
    if (args.is_array !== undefined && args.is_array !== null) {
      this.is_array = args.is_array;
    }
    if (args.precision !== undefined && args.precision !== null) {
      this.precision = args.precision;
    }
    if (args.scale !== undefined && args.scale !== null) {
      this.scale = args.scale;
    }
    if (args.comp_param !== undefined && args.comp_param !== null) {
      this.comp_param = args.comp_param;
    }
  }
};
TTypeInfo.prototype = {};
TTypeInfo.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.type = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I32) {
        this.encoding = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.BOOL) {
        this.nullable = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.BOOL) {
        this.is_array = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.I32) {
        this.precision = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.I32) {
        this.scale = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.I32) {
        this.comp_param = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TTypeInfo.prototype.write = function(output) {
  output.writeStructBegin('TTypeInfo');
  if (this.type !== null && this.type !== undefined) {
    output.writeFieldBegin('type', Thrift.Type.I32, 1);
    output.writeI32(this.type);
    output.writeFieldEnd();
  }
  if (this.encoding !== null && this.encoding !== undefined) {
    output.writeFieldBegin('encoding', Thrift.Type.I32, 4);
    output.writeI32(this.encoding);
    output.writeFieldEnd();
  }
  if (this.nullable !== null && this.nullable !== undefined) {
    output.writeFieldBegin('nullable', Thrift.Type.BOOL, 2);
    output.writeBool(this.nullable);
    output.writeFieldEnd();
  }
  if (this.is_array !== null && this.is_array !== undefined) {
    output.writeFieldBegin('is_array', Thrift.Type.BOOL, 3);
    output.writeBool(this.is_array);
    output.writeFieldEnd();
  }
  if (this.precision !== null && this.precision !== undefined) {
    output.writeFieldBegin('precision', Thrift.Type.I32, 5);
    output.writeI32(this.precision);
    output.writeFieldEnd();
  }
  if (this.scale !== null && this.scale !== undefined) {
    output.writeFieldBegin('scale', Thrift.Type.I32, 6);
    output.writeI32(this.scale);
    output.writeFieldEnd();
  }
  if (this.comp_param !== null && this.comp_param !== undefined) {
    output.writeFieldBegin('comp_param', Thrift.Type.I32, 7);
    output.writeI32(this.comp_param);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TColumnType = function(args) {
  this.col_name = null;
  this.col_type = null;
  this.is_reserved_keyword = null;
  this.src_name = null;
  this.is_system = null;
  if (args) {
    if (args.col_name !== undefined && args.col_name !== null) {
      this.col_name = args.col_name;
    }
    if (args.col_type !== undefined && args.col_type !== null) {
      this.col_type = new TTypeInfo(args.col_type);
    }
    if (args.is_reserved_keyword !== undefined && args.is_reserved_keyword !== null) {
      this.is_reserved_keyword = args.is_reserved_keyword;
    }
    if (args.src_name !== undefined && args.src_name !== null) {
      this.src_name = args.src_name;
    }
    if (args.is_system !== undefined && args.is_system !== null) {
      this.is_system = args.is_system;
    }
  }
};
TColumnType.prototype = {};
TColumnType.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.col_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRUCT) {
        this.col_type = new TTypeInfo();
        this.col_type.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.BOOL) {
        this.is_reserved_keyword = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.src_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.BOOL) {
        this.is_system = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TColumnType.prototype.write = function(output) {
  output.writeStructBegin('TColumnType');
  if (this.col_name !== null && this.col_name !== undefined) {
    output.writeFieldBegin('col_name', Thrift.Type.STRING, 1);
    output.writeString(this.col_name);
    output.writeFieldEnd();
  }
  if (this.col_type !== null && this.col_type !== undefined) {
    output.writeFieldBegin('col_type', Thrift.Type.STRUCT, 2);
    this.col_type.write(output);
    output.writeFieldEnd();
  }
  if (this.is_reserved_keyword !== null && this.is_reserved_keyword !== undefined) {
    output.writeFieldBegin('is_reserved_keyword', Thrift.Type.BOOL, 3);
    output.writeBool(this.is_reserved_keyword);
    output.writeFieldEnd();
  }
  if (this.src_name !== null && this.src_name !== undefined) {
    output.writeFieldBegin('src_name', Thrift.Type.STRING, 4);
    output.writeString(this.src_name);
    output.writeFieldEnd();
  }
  if (this.is_system !== null && this.is_system !== undefined) {
    output.writeFieldBegin('is_system', Thrift.Type.BOOL, 5);
    output.writeBool(this.is_system);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TRow = function(args) {
  this.cols = null;
  if (args) {
    if (args.cols !== undefined && args.cols !== null) {
      this.cols = Thrift.copyList(args.cols, [TDatum]);
    }
  }
};
TRow.prototype = {};
TRow.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.LIST) {
        var _size8 = 0;
        var _rtmp312;
        this.cols = [];
        var _etype11 = 0;
        _rtmp312 = input.readListBegin();
        _etype11 = _rtmp312.etype;
        _size8 = _rtmp312.size;
        for (var _i13 = 0; _i13 < _size8; ++_i13)
        {
          var elem14 = null;
          elem14 = new TDatum();
          elem14.read(input);
          this.cols.push(elem14);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TRow.prototype.write = function(output) {
  output.writeStructBegin('TRow');
  if (this.cols !== null && this.cols !== undefined) {
    output.writeFieldBegin('cols', Thrift.Type.LIST, 1);
    output.writeListBegin(Thrift.Type.STRUCT, this.cols.length);
    for (var iter15 in this.cols)
    {
      if (this.cols.hasOwnProperty(iter15))
      {
        iter15 = this.cols[iter15];
        iter15.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TColumnData = function(args) {
  this.int_col = null;
  this.real_col = null;
  this.str_col = null;
  this.arr_col = null;
  if (args) {
    if (args.int_col !== undefined && args.int_col !== null) {
      this.int_col = Thrift.copyList(args.int_col, [null]);
    }
    if (args.real_col !== undefined && args.real_col !== null) {
      this.real_col = Thrift.copyList(args.real_col, [null]);
    }
    if (args.str_col !== undefined && args.str_col !== null) {
      this.str_col = Thrift.copyList(args.str_col, [null]);
    }
    if (args.arr_col !== undefined && args.arr_col !== null) {
      this.arr_col = Thrift.copyList(args.arr_col, [null]);
    }
  }
};
TColumnData.prototype = {};
TColumnData.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.LIST) {
        var _size16 = 0;
        var _rtmp320;
        this.int_col = [];
        var _etype19 = 0;
        _rtmp320 = input.readListBegin();
        _etype19 = _rtmp320.etype;
        _size16 = _rtmp320.size;
        for (var _i21 = 0; _i21 < _size16; ++_i21)
        {
          var elem22 = null;
          elem22 = input.readI64().value;
          this.int_col.push(elem22);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.LIST) {
        var _size23 = 0;
        var _rtmp327;
        this.real_col = [];
        var _etype26 = 0;
        _rtmp327 = input.readListBegin();
        _etype26 = _rtmp327.etype;
        _size23 = _rtmp327.size;
        for (var _i28 = 0; _i28 < _size23; ++_i28)
        {
          var elem29 = null;
          elem29 = input.readDouble().value;
          this.real_col.push(elem29);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size30 = 0;
        var _rtmp334;
        this.str_col = [];
        var _etype33 = 0;
        _rtmp334 = input.readListBegin();
        _etype33 = _rtmp334.etype;
        _size30 = _rtmp334.size;
        for (var _i35 = 0; _i35 < _size30; ++_i35)
        {
          var elem36 = null;
          elem36 = input.readString().value;
          this.str_col.push(elem36);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.LIST) {
        var _size37 = 0;
        var _rtmp341;
        this.arr_col = [];
        var _etype40 = 0;
        _rtmp341 = input.readListBegin();
        _etype40 = _rtmp341.etype;
        _size37 = _rtmp341.size;
        for (var _i42 = 0; _i42 < _size37; ++_i42)
        {
          var elem43 = null;
          elem43 = new TColumn();
          elem43.read(input);
          this.arr_col.push(elem43);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TColumnData.prototype.write = function(output) {
  output.writeStructBegin('TColumnData');
  if (this.int_col !== null && this.int_col !== undefined) {
    output.writeFieldBegin('int_col', Thrift.Type.LIST, 1);
    output.writeListBegin(Thrift.Type.I64, this.int_col.length);
    for (var iter44 in this.int_col)
    {
      if (this.int_col.hasOwnProperty(iter44))
      {
        iter44 = this.int_col[iter44];
        output.writeI64(iter44);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.real_col !== null && this.real_col !== undefined) {
    output.writeFieldBegin('real_col', Thrift.Type.LIST, 2);
    output.writeListBegin(Thrift.Type.DOUBLE, this.real_col.length);
    for (var iter45 in this.real_col)
    {
      if (this.real_col.hasOwnProperty(iter45))
      {
        iter45 = this.real_col[iter45];
        output.writeDouble(iter45);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.str_col !== null && this.str_col !== undefined) {
    output.writeFieldBegin('str_col', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRING, this.str_col.length);
    for (var iter46 in this.str_col)
    {
      if (this.str_col.hasOwnProperty(iter46))
      {
        iter46 = this.str_col[iter46];
        output.writeString(iter46);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.arr_col !== null && this.arr_col !== undefined) {
    output.writeFieldBegin('arr_col', Thrift.Type.LIST, 4);
    output.writeListBegin(Thrift.Type.STRUCT, this.arr_col.length);
    for (var iter47 in this.arr_col)
    {
      if (this.arr_col.hasOwnProperty(iter47))
      {
        iter47 = this.arr_col[iter47];
        iter47.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TColumn = function(args) {
  this.data = null;
  this.nulls = null;
  if (args) {
    if (args.data !== undefined && args.data !== null) {
      this.data = new TColumnData(args.data);
    }
    if (args.nulls !== undefined && args.nulls !== null) {
      this.nulls = Thrift.copyList(args.nulls, [null]);
    }
  }
};
TColumn.prototype = {};
TColumn.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.data = new TColumnData();
        this.data.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.LIST) {
        var _size48 = 0;
        var _rtmp352;
        this.nulls = [];
        var _etype51 = 0;
        _rtmp352 = input.readListBegin();
        _etype51 = _rtmp352.etype;
        _size48 = _rtmp352.size;
        for (var _i53 = 0; _i53 < _size48; ++_i53)
        {
          var elem54 = null;
          elem54 = input.readBool().value;
          this.nulls.push(elem54);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TColumn.prototype.write = function(output) {
  output.writeStructBegin('TColumn');
  if (this.data !== null && this.data !== undefined) {
    output.writeFieldBegin('data', Thrift.Type.STRUCT, 1);
    this.data.write(output);
    output.writeFieldEnd();
  }
  if (this.nulls !== null && this.nulls !== undefined) {
    output.writeFieldBegin('nulls', Thrift.Type.LIST, 2);
    output.writeListBegin(Thrift.Type.BOOL, this.nulls.length);
    for (var iter55 in this.nulls)
    {
      if (this.nulls.hasOwnProperty(iter55))
      {
        iter55 = this.nulls[iter55];
        output.writeBool(iter55);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TStringRow = function(args) {
  this.cols = null;
  if (args) {
    if (args.cols !== undefined && args.cols !== null) {
      this.cols = Thrift.copyList(args.cols, [TStringValue]);
    }
  }
};
TStringRow.prototype = {};
TStringRow.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.LIST) {
        var _size56 = 0;
        var _rtmp360;
        this.cols = [];
        var _etype59 = 0;
        _rtmp360 = input.readListBegin();
        _etype59 = _rtmp360.etype;
        _size56 = _rtmp360.size;
        for (var _i61 = 0; _i61 < _size56; ++_i61)
        {
          var elem62 = null;
          elem62 = new TStringValue();
          elem62.read(input);
          this.cols.push(elem62);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TStringRow.prototype.write = function(output) {
  output.writeStructBegin('TStringRow');
  if (this.cols !== null && this.cols !== undefined) {
    output.writeFieldBegin('cols', Thrift.Type.LIST, 1);
    output.writeListBegin(Thrift.Type.STRUCT, this.cols.length);
    for (var iter63 in this.cols)
    {
      if (this.cols.hasOwnProperty(iter63))
      {
        iter63 = this.cols[iter63];
        iter63.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TStepResult = function(args) {
  this.serialized_rows = null;
  this.execution_finished = null;
  this.merge_type = null;
  this.sharded = null;
  this.row_desc = null;
  this.node_id = null;
  if (args) {
    if (args.serialized_rows !== undefined && args.serialized_rows !== null) {
      this.serialized_rows = args.serialized_rows;
    }
    if (args.execution_finished !== undefined && args.execution_finished !== null) {
      this.execution_finished = args.execution_finished;
    }
    if (args.merge_type !== undefined && args.merge_type !== null) {
      this.merge_type = args.merge_type;
    }
    if (args.sharded !== undefined && args.sharded !== null) {
      this.sharded = args.sharded;
    }
    if (args.row_desc !== undefined && args.row_desc !== null) {
      this.row_desc = Thrift.copyList(args.row_desc, [TColumnType]);
    }
    if (args.node_id !== undefined && args.node_id !== null) {
      this.node_id = args.node_id;
    }
  }
};
TStepResult.prototype = {};
TStepResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.serialized_rows = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.BOOL) {
        this.execution_finished = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I32) {
        this.merge_type = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.BOOL) {
        this.sharded = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.LIST) {
        var _size64 = 0;
        var _rtmp368;
        this.row_desc = [];
        var _etype67 = 0;
        _rtmp368 = input.readListBegin();
        _etype67 = _rtmp368.etype;
        _size64 = _rtmp368.size;
        for (var _i69 = 0; _i69 < _size64; ++_i69)
        {
          var elem70 = null;
          elem70 = new TColumnType();
          elem70.read(input);
          this.row_desc.push(elem70);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.I32) {
        this.node_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TStepResult.prototype.write = function(output) {
  output.writeStructBegin('TStepResult');
  if (this.serialized_rows !== null && this.serialized_rows !== undefined) {
    output.writeFieldBegin('serialized_rows', Thrift.Type.STRING, 1);
    output.writeString(this.serialized_rows);
    output.writeFieldEnd();
  }
  if (this.execution_finished !== null && this.execution_finished !== undefined) {
    output.writeFieldBegin('execution_finished', Thrift.Type.BOOL, 2);
    output.writeBool(this.execution_finished);
    output.writeFieldEnd();
  }
  if (this.merge_type !== null && this.merge_type !== undefined) {
    output.writeFieldBegin('merge_type', Thrift.Type.I32, 3);
    output.writeI32(this.merge_type);
    output.writeFieldEnd();
  }
  if (this.sharded !== null && this.sharded !== undefined) {
    output.writeFieldBegin('sharded', Thrift.Type.BOOL, 4);
    output.writeBool(this.sharded);
    output.writeFieldEnd();
  }
  if (this.row_desc !== null && this.row_desc !== undefined) {
    output.writeFieldBegin('row_desc', Thrift.Type.LIST, 5);
    output.writeListBegin(Thrift.Type.STRUCT, this.row_desc.length);
    for (var iter71 in this.row_desc)
    {
      if (this.row_desc.hasOwnProperty(iter71))
      {
        iter71 = this.row_desc[iter71];
        iter71.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.node_id !== null && this.node_id !== undefined) {
    output.writeFieldBegin('node_id', Thrift.Type.I32, 6);
    output.writeI32(this.node_id);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TRowSet = function(args) {
  this.row_desc = null;
  this.rows = null;
  this.columns = null;
  this.is_columnar = null;
  if (args) {
    if (args.row_desc !== undefined && args.row_desc !== null) {
      this.row_desc = Thrift.copyList(args.row_desc, [TColumnType]);
    }
    if (args.rows !== undefined && args.rows !== null) {
      this.rows = Thrift.copyList(args.rows, [TRow]);
    }
    if (args.columns !== undefined && args.columns !== null) {
      this.columns = Thrift.copyList(args.columns, [TColumn]);
    }
    if (args.is_columnar !== undefined && args.is_columnar !== null) {
      this.is_columnar = args.is_columnar;
    }
  }
};
TRowSet.prototype = {};
TRowSet.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.LIST) {
        var _size72 = 0;
        var _rtmp376;
        this.row_desc = [];
        var _etype75 = 0;
        _rtmp376 = input.readListBegin();
        _etype75 = _rtmp376.etype;
        _size72 = _rtmp376.size;
        for (var _i77 = 0; _i77 < _size72; ++_i77)
        {
          var elem78 = null;
          elem78 = new TColumnType();
          elem78.read(input);
          this.row_desc.push(elem78);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.LIST) {
        var _size79 = 0;
        var _rtmp383;
        this.rows = [];
        var _etype82 = 0;
        _rtmp383 = input.readListBegin();
        _etype82 = _rtmp383.etype;
        _size79 = _rtmp383.size;
        for (var _i84 = 0; _i84 < _size79; ++_i84)
        {
          var elem85 = null;
          elem85 = new TRow();
          elem85.read(input);
          this.rows.push(elem85);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size86 = 0;
        var _rtmp390;
        this.columns = [];
        var _etype89 = 0;
        _rtmp390 = input.readListBegin();
        _etype89 = _rtmp390.etype;
        _size86 = _rtmp390.size;
        for (var _i91 = 0; _i91 < _size86; ++_i91)
        {
          var elem92 = null;
          elem92 = new TColumn();
          elem92.read(input);
          this.columns.push(elem92);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.BOOL) {
        this.is_columnar = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TRowSet.prototype.write = function(output) {
  output.writeStructBegin('TRowSet');
  if (this.row_desc !== null && this.row_desc !== undefined) {
    output.writeFieldBegin('row_desc', Thrift.Type.LIST, 1);
    output.writeListBegin(Thrift.Type.STRUCT, this.row_desc.length);
    for (var iter93 in this.row_desc)
    {
      if (this.row_desc.hasOwnProperty(iter93))
      {
        iter93 = this.row_desc[iter93];
        iter93.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.rows !== null && this.rows !== undefined) {
    output.writeFieldBegin('rows', Thrift.Type.LIST, 2);
    output.writeListBegin(Thrift.Type.STRUCT, this.rows.length);
    for (var iter94 in this.rows)
    {
      if (this.rows.hasOwnProperty(iter94))
      {
        iter94 = this.rows[iter94];
        iter94.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.columns !== null && this.columns !== undefined) {
    output.writeFieldBegin('columns', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRUCT, this.columns.length);
    for (var iter95 in this.columns)
    {
      if (this.columns.hasOwnProperty(iter95))
      {
        iter95 = this.columns[iter95];
        iter95.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.is_columnar !== null && this.is_columnar !== undefined) {
    output.writeFieldBegin('is_columnar', Thrift.Type.BOOL, 4);
    output.writeBool(this.is_columnar);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TQueryResult = function(args) {
  this.row_set = null;
  this.execution_time_ms = null;
  this.total_time_ms = null;
  this.nonce = null;
  if (args) {
    if (args.row_set !== undefined && args.row_set !== null) {
      this.row_set = new TRowSet(args.row_set);
    }
    if (args.execution_time_ms !== undefined && args.execution_time_ms !== null) {
      this.execution_time_ms = args.execution_time_ms;
    }
    if (args.total_time_ms !== undefined && args.total_time_ms !== null) {
      this.total_time_ms = args.total_time_ms;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
TQueryResult.prototype = {};
TQueryResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.row_set = new TRowSet();
        this.row_set.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.execution_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.total_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TQueryResult.prototype.write = function(output) {
  output.writeStructBegin('TQueryResult');
  if (this.row_set !== null && this.row_set !== undefined) {
    output.writeFieldBegin('row_set', Thrift.Type.STRUCT, 1);
    this.row_set.write(output);
    output.writeFieldEnd();
  }
  if (this.execution_time_ms !== null && this.execution_time_ms !== undefined) {
    output.writeFieldBegin('execution_time_ms', Thrift.Type.I64, 2);
    output.writeI64(this.execution_time_ms);
    output.writeFieldEnd();
  }
  if (this.total_time_ms !== null && this.total_time_ms !== undefined) {
    output.writeFieldBegin('total_time_ms', Thrift.Type.I64, 3);
    output.writeI64(this.total_time_ms);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 4);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TDataFrame = function(args) {
  this.sm_handle = null;
  this.sm_size = null;
  this.df_handle = null;
  this.df_size = null;
  if (args) {
    if (args.sm_handle !== undefined && args.sm_handle !== null) {
      this.sm_handle = args.sm_handle;
    }
    if (args.sm_size !== undefined && args.sm_size !== null) {
      this.sm_size = args.sm_size;
    }
    if (args.df_handle !== undefined && args.df_handle !== null) {
      this.df_handle = args.df_handle;
    }
    if (args.df_size !== undefined && args.df_size !== null) {
      this.df_size = args.df_size;
    }
  }
};
TDataFrame.prototype = {};
TDataFrame.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.sm_handle = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.sm_size = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.df_handle = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I64) {
        this.df_size = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TDataFrame.prototype.write = function(output) {
  output.writeStructBegin('TDataFrame');
  if (this.sm_handle !== null && this.sm_handle !== undefined) {
    output.writeFieldBegin('sm_handle', Thrift.Type.STRING, 1);
    output.writeBinary(this.sm_handle);
    output.writeFieldEnd();
  }
  if (this.sm_size !== null && this.sm_size !== undefined) {
    output.writeFieldBegin('sm_size', Thrift.Type.I64, 2);
    output.writeI64(this.sm_size);
    output.writeFieldEnd();
  }
  if (this.df_handle !== null && this.df_handle !== undefined) {
    output.writeFieldBegin('df_handle', Thrift.Type.STRING, 3);
    output.writeBinary(this.df_handle);
    output.writeFieldEnd();
  }
  if (this.df_size !== null && this.df_size !== undefined) {
    output.writeFieldBegin('df_size', Thrift.Type.I64, 4);
    output.writeI64(this.df_size);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TDBInfo = function(args) {
  this.db_name = null;
  this.db_owner = null;
  if (args) {
    if (args.db_name !== undefined && args.db_name !== null) {
      this.db_name = args.db_name;
    }
    if (args.db_owner !== undefined && args.db_owner !== null) {
      this.db_owner = args.db_owner;
    }
  }
};
TDBInfo.prototype = {};
TDBInfo.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.db_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.db_owner = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TDBInfo.prototype.write = function(output) {
  output.writeStructBegin('TDBInfo');
  if (this.db_name !== null && this.db_name !== undefined) {
    output.writeFieldBegin('db_name', Thrift.Type.STRING, 1);
    output.writeString(this.db_name);
    output.writeFieldEnd();
  }
  if (this.db_owner !== null && this.db_owner !== undefined) {
    output.writeFieldBegin('db_owner', Thrift.Type.STRING, 2);
    output.writeString(this.db_owner);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TMapDException = function(args) {
  this.error_msg = null;
  if (args) {
    if (args.error_msg !== undefined && args.error_msg !== null) {
      this.error_msg = args.error_msg;
    }
  }
};
Thrift.inherits(TMapDException, Thrift.TException);
TMapDException.prototype.name = 'TMapDException';
TMapDException.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.error_msg = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 0:
        input.skip(ftype);
        break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TMapDException.prototype.write = function(output) {
  output.writeStructBegin('TMapDException');
  if (this.error_msg !== null && this.error_msg !== undefined) {
    output.writeFieldBegin('error_msg', Thrift.Type.STRING, 1);
    output.writeString(this.error_msg);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TRenderProperty = function(args) {
  this.property_type = null;
  this.property_value = null;
  if (args) {
    if (args.property_type !== undefined && args.property_type !== null) {
      this.property_type = args.property_type;
    }
    if (args.property_value !== undefined && args.property_value !== null) {
      this.property_value = new TDatumVal(args.property_value);
    }
  }
};
TRenderProperty.prototype = {};
TRenderProperty.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.property_type = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRUCT) {
        this.property_value = new TDatumVal();
        this.property_value.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TRenderProperty.prototype.write = function(output) {
  output.writeStructBegin('TRenderProperty');
  if (this.property_type !== null && this.property_type !== undefined) {
    output.writeFieldBegin('property_type', Thrift.Type.I32, 1);
    output.writeI32(this.property_type);
    output.writeFieldEnd();
  }
  if (this.property_value !== null && this.property_value !== undefined) {
    output.writeFieldBegin('property_value', Thrift.Type.STRUCT, 2);
    this.property_value.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TCopyParams = function(args) {
  this.delimiter = null;
  this.null_str = null;
  this.has_header = null;
  this.quoted = null;
  this.quote = null;
  this.escape = null;
  this.line_delim = null;
  this.array_delim = null;
  this.array_begin = null;
  this.array_end = null;
  this.threads = null;
  this.table_type = 0;
  if (args) {
    if (args.delimiter !== undefined && args.delimiter !== null) {
      this.delimiter = args.delimiter;
    }
    if (args.null_str !== undefined && args.null_str !== null) {
      this.null_str = args.null_str;
    }
    if (args.has_header !== undefined && args.has_header !== null) {
      this.has_header = args.has_header;
    }
    if (args.quoted !== undefined && args.quoted !== null) {
      this.quoted = args.quoted;
    }
    if (args.quote !== undefined && args.quote !== null) {
      this.quote = args.quote;
    }
    if (args.escape !== undefined && args.escape !== null) {
      this.escape = args.escape;
    }
    if (args.line_delim !== undefined && args.line_delim !== null) {
      this.line_delim = args.line_delim;
    }
    if (args.array_delim !== undefined && args.array_delim !== null) {
      this.array_delim = args.array_delim;
    }
    if (args.array_begin !== undefined && args.array_begin !== null) {
      this.array_begin = args.array_begin;
    }
    if (args.array_end !== undefined && args.array_end !== null) {
      this.array_end = args.array_end;
    }
    if (args.threads !== undefined && args.threads !== null) {
      this.threads = args.threads;
    }
    if (args.table_type !== undefined && args.table_type !== null) {
      this.table_type = args.table_type;
    }
  }
};
TCopyParams.prototype = {};
TCopyParams.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.delimiter = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.null_str = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.BOOL) {
        this.has_header = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.BOOL) {
        this.quoted = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRING) {
        this.quote = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.STRING) {
        this.escape = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.STRING) {
        this.line_delim = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 8:
      if (ftype == Thrift.Type.STRING) {
        this.array_delim = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 9:
      if (ftype == Thrift.Type.STRING) {
        this.array_begin = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 10:
      if (ftype == Thrift.Type.STRING) {
        this.array_end = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 11:
      if (ftype == Thrift.Type.I32) {
        this.threads = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 12:
      if (ftype == Thrift.Type.I32) {
        this.table_type = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TCopyParams.prototype.write = function(output) {
  output.writeStructBegin('TCopyParams');
  if (this.delimiter !== null && this.delimiter !== undefined) {
    output.writeFieldBegin('delimiter', Thrift.Type.STRING, 1);
    output.writeString(this.delimiter);
    output.writeFieldEnd();
  }
  if (this.null_str !== null && this.null_str !== undefined) {
    output.writeFieldBegin('null_str', Thrift.Type.STRING, 2);
    output.writeString(this.null_str);
    output.writeFieldEnd();
  }
  if (this.has_header !== null && this.has_header !== undefined) {
    output.writeFieldBegin('has_header', Thrift.Type.BOOL, 3);
    output.writeBool(this.has_header);
    output.writeFieldEnd();
  }
  if (this.quoted !== null && this.quoted !== undefined) {
    output.writeFieldBegin('quoted', Thrift.Type.BOOL, 4);
    output.writeBool(this.quoted);
    output.writeFieldEnd();
  }
  if (this.quote !== null && this.quote !== undefined) {
    output.writeFieldBegin('quote', Thrift.Type.STRING, 5);
    output.writeString(this.quote);
    output.writeFieldEnd();
  }
  if (this.escape !== null && this.escape !== undefined) {
    output.writeFieldBegin('escape', Thrift.Type.STRING, 6);
    output.writeString(this.escape);
    output.writeFieldEnd();
  }
  if (this.line_delim !== null && this.line_delim !== undefined) {
    output.writeFieldBegin('line_delim', Thrift.Type.STRING, 7);
    output.writeString(this.line_delim);
    output.writeFieldEnd();
  }
  if (this.array_delim !== null && this.array_delim !== undefined) {
    output.writeFieldBegin('array_delim', Thrift.Type.STRING, 8);
    output.writeString(this.array_delim);
    output.writeFieldEnd();
  }
  if (this.array_begin !== null && this.array_begin !== undefined) {
    output.writeFieldBegin('array_begin', Thrift.Type.STRING, 9);
    output.writeString(this.array_begin);
    output.writeFieldEnd();
  }
  if (this.array_end !== null && this.array_end !== undefined) {
    output.writeFieldBegin('array_end', Thrift.Type.STRING, 10);
    output.writeString(this.array_end);
    output.writeFieldEnd();
  }
  if (this.threads !== null && this.threads !== undefined) {
    output.writeFieldBegin('threads', Thrift.Type.I32, 11);
    output.writeI32(this.threads);
    output.writeFieldEnd();
  }
  if (this.table_type !== null && this.table_type !== undefined) {
    output.writeFieldBegin('table_type', Thrift.Type.I32, 12);
    output.writeI32(this.table_type);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TDetectResult = function(args) {
  this.row_set = null;
  this.copy_params = null;
  if (args) {
    if (args.row_set !== undefined && args.row_set !== null) {
      this.row_set = new TRowSet(args.row_set);
    }
    if (args.copy_params !== undefined && args.copy_params !== null) {
      this.copy_params = new TCopyParams(args.copy_params);
    }
  }
};
TDetectResult.prototype = {};
TDetectResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.row_set = new TRowSet();
        this.row_set.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRUCT) {
        this.copy_params = new TCopyParams();
        this.copy_params.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TDetectResult.prototype.write = function(output) {
  output.writeStructBegin('TDetectResult');
  if (this.row_set !== null && this.row_set !== undefined) {
    output.writeFieldBegin('row_set', Thrift.Type.STRUCT, 1);
    this.row_set.write(output);
    output.writeFieldEnd();
  }
  if (this.copy_params !== null && this.copy_params !== undefined) {
    output.writeFieldBegin('copy_params', Thrift.Type.STRUCT, 2);
    this.copy_params.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TImportStatus = function(args) {
  this.elapsed = null;
  this.rows_completed = null;
  this.rows_estimated = null;
  this.rows_rejected = null;
  if (args) {
    if (args.elapsed !== undefined && args.elapsed !== null) {
      this.elapsed = args.elapsed;
    }
    if (args.rows_completed !== undefined && args.rows_completed !== null) {
      this.rows_completed = args.rows_completed;
    }
    if (args.rows_estimated !== undefined && args.rows_estimated !== null) {
      this.rows_estimated = args.rows_estimated;
    }
    if (args.rows_rejected !== undefined && args.rows_rejected !== null) {
      this.rows_rejected = args.rows_rejected;
    }
  }
};
TImportStatus.prototype = {};
TImportStatus.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I64) {
        this.elapsed = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.rows_completed = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.rows_estimated = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I64) {
        this.rows_rejected = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TImportStatus.prototype.write = function(output) {
  output.writeStructBegin('TImportStatus');
  if (this.elapsed !== null && this.elapsed !== undefined) {
    output.writeFieldBegin('elapsed', Thrift.Type.I64, 1);
    output.writeI64(this.elapsed);
    output.writeFieldEnd();
  }
  if (this.rows_completed !== null && this.rows_completed !== undefined) {
    output.writeFieldBegin('rows_completed', Thrift.Type.I64, 2);
    output.writeI64(this.rows_completed);
    output.writeFieldEnd();
  }
  if (this.rows_estimated !== null && this.rows_estimated !== undefined) {
    output.writeFieldBegin('rows_estimated', Thrift.Type.I64, 3);
    output.writeI64(this.rows_estimated);
    output.writeFieldEnd();
  }
  if (this.rows_rejected !== null && this.rows_rejected !== undefined) {
    output.writeFieldBegin('rows_rejected', Thrift.Type.I64, 4);
    output.writeI64(this.rows_rejected);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TFrontendView = function(args) {
  this.view_name = null;
  this.view_state = null;
  this.image_hash = null;
  this.update_time = null;
  this.view_metadata = null;
  if (args) {
    if (args.view_name !== undefined && args.view_name !== null) {
      this.view_name = args.view_name;
    }
    if (args.view_state !== undefined && args.view_state !== null) {
      this.view_state = args.view_state;
    }
    if (args.image_hash !== undefined && args.image_hash !== null) {
      this.image_hash = args.image_hash;
    }
    if (args.update_time !== undefined && args.update_time !== null) {
      this.update_time = args.update_time;
    }
    if (args.view_metadata !== undefined && args.view_metadata !== null) {
      this.view_metadata = args.view_metadata;
    }
  }
};
TFrontendView.prototype = {};
TFrontendView.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.view_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.view_state = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.image_hash = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.update_time = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRING) {
        this.view_metadata = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TFrontendView.prototype.write = function(output) {
  output.writeStructBegin('TFrontendView');
  if (this.view_name !== null && this.view_name !== undefined) {
    output.writeFieldBegin('view_name', Thrift.Type.STRING, 1);
    output.writeString(this.view_name);
    output.writeFieldEnd();
  }
  if (this.view_state !== null && this.view_state !== undefined) {
    output.writeFieldBegin('view_state', Thrift.Type.STRING, 2);
    output.writeString(this.view_state);
    output.writeFieldEnd();
  }
  if (this.image_hash !== null && this.image_hash !== undefined) {
    output.writeFieldBegin('image_hash', Thrift.Type.STRING, 3);
    output.writeString(this.image_hash);
    output.writeFieldEnd();
  }
  if (this.update_time !== null && this.update_time !== undefined) {
    output.writeFieldBegin('update_time', Thrift.Type.STRING, 4);
    output.writeString(this.update_time);
    output.writeFieldEnd();
  }
  if (this.view_metadata !== null && this.view_metadata !== undefined) {
    output.writeFieldBegin('view_metadata', Thrift.Type.STRING, 5);
    output.writeString(this.view_metadata);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TServerStatus = function(args) {
  this.read_only = null;
  this.version = null;
  this.rendering_enabled = null;
  this.start_time = null;
  this.edition = null;
  this.host_name = null;
  if (args) {
    if (args.read_only !== undefined && args.read_only !== null) {
      this.read_only = args.read_only;
    }
    if (args.version !== undefined && args.version !== null) {
      this.version = args.version;
    }
    if (args.rendering_enabled !== undefined && args.rendering_enabled !== null) {
      this.rendering_enabled = args.rendering_enabled;
    }
    if (args.start_time !== undefined && args.start_time !== null) {
      this.start_time = args.start_time;
    }
    if (args.edition !== undefined && args.edition !== null) {
      this.edition = args.edition;
    }
    if (args.host_name !== undefined && args.host_name !== null) {
      this.host_name = args.host_name;
    }
  }
};
TServerStatus.prototype = {};
TServerStatus.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.BOOL) {
        this.read_only = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.version = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.BOOL) {
        this.rendering_enabled = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I64) {
        this.start_time = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRING) {
        this.edition = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.STRING) {
        this.host_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TServerStatus.prototype.write = function(output) {
  output.writeStructBegin('TServerStatus');
  if (this.read_only !== null && this.read_only !== undefined) {
    output.writeFieldBegin('read_only', Thrift.Type.BOOL, 1);
    output.writeBool(this.read_only);
    output.writeFieldEnd();
  }
  if (this.version !== null && this.version !== undefined) {
    output.writeFieldBegin('version', Thrift.Type.STRING, 2);
    output.writeString(this.version);
    output.writeFieldEnd();
  }
  if (this.rendering_enabled !== null && this.rendering_enabled !== undefined) {
    output.writeFieldBegin('rendering_enabled', Thrift.Type.BOOL, 3);
    output.writeBool(this.rendering_enabled);
    output.writeFieldEnd();
  }
  if (this.start_time !== null && this.start_time !== undefined) {
    output.writeFieldBegin('start_time', Thrift.Type.I64, 4);
    output.writeI64(this.start_time);
    output.writeFieldEnd();
  }
  if (this.edition !== null && this.edition !== undefined) {
    output.writeFieldBegin('edition', Thrift.Type.STRING, 5);
    output.writeString(this.edition);
    output.writeFieldEnd();
  }
  if (this.host_name !== null && this.host_name !== undefined) {
    output.writeFieldBegin('host_name', Thrift.Type.STRING, 6);
    output.writeString(this.host_name);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TPixel = function(args) {
  this.x = null;
  this.y = null;
  if (args) {
    if (args.x !== undefined && args.x !== null) {
      this.x = args.x;
    }
    if (args.y !== undefined && args.y !== null) {
      this.y = args.y;
    }
  }
};
TPixel.prototype = {};
TPixel.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I64) {
        this.x = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.y = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TPixel.prototype.write = function(output) {
  output.writeStructBegin('TPixel');
  if (this.x !== null && this.x !== undefined) {
    output.writeFieldBegin('x', Thrift.Type.I64, 1);
    output.writeI64(this.x);
    output.writeFieldEnd();
  }
  if (this.y !== null && this.y !== undefined) {
    output.writeFieldBegin('y', Thrift.Type.I64, 2);
    output.writeI64(this.y);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TPixelRowResult = function(args) {
  this.pixel = null;
  this.row_id = null;
  this.row_set = null;
  this.nonce = null;
  if (args) {
    if (args.pixel !== undefined && args.pixel !== null) {
      this.pixel = new TPixel(args.pixel);
    }
    if (args.row_id !== undefined && args.row_id !== null) {
      this.row_id = args.row_id;
    }
    if (args.row_set !== undefined && args.row_set !== null) {
      this.row_set = new TRowSet(args.row_set);
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
TPixelRowResult.prototype = {};
TPixelRowResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.pixel = new TPixel();
        this.pixel.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.row_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRUCT) {
        this.row_set = new TRowSet();
        this.row_set.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TPixelRowResult.prototype.write = function(output) {
  output.writeStructBegin('TPixelRowResult');
  if (this.pixel !== null && this.pixel !== undefined) {
    output.writeFieldBegin('pixel', Thrift.Type.STRUCT, 1);
    this.pixel.write(output);
    output.writeFieldEnd();
  }
  if (this.row_id !== null && this.row_id !== undefined) {
    output.writeFieldBegin('row_id', Thrift.Type.I64, 2);
    output.writeI64(this.row_id);
    output.writeFieldEnd();
  }
  if (this.row_set !== null && this.row_set !== undefined) {
    output.writeFieldBegin('row_set', Thrift.Type.STRUCT, 3);
    this.row_set.write(output);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 4);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TPixelTableRowResult = function(args) {
  this.pixel = null;
  this.vega_table_name = null;
  this.table_id = null;
  this.row_id = null;
  this.row_set = null;
  this.nonce = null;
  if (args) {
    if (args.pixel !== undefined && args.pixel !== null) {
      this.pixel = new TPixel(args.pixel);
    }
    if (args.vega_table_name !== undefined && args.vega_table_name !== null) {
      this.vega_table_name = args.vega_table_name;
    }
    if (args.table_id !== undefined && args.table_id !== null) {
      this.table_id = args.table_id;
    }
    if (args.row_id !== undefined && args.row_id !== null) {
      this.row_id = args.row_id;
    }
    if (args.row_set !== undefined && args.row_set !== null) {
      this.row_set = new TRowSet(args.row_set);
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
TPixelTableRowResult.prototype = {};
TPixelTableRowResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.pixel = new TPixel();
        this.pixel.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.vega_table_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.table_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I64) {
        this.row_id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRUCT) {
        this.row_set = new TRowSet();
        this.row_set.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TPixelTableRowResult.prototype.write = function(output) {
  output.writeStructBegin('TPixelTableRowResult');
  if (this.pixel !== null && this.pixel !== undefined) {
    output.writeFieldBegin('pixel', Thrift.Type.STRUCT, 1);
    this.pixel.write(output);
    output.writeFieldEnd();
  }
  if (this.vega_table_name !== null && this.vega_table_name !== undefined) {
    output.writeFieldBegin('vega_table_name', Thrift.Type.STRING, 2);
    output.writeString(this.vega_table_name);
    output.writeFieldEnd();
  }
  if (this.table_id !== null && this.table_id !== undefined) {
    output.writeFieldBegin('table_id', Thrift.Type.I64, 3);
    output.writeI64(this.table_id);
    output.writeFieldEnd();
  }
  if (this.row_id !== null && this.row_id !== undefined) {
    output.writeFieldBegin('row_id', Thrift.Type.I64, 4);
    output.writeI64(this.row_id);
    output.writeFieldEnd();
  }
  if (this.row_set !== null && this.row_set !== undefined) {
    output.writeFieldBegin('row_set', Thrift.Type.STRUCT, 5);
    this.row_set.write(output);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 6);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TPixelRows = function(args) {
  this.pixel = null;
  this.row_set = null;
  if (args) {
    if (args.pixel !== undefined && args.pixel !== null) {
      this.pixel = new TPixel(args.pixel);
    }
    if (args.row_set !== undefined && args.row_set !== null) {
      this.row_set = new TRowSet(args.row_set);
    }
  }
};
TPixelRows.prototype = {};
TPixelRows.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRUCT) {
        this.pixel = new TPixel();
        this.pixel.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRUCT) {
        this.row_set = new TRowSet();
        this.row_set.read(input);
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TPixelRows.prototype.write = function(output) {
  output.writeStructBegin('TPixelRows');
  if (this.pixel !== null && this.pixel !== undefined) {
    output.writeFieldBegin('pixel', Thrift.Type.STRUCT, 1);
    this.pixel.write(output);
    output.writeFieldEnd();
  }
  if (this.row_set !== null && this.row_set !== undefined) {
    output.writeFieldBegin('row_set', Thrift.Type.STRUCT, 2);
    this.row_set.write(output);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TPixelResult = function(args) {
  this.pixel_rows = null;
  this.nonce = null;
  if (args) {
    if (args.pixel_rows !== undefined && args.pixel_rows !== null) {
      this.pixel_rows = Thrift.copyList(args.pixel_rows, [TPixelRows]);
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
  }
};
TPixelResult.prototype = {};
TPixelResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.LIST) {
        var _size96 = 0;
        var _rtmp3100;
        this.pixel_rows = [];
        var _etype99 = 0;
        _rtmp3100 = input.readListBegin();
        _etype99 = _rtmp3100.etype;
        _size96 = _rtmp3100.size;
        for (var _i101 = 0; _i101 < _size96; ++_i101)
        {
          var elem102 = null;
          elem102 = new TPixelRows();
          elem102.read(input);
          this.pixel_rows.push(elem102);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TPixelResult.prototype.write = function(output) {
  output.writeStructBegin('TPixelResult');
  if (this.pixel_rows !== null && this.pixel_rows !== undefined) {
    output.writeFieldBegin('pixel_rows', Thrift.Type.LIST, 1);
    output.writeListBegin(Thrift.Type.STRUCT, this.pixel_rows.length);
    for (var iter103 in this.pixel_rows)
    {
      if (this.pixel_rows.hasOwnProperty(iter103))
      {
        iter103 = this.pixel_rows[iter103];
        iter103.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 2);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TRenderResult = function(args) {
  this.image = null;
  this.nonce = null;
  this.execution_time_ms = null;
  this.render_time_ms = null;
  this.total_time_ms = null;
  if (args) {
    if (args.image !== undefined && args.image !== null) {
      this.image = args.image;
    }
    if (args.nonce !== undefined && args.nonce !== null) {
      this.nonce = args.nonce;
    }
    if (args.execution_time_ms !== undefined && args.execution_time_ms !== null) {
      this.execution_time_ms = args.execution_time_ms;
    }
    if (args.render_time_ms !== undefined && args.render_time_ms !== null) {
      this.render_time_ms = args.render_time_ms;
    }
    if (args.total_time_ms !== undefined && args.total_time_ms !== null) {
      this.total_time_ms = args.total_time_ms;
    }
  }
};
TRenderResult.prototype = {};
TRenderResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.image = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.nonce = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.execution_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I64) {
        this.render_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.I64) {
        this.total_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TRenderResult.prototype.write = function(output) {
  output.writeStructBegin('TRenderResult');
  if (this.image !== null && this.image !== undefined) {
    output.writeFieldBegin('image', Thrift.Type.STRING, 1);
    output.writeBinary(this.image);
    output.writeFieldEnd();
  }
  if (this.nonce !== null && this.nonce !== undefined) {
    output.writeFieldBegin('nonce', Thrift.Type.STRING, 2);
    output.writeString(this.nonce);
    output.writeFieldEnd();
  }
  if (this.execution_time_ms !== null && this.execution_time_ms !== undefined) {
    output.writeFieldBegin('execution_time_ms', Thrift.Type.I64, 3);
    output.writeI64(this.execution_time_ms);
    output.writeFieldEnd();
  }
  if (this.render_time_ms !== null && this.render_time_ms !== undefined) {
    output.writeFieldBegin('render_time_ms', Thrift.Type.I64, 4);
    output.writeI64(this.render_time_ms);
    output.writeFieldEnd();
  }
  if (this.total_time_ms !== null && this.total_time_ms !== undefined) {
    output.writeFieldBegin('total_time_ms', Thrift.Type.I64, 5);
    output.writeI64(this.total_time_ms);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TMemoryData = function(args) {
  this.slab = null;
  this.start_page = null;
  this.num_pages = null;
  this.touch = null;
  this.chunk_key = null;
  this.buffer_epoch = null;
  this.is_free = null;
  if (args) {
    if (args.slab !== undefined && args.slab !== null) {
      this.slab = args.slab;
    }
    if (args.start_page !== undefined && args.start_page !== null) {
      this.start_page = args.start_page;
    }
    if (args.num_pages !== undefined && args.num_pages !== null) {
      this.num_pages = args.num_pages;
    }
    if (args.touch !== undefined && args.touch !== null) {
      this.touch = args.touch;
    }
    if (args.chunk_key !== undefined && args.chunk_key !== null) {
      this.chunk_key = Thrift.copyList(args.chunk_key, [null]);
    }
    if (args.buffer_epoch !== undefined && args.buffer_epoch !== null) {
      this.buffer_epoch = args.buffer_epoch;
    }
    if (args.is_free !== undefined && args.is_free !== null) {
      this.is_free = args.is_free;
    }
  }
};
TMemoryData.prototype = {};
TMemoryData.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I64) {
        this.slab = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I32) {
        this.start_page = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.num_pages = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I32) {
        this.touch = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.LIST) {
        var _size104 = 0;
        var _rtmp3108;
        this.chunk_key = [];
        var _etype107 = 0;
        _rtmp3108 = input.readListBegin();
        _etype107 = _rtmp3108.etype;
        _size104 = _rtmp3108.size;
        for (var _i109 = 0; _i109 < _size104; ++_i109)
        {
          var elem110 = null;
          elem110 = input.readI64().value;
          this.chunk_key.push(elem110);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.I32) {
        this.buffer_epoch = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.BOOL) {
        this.is_free = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TMemoryData.prototype.write = function(output) {
  output.writeStructBegin('TMemoryData');
  if (this.slab !== null && this.slab !== undefined) {
    output.writeFieldBegin('slab', Thrift.Type.I64, 1);
    output.writeI64(this.slab);
    output.writeFieldEnd();
  }
  if (this.start_page !== null && this.start_page !== undefined) {
    output.writeFieldBegin('start_page', Thrift.Type.I32, 2);
    output.writeI32(this.start_page);
    output.writeFieldEnd();
  }
  if (this.num_pages !== null && this.num_pages !== undefined) {
    output.writeFieldBegin('num_pages', Thrift.Type.I64, 3);
    output.writeI64(this.num_pages);
    output.writeFieldEnd();
  }
  if (this.touch !== null && this.touch !== undefined) {
    output.writeFieldBegin('touch', Thrift.Type.I32, 4);
    output.writeI32(this.touch);
    output.writeFieldEnd();
  }
  if (this.chunk_key !== null && this.chunk_key !== undefined) {
    output.writeFieldBegin('chunk_key', Thrift.Type.LIST, 5);
    output.writeListBegin(Thrift.Type.I64, this.chunk_key.length);
    for (var iter111 in this.chunk_key)
    {
      if (this.chunk_key.hasOwnProperty(iter111))
      {
        iter111 = this.chunk_key[iter111];
        output.writeI64(iter111);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.buffer_epoch !== null && this.buffer_epoch !== undefined) {
    output.writeFieldBegin('buffer_epoch', Thrift.Type.I32, 6);
    output.writeI32(this.buffer_epoch);
    output.writeFieldEnd();
  }
  if (this.is_free !== null && this.is_free !== undefined) {
    output.writeFieldBegin('is_free', Thrift.Type.BOOL, 7);
    output.writeBool(this.is_free);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TNodeMemoryInfo = function(args) {
  this.host_name = null;
  this.page_size = null;
  this.max_num_pages = null;
  this.num_pages_allocated = null;
  this.is_allocation_capped = null;
  this.node_memory_data = null;
  if (args) {
    if (args.host_name !== undefined && args.host_name !== null) {
      this.host_name = args.host_name;
    }
    if (args.page_size !== undefined && args.page_size !== null) {
      this.page_size = args.page_size;
    }
    if (args.max_num_pages !== undefined && args.max_num_pages !== null) {
      this.max_num_pages = args.max_num_pages;
    }
    if (args.num_pages_allocated !== undefined && args.num_pages_allocated !== null) {
      this.num_pages_allocated = args.num_pages_allocated;
    }
    if (args.is_allocation_capped !== undefined && args.is_allocation_capped !== null) {
      this.is_allocation_capped = args.is_allocation_capped;
    }
    if (args.node_memory_data !== undefined && args.node_memory_data !== null) {
      this.node_memory_data = Thrift.copyList(args.node_memory_data, [TMemoryData]);
    }
  }
};
TNodeMemoryInfo.prototype = {};
TNodeMemoryInfo.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.host_name = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.page_size = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.max_num_pages = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I64) {
        this.num_pages_allocated = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.BOOL) {
        this.is_allocation_capped = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.LIST) {
        var _size112 = 0;
        var _rtmp3116;
        this.node_memory_data = [];
        var _etype115 = 0;
        _rtmp3116 = input.readListBegin();
        _etype115 = _rtmp3116.etype;
        _size112 = _rtmp3116.size;
        for (var _i117 = 0; _i117 < _size112; ++_i117)
        {
          var elem118 = null;
          elem118 = new TMemoryData();
          elem118.read(input);
          this.node_memory_data.push(elem118);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TNodeMemoryInfo.prototype.write = function(output) {
  output.writeStructBegin('TNodeMemoryInfo');
  if (this.host_name !== null && this.host_name !== undefined) {
    output.writeFieldBegin('host_name', Thrift.Type.STRING, 1);
    output.writeString(this.host_name);
    output.writeFieldEnd();
  }
  if (this.page_size !== null && this.page_size !== undefined) {
    output.writeFieldBegin('page_size', Thrift.Type.I64, 2);
    output.writeI64(this.page_size);
    output.writeFieldEnd();
  }
  if (this.max_num_pages !== null && this.max_num_pages !== undefined) {
    output.writeFieldBegin('max_num_pages', Thrift.Type.I64, 3);
    output.writeI64(this.max_num_pages);
    output.writeFieldEnd();
  }
  if (this.num_pages_allocated !== null && this.num_pages_allocated !== undefined) {
    output.writeFieldBegin('num_pages_allocated', Thrift.Type.I64, 4);
    output.writeI64(this.num_pages_allocated);
    output.writeFieldEnd();
  }
  if (this.is_allocation_capped !== null && this.is_allocation_capped !== undefined) {
    output.writeFieldBegin('is_allocation_capped', Thrift.Type.BOOL, 5);
    output.writeBool(this.is_allocation_capped);
    output.writeFieldEnd();
  }
  if (this.node_memory_data !== null && this.node_memory_data !== undefined) {
    output.writeFieldBegin('node_memory_data', Thrift.Type.LIST, 6);
    output.writeListBegin(Thrift.Type.STRUCT, this.node_memory_data.length);
    for (var iter119 in this.node_memory_data)
    {
      if (this.node_memory_data.hasOwnProperty(iter119))
      {
        iter119 = this.node_memory_data[iter119];
        iter119.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TTableDetails = function(args) {
  this.row_desc = null;
  this.fragment_size = null;
  this.page_size = null;
  this.max_rows = null;
  this.view_sql = null;
  this.shard_count = null;
  this.key_metainfo = null;
  this.is_temporary = null;
  if (args) {
    if (args.row_desc !== undefined && args.row_desc !== null) {
      this.row_desc = Thrift.copyList(args.row_desc, [TColumnType]);
    }
    if (args.fragment_size !== undefined && args.fragment_size !== null) {
      this.fragment_size = args.fragment_size;
    }
    if (args.page_size !== undefined && args.page_size !== null) {
      this.page_size = args.page_size;
    }
    if (args.max_rows !== undefined && args.max_rows !== null) {
      this.max_rows = args.max_rows;
    }
    if (args.view_sql !== undefined && args.view_sql !== null) {
      this.view_sql = args.view_sql;
    }
    if (args.shard_count !== undefined && args.shard_count !== null) {
      this.shard_count = args.shard_count;
    }
    if (args.key_metainfo !== undefined && args.key_metainfo !== null) {
      this.key_metainfo = args.key_metainfo;
    }
    if (args.is_temporary !== undefined && args.is_temporary !== null) {
      this.is_temporary = args.is_temporary;
    }
  }
};
TTableDetails.prototype = {};
TTableDetails.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.LIST) {
        var _size120 = 0;
        var _rtmp3124;
        this.row_desc = [];
        var _etype123 = 0;
        _rtmp3124 = input.readListBegin();
        _etype123 = _rtmp3124.etype;
        _size120 = _rtmp3124.size;
        for (var _i125 = 0; _i125 < _size120; ++_i125)
        {
          var elem126 = null;
          elem126 = new TColumnType();
          elem126.read(input);
          this.row_desc.push(elem126);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.fragment_size = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.page_size = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.I64) {
        this.max_rows = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRING) {
        this.view_sql = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.I64) {
        this.shard_count = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.STRING) {
        this.key_metainfo = input.readString().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 8:
      if (ftype == Thrift.Type.BOOL) {
        this.is_temporary = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TTableDetails.prototype.write = function(output) {
  output.writeStructBegin('TTableDetails');
  if (this.row_desc !== null && this.row_desc !== undefined) {
    output.writeFieldBegin('row_desc', Thrift.Type.LIST, 1);
    output.writeListBegin(Thrift.Type.STRUCT, this.row_desc.length);
    for (var iter127 in this.row_desc)
    {
      if (this.row_desc.hasOwnProperty(iter127))
      {
        iter127 = this.row_desc[iter127];
        iter127.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.fragment_size !== null && this.fragment_size !== undefined) {
    output.writeFieldBegin('fragment_size', Thrift.Type.I64, 2);
    output.writeI64(this.fragment_size);
    output.writeFieldEnd();
  }
  if (this.page_size !== null && this.page_size !== undefined) {
    output.writeFieldBegin('page_size', Thrift.Type.I64, 3);
    output.writeI64(this.page_size);
    output.writeFieldEnd();
  }
  if (this.max_rows !== null && this.max_rows !== undefined) {
    output.writeFieldBegin('max_rows', Thrift.Type.I64, 4);
    output.writeI64(this.max_rows);
    output.writeFieldEnd();
  }
  if (this.view_sql !== null && this.view_sql !== undefined) {
    output.writeFieldBegin('view_sql', Thrift.Type.STRING, 5);
    output.writeString(this.view_sql);
    output.writeFieldEnd();
  }
  if (this.shard_count !== null && this.shard_count !== undefined) {
    output.writeFieldBegin('shard_count', Thrift.Type.I64, 6);
    output.writeI64(this.shard_count);
    output.writeFieldEnd();
  }
  if (this.key_metainfo !== null && this.key_metainfo !== undefined) {
    output.writeFieldBegin('key_metainfo', Thrift.Type.STRING, 7);
    output.writeString(this.key_metainfo);
    output.writeFieldEnd();
  }
  if (this.is_temporary !== null && this.is_temporary !== undefined) {
    output.writeFieldBegin('is_temporary', Thrift.Type.BOOL, 8);
    output.writeBool(this.is_temporary);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TColumnRange = function(args) {
  this.type = null;
  this.col_id = null;
  this.table_id = null;
  this.has_nulls = null;
  this.int_min = null;
  this.int_max = null;
  this.bucket = null;
  this.fp_min = null;
  this.fp_max = null;
  if (args) {
    if (args.type !== undefined && args.type !== null) {
      this.type = args.type;
    }
    if (args.col_id !== undefined && args.col_id !== null) {
      this.col_id = args.col_id;
    }
    if (args.table_id !== undefined && args.table_id !== null) {
      this.table_id = args.table_id;
    }
    if (args.has_nulls !== undefined && args.has_nulls !== null) {
      this.has_nulls = args.has_nulls;
    }
    if (args.int_min !== undefined && args.int_min !== null) {
      this.int_min = args.int_min;
    }
    if (args.int_max !== undefined && args.int_max !== null) {
      this.int_max = args.int_max;
    }
    if (args.bucket !== undefined && args.bucket !== null) {
      this.bucket = args.bucket;
    }
    if (args.fp_min !== undefined && args.fp_min !== null) {
      this.fp_min = args.fp_min;
    }
    if (args.fp_max !== undefined && args.fp_max !== null) {
      this.fp_max = args.fp_max;
    }
  }
};
TColumnRange.prototype = {};
TColumnRange.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.type = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I32) {
        this.col_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I32) {
        this.table_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.BOOL) {
        this.has_nulls = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.I64) {
        this.int_min = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.I64) {
        this.int_max = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 7:
      if (ftype == Thrift.Type.I64) {
        this.bucket = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 8:
      if (ftype == Thrift.Type.DOUBLE) {
        this.fp_min = input.readDouble().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 9:
      if (ftype == Thrift.Type.DOUBLE) {
        this.fp_max = input.readDouble().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TColumnRange.prototype.write = function(output) {
  output.writeStructBegin('TColumnRange');
  if (this.type !== null && this.type !== undefined) {
    output.writeFieldBegin('type', Thrift.Type.I32, 1);
    output.writeI32(this.type);
    output.writeFieldEnd();
  }
  if (this.col_id !== null && this.col_id !== undefined) {
    output.writeFieldBegin('col_id', Thrift.Type.I32, 2);
    output.writeI32(this.col_id);
    output.writeFieldEnd();
  }
  if (this.table_id !== null && this.table_id !== undefined) {
    output.writeFieldBegin('table_id', Thrift.Type.I32, 3);
    output.writeI32(this.table_id);
    output.writeFieldEnd();
  }
  if (this.has_nulls !== null && this.has_nulls !== undefined) {
    output.writeFieldBegin('has_nulls', Thrift.Type.BOOL, 4);
    output.writeBool(this.has_nulls);
    output.writeFieldEnd();
  }
  if (this.int_min !== null && this.int_min !== undefined) {
    output.writeFieldBegin('int_min', Thrift.Type.I64, 5);
    output.writeI64(this.int_min);
    output.writeFieldEnd();
  }
  if (this.int_max !== null && this.int_max !== undefined) {
    output.writeFieldBegin('int_max', Thrift.Type.I64, 6);
    output.writeI64(this.int_max);
    output.writeFieldEnd();
  }
  if (this.bucket !== null && this.bucket !== undefined) {
    output.writeFieldBegin('bucket', Thrift.Type.I64, 7);
    output.writeI64(this.bucket);
    output.writeFieldEnd();
  }
  if (this.fp_min !== null && this.fp_min !== undefined) {
    output.writeFieldBegin('fp_min', Thrift.Type.DOUBLE, 8);
    output.writeDouble(this.fp_min);
    output.writeFieldEnd();
  }
  if (this.fp_max !== null && this.fp_max !== undefined) {
    output.writeFieldBegin('fp_max', Thrift.Type.DOUBLE, 9);
    output.writeDouble(this.fp_max);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TDictionaryGeneration = function(args) {
  this.dict_id = null;
  this.entry_count = null;
  if (args) {
    if (args.dict_id !== undefined && args.dict_id !== null) {
      this.dict_id = args.dict_id;
    }
    if (args.entry_count !== undefined && args.entry_count !== null) {
      this.entry_count = args.entry_count;
    }
  }
};
TDictionaryGeneration.prototype = {};
TDictionaryGeneration.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.dict_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.entry_count = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TDictionaryGeneration.prototype.write = function(output) {
  output.writeStructBegin('TDictionaryGeneration');
  if (this.dict_id !== null && this.dict_id !== undefined) {
    output.writeFieldBegin('dict_id', Thrift.Type.I32, 1);
    output.writeI32(this.dict_id);
    output.writeFieldEnd();
  }
  if (this.entry_count !== null && this.entry_count !== undefined) {
    output.writeFieldBegin('entry_count', Thrift.Type.I64, 2);
    output.writeI64(this.entry_count);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TTableGeneration = function(args) {
  this.table_id = null;
  this.tuple_count = null;
  this.start_rowid = null;
  if (args) {
    if (args.table_id !== undefined && args.table_id !== null) {
      this.table_id = args.table_id;
    }
    if (args.tuple_count !== undefined && args.tuple_count !== null) {
      this.tuple_count = args.tuple_count;
    }
    if (args.start_rowid !== undefined && args.start_rowid !== null) {
      this.start_rowid = args.start_rowid;
    }
  }
};
TTableGeneration.prototype = {};
TTableGeneration.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.table_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I64) {
        this.tuple_count = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.I64) {
        this.start_rowid = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TTableGeneration.prototype.write = function(output) {
  output.writeStructBegin('TTableGeneration');
  if (this.table_id !== null && this.table_id !== undefined) {
    output.writeFieldBegin('table_id', Thrift.Type.I32, 1);
    output.writeI32(this.table_id);
    output.writeFieldEnd();
  }
  if (this.tuple_count !== null && this.tuple_count !== undefined) {
    output.writeFieldBegin('tuple_count', Thrift.Type.I64, 2);
    output.writeI64(this.tuple_count);
    output.writeFieldEnd();
  }
  if (this.start_rowid !== null && this.start_rowid !== undefined) {
    output.writeFieldBegin('start_rowid', Thrift.Type.I64, 3);
    output.writeI64(this.start_rowid);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TPendingQuery = function(args) {
  this.id = null;
  this.column_ranges = null;
  this.dictionary_generations = null;
  this.table_generations = null;
  if (args) {
    if (args.id !== undefined && args.id !== null) {
      this.id = args.id;
    }
    if (args.column_ranges !== undefined && args.column_ranges !== null) {
      this.column_ranges = Thrift.copyList(args.column_ranges, [TColumnRange]);
    }
    if (args.dictionary_generations !== undefined && args.dictionary_generations !== null) {
      this.dictionary_generations = Thrift.copyList(args.dictionary_generations, [TDictionaryGeneration]);
    }
    if (args.table_generations !== undefined && args.table_generations !== null) {
      this.table_generations = Thrift.copyList(args.table_generations, [TTableGeneration]);
    }
  }
};
TPendingQuery.prototype = {};
TPendingQuery.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I64) {
        this.id = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.LIST) {
        var _size128 = 0;
        var _rtmp3132;
        this.column_ranges = [];
        var _etype131 = 0;
        _rtmp3132 = input.readListBegin();
        _etype131 = _rtmp3132.etype;
        _size128 = _rtmp3132.size;
        for (var _i133 = 0; _i133 < _size128; ++_i133)
        {
          var elem134 = null;
          elem134 = new TColumnRange();
          elem134.read(input);
          this.column_ranges.push(elem134);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size135 = 0;
        var _rtmp3139;
        this.dictionary_generations = [];
        var _etype138 = 0;
        _rtmp3139 = input.readListBegin();
        _etype138 = _rtmp3139.etype;
        _size135 = _rtmp3139.size;
        for (var _i140 = 0; _i140 < _size135; ++_i140)
        {
          var elem141 = null;
          elem141 = new TDictionaryGeneration();
          elem141.read(input);
          this.dictionary_generations.push(elem141);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.LIST) {
        var _size142 = 0;
        var _rtmp3146;
        this.table_generations = [];
        var _etype145 = 0;
        _rtmp3146 = input.readListBegin();
        _etype145 = _rtmp3146.etype;
        _size142 = _rtmp3146.size;
        for (var _i147 = 0; _i147 < _size142; ++_i147)
        {
          var elem148 = null;
          elem148 = new TTableGeneration();
          elem148.read(input);
          this.table_generations.push(elem148);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TPendingQuery.prototype.write = function(output) {
  output.writeStructBegin('TPendingQuery');
  if (this.id !== null && this.id !== undefined) {
    output.writeFieldBegin('id', Thrift.Type.I64, 1);
    output.writeI64(this.id);
    output.writeFieldEnd();
  }
  if (this.column_ranges !== null && this.column_ranges !== undefined) {
    output.writeFieldBegin('column_ranges', Thrift.Type.LIST, 2);
    output.writeListBegin(Thrift.Type.STRUCT, this.column_ranges.length);
    for (var iter149 in this.column_ranges)
    {
      if (this.column_ranges.hasOwnProperty(iter149))
      {
        iter149 = this.column_ranges[iter149];
        iter149.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.dictionary_generations !== null && this.dictionary_generations !== undefined) {
    output.writeFieldBegin('dictionary_generations', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.STRUCT, this.dictionary_generations.length);
    for (var iter150 in this.dictionary_generations)
    {
      if (this.dictionary_generations.hasOwnProperty(iter150))
      {
        iter150 = this.dictionary_generations[iter150];
        iter150.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.table_generations !== null && this.table_generations !== undefined) {
    output.writeFieldBegin('table_generations', Thrift.Type.LIST, 4);
    output.writeListBegin(Thrift.Type.STRUCT, this.table_generations.length);
    for (var iter151 in this.table_generations)
    {
      if (this.table_generations.hasOwnProperty(iter151))
      {
        iter151 = this.table_generations[iter151];
        iter151.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TVarLen = function(args) {
  this.payload = null;
  this.is_null = null;
  if (args) {
    if (args.payload !== undefined && args.payload !== null) {
      this.payload = args.payload;
    }
    if (args.is_null !== undefined && args.is_null !== null) {
      this.is_null = args.is_null;
    }
  }
};
TVarLen.prototype = {};
TVarLen.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.payload = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.BOOL) {
        this.is_null = input.readBool().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TVarLen.prototype.write = function(output) {
  output.writeStructBegin('TVarLen');
  if (this.payload !== null && this.payload !== undefined) {
    output.writeFieldBegin('payload', Thrift.Type.STRING, 1);
    output.writeBinary(this.payload);
    output.writeFieldEnd();
  }
  if (this.is_null !== null && this.is_null !== undefined) {
    output.writeFieldBegin('is_null', Thrift.Type.BOOL, 2);
    output.writeBool(this.is_null);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TDataBlockPtr = function(args) {
  this.fixed_len_data = null;
  this.var_len_data = null;
  if (args) {
    if (args.fixed_len_data !== undefined && args.fixed_len_data !== null) {
      this.fixed_len_data = args.fixed_len_data;
    }
    if (args.var_len_data !== undefined && args.var_len_data !== null) {
      this.var_len_data = Thrift.copyList(args.var_len_data, [TVarLen]);
    }
  }
};
TDataBlockPtr.prototype = {};
TDataBlockPtr.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.STRING) {
        this.fixed_len_data = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.LIST) {
        var _size152 = 0;
        var _rtmp3156;
        this.var_len_data = [];
        var _etype155 = 0;
        _rtmp3156 = input.readListBegin();
        _etype155 = _rtmp3156.etype;
        _size152 = _rtmp3156.size;
        for (var _i157 = 0; _i157 < _size152; ++_i157)
        {
          var elem158 = null;
          elem158 = new TVarLen();
          elem158.read(input);
          this.var_len_data.push(elem158);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TDataBlockPtr.prototype.write = function(output) {
  output.writeStructBegin('TDataBlockPtr');
  if (this.fixed_len_data !== null && this.fixed_len_data !== undefined) {
    output.writeFieldBegin('fixed_len_data', Thrift.Type.STRING, 1);
    output.writeBinary(this.fixed_len_data);
    output.writeFieldEnd();
  }
  if (this.var_len_data !== null && this.var_len_data !== undefined) {
    output.writeFieldBegin('var_len_data', Thrift.Type.LIST, 2);
    output.writeListBegin(Thrift.Type.STRUCT, this.var_len_data.length);
    for (var iter159 in this.var_len_data)
    {
      if (this.var_len_data.hasOwnProperty(iter159))
      {
        iter159 = this.var_len_data[iter159];
        iter159.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TInsertData = function(args) {
  this.db_id = null;
  this.table_id = null;
  this.column_ids = null;
  this.data = null;
  this.num_rows = null;
  if (args) {
    if (args.db_id !== undefined && args.db_id !== null) {
      this.db_id = args.db_id;
    }
    if (args.table_id !== undefined && args.table_id !== null) {
      this.table_id = args.table_id;
    }
    if (args.column_ids !== undefined && args.column_ids !== null) {
      this.column_ids = Thrift.copyList(args.column_ids, [null]);
    }
    if (args.data !== undefined && args.data !== null) {
      this.data = Thrift.copyList(args.data, [TDataBlockPtr]);
    }
    if (args.num_rows !== undefined && args.num_rows !== null) {
      this.num_rows = args.num_rows;
    }
  }
};
TInsertData.prototype = {};
TInsertData.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.db_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I32) {
        this.table_id = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.LIST) {
        var _size160 = 0;
        var _rtmp3164;
        this.column_ids = [];
        var _etype163 = 0;
        _rtmp3164 = input.readListBegin();
        _etype163 = _rtmp3164.etype;
        _size160 = _rtmp3164.size;
        for (var _i165 = 0; _i165 < _size160; ++_i165)
        {
          var elem166 = null;
          elem166 = input.readI32().value;
          this.column_ids.push(elem166);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.LIST) {
        var _size167 = 0;
        var _rtmp3171;
        this.data = [];
        var _etype170 = 0;
        _rtmp3171 = input.readListBegin();
        _etype170 = _rtmp3171.etype;
        _size167 = _rtmp3171.size;
        for (var _i172 = 0; _i172 < _size167; ++_i172)
        {
          var elem173 = null;
          elem173 = new TDataBlockPtr();
          elem173.read(input);
          this.data.push(elem173);
        }
        input.readListEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.I64) {
        this.num_rows = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TInsertData.prototype.write = function(output) {
  output.writeStructBegin('TInsertData');
  if (this.db_id !== null && this.db_id !== undefined) {
    output.writeFieldBegin('db_id', Thrift.Type.I32, 1);
    output.writeI32(this.db_id);
    output.writeFieldEnd();
  }
  if (this.table_id !== null && this.table_id !== undefined) {
    output.writeFieldBegin('table_id', Thrift.Type.I32, 2);
    output.writeI32(this.table_id);
    output.writeFieldEnd();
  }
  if (this.column_ids !== null && this.column_ids !== undefined) {
    output.writeFieldBegin('column_ids', Thrift.Type.LIST, 3);
    output.writeListBegin(Thrift.Type.I32, this.column_ids.length);
    for (var iter174 in this.column_ids)
    {
      if (this.column_ids.hasOwnProperty(iter174))
      {
        iter174 = this.column_ids[iter174];
        output.writeI32(iter174);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.data !== null && this.data !== undefined) {
    output.writeFieldBegin('data', Thrift.Type.LIST, 4);
    output.writeListBegin(Thrift.Type.STRUCT, this.data.length);
    for (var iter175 in this.data)
    {
      if (this.data.hasOwnProperty(iter175))
      {
        iter175 = this.data[iter175];
        iter175.write(output);
      }
    }
    output.writeListEnd();
    output.writeFieldEnd();
  }
  if (this.num_rows !== null && this.num_rows !== undefined) {
    output.writeFieldBegin('num_rows', Thrift.Type.I64, 5);
    output.writeI64(this.num_rows);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TRawRenderPassDataResult = function(args) {
  this.num_channels = null;
  this.pixels = null;
  this.row_ids_A = null;
  this.row_ids_B = null;
  this.table_ids = null;
  this.accum_data = null;
  if (args) {
    if (args.num_channels !== undefined && args.num_channels !== null) {
      this.num_channels = args.num_channels;
    }
    if (args.pixels !== undefined && args.pixels !== null) {
      this.pixels = args.pixels;
    }
    if (args.row_ids_A !== undefined && args.row_ids_A !== null) {
      this.row_ids_A = args.row_ids_A;
    }
    if (args.row_ids_B !== undefined && args.row_ids_B !== null) {
      this.row_ids_B = args.row_ids_B;
    }
    if (args.table_ids !== undefined && args.table_ids !== null) {
      this.table_ids = args.table_ids;
    }
    if (args.accum_data !== undefined && args.accum_data !== null) {
      this.accum_data = args.accum_data;
    }
  }
};
TRawRenderPassDataResult.prototype = {};
TRawRenderPassDataResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.num_channels = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.STRING) {
        this.pixels = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.STRING) {
        this.row_ids_A = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 4:
      if (ftype == Thrift.Type.STRING) {
        this.row_ids_B = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 5:
      if (ftype == Thrift.Type.STRING) {
        this.table_ids = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 6:
      if (ftype == Thrift.Type.STRING) {
        this.accum_data = input.readBinary().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TRawRenderPassDataResult.prototype.write = function(output) {
  output.writeStructBegin('TRawRenderPassDataResult');
  if (this.num_channels !== null && this.num_channels !== undefined) {
    output.writeFieldBegin('num_channels', Thrift.Type.I32, 1);
    output.writeI32(this.num_channels);
    output.writeFieldEnd();
  }
  if (this.pixels !== null && this.pixels !== undefined) {
    output.writeFieldBegin('pixels', Thrift.Type.STRING, 2);
    output.writeBinary(this.pixels);
    output.writeFieldEnd();
  }
  if (this.row_ids_A !== null && this.row_ids_A !== undefined) {
    output.writeFieldBegin('row_ids_A', Thrift.Type.STRING, 3);
    output.writeBinary(this.row_ids_A);
    output.writeFieldEnd();
  }
  if (this.row_ids_B !== null && this.row_ids_B !== undefined) {
    output.writeFieldBegin('row_ids_B', Thrift.Type.STRING, 4);
    output.writeBinary(this.row_ids_B);
    output.writeFieldEnd();
  }
  if (this.table_ids !== null && this.table_ids !== undefined) {
    output.writeFieldBegin('table_ids', Thrift.Type.STRING, 5);
    output.writeBinary(this.table_ids);
    output.writeFieldEnd();
  }
  if (this.accum_data !== null && this.accum_data !== undefined) {
    output.writeFieldBegin('accum_data', Thrift.Type.STRING, 6);
    output.writeBinary(this.accum_data);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};

TRawPixelDataResult = function(args) {
  this.width = null;
  this.height = null;
  this.render_pass_map = null;
  this.execution_time_ms = null;
  this.render_time_ms = null;
  this.total_time_ms = null;
  if (args) {
    if (args.width !== undefined && args.width !== null) {
      this.width = args.width;
    }
    if (args.height !== undefined && args.height !== null) {
      this.height = args.height;
    }
    if (args.render_pass_map !== undefined && args.render_pass_map !== null) {
      this.render_pass_map = Thrift.copyMap(args.render_pass_map, [TRawRenderPassDataResult]);
    }
    if (args.execution_time_ms !== undefined && args.execution_time_ms !== null) {
      this.execution_time_ms = args.execution_time_ms;
    }
    if (args.render_time_ms !== undefined && args.render_time_ms !== null) {
      this.render_time_ms = args.render_time_ms;
    }
    if (args.total_time_ms !== undefined && args.total_time_ms !== null) {
      this.total_time_ms = args.total_time_ms;
    }
  }
};
TRawPixelDataResult.prototype = {};
TRawPixelDataResult.prototype.read = function(input) {
  input.readStructBegin();
  while (true)
  {
    var ret = input.readFieldBegin();
    var fname = ret.fname;
    var ftype = ret.ftype;
    var fid = ret.fid;
    if (ftype == Thrift.Type.STOP) {
      break;
    }
    switch (fid)
    {
      case 1:
      if (ftype == Thrift.Type.I32) {
        this.width = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 2:
      if (ftype == Thrift.Type.I32) {
        this.height = input.readI32().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 3:
      if (ftype == Thrift.Type.MAP) {
        var _size176 = 0;
        var _rtmp3180;
        this.render_pass_map = {};
        var _ktype177 = 0;
        var _vtype178 = 0;
        _rtmp3180 = input.readMapBegin();
        _ktype177 = _rtmp3180.ktype;
        _vtype178 = _rtmp3180.vtype;
        _size176 = _rtmp3180.size;
        for (var _i181 = 0; _i181 < _size176; ++_i181)
        {
          if (_i181 > 0 ) {
            if (input.rstack.length > input.rpos[input.rpos.length -1] + 1) {
              input.rstack.pop();
            }
          }
          var key182 = null;
          var val183 = null;
          key182 = input.readI32().value;
          val183 = new TRawRenderPassDataResult();
          val183.read(input);
          this.render_pass_map[key182] = val183;
        }
        input.readMapEnd();
      } else {
        input.skip(ftype);
      }
      break;
      case 8:
      if (ftype == Thrift.Type.I64) {
        this.execution_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 9:
      if (ftype == Thrift.Type.I64) {
        this.render_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      case 10:
      if (ftype == Thrift.Type.I64) {
        this.total_time_ms = input.readI64().value;
      } else {
        input.skip(ftype);
      }
      break;
      default:
        input.skip(ftype);
    }
    input.readFieldEnd();
  }
  input.readStructEnd();
  return;
};

TRawPixelDataResult.prototype.write = function(output) {
  output.writeStructBegin('TRawPixelDataResult');
  if (this.width !== null && this.width !== undefined) {
    output.writeFieldBegin('width', Thrift.Type.I32, 1);
    output.writeI32(this.width);
    output.writeFieldEnd();
  }
  if (this.height !== null && this.height !== undefined) {
    output.writeFieldBegin('height', Thrift.Type.I32, 2);
    output.writeI32(this.height);
    output.writeFieldEnd();
  }
  if (this.render_pass_map !== null && this.render_pass_map !== undefined) {
    output.writeFieldBegin('render_pass_map', Thrift.Type.MAP, 3);
    output.writeMapBegin(Thrift.Type.I32, Thrift.Type.STRUCT, Thrift.objectLength(this.render_pass_map));
    for (var kiter184 in this.render_pass_map)
    {
      if (this.render_pass_map.hasOwnProperty(kiter184))
      {
        var viter185 = this.render_pass_map[kiter184];
        output.writeI32(kiter184);
        viter185.write(output);
      }
    }
    output.writeMapEnd();
    output.writeFieldEnd();
  }
  if (this.execution_time_ms !== null && this.execution_time_ms !== undefined) {
    output.writeFieldBegin('execution_time_ms', Thrift.Type.I64, 8);
    output.writeI64(this.execution_time_ms);
    output.writeFieldEnd();
  }
  if (this.render_time_ms !== null && this.render_time_ms !== undefined) {
    output.writeFieldBegin('render_time_ms', Thrift.Type.I64, 9);
    output.writeI64(this.render_time_ms);
    output.writeFieldEnd();
  }
  if (this.total_time_ms !== null && this.total_time_ms !== undefined) {
    output.writeFieldBegin('total_time_ms', Thrift.Type.I64, 10);
    output.writeI64(this.total_time_ms);
    output.writeFieldEnd();
  }
  output.writeFieldStop();
  output.writeStructEnd();
  return;
};


/***/ }),
/* 50 */
/***/ (function(module, exports) {

/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements. See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership. The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License. You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

/*jshint evil:true*/

/**
 * The Thrift namespace houses the Apache Thrift JavaScript library
 * elements providing JavaScript bindings for the Apache Thrift RPC
 * system. End users will typically only directly make use of the
 * Transport (TXHRTransport/TWebSocketTransport) and Protocol
 * (TJSONPRotocol/TBinaryProtocol) constructors.
 *
 * Object methods beginning with a __ (e.g. __onOpen()) are internal
 * and should not be called outside of the object's own methods.
 *
 * This library creates one global object: Thrift
 * Code in this library must never create additional global identifiers,
 * all features must be scoped within the Thrift namespace.
 * @namespace
 * @example
 *     var transport = new Thrift.Transport("http://localhost:8585");
 *     var protocol  = new Thrift.Protocol(transport);
 *     var client = new MyThriftSvcClient(protocol);
 *     var result = client.MyMethod();
 */
Thrift = {
    /**
     * Thrift JavaScript library version.
     * @readonly
     * @const {string} Version
     * @memberof Thrift
     */
    Version: '0.9.3',

    /**
     * Thrift IDL type string to Id mapping.
     * @readonly
     * @property {number}  STOP   - End of a set of fields.
     * @property {number}  VOID   - No value (only legal for return types).
     * @property {number}  BOOL   - True/False integer.
     * @property {number}  BYTE   - Signed 8 bit integer.
     * @property {number}  I08    - Signed 8 bit integer.
     * @property {number}  DOUBLE - 64 bit IEEE 854 floating point.
     * @property {number}  I16    - Signed 16 bit integer.
     * @property {number}  I32    - Signed 32 bit integer.
     * @property {number}  I64    - Signed 64 bit integer.
     * @property {number}  STRING - Array of bytes representing a string of characters.
     * @property {number}  UTF7   - Array of bytes representing a string of UTF7 encoded characters.
     * @property {number}  STRUCT - A multifield type.
     * @property {number}  MAP    - A collection type (map/associative-array/dictionary).
     * @property {number}  SET    - A collection type (unordered and without repeated values).
     * @property {number}  LIST   - A collection type (unordered).
     * @property {number}  UTF8   - Array of bytes representing a string of UTF8 encoded characters.
     * @property {number}  UTF16  - Array of bytes representing a string of UTF16 encoded characters.
     */
    Type: {
        'STOP' : 0,
        'VOID' : 1,
        'BOOL' : 2,
        'BYTE' : 3,
        'I08' : 3,
        'DOUBLE' : 4,
        'I16' : 6,
        'I32' : 8,
        'I64' : 10,
        'STRING' : 11,
        'UTF7' : 11,
        'STRUCT' : 12,
        'MAP' : 13,
        'SET' : 14,
        'LIST' : 15,
        'UTF8' : 16,
        'UTF16' : 17
    },

    /**
     * Thrift RPC message type string to Id mapping.
     * @readonly
     * @property {number}  CALL      - RPC call sent from client to server.
     * @property {number}  REPLY     - RPC call normal response from server to client.
     * @property {number}  EXCEPTION - RPC call exception response from server to client.
     * @property {number}  ONEWAY    - Oneway RPC call from client to server with no response.
     */
    MessageType: {
        'CALL' : 1,
        'REPLY' : 2,
        'EXCEPTION' : 3,
        'ONEWAY' : 4
    },

    /**
     * Utility function returning the count of an object's own properties.
     * @param {object} obj - Object to test.
     * @returns {number} number of object's own properties
     */
    objectLength: function(obj) {
        var length = 0;
        for (var k in obj) {
            if (obj.hasOwnProperty(k)) {
                length++;
            }
        }
        return length;
    },

    /**
     * Utility function to establish prototype inheritance.
     * @see {@link http://javascript.crockford.com/prototypal.html|Prototypal Inheritance}
     * @param {function} constructor - Contstructor function to set as derived.
     * @param {function} superConstructor - Contstructor function to set as base.
     * @param {string} [name] - Type name to set as name property in derived prototype.
     */
    inherits: function(constructor, superConstructor, name) {
      function F() {}
      F.prototype = superConstructor.prototype;
      constructor.prototype = new F();
      constructor.prototype.name = name || "";
    }
};

/**
 * Initializes a Thrift TException instance.
 * @constructor
 * @augments Error
 * @param {string} message - The TException message (distinct from the Error message).
 * @classdesc TException is the base class for all Thrift exceptions types.
 */
Thrift.TException = function(message) {
    this.message = message;
};
Thrift.inherits(Thrift.TException, Error, 'TException');

/**
 * Returns the message set on the exception.
 * @readonly
 * @returns {string} exception message
 */
Thrift.TException.prototype.getMessage = function() {
    return this.message;
};

/**
 * Thrift Application Exception type string to Id mapping.
 * @readonly
 * @property {number}  UNKNOWN                 - Unknown/undefined.
 * @property {number}  UNKNOWN_METHOD          - Client attempted to call a method unknown to the server.
 * @property {number}  INVALID_MESSAGE_TYPE    - Client passed an unknown/unsupported MessageType.
 * @property {number}  WRONG_METHOD_NAME       - Unused.
 * @property {number}  BAD_SEQUENCE_ID         - Unused in Thrift RPC, used to flag proprietary sequence number errors.
 * @property {number}  MISSING_RESULT          - Raised by a server processor if a handler fails to supply the required return result.
 * @property {number}  INTERNAL_ERROR          - Something bad happened.
 * @property {number}  PROTOCOL_ERROR          - The protocol layer failed to serialize or deserialize data.
 * @property {number}  INVALID_TRANSFORM       - Unused.
 * @property {number}  INVALID_PROTOCOL        - The protocol (or version) is not supported.
 * @property {number}  UNSUPPORTED_CLIENT_TYPE - Unused.
 */
Thrift.TApplicationExceptionType = {
    'UNKNOWN' : 0,
    'UNKNOWN_METHOD' : 1,
    'INVALID_MESSAGE_TYPE' : 2,
    'WRONG_METHOD_NAME' : 3,
    'BAD_SEQUENCE_ID' : 4,
    'MISSING_RESULT' : 5,
    'INTERNAL_ERROR' : 6,
    'PROTOCOL_ERROR' : 7,
    'INVALID_TRANSFORM' : 8,
    'INVALID_PROTOCOL' : 9,
    'UNSUPPORTED_CLIENT_TYPE' : 10
};

/**
 * Initializes a Thrift TApplicationException instance.
 * @constructor
 * @augments Thrift.TException
 * @param {string} message - The TApplicationException message (distinct from the Error message).
 * @param {Thrift.TApplicationExceptionType} [code] - The TApplicationExceptionType code.
 * @classdesc TApplicationException is the exception class used to propagate exceptions from an RPC server back to a calling client.
*/
Thrift.TApplicationException = function(message, code) {
    this.message = message;
    this.code = typeof code === "number" ? code : 0;
};
Thrift.inherits(Thrift.TApplicationException, Thrift.TException, 'TApplicationException');

/**
 * Read a TApplicationException from the supplied protocol.
 * @param {object} input - The input protocol to read from.
 */
Thrift.TApplicationException.prototype.read = function(input) {
    while (1) {
        var ret = input.readFieldBegin();

        if (ret.ftype == Thrift.Type.STOP) {
            break;
        }

        var fid = ret.fid;

        switch (fid) {
            case 1:
                if (ret.ftype == Thrift.Type.STRING) {
                    ret = input.readString();
                    this.message = ret.value;
                } else {
                    ret = input.skip(ret.ftype);
                }
                break;
            case 2:
                if (ret.ftype == Thrift.Type.I32) {
                    ret = input.readI32();
                    this.code = ret.value;
                } else {
                    ret = input.skip(ret.ftype);
                }
                break;
           default:
                ret = input.skip(ret.ftype);
                break;
        }

        input.readFieldEnd();
    }

    input.readStructEnd();
};

/**
 * Wite a TApplicationException to the supplied protocol.
 * @param {object} output - The output protocol to write to.
 */
Thrift.TApplicationException.prototype.write = function(output) {
    output.writeStructBegin('TApplicationException');

    if (this.message) {
        output.writeFieldBegin('message', Thrift.Type.STRING, 1);
        output.writeString(this.getMessage());
        output.writeFieldEnd();
    }

    if (this.code) {
        output.writeFieldBegin('type', Thrift.Type.I32, 2);
        output.writeI32(this.code);
        output.writeFieldEnd();
    }

    output.writeFieldStop();
    output.writeStructEnd();
};

/**
 * Returns the application exception code set on the exception.
 * @readonly
 * @returns {Thrift.TApplicationExceptionType} exception code
 */
Thrift.TApplicationException.prototype.getCode = function() {
    return this.code;
};

/**
 * Constructor Function for the XHR transport.
 * If you do not specify a url then you must handle XHR operations on
 * your own. This type can also be constructed using the Transport alias
 * for backward compatibility.
 * @constructor
 * @param {string} [url] - The URL to connect to.
 * @classdesc The Apache Thrift Transport layer performs byte level I/O
 * between RPC clients and servers. The JavaScript TXHRTransport object
 * uses Http[s]/XHR. Target servers must implement the http[s] transport
 * (see: node.js example server_http.js).
 * @example
 *     var transport = new Thrift.TXHRTransport("http://localhost:8585");
 */
Thrift.Transport = Thrift.TXHRTransport = function(url, options) {
    this.url = url;
    this.wpos = 0;
    this.rpos = 0;
    this.useCORS = (options && options.useCORS);
    this.send_buf = '';
    this.recv_buf = '';
};

Thrift.TXHRTransport.prototype = {
    /**
     * Gets the browser specific XmlHttpRequest Object.
     * @returns {object} the browser XHR interface object
     */
    getXmlHttpRequestObject: function() {
        try { return new XMLHttpRequest(); } catch (e1) { }
        try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch (e2) { }
        try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch (e3) { }

        throw "Your browser doesn't support XHR.";
    },

    /**
     * Sends the current XRH request if the transport was created with a URL
     * and the async parameter is false. If the transport was not created with
     * a URL, or the async parameter is True and no callback is provided, or
     * the URL is an empty string, the current send buffer is returned.
     * @param {object} async - If true the current send buffer is returned.
     * @param {object} callback - Optional async completion callback
     * @returns {undefined|string} Nothing or the current send buffer.
     * @throws {string} If XHR fails.
     */
    flush: function(async, callback) {
        var self = this;
        if ((async && !callback) || this.url === undefined || this.url === '') {
            return this.send_buf;
        }

        var xreq = this.getXmlHttpRequestObject();

        if (xreq.overrideMimeType) {
            xreq.overrideMimeType('application/vnd.apache.thrift.json; charset=utf-8');
        }

        if (callback) {
            //Ignore XHR callbacks until the data arrives, then call the
            //  client's callback
            xreq.onreadystatechange =
              (function() {
                var clientCallback = callback;
                return function() {
                  if (this.readyState == 4 && this.status == 200) {
                    self.setRecvBuffer(this.responseText);
                    clientCallback();
                  }
                };
              }());
        }

        xreq.open('POST', this.url, !!async);

        if (xreq.setRequestHeader) {
            xreq.setRequestHeader('Accept', 'application/vnd.apache.thrift.json; charset=utf-8');
            xreq.setRequestHeader('Content-Type', 'application/vnd.apache.thrift.json; charset=utf-8');
        }

        xreq.send(this.send_buf);
        if (async && callback) {
            return;
        }

        if (xreq.readyState != 4) {
            throw 'encountered an unknown ajax ready state: ' + xreq.readyState;
        }

        if (xreq.status != 200) {
            throw 'encountered a unknown request status: ' + xreq.status;
        }

        this.recv_buf = xreq.responseText;
        this.recv_buf_sz = this.recv_buf.length;
        this.wpos = this.recv_buf.length;
        this.rpos = 0;
    },

    /**
     * Creates a jQuery XHR object to be used for a Thrift server call.
     * @param {object} client - The Thrift Service client object generated by the IDL compiler.
     * @param {object} postData - The message to send to the server.
     * @param {function} args - The original call arguments with the success call back at the end.
     * @param {function} recv_method - The Thrift Service Client receive method for the call.
     * @returns {object} A new jQuery XHR object.
     * @throws {string} If the jQuery version is prior to 1.5 or if jQuery is not found.
     */
    jqRequest: function(client, postData, args, recv_method) {
        if (typeof jQuery === 'undefined' ||
            typeof jQuery.Deferred === 'undefined') {
            throw 'Thrift.js requires jQuery 1.5+ to use asynchronous requests';
        }

        var thriftTransport = this;

        var jqXHR = jQuery.ajax({
            url: this.url,
            data: postData,
            type: 'POST',
            cache: false,
            contentType: 'application/vnd.apache.thrift.json; charset=utf-8',
            dataType: 'text thrift',
            converters: {
                'text thrift' : function(responseData) {
                    thriftTransport.setRecvBuffer(responseData);
                    var value = recv_method.call(client);
                    return value;
                }
            },
            context: client,
            success: jQuery.makeArray(args).pop()
        });

        return jqXHR;
    },

    /**
     * Sets the buffer to provide the protocol when deserializing.
     * @param {string} buf - The buffer to supply the protocol.
     */
    setRecvBuffer: function(buf) {
        this.recv_buf = buf;
        this.recv_buf_sz = this.recv_buf.length;
        this.wpos = this.recv_buf.length;
        this.rpos = 0;
    },

    /**
     * Returns true if the transport is open, XHR always returns true.
     * @readonly
     * @returns {boolean} Always True.
     */
    isOpen: function() {
        return true;
    },

    /**
     * Opens the transport connection, with XHR this is a nop.
     */
    open: function() {},

    /**
     * Closes the transport connection, with XHR this is a nop.
     */
    close: function() {},

    /**
     * Returns the specified number of characters from the response
     * buffer.
     * @param {number} len - The number of characters to return.
     * @returns {string} Characters sent by the server.
     */
    read: function(len) {
        var avail = this.wpos - this.rpos;

        if (avail === 0) {
            return '';
        }

        var give = len;

        if (avail < len) {
            give = avail;
        }

        var ret = this.read_buf.substr(this.rpos, give);
        this.rpos += give;

        //clear buf when complete?
        return ret;
    },

    /**
     * Returns the entire response buffer.
     * @returns {string} Characters sent by the server.
     */
    readAll: function() {
        return this.recv_buf;
    },

    /**
     * Sets the send buffer to buf.
     * @param {string} buf - The buffer to send.
     */
    write: function(buf) {
        this.send_buf = buf;
    },

    /**
     * Returns the send buffer.
     * @readonly
     * @returns {string} The send buffer.
     */
    getSendBuffer: function() {
        return this.send_buf;
    }

};


/**
 * Constructor Function for the WebSocket transport.
 * @constructor
 * @param {string} [url] - The URL to connect to.
 * @classdesc The Apache Thrift Transport layer performs byte level I/O
 * between RPC clients and servers. The JavaScript TWebSocketTransport object
 * uses the WebSocket protocol. Target servers must implement WebSocket.
 * (see: node.js example server_http.js).
 * @example
 *   var transport = new Thrift.TWebSocketTransport("http://localhost:8585");
 */
Thrift.TWebSocketTransport = function(url) {
    this.__reset(url);
};

Thrift.TWebSocketTransport.prototype = {
    __reset: function(url) {
      this.url = url;             //Where to connect
      this.socket = null;         //The web socket
      this.callbacks = [];        //Pending callbacks
      this.send_pending = [];     //Buffers/Callback pairs waiting to be sent
      this.send_buf = '';         //Outbound data, immutable until sent
      this.recv_buf = '';         //Inbound data
      this.rb_wpos = 0;           //Network write position in receive buffer
      this.rb_rpos = 0;           //Client read position in receive buffer
    },

    /**
     * Sends the current WS request and registers callback. The async
     * parameter is ignored (WS flush is always async) and the callback
     * function parameter is required.
     * @param {object} async - Ignored.
     * @param {object} callback - The client completion callback.
     * @returns {undefined|string} Nothing (undefined)
     */
    flush: function(async, callback) {
      var self = this;
      if (this.isOpen()) {
        //Send data and register a callback to invoke the client callback
        this.socket.send(this.send_buf);
        this.callbacks.push((function() {
          var clientCallback = callback;
          return function(msg) {
            self.setRecvBuffer(msg);
            clientCallback();
          };
        }()));
      } else {
        //Queue the send to go out __onOpen
        this.send_pending.push({
          buf: this.send_buf,
          cb:  callback
        });
      }
    },

    __onOpen: function() {
       var self = this;
       if (this.send_pending.length > 0) {
          //If the user made calls before the connection was fully
          //open, send them now
          this.send_pending.forEach(function(elem) {
             this.socket.send(elem.buf);
             this.callbacks.push((function() {
               var clientCallback = elem.cb;
               return function(msg) {
                  self.setRecvBuffer(msg);
                  clientCallback();
               };
             }()));
          });
          this.send_pending = [];
       }
    },

    __onClose: function(evt) {
      this.__reset(this.url);
    },

    __onMessage: function(evt) {
      if (this.callbacks.length) {
        this.callbacks.shift()(evt.data);
      }
    },

    __onError: function(evt) {
      console.log("Thrift WebSocket Error: " + evt.toString());
      this.socket.close();
    },

    /**
     * Sets the buffer to use when receiving server responses.
     * @param {string} buf - The buffer to receive server responses.
     */
    setRecvBuffer: function(buf) {
        this.recv_buf = buf;
        this.recv_buf_sz = this.recv_buf.length;
        this.wpos = this.recv_buf.length;
        this.rpos = 0;
    },

    /**
     * Returns true if the transport is open
     * @readonly
     * @returns {boolean}
     */
    isOpen: function() {
        return this.socket && this.socket.readyState == this.socket.OPEN;
    },

    /**
     * Opens the transport connection
     */
    open: function() {
      //If OPEN/CONNECTING/CLOSING ignore additional opens
      if (this.socket && this.socket.readyState != this.socket.CLOSED) {
        return;
      }
      //If there is no socket or the socket is closed:
      this.socket = new WebSocket(this.url);
      this.socket.onopen = this.__onOpen.bind(this);
      this.socket.onmessage = this.__onMessage.bind(this);
      this.socket.onerror = this.__onError.bind(this);
      this.socket.onclose = this.__onClose.bind(this);
    },

    /**
     * Closes the transport connection
     */
    close: function() {
      this.socket.close();
    },

    /**
     * Returns the specified number of characters from the response
     * buffer.
     * @param {number} len - The number of characters to return.
     * @returns {string} Characters sent by the server.
     */
    read: function(len) {
        var avail = this.wpos - this.rpos;

        if (avail === 0) {
            return '';
        }

        var give = len;

        if (avail < len) {
            give = avail;
        }

        var ret = this.read_buf.substr(this.rpos, give);
        this.rpos += give;

        //clear buf when complete?
        return ret;
    },

    /**
     * Returns the entire response buffer.
     * @returns {string} Characters sent by the server.
     */
    readAll: function() {
        return this.recv_buf;
    },

    /**
     * Sets the send buffer to buf.
     * @param {string} buf - The buffer to send.
     */
    write: function(buf) {
        this.send_buf = buf;
    },

    /**
     * Returns the send buffer.
     * @readonly
     * @returns {string} The send buffer.
     */
    getSendBuffer: function() {
        return this.send_buf;
    }

};

/**
 * Initializes a Thrift JSON protocol instance.
 * @constructor
 * @param {Thrift.Transport} transport - The transport to serialize to/from.
 * @classdesc Apache Thrift Protocols perform serialization which enables cross
 * language RPC. The Protocol type is the JavaScript browser implementation
 * of the Apache Thrift TJSONProtocol.
 * @example
 *     var protocol  = new Thrift.Protocol(transport);
 */
Thrift.TJSONProtocol = Thrift.Protocol = function(transport) {
    this.tstack = [];
    this.tpos = [];
    this.transport = transport;
};

/**
 * Thrift IDL type Id to string mapping.
 * @readonly
 * @see {@link Thrift.Type}
 */
Thrift.Protocol.Type = {};
Thrift.Protocol.Type[Thrift.Type.BOOL] = '"tf"';
Thrift.Protocol.Type[Thrift.Type.BYTE] = '"i8"';
Thrift.Protocol.Type[Thrift.Type.I16] = '"i16"';
Thrift.Protocol.Type[Thrift.Type.I32] = '"i32"';
Thrift.Protocol.Type[Thrift.Type.I64] = '"i64"';
Thrift.Protocol.Type[Thrift.Type.DOUBLE] = '"dbl"';
Thrift.Protocol.Type[Thrift.Type.STRUCT] = '"rec"';
Thrift.Protocol.Type[Thrift.Type.STRING] = '"str"';
Thrift.Protocol.Type[Thrift.Type.MAP] = '"map"';
Thrift.Protocol.Type[Thrift.Type.LIST] = '"lst"';
Thrift.Protocol.Type[Thrift.Type.SET] = '"set"';

/**
 * Thrift IDL type string to Id mapping.
 * @readonly
 * @see {@link Thrift.Type}
 */
Thrift.Protocol.RType = {};
Thrift.Protocol.RType.tf = Thrift.Type.BOOL;
Thrift.Protocol.RType.i8 = Thrift.Type.BYTE;
Thrift.Protocol.RType.i16 = Thrift.Type.I16;
Thrift.Protocol.RType.i32 = Thrift.Type.I32;
Thrift.Protocol.RType.i64 = Thrift.Type.I64;
Thrift.Protocol.RType.dbl = Thrift.Type.DOUBLE;
Thrift.Protocol.RType.rec = Thrift.Type.STRUCT;
Thrift.Protocol.RType.str = Thrift.Type.STRING;
Thrift.Protocol.RType.map = Thrift.Type.MAP;
Thrift.Protocol.RType.lst = Thrift.Type.LIST;
Thrift.Protocol.RType.set = Thrift.Type.SET;

/**
 * The TJSONProtocol version number.
 * @readonly
 * @const {number} Version
 * @memberof Thrift.Protocol
 */
 Thrift.Protocol.Version = 1;

Thrift.Protocol.prototype = {
    /**
     * Returns the underlying transport.
     * @readonly
     * @returns {Thrift.Transport} The underlying transport.
     */
    getTransport: function() {
        return this.transport;
    },

    /**
     * Serializes the beginning of a Thrift RPC message.
     * @param {string} name - The service method to call.
     * @param {Thrift.MessageType} messageType - The type of method call.
     * @param {number} seqid - The sequence number of this call (always 0 in Apache Thrift).
     */
    writeMessageBegin: function(name, messageType, seqid) {
        this.tstack = [];
        this.tpos = [];

        this.tstack.push([Thrift.Protocol.Version, '"' +
            name + '"', messageType, seqid]);
    },

    /**
     * Serializes the end of a Thrift RPC message.
     */
    writeMessageEnd: function() {
        var obj = this.tstack.pop();

        this.wobj = this.tstack.pop();
        this.wobj.push(obj);

        this.wbuf = '[' + this.wobj.join(',') + ']';

        this.transport.write(this.wbuf);
     },


    /**
     * Serializes the beginning of a struct.
     * @param {string} name - The name of the struct.
     */
    writeStructBegin: function(name) {
        this.tpos.push(this.tstack.length);
        this.tstack.push({});
    },

    /**
     * Serializes the end of a struct.
     */
    writeStructEnd: function() {

        var p = this.tpos.pop();
        var struct = this.tstack[p];
        var str = '{';
        var first = true;
        for (var key in struct) {
            if (first) {
                first = false;
            } else {
                str += ',';
            }

            str += key + ':' + struct[key];
        }

        str += '}';
        this.tstack[p] = str;
    },

    /**
     * Serializes the beginning of a struct field.
     * @param {string} name - The name of the field.
     * @param {Thrift.Protocol.Type} fieldType - The data type of the field.
     * @param {number} fieldId - The field's unique identifier.
     */
    writeFieldBegin: function(name, fieldType, fieldId) {
        this.tpos.push(this.tstack.length);
        this.tstack.push({ 'fieldId': '"' +
            fieldId + '"', 'fieldType': Thrift.Protocol.Type[fieldType]
        });

    },

    /**
     * Serializes the end of a field.
     */
    writeFieldEnd: function() {
        var value = this.tstack.pop();
        var fieldInfo = this.tstack.pop();

        this.tstack[this.tstack.length - 1][fieldInfo.fieldId] = '{' +
            fieldInfo.fieldType + ':' + value + '}';
        this.tpos.pop();
    },

    /**
     * Serializes the end of the set of fields for a struct.
     */
    writeFieldStop: function() {
        //na
    },

    /**
     * Serializes the beginning of a map collection.
     * @param {Thrift.Type} keyType - The data type of the key.
     * @param {Thrift.Type} valType - The data type of the value.
     * @param {number} [size] - The number of elements in the map (ignored).
     */
    writeMapBegin: function(keyType, valType, size) {
        this.tpos.push(this.tstack.length);
        this.tstack.push([Thrift.Protocol.Type[keyType],
            Thrift.Protocol.Type[valType], 0]);
    },

    /**
     * Serializes the end of a map.
     */
    writeMapEnd: function() {
        var p = this.tpos.pop();

        if (p == this.tstack.length) {
            return;
        }

        if ((this.tstack.length - p - 1) % 2 !== 0) {
            this.tstack.push('');
        }

        var size = (this.tstack.length - p - 1) / 2;

        this.tstack[p][this.tstack[p].length - 1] = size;

        var map = '}';
        var first = true;
        while (this.tstack.length > p + 1) {
            var v = this.tstack.pop();
            var k = this.tstack.pop();
            if (first) {
                first = false;
            } else {
                map = ',' + map;
            }

            if (! isNaN(k)) { k = '"' + k + '"'; } //json "keys" need to be strings
            map = k + ':' + v + map;
        }
        map = '{' + map;

        this.tstack[p].push(map);
        this.tstack[p] = '[' + this.tstack[p].join(',') + ']';
    },

    /**
     * Serializes the beginning of a list collection.
     * @param {Thrift.Type} elemType - The data type of the elements.
     * @param {number} size - The number of elements in the list.
     */
    writeListBegin: function(elemType, size) {
        this.tpos.push(this.tstack.length);
        this.tstack.push([Thrift.Protocol.Type[elemType], size]);
    },

    /**
     * Serializes the end of a list.
     */
    writeListEnd: function() {
        var p = this.tpos.pop();

        while (this.tstack.length > p + 1) {
            var tmpVal = this.tstack[p + 1];
            this.tstack.splice(p + 1, 1);
            this.tstack[p].push(tmpVal);
        }

        this.tstack[p] = '[' + this.tstack[p].join(',') + ']';
    },

    /**
     * Serializes the beginning of a set collection.
     * @param {Thrift.Type} elemType - The data type of the elements.
     * @param {number} size - The number of elements in the list.
     */
    writeSetBegin: function(elemType, size) {
        this.tpos.push(this.tstack.length);
        this.tstack.push([Thrift.Protocol.Type[elemType], size]);
    },

    /**
     * Serializes the end of a set.
     */
    writeSetEnd: function() {
        var p = this.tpos.pop();

        while (this.tstack.length > p + 1) {
            var tmpVal = this.tstack[p + 1];
            this.tstack.splice(p + 1, 1);
            this.tstack[p].push(tmpVal);
        }

        this.tstack[p] = '[' + this.tstack[p].join(',') + ']';
    },

    /** Serializes a boolean */
    writeBool: function(value) {
        this.tstack.push(value ? 1 : 0);
    },

    /** Serializes a number */
    writeByte: function(i8) {
        this.tstack.push(i8);
    },

    /** Serializes a number */
    writeI16: function(i16) {
        this.tstack.push(i16);
    },

    /** Serializes a number */
    writeI32: function(i32) {
        this.tstack.push(i32);
    },

    /** Serializes a number */
    writeI64: function(i64) {
        this.tstack.push(i64);
    },

    /** Serializes a number */
    writeDouble: function(dbl) {
        this.tstack.push(dbl);
    },

    /** Serializes a string */
    writeString: function(str) {
        // We do not encode uri components for wire transfer:
        if (str === null) {
            this.tstack.push(null);
        } else {
            // concat may be slower than building a byte buffer
            var escapedString = '';
            for (var i = 0; i < str.length; i++) {
                var ch = str.charAt(i);      // a single double quote: "
                if (ch === '\"') {
                    escapedString += '\\\"'; // write out as: \"
                } else if (ch === '\\') {    // a single backslash
                    escapedString += '\\\\'; // write out as double backslash
                } else if (ch === '\b') {    // a single backspace: invisible
                    escapedString += '\\b';  // write out as: \b"
                } else if (ch === '\f') {    // a single formfeed: invisible
                    escapedString += '\\f';  // write out as: \f"
                } else if (ch === '\n') {    // a single newline: invisible
                    escapedString += '\\n';  // write out as: \n"
                } else if (ch === '\r') {    // a single return: invisible
                    escapedString += '\\r';  // write out as: \r"
                } else if (ch === '\t') {    // a single tab: invisible
                    escapedString += '\\t';  // write out as: \t"
                } else {
                    escapedString += ch;     // Else it need not be escaped
                }
            }
            this.tstack.push('"' + escapedString + '"');
        }
    },

    /** Serializes a string */
    writeBinary: function(str) {
        this.writeString(str);
    },

    /**
       @class
       @name AnonReadMessageBeginReturn
       @property {string} fname - The name of the service method.
       @property {Thrift.MessageType} mtype - The type of message call.
       @property {number} rseqid - The sequence number of the message (0 in Thrift RPC).
     */
    /**
     * Deserializes the beginning of a message.
     * @returns {AnonReadMessageBeginReturn}
     */
    readMessageBegin: function() {
        this.rstack = [];
        this.rpos = [];

        if (typeof JSON !== 'undefined' && typeof JSON.parse === 'function') {
            this.robj = JSON.parse(this.transport.readAll());
        } else if (typeof jQuery !== 'undefined') {
            this.robj = jQuery.parseJSON(this.transport.readAll());
        } else {
            this.robj = eval(this.transport.readAll());
        }

        var r = {};
        var version = this.robj.shift();

        if (version != Thrift.Protocol.Version) {
            throw 'Wrong thrift protocol version: ' + version;
        }

        r.fname = this.robj.shift();
        r.mtype = this.robj.shift();
        r.rseqid = this.robj.shift();


        //get to the main obj
        this.rstack.push(this.robj.shift());

        return r;
    },

    /** Deserializes the end of a message. */
    readMessageEnd: function() {
    },

    /**
     * Deserializes the beginning of a struct.
     * @param {string} [name] - The name of the struct (ignored)
     * @returns {object} - An object with an empty string fname property
     */
    readStructBegin: function(name) {
        var r = {};
        r.fname = '';

        //incase this is an array of structs
        if (this.rstack[this.rstack.length - 1] instanceof Array) {
            this.rstack.push(this.rstack[this.rstack.length - 1].shift());
        }

        return r;
    },

    /** Deserializes the end of a struct. */
    readStructEnd: function() {
        if (this.rstack[this.rstack.length - 2] instanceof Array) {
            this.rstack.pop();
        }
    },

    /**
       @class
       @name AnonReadFieldBeginReturn
       @property {string} fname - The name of the field (always '').
       @property {Thrift.Type} ftype - The data type of the field.
       @property {number} fid - The unique identifier of the field.
     */
    /**
     * Deserializes the beginning of a field.
     * @returns {AnonReadFieldBeginReturn}
     */
    readFieldBegin: function() {
        var r = {};

        var fid = -1;
        var ftype = Thrift.Type.STOP;

        //get a fieldId
        for (var f in (this.rstack[this.rstack.length - 1])) {
            if (f === null) {
              continue;
            }

            fid = parseInt(f, 10);
            this.rpos.push(this.rstack.length);

            var field = this.rstack[this.rstack.length - 1][fid];

            //remove so we don't see it again
            delete this.rstack[this.rstack.length - 1][fid];

            this.rstack.push(field);

            break;
        }

        if (fid != -1) {

            //should only be 1 of these but this is the only
            //way to match a key
            for (var i in (this.rstack[this.rstack.length - 1])) {
                if (Thrift.Protocol.RType[i] === null) {
                    continue;
                }

                ftype = Thrift.Protocol.RType[i];
                this.rstack[this.rstack.length - 1] =
                    this.rstack[this.rstack.length - 1][i];
            }
        }

        r.fname = '';
        r.ftype = ftype;
        r.fid = fid;

        return r;
    },

    /** Deserializes the end of a field. */
    readFieldEnd: function() {
        var pos = this.rpos.pop();

        //get back to the right place in the stack
        while (this.rstack.length > pos) {
            this.rstack.pop();
        }

    },

    /**
       @class
       @name AnonReadMapBeginReturn
       @property {Thrift.Type} ktype - The data type of the key.
       @property {Thrift.Type} vtype - The data type of the value.
       @property {number} size - The number of elements in the map.
     */
    /**
     * Deserializes the beginning of a map.
     * @returns {AnonReadMapBeginReturn}
     */
    readMapBegin: function() {
        var map = this.rstack.pop();
        var first = map.shift();
        if (first instanceof Array) {
          this.rstack.push(map);
          map = first;
          first = map.shift();
        }

        var r = {};
        r.ktype = Thrift.Protocol.RType[first];
        r.vtype = Thrift.Protocol.RType[map.shift()];
        r.size = map.shift();


        this.rpos.push(this.rstack.length);
        this.rstack.push(map.shift());

        return r;
    },

    /** Deserializes the end of a map. */
    readMapEnd: function() {
        this.readFieldEnd();
    },

    /**
       @class
       @name AnonReadColBeginReturn
       @property {Thrift.Type} etype - The data type of the element.
       @property {number} size - The number of elements in the collection.
     */
    /**
     * Deserializes the beginning of a list.
     * @returns {AnonReadColBeginReturn}
     */
    readListBegin: function() {
        var list = this.rstack[this.rstack.length - 1];

        var r = {};
        r.etype = Thrift.Protocol.RType[list.shift()];
        r.size = list.shift();

        this.rpos.push(this.rstack.length);
        this.rstack.push(list.shift());

        return r;
    },

    /** Deserializes the end of a list. */
    readListEnd: function() {
        this.readFieldEnd();
    },

    /**
     * Deserializes the beginning of a set.
     * @returns {AnonReadColBeginReturn}
     */
    readSetBegin: function(elemType, size) {
        return this.readListBegin(elemType, size);
    },

    /** Deserializes the end of a set. */
    readSetEnd: function() {
        return this.readListEnd();
    },

    /** Returns an object with a value property set to
     *  False unless the next number in the protocol buffer
     *  is 1, in which case the value property is True */
    readBool: function() {
        var r = this.readI32();

        if (r !== null && r.value == '1') {
            r.value = true;
        } else {
            r.value = false;
        }

        return r;
    },

    /** Returns the an object with a value property set to the
        next value found in the protocol buffer */
    readByte: function() {
        return this.readI32();
    },

    /** Returns the an object with a value property set to the
        next value found in the protocol buffer */
    readI16: function() {
        return this.readI32();
    },

    /** Returns the an object with a value property set to the
        next value found in the protocol buffer */
    readI32: function(f) {
        if (f === undefined) {
            f = this.rstack[this.rstack.length - 1];
        }

        var r = {};

        if (f instanceof Array) {
            if (f.length === 0) {
                r.value = undefined;
            } else {
                r.value = f.shift();
            }
        } else if (f instanceof Object) {
           for (var i in f) {
                if (i === null) {
                  continue;
                }
                this.rstack.push(f[i]);
                delete f[i];

                r.value = i;
                break;
           }
        } else {
            r.value = f;
            this.rstack.pop();
        }

        return r;
    },

    /** Returns the an object with a value property set to the
        next value found in the protocol buffer */
    readI64: function() {
        return this.readI32();
    },

    /** Returns the an object with a value property set to the
        next value found in the protocol buffer */
    readDouble: function() {
        return this.readI32();
    },

    /** Returns the an object with a value property set to the
        next value found in the protocol buffer */
    readString: function() {
        var r = this.readI32();
        return r;
    },

    /** Returns the an object with a value property set to the
        next value found in the protocol buffer */
    readBinary: function() {
        return this.readString();
    },

    /**
     * Method to arbitrarily skip over data */
    skip: function(type) {
        var ret, i;
        switch (type) {
            case Thrift.Type.STOP:
                return null;

            case Thrift.Type.BOOL:
                return this.readBool();

            case Thrift.Type.BYTE:
                return this.readByte();

            case Thrift.Type.I16:
                return this.readI16();

            case Thrift.Type.I32:
                return this.readI32();

            case Thrift.Type.I64:
                return this.readI64();

            case Thrift.Type.DOUBLE:
                return this.readDouble();

            case Thrift.Type.STRING:
                return this.readString();

            case Thrift.Type.STRUCT:
                this.readStructBegin();
                while (true) {
                    ret = this.readFieldBegin();
                    if (ret.ftype == Thrift.Type.STOP) {
                        break;
                    }
                    this.skip(ret.ftype);
                    this.readFieldEnd();
                }
                this.readStructEnd();
                return null;

            case Thrift.Type.MAP:
                ret = this.readMapBegin();
                for (i = 0; i < ret.size; i++) {
                    if (i > 0) {
                        if (this.rstack.length > this.rpos[this.rpos.length - 1] + 1) {
                            this.rstack.pop();
                        }
                    }
                    this.skip(ret.ktype);
                    this.skip(ret.vtype);
                }
                this.readMapEnd();
                return null;

            case Thrift.Type.SET:
                ret = this.readSetBegin();
                for (i = 0; i < ret.size; i++) {
                    this.skip(ret.etype);
                }
                this.readSetEnd();
                return null;

            case Thrift.Type.LIST:
                ret = this.readListBegin();
                for (i = 0; i < ret.size; i++) {
                    this.skip(ret.etype);
                }
                this.readListEnd();
                return null;
        }
    }
};


/**
 * Initializes a MutilplexProtocol Implementation as a Wrapper for Thrift.Protocol
 * @constructor
 */
Thrift.MultiplexProtocol = function (srvName, trans, strictRead, strictWrite) {
    Thrift.Protocol.call(this, trans, strictRead, strictWrite);
    this.serviceName = srvName;
};
Thrift.inherits(Thrift.MultiplexProtocol, Thrift.Protocol, 'multiplexProtocol');

/** Override writeMessageBegin method of prototype*/
Thrift.MultiplexProtocol.prototype.writeMessageBegin = function (name, type, seqid) {

    if (type === Thrift.MessageType.CALL || type === Thrift.MessageType.ONEWAY) {
        Thrift.Protocol.prototype.writeMessageBegin.call(this, this.serviceName + ":" + name, type, seqid);
    } else {
        Thrift.Protocol.prototype.writeMessageBegin.call(this, name, type, seqid);
    }
};

Thrift.Multiplexer = function () {
    this.seqid = 0;
};

/** Instantiates a multiplexed client for a specific service
 * @constructor
 * @param {String} serviceName - The transport to serialize to/from.
 * @param {Thrift.ServiceClient} SCl - The Service Client Class
 * @param {Thrift.Transport} transport - Thrift.Transport instance which provides remote host:port
 * @example
 *    var mp = new Thrift.Multiplexer();
 *    var transport = new Thrift.Transport("http://localhost:9090/foo.thrift");
 *    var protocol = new Thrift.Protocol(transport);
 *    var client = mp.createClient('AuthService', AuthServiceClient, transport);
*/
Thrift.Multiplexer.prototype.createClient = function (serviceName, SCl, transport) {
    if (SCl.Client) {
        SCl = SCl.Client;
    }
    var self = this;
    SCl.prototype.new_seqid = function () {
        self.seqid += 1;
        return self.seqid;
    };
    var client = new SCl(new Thrift.MultiplexProtocol(serviceName, transport));

    return client;
};



var copyList, copyMap;

copyList = function(lst, types) {

  if (!lst) {return lst; }

  var type;

  if (types.shift === undefined) {
    type = types;
  }
  else {
    type = types[0];
  }
  var Type = type;

  var len = lst.length, result = [], i, val;
  for (i = 0; i < len; i++) {
    val = lst[i];
    if (type === null) {
      result.push(val);
    }
    else if (type === copyMap || type === copyList) {
      result.push(type(val, types.slice(1)));
    }
    else {
      result.push(new Type(val));
    }
  }
  return result;
};

copyMap = function(obj, types){

  if (!obj) {return obj; }

  var type;

  if (types.shift === undefined) {
    type = types;
  }
  else {
    type = types[0];
  }
  var Type = type;

  var result = {}, val;
  for(var prop in obj) {
    if(obj.hasOwnProperty(prop)) {
      val = obj[prop];
      if (type === null) {
        result[prop] = val;
      }
      else if (type === copyMap || type === copyList) {
        result[prop] = type(val, types.slice(1));
      }
      else {
        result[prop] = new Type(val);
      }
    }
  }
  return result;
};

Thrift.copyMap = copyMap;
Thrift.copyList = copyList;


/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(11);
__webpack_require__(13);
__webpack_require__(12);
module.exports = __webpack_require__(10);


/***/ })
/******/ ]);
//# sourceMappingURL=bundle.js.map